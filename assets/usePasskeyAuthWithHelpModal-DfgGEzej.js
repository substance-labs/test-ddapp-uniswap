import{logger as d}from"./hooks-BXO4d1DJ.js";import{ModalName as i}from"./modal-Dvm06CN4.js";import{useMutation as y}from"./connector-Cw8HJLtm.js";import{atom as c,useUpdateAtom as M}from"./utils-CDaPKk14.js";import{useModalState as g}from"./useModalState-BcPI2EiQ.js";import{PasskeysHelpModalTypes as o}from"./PasskeysHelpModal-DejPGCoN.js";const k=c(o.Default);function A(r,s){const{openModal:n}=g(i.PasskeysHelp),p=M(k);return y({mutationFn:r,...s,onError:(e,f,m)=>{var t;const l={variables:f,context:m,message:"",type:o.Default};let a=o.Default;const u=/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/;e instanceof Error&&u.test(e.message)&&(e.message.includes("not_found")?a=o.InvalidPasskey:a=o.TechnicalError,l.message=e.message,l.type=a),p(a),d.error(e,{tags:{file:"usePasskeyAuthWithHelpModal",function:r.name},extra:l}),n(),s==null||(t=s.onError)===null||t===void 0||t.call(s,e,f,m)}})}export{k as PasskeysHelpModalTypeAtom,A as usePasskeyAuthWithHelpModal};
