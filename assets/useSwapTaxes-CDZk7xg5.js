import{__toESM as b}from"./chunk-DgAfPHQg.js";import{require_react as v}from"./react-CNoFhWkx.js";import{logger as w}from"./hooks-BXO4d1DJ.js";import{Percent as f,UniverseChainId as s,init_sdk_core_esm as D}from"./utils-BX1Fu73x.js";import{BIPS_BASE as d,ZERO_PERCENT as i}from"./misc-BMnlqqV4.js";import{InterfaceEventName as S}from"./interface-BdpC4qOF.js";import{sendAnalyticsEvent as h}from"./send.web-CrSXW2rw.js";import{useAccount as E}from"./useAccount-C5hwiBwN.js";import{useContract as O}from"./useContract-CKZ4cOLX.js";import{require_dist as g}from"./dist-BxQUC-sk.js";var M=[{inputs:[{internalType:"address",name:"_factoryV2",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"PairLookupFailed",type:"error"},{inputs:[],name:"SameToken",type:"error"},{inputs:[{internalType:"address[]",name:"tokens",type:"address[]"},{internalType:"address",name:"baseToken",type:"address"},{internalType:"uint256",name:"amountToBorrow",type:"uint256"}],name:"batchValidate",outputs:[{components:[{internalType:"uint256",name:"buyFeeBps",type:"uint256"},{internalType:"uint256",name:"sellFeeBps",type:"uint256"}],internalType:"struct TokenFees[]",name:"fotResults",type:"tuple[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"uniswapV2Call",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"baseToken",type:"address"},{internalType:"uint256",name:"amountToBorrow",type:"uint256"}],name:"validate",outputs:[{components:[{internalType:"uint256",name:"buyFeeBps",type:"uint256"},{internalType:"uint256",name:"sellFeeBps",type:"uint256"}],internalType:"struct TokenFees",name:"fotResult",type:"tuple"}],stateMutability:"nonpayable",type:"function"}];D();var P=b(g()),m=b(v());function T(e){switch(e){case s.Mainnet:return"0x19C97dc2a25845C7f9d1d519c8C2d4809c58b43f";case s.Optimism:return"0xa7c17505B43955A474fb6AFE61E093907a7567c9";case s.Bnb:return"0x331f6D0AAB4A1F039f0d75A613a7F1593DbDE1BB";case s.Polygon:return"0x92bCCCb6c8c199AAcA38408621E38Ab6dBfA00B5";case s.Base:return"0x331f6D0AAB4A1F039f0d75A613a7F1593DbDE1BB";case s.ArbitrumOne:return"0x64CF365CC5CCf5E64380bc05Acd5df7D0618c118";case s.Celo:return"0x3dfF0145E68a5880EAbE8F56b6Bc30C4AdCF3413";case s.Avalanche:return"0xBF2B9F6A6eCc4541b31ab2dCF8156D33644Ca3F3";default:return}}function R(e){const t=E(),n=O({address:T(e),ABI:M,withSignerIfPossible:!0,chainId:e});return(0,m.useEffect)(()=>{n&&t.address&&h(S.WalletProviderUsed,{source:"useFeeOnTransferDetectorContract",contract:{name:"FeeOnTransferDetector",address:T(e)}})},[t.address,e,n]),n}const N=1e4,u={};async function H({fotDetector:e,inputTokenAddress:t,outputTokenAddress:n,chainId:c}){var a,o;const r=[];t&&u[t]===void 0&&r.push(t),n&&u[n]===void 0&&r.push(n);try{if(r.length){const y=await e.callStatic.batchValidate(r,(0,P.WETH_ADDRESS)(c),N);r.forEach((F,C)=>{const{sellFeeBps:B,buyFeeBps:x}=y[C],_=new f(B.toNumber(),d),A=new f(x.toNumber(),d);u[F]={sellTax:_,buyTax:A}})}}catch(y){w.warn("useSwapTaxes","getSwapTaxes","Failed to get swap taxes for token(s):",r,y)}const p=(t?(a=u[t])===null||a===void 0?void 0:a.sellTax:i)??i,l=(n?(o=u[n])===null||o===void 0?void 0:o.buyTax:i)??i;return{inputTax:p,outputTax:l}}function z({inputTokenAddress:e,outputTokenAddress:t,tokenChainId:n}){const c=E(),a=n??c.chainId,o=R(a),[{inputTax:r,outputTax:p},l]=(0,m.useState)({inputTax:i,outputTax:i});return(0,m.useEffect)(()=>{!o||!a||H({fotDetector:o,inputTokenAddress:e,outputTokenAddress:t,chainId:a}).then(l)},[o,e,t,a]),{inputTax:r,outputTax:p}}export{z as useSwapTaxes};
