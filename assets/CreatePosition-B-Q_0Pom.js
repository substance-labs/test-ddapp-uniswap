import{__toESM as Fe}from"./chunk-DgAfPHQg.js";import{require_react as ht}from"./react-CNoFhWkx.js";import{AnimatePresence as gt,BackArrow as vt,Button as ie,CheckCircleFilled as bt,INTERFACE_NAV_HEIGHT as St,ModalCloseIcon as Tt,Path as Pe,RotatableChevron as yt,SegmentedControl as we,Svg as Ae,TouchableArea as ze,Trans as Z,createIcon as Ke,useSporeColors as oi,zIndexes as jt}from"./src-DOOtfpHS.js";import{useTranslation as te}from"./useTranslation-BotBuoJf.js";import{isMobileWeb as be}from"./index.web-BqgtOHN3.js";import{useDispatch as Li}from"./es-Iwj7vF3u.js";import{useNavigate as Bi,useParams as kt}from"./chunk-QMGIS6GS-B91ZVkXt.js";import{require_jsx_runtime as Ct}from"./jsx-runtime-D7bMTQeG.js";import{useEnabledChains as It,useUniswapContext as Wi}from"./useEnabledChains-DuB86c95.js";import{assert as Pt,logger as xi,usePrevious as Rt}from"./hooks-BXO4d1DJ.js";import{CurrencyAmount as He,Fraction as ni,HistoryDuration as ge,PollingInterval as Et,Price as Nt,TradeType as Dt,ZERO_ADDRESS as zi,getChainInfo as $t,init_jsbi as Hi,init_sdk_core_esm as Mi,jsbi_default as ce,toSupportedChainId as Ot}from"./utils-BX1Fu73x.js";import{ONE_SECOND_MS as mi}from"./time-D_OqcZ4M.js";import{LiquidityEventName as wt}from"./features-yACC1hVw.js";import{InterfaceEventName as Lt}from"./interface-BdpC4qOF.js";import{Search as Bt,SectionName as Ge}from"./TokenSelector-CNVK2itZ.js";import{ElementName as Wt}from"./element-Wnp4RkdY.js";import{ModalName as Re}from"./modal-Dvm06CN4.js";import{InterfacePageName as zt}from"./page-zDkoCQe4.js";import{require_utils as Ht}from"./utils-7WDx1QGa.js";import{require_ms as Mt}from"./ms-BqmEYo6j.js";import{FeatureFlags as Ft,useFeatureFlag as At}from"./hooks-Bp0VtWbX.js";import{sendAnalyticsEvent as Fi}from"./send.web-CrSXW2rw.js";import{DepositInputForm as Kt,IndependentToken as Be,useCreateLpPositionCalldataQuery as qt,useCreatePositionDependentAmountFallback as Vt,useDepositInfo as Ut,useUpdatedAmountsFromDependentAmount as Gt}from"./useDependentAmountFallback-CjPCh_wT.js";import{useTrade as Xt,useTransactionGasFee as Qt,useUSDCValue as fi,useUSDCurrencyAmountOfGasFee as Ee}from"./useUSDCPrice-HO7Wgroz.js";import{parseRestProtocolVersion as Zt}from"./balances-DV0Wvmri.js";import{PositionStatus as Yt,ProtocolVersion as z}from"./types_pb-yZxlo4b1.js";import{NumberType as ye}from"./types-JuyYLR0O.js";import{useLocalizationContext as Ai}from"./LocalizationContext-B31peW1_.js";import{WarningSeverity as he}from"./getAlertColor-J5DrJWHv.js";import{useWallet as Ki}from"./useWallet-CL5owP9P.js";import{useTrace as qi}from"./TraceContext-Ddfk7zjz.js";import{TransactionStepType as hi}from"./types-7DAoWLTI.js";import{getLPBaseAnalyticsProperties as Jt}from"./analytics-UE3_EENu.js";import{useAccount as Vi}from"./useAccount-C5hwiBwN.js";import{LiquidityTransactionType as gi,getErrorMessageToDisplay as Ui,isSignerMnemonicAccountDetails as eo,isValidLiquidityTxContext as io,liquiditySaga as to,parseErrorMessageTitle as vi,validatePermit as oo,validateTransactionRequest as ve}from"./AccountDetails-pkaz6EG4.js";import{Flex as G,Shine as bi,Text as m,concatClassName as Le,fonts as Se,iconSizes as ke,styled as no,useMedia as si}from"./Loader-D83W8G1W.js";import{Deadline as so,ProgressIndicator as ro,Slippage as ao,useTransactionSettingsStore as Gi}from"./getTradeSettingsDeadline-B3uZN4NF.js";import{AmountInput as ri,numericInputRegex as Xi}from"./CurrencyInputPanel-CJ-UCFJ3.js";import{AlertTriangleFilled as qe}from"./AlertTriangleFilled-C9tf2eUJ.js";import{Container as ei,CreateLiquidityContextProvider as lo,CreatingPoolInfo_default as co,DEFAULT_DEPOSIT_STATE as po,DEFAULT_PRICE_RANGE_STATE as ii,SelectTokensStep as uo,useAllFeeTierPoolData as _o,useCreateLiquidityContext as le,useLiquidityUrlState as xo}from"./SelectTokenStep-D9-QE57B.js";import{LpIncentivesAprDisplay as mo}from"./LpIncentivesAprDisplay-DAZ9W112.js";import{ActiveLiquidityChart as fo,HorizontalDensityChart as ho,LPPriceChartModel as go,LoadingPriceCurve as vo,WrappedLiquidityPositionRangeChart as bo,getLiquidityRangeChartProps as So,getPoolIdOrAddressFromCreatePositionInfo as To,useDensityChartData as yo,usePoolPriceChartData as jo}from"./LiquidityPositionRangeChart-CJw3rPyq.js";import{InfoCircleFilled as ko}from"./InfoCircleFilled-CBAL5Wj0.js";import{Minus as Co}from"./Minus-CNfbH3_0.js";import{Passkey as Io}from"./Passkey-Bey7xD4Z.js";import{Plus as Qi}from"./Plus-_LmEFxOC.js";import{ErrorCallout as Ve,RotateLeft as Zi}from"./ErrorCallout-YxcfJphA.js";import{useSelectChain as Po}from"./useSelectChain-CA5zoRWi.js";import{PermitMethod as Ro}from"./swapTxAndGasInfo-DxVAGFqc.js";import{setOpenModal as Eo}from"./reducer-1kwGyyVS.js";import{NetworkLogo as No,TokenLogo as Si}from"./TokenLogo-JlSSDr3Q.js";import{FeePoolSelectAction as Do}from"./types-DhBONJgE.js";import{useCurrencyInfo as Ti}from"./Tokens-HEKZ8edJ.js";import{useMultichainContext as Yi}from"./useMultichainContext-BVmgxqO2.js";import{init_styled_components_browser_esm as $o,styled_components_browser_esm_default as Oo}from"./styled-components-DbVO3u5J.js";import{chevron_right_default as wo}from"./chevron-right-fNEOKcTd.js";import{ClickableTamaguiStyle as Ce}from"./clickable-D5qUCIhr.js";import{TestID as $e}from"./testIDs-CxYpwoP6.js";import{Trace_default as Oe}from"./Trace-DgHN3Ak9.js";import{Modal as Ue}from"./Modal.web-DHbL39pN.js";import{MultichainContextProvider as Lo}from"./MultichainContext-CEAgN3e0.js";import{useGetPasskeyAuthStatus as Bo}from"./useGetPasskeyAuthStatus-QVLoUPch.js";import{useDynamicFontSizing as Wo}from"./useDynamicFontSizing-DOxjEhTh.js";import{useResizeObserver as zo}from"./bundle.esm-B4P3X753.js";import{GetHelpHeader as ai}from"./GetHelpHeader-DB6Sgdgo.js";import{Dialog as Ho}from"./Dialog-DZrFRjU_.js";import{PortfolioLogo as yi}from"./PortfolioLogo-C-reBpb6.js";import{DoubleCurrencyLogo as Ji}from"./DoubleLogo-D40dQ2P7.js";import{NumericalInputMimic as Mo,NumericalInputSymbolContainer as Fo}from"./shared-EXoQIK7V.js";import{DetailLineItem as Ao}from"./DetailLineItem-d-0mcMrN.js";import{Chart as Ko,DataQuality as qo,PriceChartType as Vo}from"./util-CfowgtYu.js";import{getBaseAndQuoteCurrencies as li,getTokenOrZeroAddress as Ie,validateCurrencyInput as et}from"./currency-Brc-ymXr.js";import{getProtocolItems as it,getProtocolVersionLabel as Xe}from"./protocolVersion-Djp_Gxjw.js";import{tryParsePrice as Uo}from"./getTickToPrice-BudeFeQp.js";import{getFieldsDisabled as Go,isInvalidPrice as Xo,isInvalidRange as ci,isOutOfRange as Qo}from"./priceRangeInfo-DbHE3vOq.js";import{DEFAULT_POSITION_STATE as Qe,DYNAMIC_FEE_DATA as Zo,MAX_FEE_TIER_DECIMALS as Ne,PositionFlowStep as ae,calculateTickSpacingFromFeeAmount as Yo,getFeeTierKey as ji,isDynamicFeeTier as Jo,validateFeeTier as We}from"./feeTiers-D9BvLkmt.js";import{LiquidityPositionInfoBadges as tt}from"./LiquidityPositionInfoBadges-DdjNrqYk.js";import{BreadcrumbNavContainer as en,BreadcrumbNavLink as tn}from"./BreadcrumbNav-lC3fgSsx.js";import{DropdownSelector as ot}from"./DropdownSelector-CYN_6AdC.js";import{LPSettings as on,LPTransactionSettingsStoreContextProvider as nn,useCheckLpApprovalQuery as sn,useLPSlippageValue as rn}from"./LPTransactionSettingsStoreContextProvider-DlM9rbYL.js";import{PositionField as U}from"./hasLPFoTTransferError-Co-P2mPd.js";import{ChartErrorView as an}from"./LoadingState-4OstYjDu.js";import{getCandlestickPriceBounds as ln,getEffectivePrice as Ze}from"./utils-s6RXdTyR.js";import{BaseQuoteFiatAmount as nt}from"./BaseQuoteFiatAmount-B6onp17b.js";import{useRangeHopCallbacks as cn}from"./hooks-SFdPlDvR.js";import{StyledPercentInput as dn}from"./PercentInput-R6KfjzCN.js";var e=Fe(Ct());const[pn,Sl]=Ke({name:"Edit",getIcon:t=>(0,e.jsx)(Ae,{viewBox:"0 0 24 24",fill:"none",...t,children:(0,e.jsx)(Pe,{d:"M16 21.75H6C3.582 21.75 2.25 20.418 2.25 18V7.99998C2.25 5.58198 3.582 4.24998 6 4.24998H9C9.414 4.24998 9.75 4.58598 9.75 4.99998C9.75 5.41398 9.414 5.74998 9 5.74998H6C4.423 5.74998 3.75 6.42298 3.75 7.99998V18C3.75 19.577 4.423 20.25 6 20.25H16C17.577 20.25 18.25 19.577 18.25 18V15C18.25 14.586 18.586 14.25 19 14.25C19.414 14.25 19.75 14.586 19.75 15V18C19.75 20.418 18.418 21.75 16 21.75ZM20.58 5.02997L18.97 3.41999C18.4 2.85999 17.49 2.85997 16.92 3.42997L15.57 4.78998L19.21 8.42997L20.57 7.07996C21.14 6.50996 21.14 5.59997 20.58 5.02997ZM14.51 5.84998L8 12.39V16H11.61L18.15 9.48997L14.51 5.84998Z",fill:"currentColor"})})}),[un,Tl]=Ke({name:"QuestionInCircle",getIcon:t=>(0,e.jsxs)(Ae,{viewBox:"0 0 24 24",fill:"none",...t,children:[(0,e.jsx)(Pe,{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,e.jsx)(Pe,{d:"M9.08997 9.00001C9.32507 8.33167 9.78912 7.76811 10.3999 7.40914C11.0107 7.05016 11.7289 6.91894 12.4271 7.03872C13.1254 7.15849 13.7588 7.52153 14.215 8.06353C14.6713 8.60554 14.921 9.29153 14.92 10C14.92 12 11.92 13 11.92 13",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,e.jsx)(Pe,{d:"M12 17H12.01",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),[_n,yl]=Ke({name:"SearchMinus",getIcon:t=>(0,e.jsx)(Ae,{viewBox:"0 0 16 16",fill:"none",...t,children:(0,e.jsx)(Pe,{d:"M14.3534 13.6467L11.44 10.7333C12.2066 9.81334 12.6667 8.62667 12.6667 7.33333C12.6667 4.38667 10.28 2 7.33333 2C4.38667 2 2 4.38667 2 7.33333C2 10.28 4.38667 12.6667 7.33333 12.6667C8.62667 12.6667 9.81332 12.2067 10.7333 11.44L13.6466 14.3533C13.7466 14.4533 13.8733 14.5 14 14.5C14.1267 14.5 14.2534 14.4533 14.3534 14.3533C14.5467 14.16 14.5467 13.84 14.3534 13.6467ZM9.33333 7.83333H5.33333C5.06 7.83333 4.83333 7.60667 4.83333 7.33333C4.83333 7.06 5.06 6.83333 5.33333 6.83333H9.33333C9.60667 6.83333 9.83333 7.06 9.83333 7.33333C9.83333 7.60667 9.60667 7.83333 9.33333 7.83333Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}),[xn,jl]=Ke({name:"SearchPlus",getIcon:t=>(0,e.jsx)(Ae,{viewBox:"0 0 16 16",fill:"none",...t,children:(0,e.jsx)(Pe,{d:"M14.3534 13.6467L11.44 10.7333C12.2066 9.81334 12.6667 8.62667 12.6667 7.33333C12.6667 4.38667 10.28 2 7.33333 2C4.38667 2 2 4.38667 2 7.33333C2 10.28 4.38667 12.6667 7.33333 12.6667C8.62667 12.6667 9.81332 12.2067 10.7333 11.44L13.6466 14.3533C13.7466 14.4533 13.8733 14.5 14 14.5C14.1267 14.5 14.2534 14.4533 14.3534 14.3533C14.5467 14.16 14.5467 13.84 14.3534 13.6467ZM9.33333 7.83333H7.83333V9.33333C7.83333 9.60667 7.60667 9.83333 7.33333 9.83333C7.06 9.83333 6.83333 9.60667 6.83333 9.33333V7.83333H5.33333C5.06 7.83333 4.83333 7.60667 4.83333 7.33333C4.83333 7.06 5.06 6.83333 5.33333 6.83333H6.83333V5.33333C6.83333 5.06 7.06 4.83333 7.33333 4.83333C7.60667 4.83333 7.83333 5.06 7.83333 5.33333V6.83333H9.33333C9.60667 6.83333 9.83333 7.06 9.83333 7.33333C9.83333 7.60667 9.60667 7.83333 9.33333 7.83333Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}),mn="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _backgroundColor-surface3 _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 _height-t-size-spac100347366 _width-t-size-spac100347366 _alignItems-center _justifyContent-center _mb-t-space-spa94665589 ",fn=()=>{const{setPositionState:t,dynamicFeeTierSpeedbumpData:i,setDynamicFeeTierSpeedbumpData:o}=le(),{t:n}=te(),s=()=>{o({open:!1,wishFeeData:i.wishFeeData})},u=()=>{t(a=>({...a,fee:{feeAmount:i.wishFeeData.feeAmount,tickSpacing:i.wishFeeData.tickSpacing,isDynamic:i.wishFeeData.isDynamic}})),o({open:!1,wishFeeData:i.wishFeeData})};return i.open?(0,e.jsx)(Ho,{icon:(0,e.jsx)("div",{className:mn,children:(0,e.jsx)(ko,{size:"$icon.24",color:"$neutral1"})}),isOpen:!0,title:n("fee.tier.dynamic.create"),subtext:n("fee.tier.dynamic.create.info"),onClose:s,primaryButtonText:n("common.button.continue"),primaryButtonOnClick:u,primaryButtonVariant:"default",secondaryButtonText:n("common.button.cancel"),secondaryButtonOnClick:s,modalName:Re.DynamicFeeTierSpeedbump,displayHelpCTA:!0}):null},di=64,st=452+di,rt=68,at=12,lt=164,ct=28,hn=st-rt-at-di,gn={rightAxisWidth:di,chartContainerWidth:st,liquidityChartWidth:rt,interChartPadding:at,chartHeight:lt,bottomAxisHeight:ct,loadedPriceChartWidth:hn},Ye={rightAxisWidth:0,chartContainerWidth:290,liquidityChartWidth:48,interChartPadding:0,chartHeight:lt,bottomAxisHeight:ct,loadedPriceChartWidth:290};function vn(t){return be?{...Ye,chartContainerWidth:t??Ye.chartContainerWidth,loadedPriceChartWidth:t??Ye.loadedPriceChartWidth}:gn}var l=Fe(ht());const bn="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center _borderTopLeftRadius-t-radius-ro1041013639 _borderTopRightRadius-t-radius-ro1041013639 _borderBottomRightRadius-t-radius-ro1041013639 _borderBottomLeftRadius-t-radius-ro1041013639 ",Sn="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _width-10037 _height-32px _alignItems-center _justifyContent-flex-start _pt-t-space-pad1331704929 _pr-t-space-pad1331704929 _pb-t-space-pad1331704929 _pl-t-space-pad1331704929 ",Tn="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-gap56  _flexDirection-_sm_column _alignItems-_sm_flex-start",yn="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-gap56  _justifyContent-_lg_space-betwe3241 _flexDirection-_sm_column _alignItems-_sm_flex-start",ki=5,Ci=({children:t,...i})=>(0,e.jsx)(ze,{...i,animation:"100ms",backgroundColor:"$transparent",hoverStyle:{backgroundColor:"$transparent",opacity:.8},pressStyle:{backgroundColor:"$surface3",opacity:.8},alignItems:"center",justifyContent:"center",borderColor:"$surface3",borderWidth:"$spacing1",p:"$spacing8",children:t});function jn({quoteCurrency:t,baseCurrency:i,sdkCurrencies:o,priceInverted:n,feeTier:s,tickSpacing:u,protocolVersion:a,poolId:r,hook:_,midPrice:p,minPrice:c,maxPrice:v,setMinPrice:N,setMaxPrice:g,disableBrushInteraction:d=!1,setFallbackRangePrices:j}){var x,S,C;const E=$t(t.chainId),k=oi(),{t:T}=te(),[I,P]=(0,l.useState)(ge.Month),y=jo({variables:{addressOrId:r,chain:E.backendChain.chain,duration:I,isV4:a===z.V4,isV3:a===z.V3,isV2:!1},priceInverted:n}),D=(0,l.useMemo)(()=>{if(p)return{time:new Date().getTime(),value:p,open:p,high:p,low:p,close:p}},[p]),[L,K]=(0,l.useState)(),[W,M]=(0,l.useState)(1),{dataMin:h,dataMax:w}=(0,l.useMemo)(()=>{const{min:$,max:A}=ln(y.entries);return{dataMin:$,dataMax:A}},[y.entries]),[V,Y]=(0,l.useState)(p),[f,O]=(0,l.useState)(!1);(0,l.useEffect)(()=>{y.entries.length>0&&Y(Ze({currentPrice:p,data:y.entries}))},[y.entries,p]);const oe=(w-h)/10,{minVisiblePrice:F,maxVisiblePrice:B}=(0,l.useMemo)(()=>{if(!V)return{minVisiblePrice:h,maxVisiblePrice:w};const $=Ze({currentPrice:p,data:y.entries}),Q=2*Math.max($-h,w-$)/W;return{minVisiblePrice:V-Q/2,maxVisiblePrice:V+Q/2}},[w,h,V,p,y.entries,W]),q=(0,l.useRef)(null),b=vn((x=q.current)===null||x===void 0?void 0:x.clientWidth),R=(0,l.useMemo)(()=>({data:[...y.entries,D].filter(Boolean),stale:y.dataQuality===qo.STALE,type:Vo.LINE,height:b.chartHeight,color:k.accent1.val,colors:k,currentPriceLineColor:k.neutral2.val,showXAxis:!0,minVisiblePrice:F,maxVisiblePrice:B,setBoundaryPrices:K,disableExtendedTimeScale:!be,allowScrollInteractions:!1,priceScaleMargins:{top:0,bottom:0}}),[y.entries,y.dataQuality,b.chartHeight,k,F,B,D]),{formattedData:H,isLoading:J}=yo({poolId:r,sdkCurrencies:o,priceInverted:n,version:a,feeAmount:Number(s),tickSpacing:u,hooks:_??zi}),ee=(0,l.useMemo)(()=>{if(!H)return;const $=new Map;return H.forEach(A=>{$.set(A.tick,A)}),Array.from($.values()).sort((A,de)=>A.price0-de.price0)},[H]),X=(0,l.useMemo)(()=>({options:[[ge.Day,T("token.priceExplorer.timeRangeLabel.day"),T("token.priceExplorer.timeRangeLabel.day.verbose")],[ge.Week,T("token.priceExplorer.timeRangeLabel.week"),T("token.priceExplorer.timeRangeLabel.week.verbose")],[ge.Month,T("token.priceExplorer.timeRangeLabel.month"),T("token.priceExplorer.timeRangeLabel.month.verbose")],[ge.Year,T("token.priceExplorer.timeRangeLabel.year"),T("token.priceExplorer.timeRangeLabel.year.verbose")],[ge.Max,T("token.priceExplorer.timeRangeLabel.all")]].map(A=>({value:A[0],display:(0,e.jsx)(m,{variant:"buttonLabel3",children:A[1]}),verboseDisplay:(0,e.jsx)(m,{variant:"buttonLabel3",children:A[2]??A[1]})})),selected:I}),[I,T]),[ue,_e]=(0,l.useState)(!1),ne=!y.loading&&y.entries.length<ki||!J&&!ee||!J&&ee&&ee.length<ki;return(0,l.useEffect)(()=>{const $=q.current;if($&&!d){let A=0;const de=50,Q=re=>{re.preventDefault(),re.stopPropagation();const pe=Date.now();pe-A>=de&&(A=pe,re.deltaY<0?Y(fe=>fe?fe+oe:void 0):re.deltaY>0&&F>0&&Y(fe=>fe?fe-oe:void 0))};return $.addEventListener("wheel",Q),()=>{$.removeEventListener("wheel",Q)}}},[d,V,F,oe]),(0,l.useEffect)(()=>{ne&&!d&&c===void 0&&v===void 0&&j()},[ne,d,c,v,j]),(0,e.jsxs)(G,{gap:"$gap8",overflow:"hidden",ref:q,onMouseEnter:()=>{O(!0)},onMouseLeave:()=>{O(!1)},children:[(0,e.jsxs)(G,{height:b.chartHeight+b.bottomAxisHeight,width:b.chartContainerWidth,overflow:"hidden",children:[ne&&(0,e.jsx)(an,{children:(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:T("position.setRange.inputsBelow")})}),(0,e.jsxs)(G,{width:ne?b.chartContainerWidth:b.loadedPriceChartWidth,height:b.chartHeight+b.bottomAxisHeight,overflow:"hidden",zIndex:1,children:[(y.loading||ne)&&y.entries.length===0&&(0,e.jsx)(bi,{height:b.chartHeight,disabled:ne,zIndex:0,children:(0,e.jsx)(vo,{size:ne?b.chartContainerWidth:b.loadedPriceChartWidth,color:"$neutral2"})}),ne?null:(0,e.jsx)(Ko,{Model:go,params:R,height:b.chartHeight+b.bottomAxisHeight,disableChartTouchPanning:!0})]}),(0,e.jsxs)(G,{width:b.chartContainerWidth,height:b.chartHeight,position:"absolute",right:0,top:0,pointerEvents:"none",zIndex:2,children:[(J||y.loading)&&(0,e.jsx)(bi,{position:"absolute",right:b.rightAxisWidth,top:0,overflow:"hidden",justifyContent:"flex-end",height:b.chartHeight,width:b.chartHeight,children:(0,e.jsx)(ho,{color:"$neutral2",size:b.chartHeight})}),ee&&!J&&!y.loading&&L&&!ne&&(0,e.jsx)(fo,{data:{series:ee,current:p??((S=y.entries[y.entries.length-1])===null||S===void 0?void 0:S.value),min:L[0],max:L[1]},disableBrushInteraction:d,showDiffIndicators:f,brushDomain:c&&v?[c,v]:void 0,dimensions:{width:b.chartContainerWidth,height:b.chartHeight,contentWidth:b.liquidityChartWidth,axisLabelPaneWidth:b.rightAxisWidth},onBrushDomainChange:function($,A){if($[0]<0)return;const de=c!==void 0&&v!==void 0&&c>=0&&v>=0;!A&&de||(N($[0]),g($[1]))},quoteCurrency:t,baseCurrency:i,isMobile:be})]})]}),(0,e.jsxs)("div",{className:yn,children:[(0,e.jsxs)("div",{className:Tn,children:[be?(0,e.jsx)(ot,{containerStyle:{width:"auto"},menuLabel:(0,e.jsxs)(G,{borderRadius:"$rounded16",backgroundColor:"transparent",row:!0,centered:!0,p:"$padding8",pl:"$padding12",borderColor:"$surface3",borderWidth:"$spacing1",gap:"$gap6",...Ce,children:[(C=X.options.find($=>$.value===X.selected))===null||C===void 0?void 0:C.display,(0,e.jsx)(yt,{direction:"down",height:16,width:16,color:"$neutral2"})]}),buttonStyle:{borderWidth:0,p:0},dropdownStyle:{width:160},hideChevron:!0,isOpen:ue,adaptToSheet:!0,toggleOpen:()=>{_e($=>!$)},children:X.options.map($=>(0,e.jsx)("div",{onClick:()=>{P($.value),M(1),K(void 0)},className:Sn,children:$.verboseDisplay},$.value))}):(0,e.jsx)(we,{options:X.options,selectedOption:X.selected,onSelectOption:$=>{P($),M(1),K(void 0)}}),(0,e.jsxs)("div",{className:bn,children:[(0,e.jsx)(Ci,{borderTopLeftRadius:"$roundedFull",borderBottomLeftRadius:"$roundedFull",onPress:()=>{M($=>$*1.2)},children:(0,e.jsx)(xn,{size:16,color:"$neutral1"})}),(0,e.jsx)(Ci,{borderTopRightRadius:"$roundedFull",borderBottomRightRadius:"$roundedFull",onPress:()=>{M($=>$/1.2)},children:(0,e.jsx)(_n,{size:16,color:"$neutral1"})})]})]}),(0,e.jsx)(ie,{emphasis:"tertiary",size:"small",fill:!1,backgroundColor:"$transparent",onPress:()=>{P(ge.Month),M(1),K(void 0),N(void 0),g(void 0),Y(Ze({currentPrice:p,data:R.data}))},icon:be?(0,e.jsx)(Zi,{}):void 0,children:be?null:T("common.button.reset")})]})]})}Mi();var ti=Fe(Ht());Hi();const kn=new ni(5,100),Me=ce.exponentiate(ce.BigInt(10),ce.BigInt(18));function Cn(t,i){const o=fi(t?He.fromRawAmount(t,ce.BigInt((0,ti.parseUnits)("1",t.decimals))):void 0),n=fi(i?He.fromRawAmount(i,ce.BigInt((0,ti.parseUnits)("1",i.decimals))):void 0);return!o||!n?void 0:new ni(o.multiply(Me).toFixed(0),n.multiply(Me).toFixed(0))}function In(t){let i;try{i=t==null?void 0:t.token0Price}catch{i=void 0}const o=Cn(i==null?void 0:i.baseCurrency,i==null?void 0:i.quoteCurrency);if(!i||!o)return!1;const n=ce.BigInt(o.multiply(Me).toFixed(0)),s=ce.BigInt(i.quote(He.fromRawAmount(i.baseCurrency,ce.BigInt((0,ti.parseUnits)("1",i.baseCurrency.decimals)))).multiply(Me).toFixed(0)),u=ce.lessThan(n,s)?ce.subtract(s,n):ce.subtract(n,s);return new ni(u,n).greaterThan(kn)}function dt(){const{t}=te(),{creatingPoolOrPair:i,poolOrPair:o,refetchPoolData:n}=le(),s=In(o);return i||!s?null:(0,e.jsx)(Oe,{logImpression:!0,element:Wt.PoolOutOfSyncError,properties:{isPoolOutOfSync:s},children:(0,e.jsx)(Ve,{isWarning:!0,errorMessage:!0,description:t("pool.liquidity.outOfSync.message"),title:t("pool.liquidity.outOfSync"),action:t("pool.refresh.prices"),onPress:n})})}function Pn({positionInfo:t}){const{t:i}=te(),o=Li();return(t==null?void 0:t.status)!==Yt.OUT_OF_RANGE?null:(0,e.jsx)(Ve,{isWarning:!0,errorMessage:!0,description:i("position.provide.outOfRange.description"),title:i("position.provide.outOfRange.title"),action:i("position.provide.outOfRange.closePosition"),onPress:()=>o(Eo({name:Re.RemoveLiquidity,initialState:t})),pressIcon:null})}Mi();Hi();function pi({currencies:t,skip:i}){const[o,n]=(0,l.useState)(),s=t[U.TOKEN0],u=t[U.TOKEN1],a=(0,l.useMemo)(()=>{if(s)return He.fromRawAmount(s,ce.BigInt(10**s.decimals))},[s]),{trade:r,isLoading:_}=Xt({amountSpecified:a,otherCurrency:u,tradeType:Dt.EXACT_INPUT,pollInterval:Et.Slow,skip:!a||!u||!!o||i});return(0,l.useEffect)(()=>{n(void 0)},[s,u]),(0,l.useEffect)(()=>{r!=null&&r.outputAmount&&s&&u&&n(new Nt(s,u,r.inputAmount.quotient,r.outputAmount.quotient))},[r,s,u]),{isLoading:_,price:o}}function pt(t,i){const[o,n]=t;return(0,l.useMemo)(()=>[{value:(o==null?void 0:o.symbol)??"",display:(0,e.jsxs)(G,{testID:$e.InvertPrice+"-token0",row:!0,alignItems:"center",gap:i==="small"?"$spacing6":"$gap8",children:[o&&(0,e.jsx)(yi,{chainId:o.chainId,currencies:[o],size:i==="small"?16:20}),(0,e.jsx)(m,{variant:"buttonLabel3",children:o==null?void 0:o.symbol})]})},{value:(n==null?void 0:n.symbol)??"",display:(0,e.jsxs)(G,{testID:$e.InvertPrice+"-token1",row:!0,alignItems:"center",gap:i==="small"?"$spacing6":"$gap8",children:[n&&(0,e.jsx)(yi,{chainId:n.chainId,currencies:[n],size:i==="small"?16:20}),(0,e.jsx)(m,{variant:"buttonLabel3",children:n==null?void 0:n.symbol})]})}],[o,n,i])}const Rn=5,En=10;function ut({initialPrice:t,defaultInitialPrice:i,priceInverted:o}){const n=Number(t),s=Number(o?i==null?void 0:i.invert().toSignificant(8):i==null?void 0:i.toSignificant(8));if(!n||!s)return;const a=(n-s)/s*100,r=Math.round(a),_=Math.abs(r);let p;return _>En?p=he.High:_>Rn&&(p=he.Medium),{value:r,absoluteValue:_,warning:p}}const Nn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row ",Dn="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _pr-t-space-pad1331704925 _pl-t-space-pad1331704925 _gap-t-space-gap52 ",$n="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap52  _flexDirection-_lg_column",On="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _alignItems-center  _flexDirection-_sm_column _alignItems-_sm_flex-start _gap-_sm_t-space-gap56",wn="  _pl-_lg_t-space-spa94665593",Ln="  _pr-_lg_t-space-spa94665593",Bn=" _borderTopLeftRadius-t-radius-no3511 _borderTopRightRadius-t-radius-no3511 _borderBottomRightRadius-t-radius-ro291586424 _borderBottomLeftRadius-t-radius-ro291586424",Wn=" _borderTopLeftRadius-t-radius-ro291586424 _borderTopRightRadius-t-radius-ro291586424 _borderBottomRightRadius-t-radius-no3511 _borderBottomLeftRadius-t-radius-no3511",zn=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _backgroundColor-surface2 _pt-t-space-pad1331704925 _pr-t-space-pad1331704925 _pb-t-space-pad1331704925 _pl-t-space-pad1331704925 _gap-t-space-gap1573  ",Hn=" _opacity-1",Mn=" _opacity-0--6",Fn=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap52  ",An="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center ",Kn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1598 ",qn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-10px ",Vn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _gap-t-space-gap52 _overflowX-hidden _overflowY-hidden _flexGrow-1 ",Un="  _borderBottomRightRadius-_lg_t-radius-no3511 _borderBottomLeftRadius-_lg_t-radius-no3511",Gn="  _borderBottomRightRadius-_lg_t-radius-ro291586424 _borderBottomLeftRadius-_lg_t-radius-ro291586424",Xn=" _borderBottomRightRadius-t-radius-ro291586424 _borderBottomLeftRadius-t-radius-no3511",Qn=" _borderBottomRightRadius-t-radius-no3511 _borderBottomLeftRadius-t-radius-ro291586424",Zn=" _borderTopRightRadius-t-radius-no3511",Yn=" _borderTopRightRadius-t-radius-ro291586424",Jn=" _borderTopLeftRadius-t-radius-no3511",es=" _borderTopLeftRadius-t-radius-ro291586424",is=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-row _flexGrow-1 _position-relative _backgroundColor-surface2 _pt-t-space-spa1360334076 _pr-t-space-spa1360334076 _pb-t-space-spa1360334076 _pl-t-space-spa1360334076 _justifyContent-space-betwe3241 _overflowX-hidden _overflowY-hidden  ",ts="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",os="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _backgroundColor-surface2 _pt-t-space-spa1360334080 _pb-t-space-spa1360334080 _pr-t-space-spa1360334076 _pl-t-space-spa1360334076 _borderBottomLeftRadius-t-radius-ro291586449 _borderBottomRightRadius-t-radius-ro291586449 _justifyContent-space-betwe3241 _alignItems-center ",ns="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241  _flexDirection-_sm_column _alignItems-_sm_flex-start",Ii="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241 ",ss="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _backgroundColor-surface2 _pt-t-space-spa1360334076 _pr-t-space-spa1360334076 _pb-t-space-spa1360334076 _pl-t-space-spa1360334076 _gap-t-space-spa94665591 _borderTopLeftRadius-t-radius-ro291586449 _borderTopRightRadius-t-radius-ro291586449 ",rs="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665589 ",as="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _gap-t-space-spa94665589 ",ls="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 ",cs="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334080 ",ds="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa94665589 ",ps="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap52 _alignItems-center  _flexDirection-_md_column _alignItems-_md_flex-start";var se=(function(t){return t[t.MIN=0]="MIN",t[t.MAX=1]="MAX",t})(se||{}),je=(function(t){return t.FULL="FULL",t.CUSTOM="CUSTOM",t})(je||{});function ui({price:t,isLoading:i}){return(0,e.jsx)("div",{className:ps,children:i?(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:(0,e.jsx)(Z,{i18nKey:"common.marketPrice.fetching"})}):t?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:(0,e.jsx)(Z,{i18nKey:"common.marketPrice.label"})}),(0,e.jsx)(nt,{price:t,base:t.baseCurrency,quote:t.quoteCurrency})]}):(0,e.jsxs)("div",{className:ds,children:[(0,e.jsx)(qe,{size:16,color:"$neutral2"}),(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:(0,e.jsx)(Z,{i18nKey:"common.marketPrice.unavailable"})})]})})}const Pi=()=>{const[t,i]=(0,l.useState)(),o=si(),n=oi(),{creatingPoolOrPair:s,currencies:u,protocolVersion:a,priceRangeState:{initialPrice:r,priceInverted:_,isInitialPriceDirty:p},setPriceRangeState:c}=le(),{price:v,isLoading:N}=pi({currencies:{[U.TOKEN0]:u.display.TOKEN0,[U.TOKEN1]:u.display.TOKEN1},skip:!s&&a===z.V2}),g=(0,l.useMemo)(()=>v?_?v.invert().toSignificant(8):v.toSignificant(8):"",[v,_]),d=(0,l.useMemo)(()=>ut({initialPrice:r,defaultInitialPrice:v,priceInverted:_}),[r,v,_]);(0,l.useEffect)(()=>{g&&!p&&c(I=>({...I,initialPrice:g}))},[g,p,c]);const{baseCurrency:j,quoteCurrency:x}=li(u.display,_);(0,l.useEffect)(()=>{try{if(r&&j&&x){const I=Uo({baseToken:j,quoteToken:x,value:r});i(I==null?void 0:I.invert().toSignificant(8))}}catch{i(void 0)}},[j,x,r,_]);const{TOKEN0:S,TOKEN1:C}=u.display,E=pt([S,C],"large"),k=(0,l.useCallback)(I=>{I===(S==null?void 0:S.symbol)?c(P=>({...P,priceInverted:!1,initialPrice:t??""})):c(P=>({...P,priceInverted:!0,initialPrice:t??""}))},[S==null?void 0:S.symbol,t,c]),T=(0,l.useCallback)(()=>{c(I=>({...I,initialPrice:g}))},[g,c]);return(0,e.jsxs)("div",{className:cs,children:[(0,e.jsx)("div",{className:ls,children:(0,e.jsxs)("div",{className:as,children:[(0,e.jsx)(m,{flex:1,variant:"subheading1",children:(0,e.jsx)(Z,{i18nKey:"position.initialPrice.set"})}),(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:(0,e.jsx)(Z,{i18nKey:"position.initialPrice.info"})})]})}),(0,e.jsxs)("div",{className:rs,children:[(0,e.jsxs)("div",{className:ss,children:[(0,e.jsxs)("div",{className:Ii,children:[(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:(0,e.jsx)(Z,{i18nKey:"position.initialPrice"})}),o.sm&&(0,e.jsx)(we,{options:E,selectedOption:(j==null?void 0:j.symbol)??"",onSelectOption:k,size:"smallThumbnail"})]}),(0,e.jsxs)("div",{className:Ii,children:[(0,e.jsx)(ri,{backgroundColor:"$transparent",borderWidth:"$none",borderRadius:"$none",fontFamily:"$heading",color:(d==null?void 0:d.warning)===he.Medium?"$statusWarning":(d==null?void 0:d.warning)===he.High?"$statusCritical":"$neutral1",fontSize:Se.heading2.fontSize,fontWeight:Se.heading2.fontWeight,lineHeight:Se.heading2.lineHeight,overflow:"visible",placeholder:"0",placeholderTextColor:n.neutral3.val,px:"$none",py:"$none",value:r,onChangeText:I=>c(P=>({...P,initialPrice:I,isInitialPriceDirty:!0}))}),!o.sm&&(0,e.jsx)(we,{options:E,selectedOption:(j==null?void 0:j.symbol)??"",onSelectOption:k,size:"largeThumbnail"})]}),(0,e.jsxs)("div",{className:ns,children:[(0,e.jsxs)(m,{variant:"body2",color:"$neutral2",$md:{variant:"body3"},flexShrink:0,children:[x==null?void 0:x.symbol," = 1 ",j==null?void 0:j.symbol]}),(0,e.jsx)(gt,{children:(d==null?void 0:d.warning)&&(0,e.jsxs)(G,{row:!0,alignItems:"center",gap:"$spacing4",animation:"fast",exitStyle:{opacity:0},enterStyle:{opacity:0},children:[(0,e.jsx)(qe,{size:16,color:d.warning===he.Medium?"$statusWarning":"$statusCritical"}),(0,e.jsx)(m,{variant:"body3",color:d.warning===he.Medium?"$statusWarning":"$statusCritical",children:d.value<0?(0,e.jsx)(Z,{i18nKey:"position.initialPrice.difference.negative",values:{value:d.absoluteValue}}):(0,e.jsx)(Z,{i18nKey:"position.initialPrice.difference.positive",values:{value:d.absoluteValue}})})]})})]})]}),(0,e.jsxs)("div",{className:os,children:[(0,e.jsx)(ui,{isLoading:N,price:_?v==null?void 0:v.invert():v}),v&&(0,e.jsx)("div",{className:ts,children:(0,e.jsx)(ie,{isDisabled:d!=null&&d.absoluteValue?d.absoluteValue===0:!!r,variant:"default",emphasis:"secondary",size:"xxsmall",py:"$spacing12",px:"$spacing8",onPress:T,children:(0,e.jsx)(Z,{i18nKey:"position.initialPrice.useMarketPrice"})})})]})]})]})};function Ri({value:t,active:i}){return(0,e.jsx)(m,{color:i?"$neutral1":"$neutral2",userSelect:"none",variant:"buttonLabel3",children:t})}function us(t){return!t||Xi.test(t)||t==="∞"}function Ei({value:t,input:i,decrement:o,increment:n,isIncrementDisabled:s,isDecrementDisabled:u,showIncrementButtons:a=!0,isInvalid:r=!1}){const _=oi(),{t:p}=te(),{currencies:c,creatingPoolOrPair:v,priceRangeState:{priceInverted:N},setPriceRangeState:g}=le(),[d,j]=(0,l.useState)(""),{baseCurrency:x,quoteCurrency:S}=li(c.display,N),[C,E]=(0,l.useState)(!1),k=(0,l.useCallback)((P,y)=>{P===se.MIN?g(D=>({...D,minPrice:y,fullRange:!1})):g(D=>({...D,maxPrice:y,fullRange:!1})),j(y),E(!0)},[g]),T=(0,l.useCallback)(()=>{k(i,o()),E(!1)},[o,k,i]),I=(0,l.useCallback)(()=>{k(i,n()),E(!1)},[k,n,i]);return(0,e.jsxs)("div",{className:Le(is+(v&&i===se.MIN?es:Jn)+(" "+(v&&i===se.MAX?Yn:Zn))+(" "+(i===se.MIN?Qn:Xn))+(" "+(i===se.MAX?Gn:" "))+(" "+(i!==se.MAX?Un:" "))),children:[(0,e.jsxs)("div",{className:Vn,children:[(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:i===se.MIN?p("pool.minPrice"):p("pool.maxPrice")}),(0,e.jsx)(ri,{backgroundColor:"$transparent",borderWidth:"$none",borderRadius:"$none",color:r?"$statusCritical":"$neutral1",fontFamily:"$heading",fontSize:Se.heading3.fontSize,fontWeight:Se.heading3.fontWeight,maxDecimals:(S==null?void 0:S.decimals)??18,overflow:"visible",placeholder:"0",placeholderTextColor:_.neutral3.val,px:"$none",py:"$none",value:C?d:t,onChangeText:P=>k(i,P),onBlur:()=>E(!1),inputEnforcer:us,$md:{fontSize:Se.subheading2.fontSize,fontWeight:Se.subheading2.fontWeight},testID:`${$e.RangeInput}-${i}`}),(0,e.jsxs)(m,{variant:"body3",color:"$neutral2",children:[S==null?void 0:S.symbol," = 1 ",x==null?void 0:x.symbol]})]}),a&&(0,e.jsxs)("div",{className:qn,children:[(0,e.jsx)(ze,{disabled:s,testID:`${$e.RangeInputIncrement}-${i}`,alignItems:"center",justifyContent:"center",onPress:I,borderRadius:"$roundedFull",p:8,backgroundColor:"$surface3",hoverable:!0,hoverStyle:{backgroundColor:"$surface3Hovered"},children:(0,e.jsx)(Qi,{size:"$icon.16",color:"$neutral2"})}),(0,e.jsx)(ze,{disabled:u,testID:`${$e.RangeInputDecrement}-${i}`,alignItems:"center",justifyContent:"center",onPress:T,borderRadius:"$roundedFull",p:8,backgroundColor:"$surface3",hoverable:!0,hoverStyle:{backgroundColor:"$surface3Hovered"},children:(0,e.jsx)(Co,{size:"$icon.16",color:"$neutral2"})})]})]})}const _s=({positionInfo:t,onContinue:i,onDisableContinue:o})=>{const{t:n}=te(),{positionState:{fee:s,hook:u,initialPosition:a},currencies:r,creatingPoolOrPair:_,poolId:p,protocolVersion:c,poolOrPair:v,price:N,ticks:g,pricesAtTicks:d,ticksAtLimit:j,priceRangeState:x,setPriceRangeState:S}=le(),{TOKEN0:C,TOKEN1:E}=r.display,{baseCurrency:k,quoteCurrency:T}=li(r.display,x.priceInverted),I=pt([C,E],"small"),P=(0,l.useCallback)(b=>{b===(C==null?void 0:C.symbol)?S(R=>({...R,priceInverted:!1})):S(R=>({...R,priceInverted:!0}))},[C==null?void 0:C.symbol,S]),{getDecrementLower:y,getIncrementLower:D,getDecrementUpper:L,getIncrementUpper:K}=cn(c===z.V3?{baseCurrency:k,quoteCurrency:T,feeAmount:s.feeAmount,tickLower:g[0],tickUpper:g[1],pool:v}:c===z.V4?{baseCurrency:k,quoteCurrency:T,fee:s,tickLower:g[0],tickUpper:g[1],pool:v}:{baseCurrency:void 0,quoteCurrency:void 0,feeAmount:void 0,tickLower:void 0,tickUpper:void 0,pool:void 0}),W=(0,l.useCallback)(b=>{a!=null&&a.isOutOfRange||(b===je.FULL?S(R=>({...R,minPrice:"",maxPrice:"",fullRange:!0})):S(R=>({...R,minPrice:void 0,maxPrice:void 0,fullRange:!1})))},[a==null?void 0:a.isOutOfRange,S]),M=[{display:(0,e.jsx)(Ri,{value:n("common.fullRange"),active:x.fullRange}),value:je.FULL},{display:(0,e.jsx)(Ri,{value:n("common.customRange"),active:!x.fullRange}),value:je.CUSTOM}],h=(0,l.useMemo)(()=>{var b,R,H,J;return a!=null&&a.isOutOfRange?[((b=d[0])===null||b===void 0?void 0:b.toSignificant(8))??"",((R=d[1])===null||R===void 0?void 0:R.toSignificant(8))??""]:[j[0]?"0":((H=d[0])===null||H===void 0?void 0:H.toSignificant(8))??"",j[1]?"∞":((J=d[1])===null||J===void 0?void 0:J.toSignificant(8))??""]},[d,j,a]),w=(0,l.useCallback)((b,R)=>{x.fullRange||a!=null&&a.isOutOfRange||(b===se.MIN?S(H=>({...H,minPrice:R,fullRange:!1})):S(H=>({...H,maxPrice:R,fullRange:!1})))},[x.fullRange,a==null?void 0:a.isOutOfRange,S]),{rangeInputMinPrice:V,rangeInputMaxPrice:Y}=(0,l.useMemo)(()=>x.fullRange&&!(a!=null&&a.isOutOfRange)?{rangeInputMinPrice:void 0,rangeInputMaxPrice:void 0}:{rangeInputMinPrice:d[0]?parseFloat(d[0].toSignificant(8)):void 0,rangeInputMaxPrice:d[1]?parseFloat(d[1].toSignificant(8)):void 0},[x.fullRange,d,a]),f=Xo(N),O=ci(g[0],g[1]),oe=o||f||O||_&&(!x.initialPrice||x.initialPrice.length===0),F=(0,l.useCallback)(()=>{a!=null&&a.isOutOfRange||(w(se.MIN,""),w(se.MAX,""))},[w,a==null?void 0:a.isOutOfRange]);if((0,l.useEffect)(()=>{!x.fullRange&&!p&&x.minPrice===void 0&&x.maxPrice===void 0&&F()},[x.fullRange,x.minPrice,x.maxPrice,p,F]),c===z.V2)return(0,e.jsx)(Pi,{});const B=a==null?void 0:a.isOutOfRange,q=!!v&&!x.fullRange;return(0,e.jsxs)(e.Fragment,{children:[_&&(0,e.jsx)(Pi,{}),(0,e.jsxs)("div",{className:Kn,children:[(0,e.jsx)("div",{className:An,children:(0,e.jsx)(m,{flex:1,variant:"subheading1",children:(0,e.jsx)(Z,{i18nKey:"position.setRange"})})}),!(a!=null&&a.isOutOfRange)&&(0,e.jsx)(we,{options:M,selectedOption:x.fullRange?je.FULL:je.CUSTOM,onSelectOption:W,fullWidth:!0,size:"large"}),!(a!=null&&a.isOutOfRange)&&(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:_?n("position.provide.liquidityDescription.creatingPool"):x.fullRange?n("position.provide.liquidityDescription"):n("position.provide.liquidityDescription.custom")}),(0,e.jsx)(Pn,{positionInfo:t}),(0,e.jsx)(dt,{}),(0,e.jsxs)("div",{className:Le(""+(Fn+(B?Mn:Hn))),children:[B&&(0,e.jsx)(G,{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:0,backgroundColor:"$surface3",cursor:"not-allowed",zIndex:jt.overlay}),k&&T&&p&&(0,e.jsxs)("div",{className:Le(""+(zn+(p?Wn:Bn)+Ln+wn)),children:[(0,e.jsxs)("div",{className:On,children:[(0,e.jsx)(ui,{price:N}),!_&&(0,e.jsx)(we,{options:I,selectedOption:k.symbol??"",onSelectOption:P,size:"smallThumbnail"})]}),(0,e.jsx)(jn,{quoteCurrency:T,baseCurrency:k,sdkCurrencies:r.sdk,priceInverted:x.priceInverted,feeTier:s.feeAmount,hook:u,tickSpacing:v==null?void 0:v.tickSpacing,protocolVersion:c,poolId:p,disableBrushInteraction:x.fullRange,midPrice:Number(N==null?void 0:N.toSignificant()),minPrice:V,maxPrice:Y,setMinPrice:b=>{w(se.MIN,b==null?void 0:b.toString())},setMaxPrice:b=>{w(se.MAX,b==null?void 0:b.toString())},setFallbackRangePrices:F},xs({protocolVersion:c,poolId:p,priceRangeState:x}))]}),(0,e.jsxs)("div",{className:$n,children:[(0,e.jsx)(Ei,{input:se.MIN,decrement:x.priceInverted?K:y,increment:x.priceInverted?L:D,isIncrementDisabled:!1,isDecrementDisabled:j[0],value:h[0],showIncrementButtons:q,isInvalid:O}),(0,e.jsx)(Ei,{input:se.MAX,decrement:x.priceInverted?D:L,increment:x.priceInverted?y:K,isIncrementDisabled:j[1],isDecrementDisabled:!1,value:h[1],showIncrementButtons:q,isInvalid:O})]})]}),(f||O)&&(0,e.jsxs)("div",{className:Dn,children:[(0,e.jsx)(qe,{size:"$icon.16",color:"$statusCritical"}),(0,e.jsx)(m,{color:"$statusCritical",variant:"body3",children:n(O?"position.create.invalidRange":"position.create.invalidPrice")})]})]}),i&&(0,e.jsx)("div",{className:Nn,children:(0,e.jsx)(ie,{onPress:i,isDisabled:oe,children:n("common.button.continue")})})]})};function xs({protocolVersion:t,poolId:i,priceRangeState:o}){return`${i}-${o.fullRange}-${o.priceInverted}-${t}`}const ms="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-2px _alignItems-center ",fs="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap56 _alignItems-center ",hs="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap1569  _flexDirection-_md_column _gap-_md_t-space-gap52",gs="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap1569 ",vs="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1569 _width-10037 ",bs="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row ",Ss=({children:t,onClick:i,...o})=>{const{t:n}=te();return(0,e.jsxs)(ei,{row:!0,gap:"$gap24",justifyContent:"space-between",alignItems:"center",...o,children:[t,(0,e.jsx)("div",{className:bs,children:(0,e.jsx)(ie,{maxWidth:"fit-content",emphasis:"secondary",size:"small",onPress:i,icon:(0,e.jsx)(pn,{size:"$icon.20"}),children:n("common.edit.button")})})]})},Ni=t=>{const{setStep:i,protocolVersion:o,creatingPoolOrPair:n,currencies:{display:s},positionState:u,resetDeposit:a,resetPriceRange:r}=le(),{fee:_,hook:p}=u,{TOKEN0:c,TOKEN1:v}=s,N=si(),g=(0,l.useCallback)(()=>{r(),a(),i(ae.SELECT_TOKENS_AND_FEE_TIER)},[a,r,i]),{price:d}=pi({currencies:{[U.TOKEN0]:s.TOKEN0,[U.TOKEN1]:s.TOKEN1},skip:n});return(0,e.jsx)(Ss,{onClick:g,...t,children:(0,e.jsxs)("div",{className:vs,children:[(0,e.jsxs)("div",{className:gs,children:[(0,e.jsx)(Ji,{currencies:[c??void 0,v??void 0],size:N.md?ke.icon44:ke.icon32}),(0,e.jsxs)("div",{className:hs,children:[(0,e.jsxs)("div",{className:fs,children:[(0,e.jsx)(m,{variant:"subheading1",children:c==null?void 0:c.symbol}),(0,e.jsx)(m,{variant:"subheading1",children:"/"}),(0,e.jsx)(m,{variant:"subheading1",children:v==null?void 0:v.symbol})]}),(0,e.jsx)("div",{className:ms,children:(0,e.jsx)(tt,{size:"small",version:o,v4hook:p,feeTier:_})})]})]}),n?(0,e.jsx)(co,{}):o===z.V2?(0,e.jsx)(ui,{price:d}):null]})})},Ts="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665593 _width-10037 _mt-t-space-spa94665593 ",ys="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-center _rowGap-t-space-spa94665587 ",js="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1573 _backgroundColor-surface3 _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 _pt-t-space-spa1360334080 _pr-t-space-spa1360334080 _pb-t-space-spa1360334080 _pl-t-space-spa1360334080 ",ks="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-center _gap-t-space-spa1360334076 ",Cs="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-flex-end _alignItems-center _gap-t-space-spa94665593 _width-10037 ";function Is({isOpen:t,onClose:i,onHandleReset:o}){const{t:n}=te(),s=()=>{o(),i()};return(0,e.jsxs)(Ue,{name:Re.ResetCreatePositionsForm,onClose:i,isDismissible:!0,gap:"$gap24",padding:"$padding16",isModalOpen:t,maxWidth:420,children:[(0,e.jsx)("div",{className:Cs,children:(0,e.jsx)(ai,{closeModal:i})}),(0,e.jsxs)("div",{className:ks,children:[(0,e.jsx)("div",{className:js,children:(0,e.jsx)(un,{size:20,color:"$neutral1"})}),(0,e.jsxs)("div",{className:ys,children:[(0,e.jsx)(m,{variant:"subheading1",children:n("common.areYouSure")}),(0,e.jsx)(m,{variant:"body2",color:"$neutral2",px:"$spacing8",textAlign:"center",children:n("position.resetDescription")})]}),(0,e.jsxs)("div",{className:Ts,children:[(0,e.jsx)(ie,{size:"small",emphasis:"secondary",onPress:i,children:n("common.button.cancel")}),(0,e.jsx)(ie,{size:"small",onPress:s,children:n("common.button.reset")})]})]})]})}const Ps="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665593 _width-10037 _mt-t-space-spa94665593 ",Rs="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-center _rowGap-t-space-spa94665593 ",Es="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1573 _backgroundColor-statusCriti3045924 _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 _pt-t-space-spa1360334080 _pr-t-space-spa1360334080 _pb-t-space-spa1360334080 _pl-t-space-spa1360334080 ",Ns="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-center _gap-t-space-spa1360334076 ",Ds="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-flex-end _alignItems-center _gap-t-space-spa94665593 _width-10037 ";function $s({isOpen:t,onClose:i,onContinue:o,priceDifference:n}){const{t:s}=te();return(0,e.jsxs)(Ue,{name:Re.ConfirmCreatePosition,onClose:i,isDismissible:!0,gap:"$gap24",padding:"$padding16",isModalOpen:t,maxWidth:420,children:[(0,e.jsx)("div",{className:Ds,children:(0,e.jsx)(ai,{closeModal:i})}),(0,e.jsxs)("div",{className:Ns,children:[(0,e.jsx)("div",{className:Es,children:(0,e.jsx)(qe,{size:20,color:"$statusCritical"})}),(0,e.jsxs)("div",{className:Rs,children:[(0,e.jsx)(m,{variant:"subheading1",children:s("position.deposit.confirm.create.title")}),(0,e.jsx)(m,{variant:"body2",color:"$neutral2",px:"$spacing8",textAlign:"center",children:n.value<0?s("position.deposit.confirm.create.description.less",{value:n.absoluteValue}):s("position.deposit.confirm.create.description.more",{value:n.absoluteValue})}),(0,e.jsx)(ie,{emphasis:"text-only",children:s("common.button.learn")})]}),(0,e.jsxs)("div",{className:Ps,children:[(0,e.jsx)(ie,{emphasis:"secondary",onPress:i,children:s("common.button.cancel")}),(0,e.jsx)(ie,{onPress:o,variant:"critical",children:s("common.button.proceed")})]})]})]})}const Os="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap52 _alignItems-center ",ws="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _mr-t-space-pad1331704929 _ml-t-space-pad1331704929 ",Ls="  is_Separator _display-flex _alignItems-stretch _flexDirection-column _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _flexShrink-1 _borderTopWidth-0px _borderRightWidth-0px _borderBottomWidth-1px _borderLeftWidth-0px _flexGrow-1 _height-0px _maxHeight-0px _mr-t-space-pad1331704929 _ml-t-space-pad1331704929 _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid ",Bs="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334080 ",Di="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap52 ",$i="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 ",Ws="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334080 _pb-t-space-spa94665593 _mt-t-space-spa1360334018 ",zs="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334080 _mt-t-space-spa1360334018 ",Oi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _flexGrow-1 _gap-t-space-gap52 ",Hs="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row ",Ms="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-2px _alignItems-center ",Je="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap56 ",Fs="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",As="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241 ",Ks="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _pt-t-space-spa1360334080 _pb-t-space-spa1360334080 _gap-t-space-spa1360334080 _mt-t-space-spa1360334076 ",qs="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _pr-t-space-spa1360334080 _pl-t-space-spa1360334080 ",Vs="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _pr-t-space-spa94665593 _pl-t-space-spa94665593 _pt-t-space-spa1360334080 _pb-t-space-spa94665593 _gap-t-space-spa1360334047 ";function Us({formattedAmounts:t,currencyAmounts:i,currencyAmountsUSDValue:o,txInfo:n,gasFeeEstimateUSD:s,transactionError:u,setTransactionError:a,isOpen:r,onClose:_}){var p,c,v,N,g,d,j,x,S;const{protocolVersion:C,creatingPoolOrPair:E,positionState:{fee:k,hook:T},currentTransactionStep:I,setCurrentTransactionStep:P,price:y,poolOrPair:D,ticks:L,ticksAtLimit:K,pricesAtTicks:W,priceRangeState:{priceInverted:M},refetch:h}=le(),{t:w}=te(),V=i==null||(p=i.TOKEN0)===null||p===void 0?void 0:p.currency,Y=i==null||(c=i.TOKEN1)===null||c===void 0?void 0:c.currency,f=Ti(V),O=Ti(Y),oe=V==null?void 0:V.chainId,{formatNumberOrString:F,formatCurrencyAmount:B}=Ai(),q=y==null?void 0:y.baseCurrency,b=y==null?void 0:y.quoteCurrency,R=(0,l.useMemo)(()=>{var me,xe;if(C===z.V2)return["",""];const mt=K[0]?"0":F({value:(me=W[0])===null||me===void 0?void 0:me.toSignificant(),type:ye.TokenTx}),ft=K[1]?"∞":F({value:(xe=W[1])===null||xe===void 0?void 0:xe.toSignificant(),type:ye.TokenTx}),_i=`${(b==null?void 0:b.symbol)+"/"+(q==null?void 0:q.symbol)}`;return[`${mt} ${_i}`,`${ft} ${_i}`]},[F,W,K,C,q,b]),[H,J]=(0,l.useState)([]),ee=Li(),X=Ki().evmAccount,ue=Po(),_e=Vi(),ne=_e.chainId,$=Bi(),A=qi(),{isSignedInWithPasskey:de,isSessionAuthenticated:Q,needsPasskeySignin:re}=Bo((v=_e.connector)===null||v===void 0?void 0:v.id),pe=(0,l.useCallback)(()=>{J([]),P(void 0),_(),$("/positions")},[P,_,$]),fe=(0,l.useMemo)(()=>{var me,xe;return So({protocolVersion:C,sdkCurrencies:{TOKEN0:i==null||(me=i.TOKEN0)===null||me===void 0?void 0:me.currency,TOKEN1:i==null||(xe=i.TOKEN1)===null||xe===void 0?void 0:xe.currency},ticks:L,poolOrPair:D,pricesAtTicks:W,priceInverted:M})},[C,i,M,L,W,D]),xt=(0,l.useCallback)(()=>{a(!1);const me=io(n);!X||!eo(X)||!me||!i||!i.TOKEN0||!i.TOKEN1||ee(to.actions.trigger({selectChain:ue,startChainId:ne,account:X,liquidityTxContext:n,setCurrentStep:P,setSteps:J,onSuccess:pe,onFailure:xe=>{xe&&a(Ui({calldataError:xe})),P(void 0)},analytics:{...Jt({trace:A,hook:T,version:C,tickLower:L[0]??void 0,tickUpper:L[1]??void 0,fee:k.feeAmount,tickSpacing:k.tickSpacing,currency0:i.TOKEN0.currency,currency1:i.TOKEN1.currency,currency0AmountUsd:o==null?void 0:o.TOKEN0,currency1AmountUsd:o==null?void 0:o.TOKEN1,poolId:To({protocolVersion:C,poolOrPair:D,sdkCurrencies:{TOKEN0:i.TOKEN0.currency,TOKEN1:i.TOKEN1.currency}})}),expectedAmountBaseRaw:i.TOKEN0.quotient.toString(),expectedAmountQuoteRaw:i.TOKEN1.quotient.toString(),createPool:E,createPosition:!0}}))},[n,X,i,ee,ue,ne,a,P,pe,A,k.feeAmount,k.tickSpacing,L,T,o==null?void 0:o.TOKEN0,o==null?void 0:o.TOKEN1,C,E,D]);return(0,e.jsx)(Ue,{name:Re.CreatePosition,padding:"$none",onClose:_,isDismissible:!0,isModalOpen:r,children:(0,e.jsxs)("div",{className:Vs,children:[(0,e.jsxs)("div",{className:qs,children:[(0,e.jsx)(ai,{title:(0,e.jsx)(m,{variant:"subheading2",color:"$neutral2",children:(0,e.jsx)(Z,{i18nKey:"position.create.modal.header"})}),closeModal:()=>_()}),(0,e.jsxs)("div",{className:Ks,children:[(0,e.jsxs)("div",{className:As,children:[(0,e.jsxs)("div",{className:Fs,children:[(0,e.jsxs)("div",{className:Je,children:[(0,e.jsx)(m,{variant:"heading3",children:i==null||(N=i.TOKEN0)===null||N===void 0?void 0:N.currency.symbol}),(0,e.jsx)(m,{variant:"heading3",children:"/"}),(0,e.jsx)(m,{variant:"heading3",children:i==null||(g=i.TOKEN1)===null||g===void 0?void 0:g.currency.symbol})]}),(0,e.jsx)("div",{className:Ms,children:(0,e.jsx)(tt,{size:"small",version:C,v4hook:T,feeTier:k})})]}),(0,e.jsx)(Ji,{currencies:[i==null||(d=i.TOKEN0)===null||d===void 0?void 0:d.currency,i==null||(j=i.TOKEN1)===null||j===void 0?void 0:j.currency],size:ke.icon36})]}),(C===z.V3||C===z.V4)&&(0,e.jsxs)(e.Fragment,{children:[!E&&!!fe&&(0,e.jsx)(bo,{width:"100%",...fe}),(0,e.jsxs)("div",{className:Hs,children:[(0,e.jsxs)("div",{className:Oi,children:[(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:(0,e.jsx)(Z,{i18nKey:"common.min"})}),(0,e.jsx)(m,{variant:"body3",children:R[0]})]}),(0,e.jsxs)("div",{className:Oi,children:[(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:(0,e.jsx)(Z,{i18nKey:"common.max"})}),(0,e.jsx)(m,{variant:"body3",children:R[1]})]})]})]})]}),E&&(0,e.jsxs)("div",{className:zs,children:[(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:(0,e.jsx)(Z,{i18nKey:"position.initialPrice"})}),(0,e.jsx)(nt,{variant:"body1",price:y,base:q,quote:b})]}),(0,e.jsxs)("div",{className:Ws,children:[(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:(0,e.jsx)(Z,{i18nKey:"common.depositing"})}),(i==null||(x=i.TOKEN0)===null||x===void 0?void 0:x.greaterThan(0))&&(0,e.jsxs)("div",{className:$i,children:[(0,e.jsxs)("div",{className:Di,children:[(0,e.jsxs)("div",{className:Je,children:[(0,e.jsx)(m,{variant:"body1",children:t==null?void 0:t.TOKEN0}),(0,e.jsx)(m,{variant:"body1",children:i.TOKEN0.currency.symbol})]}),(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:B({value:o==null?void 0:o.TOKEN0,type:ye.FiatTokenPrice})})]}),(0,e.jsx)(Si,{size:ke.icon36,chainId:i.TOKEN0.currency.chainId,name:i.TOKEN0.currency.name,symbol:i.TOKEN0.currency.symbol,url:f==null?void 0:f.logoUrl})]}),(i==null||(S=i.TOKEN1)===null||S===void 0?void 0:S.greaterThan(0))&&(0,e.jsxs)("div",{className:$i,children:[(0,e.jsxs)("div",{className:Di,children:[(0,e.jsxs)("div",{className:Je,children:[(0,e.jsx)(m,{variant:"body1",children:t==null?void 0:t.TOKEN1}),(0,e.jsx)(m,{variant:"body1",children:i.TOKEN1.currency.symbol})]}),(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:B({value:o==null?void 0:o.TOKEN1,type:ye.FiatTokenPrice})})]}),(0,e.jsx)(Si,{size:ke.icon36,chainId:i.TOKEN1.currency.chainId,name:i.TOKEN1.currency.name,symbol:i.TOKEN1.currency.symbol,url:O==null?void 0:O.logoUrl})]})]}),(0,e.jsxs)("div",{className:Bs,children:[(0,e.jsx)(Ve,{errorMessage:u,onPress:h}),(0,e.jsx)(dt,{})]})]}),I&&H.length>1?(0,e.jsx)(ro,{steps:H,currentStep:I}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:Ls}),(0,e.jsx)("div",{className:ws,children:(0,e.jsx)(Ao,{LineItem:{Label:()=>(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:(0,e.jsx)(Z,{i18nKey:"common.networkCost"})}),Value:()=>(0,e.jsxs)("div",{className:Os,children:[(0,e.jsx)(No,{chainId:oe??null,size:ke.icon16,shape:"square"}),(0,e.jsx)(m,{variant:"body3",children:B({value:s,type:ye.FiatGasPrice})})]})}})}),I?(0,e.jsx)(ie,{size:"large",variant:"branded",loading:!0,fill:!1,children:w(de?"swap.button.submitting.passkey":"common.confirmWallet")},"create-position-confirm"):(0,e.jsx)(ie,{size:"large",variant:"branded",onPress:xt,isDisabled:!(n!=null&&n.action),fill:!1,icon:re?(0,e.jsx)(Io,{size:"$icon.24"}):void 0,children:w(de&&Q?"position.create.confirm":"common.button.create")})]})]})})}function Gs({address:t,protocolVersion:i,displayCurrencies:o,currencyAmounts:n,generatePermitAsTransaction:s}){const u=it(i);if(!(!t||!u||!(n!=null&&n.TOKEN0)||!n.TOKEN1||!et(o)))return{simulateTransaction:!0,walletAddress:t,chainId:n.TOKEN0.currency.chainId,protocol:u,token0:Ie(o.TOKEN0),token1:Ie(o.TOKEN1),amount0:n.TOKEN0.quotient.toString(),amount1:n.TOKEN1.quotient.toString(),generatePermitAsTransaction:i===z.V4?s:void 0}}function Xs({protocolVersion:t,creatingPoolOrPair:i,account:o,approvalCalldata:n,positionState:s,ticks:u,poolOrPair:a,displayCurrencies:r,currencyAmounts:_,independentField:p,slippageTolerance:c}){const v=it(t);if(!(o!=null&&o.address)||!v||!(_!=null&&_.TOKEN0)||!_.TOKEN1||!et(r))return;const{token0Approval:N,token1Approval:g,positionTokenApproval:d,permitData:j,token0PermitTransaction:x,token1PermitTransaction:S}=n??{};if(t===z.V2){if(t!==s.protocolVersion||!a||!r.TOKEN0||!r.TOKEN1)return;const W=p===U.TOKEN0?Be.TOKEN_0:Be.TOKEN_1,M=p===U.TOKEN0?U.TOKEN1:U.TOKEN0,h=_[p],w=_[M];return{simulateTransaction:!(j||x||S||N||g||d),protocol:v,walletAddress:o.address,chainId:_.TOKEN0.currency.chainId,independentAmount:h==null?void 0:h.quotient.toString(),independentToken:W,defaultDependentAmount:w==null?void 0:w.quotient.toString(),slippageTolerance:c,position:{pool:{token0:Ie(r.TOKEN0),token1:Ie(r.TOKEN1)}}}}if(t!==s.protocolVersion)return;const C=a;if(!C||!r.TOKEN0||!r.TOKEN1)return;const E=u[0],k=u[1];if(E===void 0||k===void 0)return;const T=i?C.sqrtRatioX96.toString():void 0,I=C.tickSpacing,P=p===U.TOKEN0?Be.TOKEN_0:Be.TOKEN_1,y=p===U.TOKEN0?U.TOKEN1:U.TOKEN0,D=_[p],L=_[y];return{simulateTransaction:!(j||x||S||N||g||d),protocol:v,walletAddress:o.address,chainId:_.TOKEN0.currency.chainId,independentAmount:D==null?void 0:D.quotient.toString(),independentToken:P,initialDependentAmount:T&&(L==null?void 0:L.quotient.toString()),initialPrice:T,slippageTolerance:c,position:{tickLower:E??void 0,tickUpper:k??void 0,pool:{tickSpacing:I,token0:Ie(r.TOKEN0),token1:Ie(r.TOKEN1),fee:s.fee.isDynamic?Zo.feeAmount:s.fee.feeAmount,hooks:s.hook}}}}function Qs({protocolVersion:t,approvalCalldata:i,createCalldata:o,createCalldataQueryParams:n,currencyAmounts:s,poolOrPair:u}){if(!o||!(s!=null&&s.TOKEN0)||!s.TOKEN1)return;const a=ve(i==null?void 0:i.token0Approval);if(i!=null&&i.token0Approval&&!a)return;const r=ve(i==null?void 0:i.token1Approval);if(i!=null&&i.token1Approval&&!r)return;const _=ve(i==null?void 0:i.token0Cancel);if(i!=null&&i.token0Cancel&&!_)return;const p=ve(i==null?void 0:i.token1Cancel);if(i!=null&&i.token1Cancel&&!p)return;const c=oo(i==null?void 0:i.permitData);if(i!=null&&i.permitData&&!c)return;const v=ve(i==null?void 0:i.token0PermitTransaction),N=ve(i==null?void 0:i.token1PermitTransaction),g=ve(o.create);if(!g&&!(v||N))return;const d=t===z.V4?{...n,batchPermitData:c}:n;return{type:gi.Create,unsigned:!!c,protocolVersion:t,createPositionRequestArgs:d,action:{type:gi.Create,currency0Amount:s.TOKEN0,currency1Amount:s.TOKEN1,liquidityToken:t===z.V2?u==null?void 0:u.liquidityToken:void 0},approveToken0Request:a,approveToken1Request:r,txRequest:g,approvePositionTokenRequest:void 0,revokeToken0Request:_,revokeToken1Request:p,permit:c?{method:Ro.TypedData,typedData:c}:void 0,token0PermitTransaction:v,token1PermitTransaction:N,positionTokenPermitTransaction:void 0}}const _t=(0,l.createContext)(void 0);function Zs({children:t}){var i,o,n;const{protocolVersion:s,currencies:u,ticks:a,poolOrPair:r,depositState:_,creatingPoolOrPair:p,currentTransactionStep:c,positionState:v,setRefetch:N}=le(),g=Ki().evmAccount,{TOKEN0:d,TOKEN1:j}=u.display,{exactField:x}=_,S=s!==z.V2&&ci(a[0],a[1]),C=(0,l.useMemo)(()=>{const[Q,re]=a,pe=Qo({poolOrPair:r,lowerTick:Q,upperTick:re});return{protocolVersion:s,poolOrPair:r,address:g==null?void 0:g.address,token0:d,token1:j,tickLower:s!==z.V2?Q??void 0:void 0,tickUpper:s!==z.V2?re??void 0:void 0,exactField:x,exactAmounts:_.exactAmounts,skipDependentAmount:s===z.V2?!1:pe||S}},[d,j,x,a,r,_,g==null?void 0:g.address,s,S]),{currencyAmounts:E,error:k,formattedAmounts:T,currencyAmountsUSDValue:I,currencyBalances:P}=Ut(C),{customDeadline:y,customSlippageTolerance:D}=Gi(Q=>({customDeadline:Q.customDeadline,customSlippageTolerance:Q.customSlippageTolerance})),L=(i=(o=Wi()).getCanSignPermits)===null||i===void 0?void 0:i.call(o,r==null?void 0:r.chainId),[K,W]=(0,l.useState)(!1),M=(0,l.useMemo)(()=>Gs({address:g==null?void 0:g.address,protocolVersion:s,displayCurrencies:u.display,currencyAmounts:E,generatePermitAsTransaction:L}),[g==null?void 0:g.address,s,u.display,E,L]),{data:h,error:w,isLoading:V,refetch:Y}=sn({params:M,staleTime:5*mi,retry:!1,enabled:!!M&&!k&&!K&&!S});if(w){const Q=vi(w,{defaultTitle:"unknown CheckLpApprovalQuery"});xi.error(Q,{tags:{file:"CreatePositionTxContext",function:"useEffect"}})}const f=Ee(r==null?void 0:r.chainId,h==null?void 0:h.gasFeeToken0Approval),O=Ee(r==null?void 0:r.chainId,h==null?void 0:h.gasFeeToken1Approval),oe=Ee(r==null?void 0:r.chainId,h==null?void 0:h.gasFeeToken0Permit),F=Ee(r==null?void 0:r.chainId,h==null?void 0:h.gasFeeToken1Permit),B=(0,l.useMemo)(()=>Xs({account:g,approvalCalldata:h,positionState:v,protocolVersion:s,creatingPoolOrPair:p,displayCurrencies:u.display,ticks:a,poolOrPair:r,currencyAmounts:E,independentField:_.exactField,slippageTolerance:D}),[g,h,E,p,a,r,v,_.exactField,D,u.display,s]),b=!((c==null?void 0:c.step.type)===hi.IncreasePositionTransaction||(c==null?void 0:c.step.type)===hi.IncreasePositionTransactionAsync)&&!k&&!K&&!V&&!w&&!S&&!!h&&!!B,{data:R,error:H,refetch:J}=qt({params:B,deadlineInMinutes:y,refetchInterval:K?!1:5*mi,retry:!1,enabled:b});if((0,l.useEffect)(()=>{N(()=>w?Y:H?J:void 0)},[w,H,B,M,W,N,J,Y]),(0,l.useEffect)(()=>{W(Ui({approvalError:w,calldataError:H}))},[w,H,W]),H){const Q=vi(H,{defaultTitle:"unknown CreateLpPositionCalldataQuery"});xi.error(Q,{tags:{file:"CreatePositionTxContext",function:"useEffect"}}),B&&Fi(Lt.CreatePositionFailed,{message:Q,...B})}const ee=Vt(B,b&&!!H),X=R==null?void 0:R.gasFee,ue=!!(h!=null&&h.token0Approval||h!=null&&h.token1Approval||h!=null&&h.token0Cancel||h!=null&&h.token1Cancel||h!=null&&h.token0PermitTransaction||h!=null&&h.token1PermitTransaction),{value:_e}=Qt({tx:R==null?void 0:R.create,skip:!!X||ue}),ne=Ee(Ot(R==null||(n=R.create)===null||n===void 0?void 0:n.chainId)??void 0,X||_e),$=(0,l.useMemo)(()=>[f,O,ne,oe,F].reduce((re,pe)=>pe&&re?re.add(pe):re||pe),[f,O,ne,oe,F]),A=(0,l.useMemo)(()=>Qs({protocolVersion:s,approvalCalldata:h,createCalldata:R,createCalldataQueryParams:B,currencyAmounts:E,poolOrPair:s===z.V2?r:void 0}),[h,R,B,E,r,s]),de=(0,l.useMemo)(()=>({txInfo:A,gasFeeEstimateUSD:$,transactionError:K,setTransactionError:W,dependentAmount:H&&ee?ee:R==null?void 0:R.dependentAmount,currencyAmounts:E,inputError:k,formattedAmounts:T,currencyAmountsUSDValue:I,currencyBalances:P}),[A,$,K,W,H,ee,R==null?void 0:R.dependentAmount,E,k,T,I,P]);return(0,e.jsx)(_t.Provider,{value:de,children:t})}const Ys=()=>{const t=(0,l.useContext)(_t);if(!t)throw new Error("`useCreatePositionTxContext` must be used inside of `CreatePositionTxContextProvider`");return t},Js="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row ",er="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665589 ",ir="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-32px ",wi=()=>{const{priceRangeState:{initialPrice:t,priceInverted:i},protocolVersion:o,creatingPoolOrPair:n,currencies:s,ticks:u,poolOrPair:a,depositState:r,setDepositState:_,refetch:p}=le(),{t:c}=te(),{onConnectWallet:v}=Wi(),N=Vi(),[g,d]=(0,l.useState)(!1),[j,x]=(0,l.useState)(!1),{TOKEN0:S,TOKEN1:C}=s.display,{exactField:E}=r,{price:k}=pi({currencies:{[U.TOKEN0]:s.display.TOKEN0,[U.TOKEN1]:s.display.TOKEN1},skip:!n&&o===z.V2}),T=(0,l.useMemo)(()=>ut({initialPrice:t,defaultInitialPrice:k,priceInverted:i}),[t,k,i]),I=o!==z.V2&&ci(u[0],u[1]),{txInfo:P,gasFeeEstimateUSD:y,dependentAmount:D,transactionError:L,setTransactionError:K,currencyAmounts:W,inputError:M,formattedAmounts:h,currencyAmountsUSDValue:w,currencyBalances:V}=Ys(),Y=(X,ue)=>{_(_e=>({exactField:X,exactAmounts:{..._e.exactAmounts,[X]:ue}}))},f=(X,ue)=>{_(_e=>({exactField:X,exactAmounts:{..._e.exactAmounts,[X]:ue}}))},O=(0,l.useCallback)(()=>{if((T==null?void 0:T.warning)===he.High){x(!0);return}d(!0)},[T==null?void 0:T.warning]),{TOKEN0:oe,TOKEN1:F}=Go({ticks:u,poolOrPair:a}),{updatedFormattedAmounts:B,updatedCurrencyAmounts:q,updatedUSDAmounts:b,updatedDeposit0Disabled:R,updatedDeposit1Disabled:H}=Gt({token0:S,token1:C,dependentAmount:D,exactField:E,currencyAmounts:W,currencyAmountsUSDValue:w,formattedAmounts:h,deposit0Disabled:oe,deposit1Disabled:F});if((0,l.useEffect)(()=>{F?_({exactField:U.TOKEN0,exactAmounts:{}}):oe&&_({exactField:U.TOKEN1,exactAmounts:{}})},[oe,F,_]),!S||!C)return null;const J=!!M||!(P!=null&&P.txRequest),ee=!!(!L&&!M&&!(P!=null&&P.txRequest)&&(W!=null&&W.TOKEN0)&&W.TOKEN1&&!I);return(0,e.jsxs)(e.Fragment,{children:[I?null:(0,e.jsx)("div",{className:ir,children:(0,e.jsxs)("div",{className:er,children:[(0,e.jsx)(m,{variant:"subheading1",children:(0,e.jsx)(Z,{i18nKey:"common.depositTokens"})}),(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:(0,e.jsx)(Z,{i18nKey:"position.deposit.description"})})]})}),(0,e.jsx)(Kt,{autofocus:!1,token0:S,token1:C,formattedAmounts:B??h,currencyAmounts:q??W,currencyAmountsUSDValue:b??w,currencyBalances:V,onUserInput:Y,onSetMax:f,deposit0Disabled:R,deposit1Disabled:H,amount0Loading:ee&&E===U.TOKEN1,amount1Loading:ee&&E===U.TOKEN0}),(0,e.jsx)("div",{className:Js,children:N.isConnected?(0,e.jsx)(ie,{size:"large",variant:"branded",onPress:O,isDisabled:J,loading:ee,children:M||c("swap.button.review")},"Position-Create-DepositButton"):(0,e.jsx)(ie,{size:"large",variant:"branded",emphasis:"secondary",onPress:v,children:c("common.connectWallet.button")})}),(0,e.jsx)(Ve,{errorMessage:L,onPress:p}),(0,e.jsx)(Us,{formattedAmounts:B,currencyAmounts:q??W,currencyAmountsUSDValue:b,gasFeeEstimateUSD:y,txInfo:P,isOpen:g,transactionError:L,setTransactionError:K,onClose:()=>d(!1)}),(T==null?void 0:T.warning)===he.High&&(0,e.jsx)($s,{isOpen:j,onClose:()=>x(!1),onContinue:()=>{x(!1),d(!0)},priceDifference:T})]})};var tr=Fe(Mt());$o();const or="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1569 _alignItems-center  _pb-_sm_t-space-spa1360334080",nr="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap1569 _alignItems-center ",sr="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center ",rr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",ar="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _width-10037 _gap-t-space-gap52 _maxHeight-350px _overflowX-scroll _overflowY-scroll _pr-t-space-spa1360334076 _pl-t-space-spa1360334076  scrollbar-hidden",lr="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _pt-t-space-pad1331704929 _pb-t-space-pad1331704929 _pr-t-space-pad95589114 _pl-t-space-pad95589114 _backgroundColor-surface2 _borderTopLeftRadius-t-radius-ro291586420 _borderTopRightRadius-t-radius-ro291586420 _borderBottomRightRadius-t-radius-ro291586420 _borderBottomLeftRadius-t-radius-ro291586420 _gap-t-space-gap56 _mr-t-space-spa94665593 _ml-t-space-spa94665593 ",cr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row ",dr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _flexGrow-1 _justifyContent-flex-end ",pr="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa1360334043 _pr-t-space-spa1360334051 _pl-t-space-spa1360334051 ",ur="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1598 ",_r="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _alignItems-center _gap-t-space-spa94665589 _width-10037 ",xr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _width-10037 _gap-t-space-gap1598 ",mr=Oo(dn)`
  flex-grow: 0;
  text-align: end;
  justify-content: flex-end;
`,fr=46,hr=70,gr=12,Te=1e-4;function vr(){const{chainId:t}=Yi(),{positionState:{fee:i,protocolVersion:o,hook:n},currencies:s,setPositionState:u,feeTierSearchModalOpen:a,setFeeTierSearchModalOpen:r,setDynamicFeeTierSpeedbumpData:_}=le(),p=()=>{j(""),S(!1),r(!1)},{t:c}=te(),v=qi(),[N,g]=(0,l.useState)(""),[d,j]=(0,l.useState)(""),[x,S]=(0,l.useState)(!1),{formatNumberOrString:C,formatPercent:E}=Ai(),[k,T]=(0,l.useState)(!1),[I,P]=(0,l.useState)(!1),[y,D]=(0,l.useState)(0),L=zo(),K=!!n,W=At(Ft.LpIncentives),{feeTierData:M}=_o({chainId:t,protocolVersion:o,sdkCurrencies:s.sdk,withDynamicFeeTier:K,hook:n??zi});(0,l.useEffect)(()=>{let f,O,F=100;return k||I?(O=setTimeout(()=>{D(B=>B+1)},(0,tr.default)("1s")),y>=2&&(F=100/2),y>=4&&(F=100/4),y>=6&&(F=100/8),f=setInterval(()=>{j(B=>{let q=parseFloat(B);if(k){if(!B||B===""||(q-=Te,q<0))return"0"}else if(I)return!B||B===""?Te.toString():(q+=Te,We(q.toFixed(Ne)));return q.toFixed(Ne)})},F),()=>{clearInterval(f),clearTimeout(O)}):()=>{clearInterval(f),clearTimeout(O),D(0)}},[k,I,y]);const h=Math.round(parseFloat(d)*1e4),{onLayout:w,fontSize:V,onSetFontSize:Y}=Wo({maxCharWidthAtMaxFontSize:fr,maxFontSize:hr,minFontSize:gr});return(0,l.useEffect)(()=>{Y(d||"0")},[Y,d]),(0,e.jsx)(Ue,{name:Re.FeeTierSearch,onClose:p,isDismissible:!0,isModalOpen:a,paddingX:"$spacing8",paddingY:"$spacing16",maxWidth:404,children:(0,e.jsxs)("div",{className:xr,children:[(0,e.jsxs)("div",{className:_r,children:[x&&(0,e.jsx)(G,{...Ce,onPress:()=>S(!1),children:(0,e.jsx)(vt,{size:"$icon.24",color:"$neutral2"})}),(0,e.jsx)(m,{variant:"body2",flexGrow:1,textAlign:x||be?"center":"left",pl:x?0:8,children:c(x?"fee.tier.create":"fee.tier.select")}),(0,e.jsx)(Tt,{testId:"LiquidityModalHeader-close",onClose:p})]}),x?(0,e.jsxs)("div",{className:ur,children:[(0,e.jsx)(m,{variant:"body2",color:"$neutral2",textAlign:"center",children:c("fee.tier.create.description")}),(0,e.jsxs)("div",{className:pr,children:[(0,e.jsx)(G,{justifyContent:"center",alignItems:"center",backgroundColor:"$surface3",borderRadius:"$roundedFull",userSelect:"none",height:"$spacing36",width:"$spacing36",onPressIn:()=>{T(!0)},onPressOut:()=>{T(!1)},onPress:()=>{j(f=>{if(!f||f==="")return"0";const O=parseFloat(f)-Te;return isNaN(O)||O<0?"0":O.toFixed(Ne)})},...Ce,children:(0,e.jsx)(m,{variant:"heading3",mb:"$spacing4",children:"-"})}),(0,e.jsx)("div",{className:dr,children:(0,e.jsxs)(G,{row:!0,maxWidth:"100%",centered:!0,onLayout:w,minHeight:"84px",children:[(0,e.jsx)(mr,{value:d,onUserInput:f=>{j(We(f))},placeholder:"0",maxDecimals:Ne,$fontSize:V,$width:d&&L.width?L.width+1:void 0}),(0,e.jsx)(Fo,{showPlaceholder:!d,$fontSize:V,children:"%"}),(0,e.jsx)(Mo,{ref:L.ref,$fontSize:V,children:d})]})}),(0,e.jsx)(G,{justifyContent:"center",alignItems:"center",backgroundColor:"$surface3",borderRadius:"$roundedFull",userSelect:"none",height:36,width:36,onPressIn:()=>{P(!0)},onPressOut:()=>{P(!1)},onPress:()=>{j(f=>{if(!f||f==="")return Te.toString();const O=parseFloat(f)+Te;return We(O.toFixed(Ne))})},...Ce,children:(0,e.jsx)(m,{variant:"heading3",children:"+"})})]}),(0,e.jsx)("div",{className:cr,children:(0,e.jsx)(ie,{variant:"default",isDisabled:!d||d==="",onPress:()=>{u(f=>({...f,fee:{isDynamic:!1,feeAmount:h,tickSpacing:Yo(h)}})),Fi(wt.SelectLiquidityPoolFeeTier,{action:Do.Search,fee_tier:h,is_new_fee_tier:!!M[h],...v}),p()},children:M[h]?c("fee.tier.select.existing.button"):c("fee.tier.create.button")})})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:lr,children:[(0,e.jsx)(Bt,{size:20,color:"$neutral2"}),(0,e.jsx)(ri,{width:"100%",autoFocus:!0,alignSelf:"stretch",backgroundColor:"$transparent",borderRadius:0,borderWidth:"$none",textAlign:"left",value:N,fontFamily:"$subHeading",fontSize:18,px:"$none",py:"$none",placeholder:c("fee.tier.search.short"),placeholderTextColor:"$neutral3",onChangeText:f=>{if(f==="."){g("0.");return}if(f.indexOf(".")!==-1&&f.indexOf(".",f.indexOf(".")+1)!==-1)return;if(!Xi.test(f)){g(f.slice(0,-1));return}const O=We(f);if(O!==f){g(O);return}g(Number(O)>=0?O:"")}})]}),(0,e.jsx)("div",{className:ar,children:Object.values(M).filter(f=>f.formattedFee.includes(N)||f.id&&N.includes(f.id)).map(f=>(0,e.jsxs)(G,{row:!0,alignItems:"center",gap:"$spacing24",py:"$padding12",justifyContent:"space-between",...Ce,onPress:()=>{Jo(f.fee)?_({open:!0,wishFeeData:f.fee}):u(O=>({...O,fee:{isDynamic:f.fee.isDynamic,feeAmount:f.fee.feeAmount,tickSpacing:f.fee.tickSpacing}})),p()},children:[(0,e.jsxs)("div",{className:rr,children:[(0,e.jsxs)("div",{className:sr,children:[(0,e.jsx)(m,{variant:"subheading2",children:f.formattedFee}),W&&f.boostedApr!==void 0&&f.boostedApr>0&&(0,e.jsx)(mo,{lpIncentiveRewardApr:f.boostedApr,isSmall:!0,ml:"$spacing8"})]}),(0,e.jsxs)("div",{className:nr,children:[(0,e.jsxs)(m,{variant:"body3",color:"$neutral2",children:[f.totalLiquidityUsd===0?"0":C({value:f.totalLiquidityUsd,type:ye.FiatTokenStats})," ",c("common.totalValueLocked")]}),(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:f.created?c("fee.tier.percent.select",{percentage:E(f.percentage.toSignificant(),3)}):c("common.notCreated.label")})]})]}),ji(f.fee.feeAmount,f.fee.isDynamic)===ji(i.feeAmount,i.isDynamic)&&(0,e.jsx)(bt,{size:"$icon.24",color:"$accent3"})]},f.id+f.formattedFee))}),(0,e.jsxs)("div",{className:or,children:[(0,e.jsx)(m,{variant:"body3",color:"$neutral2",children:c("fee.tier.missing.description")}),(0,e.jsx)(ie,{emphasis:"secondary",size:"small",fill:!1,icon:(0,e.jsx)(Qi,{size:16,color:"$neutral1"}),onPress:()=>S(!0),children:c("fee.tier.create.button")})]})]})]})})}const br="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _width-t-size-spac3237008 _height-t-size-spac100347329 _backgroundColor-surface3 _ml-15px _mt-t-space-spa94665593 _mb-t-space-spa94665593 _borderTopLeftRadius-t-radius-ro1041013639 _borderTopRightRadius-t-radius-ro1041013639 _borderBottomRightRadius-t-radius-ro1041013639 _borderBottomLeftRadius-t-radius-ro1041013639 ",Sr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _gap-t-space-spa94665587 ",Tr=" _backgroundColor-surface3",yr=" _backgroundColor-neutral1",jr=" _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _height-t-size-spac100347329 _width-t-size-spac100347329 _borderTopLeftRadius-t-radius-ro1041013639 _borderTopRightRadius-t-radius-ro1041013639 _borderBottomRightRadius-t-radius-ro1041013639 _borderBottomLeftRadius-t-radius-ro1041013639 _alignItems-center _justifyContent-center  ";function kr({steps:t,...i}){return Pt(t.length>0,"PoolProgressIndicator: steps must have at least one step"),(0,e.jsx)(G,{width:"100%",borderRadius:"$rounded24",py:"$padding8",borderColor:"$surface3",borderWidth:"$spacing1",p:"$padding16",...i,children:t.map((o,n)=>(0,e.jsxs)(l.Fragment,{children:[(0,e.jsxs)(G,{row:!0,gap:"$gap12",alignItems:"center",onPress:o.onPress,...o.onPress?Ce:{},children:[(0,e.jsx)("div",{className:Le(""+(jr+(o.active?yr:Tr))),children:(0,e.jsx)(m,{variant:"subheading2",color:o.active?"$surface1":"$neutral2",userSelect:"none",children:n+1})}),(0,e.jsxs)("div",{className:Sr,children:[(0,e.jsx)(m,{variant:"body3",color:o.active?"$neutral2":"$neutral3",userSelect:"none",children:(0,e.jsx)(Z,{i18nKey:"common.step.number",values:{number:n+1}})}),(0,e.jsx)(m,{variant:"subheading2",color:o.active?"$neutral1":"$neutral2",userSelect:"none",children:o.label})]})]}),n!==t.length-1&&(0,e.jsx)("div",{className:br})]},o.label+n))})}const Cr=" _pr-t-space-gap56 _pl-t-space-gap56",Ir=" _pr-t-space-gap52 _pl-t-space-gap52",Pr=" _borderTopWidth-t-space-spa94665586 _borderRightWidth-t-space-spa94665586 _borderBottomWidth-t-space-spa94665586 _borderLeftWidth-t-space-spa94665586 _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid",Rr=" _borderTopWidth-t-space-non101 _borderRightWidth-t-space-non101 _borderBottomWidth-t-space-non101 _borderLeftWidth-t-space-non101 _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid",Er=" _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _height-38px _alignItems-center _pt-t-space-spa94665587  ",Nr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",Dr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _pt-t-space-spa94665593 _pr-t-space-spa94665593 _pb-t-space-spa94665593 _pl-t-space-spa94665593 _borderTopLeftRadius-t-radius-ro840690002 _borderTopRightRadius-t-radius-ro840690002 _borderBottomRightRadius-t-radius-ro840690002 _borderBottomLeftRadius-t-radius-ro840690002 _backgroundColor-0hover-surface2 ",$r="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa1360334051 _justifyContent-space-betwe3241 _width-10037 ",Or="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignSelf-flex-end _alignItems-center _gap-t-space-gap1598 _width-10037 _justifyContent-space-betwe3241 _mr-auto _mb-t-space-spa1360334018  _flexDirection-_md_column _alignItems-_md_stretch",De={positionCard:600,sidebar:360};function wr({currencyInputs:t,setCurrencyInputs:i}){const{positionState:{protocolVersion:o},creatingPoolOrPair:n,step:s,setStep:u}=le(),a=o===z.V2,r=(0,l.useCallback)(()=>{a?s===ae.SELECT_TOKENS_AND_FEE_TIER&&n?u(ae.PRICE_RANGE):u(ae.DEPOSIT):u(s+1)},[n,s,a,u]);return s===ae.SELECT_TOKENS_AND_FEE_TIER?(0,e.jsx)(Oe,{logImpression:!0,section:Ge.CreatePositionSelectTokensStep,children:(0,e.jsx)(uo,{currencyInputs:t,onContinue:r,setCurrencyInputs:i})}):s===ae.PRICE_RANGE?(0,e.jsxs)(Oe,{logImpression:!0,section:Ge.CreatePositionPriceRangeStep,children:[(0,e.jsx)(Ni,{}),(0,e.jsxs)(ei,{children:[(0,e.jsx)(_s,{}),(0,e.jsx)(wi,{})]})]}):(0,e.jsxs)(Oe,{logImpression:!0,section:Ge.CreatePositionDepositStep,children:[(0,e.jsx)(Ni,{}),(0,e.jsx)(ei,{children:(0,e.jsx)(wi,{})})]})}function Lr({children:t}){const{t:i}=te(),o=si();return(0,e.jsxs)(G,{mt:"$spacing24",width:"100%",px:"$spacing40",maxWidth:De.positionCard+De.sidebar+80,$xl:{px:"$spacing12",maxWidth:De.positionCard,mx:"auto"},children:[(0,e.jsxs)(en,{"aria-label":"breadcrumb-nav",children:[(0,e.jsxs)(tn,{to:"/positions",children:[i("pool.positions.title")," ",(0,e.jsx)(wo,{size:14})]}),(0,e.jsx)(m,{color:"$neutral2",children:i("pool.newPosition.title")})]}),(0,e.jsxs)("div",{className:Or,children:[(0,e.jsx)(m,{variant:"heading2",children:i("position.new")}),(0,e.jsx)(Hr,{})]}),(0,e.jsxs)("div",{className:$r,children:[!o.xl&&(0,e.jsx)(Br,{}),(0,e.jsx)(G,{gap:"$spacing24",flex:1,maxWidth:De.positionCard,mb:"$spacing28",children:t})]})]})}const Br=()=>{const{t}=te(),{positionState:{protocolVersion:i},creatingPoolOrPair:o,step:n,setStep:s,setPriceRangeState:u}=le(),a=(0,l.useMemo)(()=>{const r=({label:_,stepEnum:p,onPress:c})=>({label:_,active:n===p,onPress:()=>{c==null||c(),p<n&&s(p)}});return i===z.V2?o?[r({label:t("position.step.select"),stepEnum:ae.SELECT_TOKENS_AND_FEE_TIER}),r({label:t("position.step.price"),stepEnum:ae.PRICE_RANGE})]:[r({label:t("position.step.select"),stepEnum:ae.SELECT_TOKENS_AND_FEE_TIER}),r({label:t("position.step.deposit"),stepEnum:ae.DEPOSIT})]:[r({label:t("position.step.select"),stepEnum:ae.SELECT_TOKENS_AND_FEE_TIER,onPress:()=>u(ii)}),r({label:t("position.step.range"),stepEnum:ae.PRICE_RANGE})]},[o,i,s,n,t,u]);return(0,e.jsx)(G,{width:De.sidebar,alignSelf:"flex-start","$platform-web":{position:"sticky",top:St+25},children:(0,e.jsx)(kr,{steps:a})})},Wr=({onClickReset:t,isDisabled:i})=>{const{t:o}=te();return(0,e.jsx)(ie,{size:"small",emphasis:"tertiary",onPress:t,isDisabled:i,icon:(0,e.jsx)(Zi,{}),children:o("common.button.reset")})},zr=no(G,{row:!0,centered:!0,gap:"$gap8",$md:{"$platform-web":{display:"grid",gridTemplateColumns:"1fr 1fr auto",gridColumnGap:"8px"}}}),Hr=()=>{const t=Bi(),{t:i}=te(),{areTokensUnchanged:o,positionState:n,setPositionState:s,setStep:u,reset:a,setPriceRangeState:r,priceRangeState:_,resetPriceRange:p,depositState:c,resetDeposit:v}=le(),{protocolVersion:N}=n,g=Gi(D=>D.customSlippageTolerance),[d,j]=(0,l.useState)(!1),[x,S]=(0,l.useState)(!1),{reset:C}=Yi(),{isTestnetModeEnabled:E}=It(),k=Rt(E)??!1,T=(0,l.useMemo)(()=>o&&n.fee===Qe.fee&&n.hook===Qe.hook&&_.initialPrice===ii.initialPrice&&c===po,[n.fee,n.hook,_,c,o]),I=(0,l.useCallback)(()=>{a(),p(),C(),v()},[v,a,C,p]);(0,l.useEffect)(()=>{E!==k&&I()},[I,E,k]);const P=(0,l.useCallback)(D=>{const L=Xe(D);L&&setTimeout(()=>t(`/positions/create/${L}`),1),s({...Qe,protocolVersion:D}),r(ii),u(ae.SELECT_TOKENS_AND_FEE_TIER),j(!1)},[s,r,u,t,j]),y=(0,l.useMemo)(()=>[z.V4,z.V3,z.V2].filter(D=>D!=N).map(D=>(0,e.jsx)(ze,{onPress:()=>P(D),children:(0,e.jsx)("div",{className:Dr,children:(0,e.jsx)(m,{variant:"body2",children:i("position.new.protocol",{protocol:Xe(D)})})})},`version-${D}`)),[P,N,i]);return(0,e.jsxs)("div",{className:Nr,children:[(0,e.jsx)(Is,{isOpen:x,onClose:()=>S(!1),onHandleReset:I}),(0,e.jsxs)(zr,{children:[(0,e.jsx)(Wr,{onClickReset:()=>S(!0),isDisabled:T}),(0,e.jsx)(ot,{containerStyle:{width:"auto"},buttonStyle:{py:"$spacing8",px:"$spacing12"},dropdownStyle:{width:200,borderRadius:"$rounded16"},menuLabel:(0,e.jsx)(m,{variant:"buttonLabel3",lineHeight:"16px",children:i("position.protocol",{protocol:Xe(N)})}),isOpen:d,toggleOpen:()=>j(!d),alignRight:!0,children:y}),(0,e.jsx)("div",{className:Le(Er+(g?Rr:Pr)+(" "+(g?Ir:Cr))),children:(0,e.jsx)(on,{position:"relative",adjustRightAlignment:!1,adjustTopAlignment:!1,settings:[ao,so],iconColor:"$neutral1",iconSize:"$icon.16"})})]})]})},Mr=()=>(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(vr,{}),(0,e.jsx)(fn,{})]});function Fr({initialInputs:t,paramsProtocolVersion:i,autoSlippageTolerance:o}){const n=i??z.V4,[s,u]=(0,l.useState)({tokenA:t.tokenA,tokenB:t.tokenB});return(0,e.jsx)(Oe,{logImpression:!0,page:zt.CreatePosition,children:(0,e.jsx)(Lo,{initialChainId:t.tokenA.chainId,children:(0,e.jsx)(nn,{autoSlippageTolerance:o,children:(0,e.jsx)(lo,{currencyInputs:s,setCurrencyInputs:u,initialPositionState:{fee:t.fee,hook:t.hook??void 0,protocolVersion:n},defaultInitialToken:t.defaultInitialToken,initialPriceRangeState:t.priceRangeState,initialDepositState:t.depositState,initialFlowStep:t.flowStep,children:(0,e.jsxs)(Zs,{children:[(0,e.jsx)(Lr,{children:(0,e.jsx)(wr,{currencyInputs:s,setCurrencyInputs:u})}),(0,e.jsx)(Mr,{})]})})})})})}function kl(){const{protocolVersion:t}=kt(),i=Zt(t),o=rn({version:i}),n=xo();return n.loading?null:(0,e.jsx)(Fr,{initialInputs:n,paramsProtocolVersion:i,autoSlippageTolerance:o})}export{kl as CreatePosition,Ni as EditSelectTokensStep,kr as PoolProgressIndicator,_s as SelectPriceRangeStep,Mr as SharedCreateModals};
