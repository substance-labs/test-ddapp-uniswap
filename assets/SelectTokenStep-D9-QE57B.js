import{__toESM as kt}from"./chunk-DgAfPHQg.js";import{require_react as no}from"./react-CNoFhWkx.js";import{Button as ae,CheckCircleFilled as so,DropdownButton as Xe,G as wt,IconButton as ao,Path as Ne,RotatableChevron as It,Svg as Re,TouchableArea as le,Trans as Q,X as lo,createIcon as Be}from"./src-DOOtfpHS.js";import{useTranslation as q}from"./useTranslation-BotBuoJf.js";import{useUrlContext as co}from"./constants-CrXoXfFH.js";import{useNavigate as uo}from"./chunk-QMGIS6GS-B91ZVkXt.js";import{require_jsx_runtime as po}from"./jsx-runtime-D7bMTQeG.js";import{useEnabledChains as Dt}from"./useEnabledChains-DuB86c95.js";import{useEvent as be,useOnClickOutside as fo,usePrevious as Pt}from"./hooks-BXO4d1DJ.js";import{BIPS_BASE as mo,Percent as Ye,Platform as _o,ZERO_ADDRESS as Ot,init_sdk_core_esm as ho}from"./utils-BX1Fu73x.js";import{BigNumber as et,init_lib$5 as xo}from"./lib-DPFIyRke.js";import{BIPS_BASE as Et}from"./misc-BMnlqqV4.js";import{areCurrenciesEqual as tt,currencyId as ot,getValidAddress as go}from"./currencyId-Ci6selsx.js";import{PrefetchBalancesWrapper as vo}from"./slice-DimuiOR8.js";import{LiquidityEventName as rt}from"./features-yACC1hVw.js";import{Flag as it,Search as bo,parseCurrencyFromURLParameter as So,serializeSwapStateToURLParameters as nt}from"./TokenSelector-CNVK2itZ.js";import{ElementName as Te}from"./element-Wnp4RkdY.js";import{ModalName as yo}from"./modal-Dvm06CN4.js";import{getAddress as Co}from"./isAddress-P2vaZgmG.js";import{FeeAmount as je,TICK_SPACINGS as Ae,init_v3_sdk_esm as Nt}from"./v3-sdk.esm-CHH6GWR1.js";import{isAddress as To,shortenAddress as Rt}from"./addresses-D56PBUHX.js";import{AllowedV4WethHookAddressesConfigKey as jo,DynamicConfigs as Ao}from"./configs-B4dDdw82.js";import{FeatureFlags as ko,useDynamicConfigValue as wo,useFeatureFlag as Io}from"./hooks-Bp0VtWbX.js";import{WRAPPED_NATIVE_CURRENCY as ke,nativeOnChain as we}from"./objects-DlLkJwrJ.js";import{sendAnalyticsEvent as st}from"./send.web-CrSXW2rw.js";import{uniswapUrls as Do}from"./urls-kwiZbYPW.js";import{ProtocolVersion as S}from"./types_pb-yZxlo4b1.js";import{NumberType as Po}from"./types-JuyYLR0O.js";import{useLocalizationContext as $e}from"./LocalizationContext-B31peW1_.js";import{useSupportedChainId as Oo}from"./useSupportedChainId-DskHoisQ.js";import{useTrace as Eo}from"./TraceContext-Ddfk7zjz.js";import{SwitchNetworkAction as No}from"./types-BSmAADNJ.js";import{assume0xAddress as Bt}from"./wagmi-CsUiFCSO.js";import{Flex as pe,Text as k,concatClassName as Le,fonts as at,iconSizes as Ie,styled as He}from"./Loader-D83W8G1W.js";import{Checkbox as Ro}from"./Checkbox-Id3GDHn8.js";import{HeightAnimator as $t}from"./HeightAnimator-DF8znv78.js";import{AlertTriangleFilled as Bo}from"./AlertTriangleFilled-C9tf2eUJ.js";import{DocumentList as De,LpIncentivesAprDisplay as Pe}from"./LpIncentivesAprDisplay-DAZ9W112.js";import{InfoCircleFilled as Fe}from"./InfoCircleFilled-CBAL5Wj0.js";import{Pools as $o}from"./Pools-DKYxZO3F.js";import{ErrorCallout as Se}from"./ErrorCallout-YxcfJphA.js";import{NATIVE_CHAIN_ID as lt}from"./tokens-Dxd89cHj.js";import{z as $}from"./timing-DsWr56iv.js";import{useCurrencyInfo as ct}from"./useCurrencyInfo-Bxa3J04d.js";import{getChainIdFromChainUrlParam as Lo,getChainUrlParam as Ho}from"./chainParams-DIOvplzi.js";import{TokenLogo as Fo}from"./TokenLogo-JlSSDr3Q.js";import{FeePoolSelectAction as dt}from"./types-DhBONJgE.js";import{checkIsNative as Vo,useCurrencyWithLoading as ut}from"./Tokens-HEKZ8edJ.js";import{useMultichainContext as Lt}from"./useMultichainContext-BVmgxqO2.js";import{debug as L,error as zo,mitt_default as Mo,useAdapter as Ht,warn as Wo}from"./mitt-Cj0YfnqU.js";import{CopyHelper as qo}from"./CopyHelper-DOhhKKQB.js";import{ClickableTamaguiStyle as Ve}from"./clickable-D5qUCIhr.js";import{MatchType as pt,PageType as ft,getIsBrowserPage as mt}from"./useIsPage-CCVcHkKr.js";import{Trace_default as Oe}from"./Trace-DgHN3Ak9.js";import{Modal as Ko}from"./Modal.web-DHbL39pN.js";import{LearnMoreLink as Uo}from"./LearnMoreLink-CrJtGK7U.js";import{TextInput as Zo}from"./TextInput-3sqL_9ZJ.js";import{GetHelpHeader as Go}from"./GetHelpHeader-DB6Sgdgo.js";import{DoubleCurrencyLogo as Qo}from"./DoubleLogo-D40dQ2P7.js";import{CurrencySearchModal_default as Jo}from"./CurrencySearchModal-CHoQ3krb.js";import{MouseoverTooltip as Ft}from"./Tooltip-DPNhKWF2.js";import{getCurrencyWithWrap as ce,getTokenOrZeroAddress as de,validateCurrencyInput as Xo}from"./currency-Brc-ymXr.js";import{pairEnabledProtocolVersion as Yo,poolEnabledProtocolVersion as er}from"./protocolVersion-Djp_Gxjw.js";import{isV4UnsupportedChain as Vt,useGetPoolsByTokens as zt}from"./networkSupportsV4-CXcYAtrx.js";import{PoolState as tr,usePool as or}from"./usePools-Bz9FGvMj.js";import{getPriceRangeInfo as rr}from"./priceRangeInfo-DbHE3vOq.js";import{DEFAULT_FEE_DATA as ir,DEFAULT_POSITION_STATE as Mt,MAX_FEE_TIER_DECIMALS as nr,PositionFlowStep as ze,getDefaultFeeTiersForChainWithDynamicFeeTier as sr,getDefaultFeeTiersWithData as ar,getFeeTierKey as W,isDynamicFeeTier as Me,mergeFeeTiers as lr}from"./feeTiers-D9BvLkmt.js";import{getPoolFromRest as cr}from"./parseFromRest-Dp36Fdyo.js";import{PairState as _t,useV2Pair as dr}from"./useV2Pairs-CQkQtDF2.js";import{PositionField as G,hasLPFoTTransferError as ht}from"./hasLPFoTTransferError-Co-P2mPd.js";import{SUPPORTED_V2POOL_CHAIN_IDS as Wt}from"./useNetworkSupportsV2-BFYJkGkx.js";var o=kt(po());const[ur,xs]=Be({name:"ContractInteraction",getIcon:e=>(0,o.jsx)(Re,{viewBox:"0 0 24 24",fill:"none",...e,children:(0,o.jsx)(Ne,{d:"M17 3H7C5 3 4 4 4 6V18C4 20 5 21 7 21H17C19 21 20 20 20 18V6C20 4 19 3 17 3ZM8 16.75C7.586 16.75 7.25 16.414 7.25 16C7.25 15.586 7.586 15.25 8 15.25C8.414 15.25 8.75 15.586 8.75 16C8.75 16.414 8.414 16.75 8 16.75ZM8 12.75C7.586 12.75 7.25 12.414 7.25 12C7.25 11.586 7.586 11.25 8 11.25C8.414 11.25 8.75 11.586 8.75 12C8.75 12.414 8.414 12.75 8 12.75ZM8 8.75C7.586 8.75 7.25 8.414 7.25 8C7.25 7.586 7.586 7.25 8 7.25C8.414 7.25 8.75 7.586 8.75 8C8.75 8.414 8.414 8.75 8 8.75ZM16 16.75H11C10.586 16.75 10.25 16.414 10.25 16C10.25 15.586 10.586 15.25 11 15.25H16C16.414 15.25 16.75 15.586 16.75 16C16.75 16.414 16.414 16.75 16 16.75ZM16 12.75H11C10.586 12.75 10.25 12.414 10.25 12C10.25 11.586 10.586 11.25 11 11.25H16C16.414 11.25 16.75 11.586 16.75 12C16.75 12.414 16.414 12.75 16 12.75ZM16 8.75H11C10.586 8.75 10.25 8.414 10.25 8C10.25 7.586 10.586 7.25 11 7.25H16C16.414 7.25 16.75 7.586 16.75 8C16.75 8.414 16.414 8.75 16 8.75Z",fill:"currentColor"})})}),[pr,gs]=Be({name:"Page",getIcon:e=>(0,o.jsx)(Re,{viewBox:"0 0 16 16",fill:"none",...e,children:(0,o.jsx)(wt,{id:"page",children:(0,o.jsx)(Ne,{id:"Vector",d:"M11.2533 10H13.48C13.44 10.06 13.3933 10.1067 13.34 10.16L10.16 13.34C10.1067 13.3933 10.06 13.44 10 13.48V11.2533C10 10.56 10.5599 10 11.2533 10ZM14 4.24666V8.56665C14 8.71332 13.9866 8.86 13.9533 9H11.2533C10.0066 9 9 10.0067 9 11.2533V13.9534C8.86 13.9867 8.7134 14 8.56673 14H4.25326C2.74659 14 2 13.2467 2 11.7467V4.24666C2 2.74666 2.74659 2 4.25326 2H11.7467C13.2534 2 14 2.74666 14 4.24666ZM8.5 9.33333C8.5 9.05733 8.276 8.83333 8 8.83333H5.33333C5.05733 8.83333 4.83333 9.05733 4.83333 9.33333C4.83333 9.60933 5.05733 9.83333 5.33333 9.83333H8C8.276 9.83333 8.5 9.60933 8.5 9.33333ZM11.1667 6.33333C11.1667 6.05733 10.9427 5.83333 10.6667 5.83333H5.33333C5.05733 5.83333 4.83333 6.05733 4.83333 6.33333C4.83333 6.60933 5.05733 6.83333 5.33333 6.83333H10.6667C10.9427 6.83333 11.1667 6.60933 11.1667 6.33333Z",fill:"currentColor"})})}),defaultFill:"#9B9B9B"}),[fr,vs]=Be({name:"SwapCoin",getIcon:e=>(0,o.jsx)(Re,{viewBox:"0 0 16 16",fill:"none",...e,children:(0,o.jsx)(wt,{id:"swap-coin",children:(0,o.jsx)(Ne,{id:"Vector",d:"M2.0006 7.8667C1.9826 7.8667 1.96397 7.86601 1.94531 7.86401C1.67064 7.83401 1.47264 7.58666 1.50264 7.31266C1.74464 5.10133 3.07929 3.19668 5.07263 2.21802C5.22796 2.14202 5.41129 2.15134 5.55729 2.24268C5.70395 2.33401 5.79329 2.49465 5.79329 2.66732V4.70068C5.79329 4.97668 5.56929 5.20068 5.29329 5.20068C5.01729 5.20068 4.79329 4.97668 4.79329 4.70068V3.54004C3.51129 4.43204 2.6706 5.83264 2.49727 7.42131C2.46927 7.67664 2.25194 7.8667 2.0006 7.8667ZM10.9273 13.782C12.9206 12.804 14.2553 10.8993 14.4966 8.68734C14.5273 8.41267 14.3286 8.16599 14.0539 8.13599C13.7819 8.10665 13.5333 8.30403 13.5033 8.57869C13.3293 10.1674 12.4893 11.568 11.2066 12.46V11.2993C11.2066 11.0233 10.9826 10.7993 10.7066 10.7993C10.4306 10.7993 10.2066 11.0233 10.2066 11.2993V13.3327C10.2066 13.5053 10.296 13.666 10.4426 13.7573C10.5233 13.8073 10.6146 13.8327 10.7066 13.8327C10.782 13.8333 10.8573 13.8166 10.9273 13.782ZM7.99995 4.66667C7.99995 6.13933 9.19395 7.33333 10.6666 7.33333C12.1393 7.33333 13.3333 6.13933 13.3333 4.66667C13.3333 3.194 12.1393 2 10.6666 2C9.19395 2 7.99995 3.194 7.99995 4.66667ZM2.66662 11.3333C2.66662 12.806 3.86062 14 5.33329 14C6.80595 14 7.99995 12.806 7.99995 11.3333C7.99995 9.86067 6.80595 8.66667 5.33329 8.66667C3.86062 8.66667 2.66662 9.86067 2.66662 11.3333Z",fill:"currentColor"})})}),defaultFill:"#9B9B9B"}),mr=He(pe,{gap:32,p:"$spacing24",borderRadius:"$rounded20",borderWidth:"$spacing1",borderColor:"$surface3",overflow:"hidden",width:"100%",$lg:{p:"$spacing16"}});var d=kt(no());function xt(e,t){return!e||!t?{TOKEN0:e,TOKEN1:t}:e.isNative?{TOKEN0:e,TOKEN1:t}:t.isNative?{TOKEN0:t,TOKEN1:e}:e.sortsBefore(t)?{TOKEN0:e,TOKEN1:t}:{TOKEN0:t,TOKEN1:e}}function _r({a:e,b:t,protocolVersion:r}){if(!e||!t)return{TOKEN0:e,TOKEN1:t};if(r===S.V4)return xt(e,t);const i=ce(e,r),n=ce(t,r),a=xt(i,n),m=!a.TOKEN0||i!=null&&i.equals(a.TOKEN0)?e:t,f=!a.TOKEN1||n!=null&&n.equals(a.TOKEN1)?t:e;return{TOKEN0:m,TOKEN1:f}}function hr(e,t){if(W(t.feeAmount,t.isDynamic)===W(e.fee,e.isDynamicFee))return e}function xr(e,t){var r,i,n,a,m;const{chainId:f}=Lt(),{protocolVersion:s}=t,{tokenA:u,tokenB:g}=e,l=_r({a:u,b:g,protocolVersion:s}),_=Xo(l),j=er(s)&&_,w=ce(l.TOKEN0,s),P=ce(l.TOKEN1,s),{data:y,isLoading:T,isFetched:I,refetch:c}=zt({fee:t.fee.feeAmount,chainId:f,protocolVersions:[s],token0:de(w),token1:de(P),hooks:((r=t.hook)===null||r===void 0?void 0:r.toLowerCase())??Ot},j),p=y!=null&&y.pools&&y.pools.length>0?hr(y.pools[0],t.fee):void 0,h=dr((i=l.TOKEN0)===null||i===void 0?void 0:i.wrapped,(n=l.TOKEN1)===null||n===void 0?void 0:n.wrapped),C=h[0]===_t.LOADING,N=_&&Yo(s)&&h[1]||void 0,O=or({currencyA:(a=l.TOKEN0)===null||a===void 0?void 0:a.wrapped,currencyB:(m=l.TOKEN1)===null||m===void 0?void 0:m.wrapped,feeAmount:t.fee.feeAmount}),D=s===S.V3?O[1]??void 0:void 0,v=(0,d.useMemo)(()=>{var b;return s===S.V4?cr({pool:p,token0:l.TOKEN0,token1:l.TOKEN1,protocolVersion:s,hooks:(p==null||(b=p.hooks)===null||b===void 0?void 0:b.address)||""}):void 0},[p,s,l]),A=(0,d.useMemo)(()=>s===S.UNSPECIFIED?!1:s===S.V2?h[0]===_t.NOT_EXISTS:s===S.V3?O[0]===tr.NOT_EXISTS:I&&!p,[s,h,O,p,I]);return(0,d.useMemo)(()=>{var b,H,z,E;return s===S.UNSPECIFIED?{currencies:{display:l,sdk:l},protocolVersion:S.V4,refetchPoolData:()=>{}}:s===S.V2?{currencies:{display:l,sdk:{[G.TOKEN0]:(b=l.TOKEN0)===null||b===void 0?void 0:b.wrapped,[G.TOKEN1]:(H=l.TOKEN1)===null||H===void 0?void 0:H.wrapped}},protocolVersion:s,pair:N,creatingPoolOrPair:A,poolOrPairLoading:C,refetchPoolData:c}:s===S.V3?{currencies:{display:l,sdk:{[G.TOKEN0]:(z=l.TOKEN0)===null||z===void 0?void 0:z.wrapped,[G.TOKEN1]:(E=l.TOKEN1)===null||E===void 0?void 0:E.wrapped}},protocolVersion:s,pool:D,creatingPoolOrPair:A,poolOrPairLoading:T,poolId:p==null?void 0:p.poolId,refetchPoolData:c}:{currencies:{display:l,sdk:l},protocolVersion:s,pool:v,creatingPoolOrPair:A,poolOrPairLoading:T,poolId:p==null?void 0:p.poolId,refetchPoolData:c}},[s,v,A,T,p==null?void 0:p.poolId,N,C,D,c,l])}function ue(e,t,r){try{return e(t)}catch(i){return Wo("[nuqs] Error while parsing value `%s`: %O"+(r?" (for key `%s`)":""),t,i,r),null}}function gr(){if(typeof window>"u"||!!!window.GestureEvent)return 50;try{var t;const r=(t=navigator.userAgent)===null||t===void 0?void 0:t.match(/version\/([\d\.]+) safari/i);return parseFloat(r[1])>=17?120:320}catch{return 320}}var Y=gr(),re=new Map,M={history:"replace",scroll:!1,shallow:!0,throttleMs:Y},We=new Set,gt=0,oe=null;function qt(e){return re.get(e)}function vr(){re.clear(),We.clear(),M.history="replace",M.scroll=!1,M.shallow=!0,M.throttleMs=Y}function Kt(e,t,r,i){const n=t===null?null:r(t);return L("[nuqs queue] Enqueueing %s=%s %O",e,n,i),re.set(e,n),i.history==="push"&&(M.history="push"),i.scroll&&(M.scroll=!0),i.shallow===!1&&(M.shallow=!1),i.startTransition&&We.add(i.startTransition),M.throttleMs=Math.max(i.throttleMs??Y,Number.isFinite(M.throttleMs)?M.throttleMs:0),n}function br(){return new URLSearchParams(location.search)}function Ut({getSearchParamsSnapshot:e=br,updateUrl:t,rateLimitFactor:r=1}){return oe===null&&(oe=new Promise((i,n)=>{if(!Number.isFinite(M.throttleMs)){L("[nuqs queue] Skipping flush due to throttleMs=Infinity"),i(e()),setTimeout(()=>{oe=null},0);return}function a(){gt=performance.now();const[f,s]=Sr({updateUrl:t,getSearchParamsSnapshot:e});s===null?i(f):n(f),oe=null}function m(){const s=performance.now()-gt,u=M.throttleMs,g=r*Math.max(0,Math.min(u,u-s));L("[nuqs queue] Scheduling flush in %f ms. Throttled at %f ms",g,u),g===0?a():setTimeout(a,g)}setTimeout(m,0)})),oe}function Sr({updateUrl:e,getSearchParamsSnapshot:t}){const r=t();if(re.size===0)return[r,null];const i=Array.from(re.entries()),n={...M},a=Array.from(We);vr(),L("[nuqs queue] Flushing queue %O with options %O",i,n);for(const[m,f]of i)f===null?r.delete(m):r.set(m,f);try{return yr(a,()=>{e(r,{history:n.history,scroll:n.scroll,shallow:n.shallow})}),[r,null]}catch(m){return console.error(zo(429),i.map(([f])=>f).join(),m),[r,m]}}function yr(e,t){const r=i=>{if(i===e.length)return t();const n=e[i];if(!n)throw new Error("Invalid transition function");n(()=>r(i+1))};r(0)}function V(e){function t(r){if(typeof r>"u")return null;let i="";if(Array.isArray(r)){if(r[0]===void 0)return null;i=r[0]}return typeof r=="string"&&(i=r),ue(e.parse,i)}return{eq:(r,i)=>r===i,...e,parseServerSide:t,withDefault(r){return{...this,defaultValue:r,parseServerSide(i){return t(i)??r}}},withOptions(r){return{...this,...r}}}}var Cr=V({parse:e=>e,serialize:e=>`${e}`}),vt=V({parse:e=>{const t=parseInt(e);return Number.isNaN(t)?null:t},serialize:e=>Math.round(e).toFixed()}),bs=V({parse:e=>{const t=vt.parse(e);return t===null?null:t-1},serialize:e=>vt.serialize(e+1)}),Ss=V({parse:e=>{const t=parseInt(e,16);return Number.isNaN(t)?null:t},serialize:e=>{const t=Math.round(e).toString(16);return t.padStart(t.length+t.length%2,"0")}}),ys=V({parse:e=>{const t=parseFloat(e);return Number.isNaN(t)?null:t},serialize:e=>e.toString()}),Tr=V({parse:e=>e==="true",serialize:e=>e?"true":"false"});function qe(e,t){return e.valueOf()===t.valueOf()}var Cs=V({parse:e=>{const t=parseInt(e);return Number.isNaN(t)?null:new Date(t)},serialize:e=>e.valueOf().toString(),eq:qe}),Ts=V({parse:e=>{const t=new Date(e);return Number.isNaN(t.valueOf())?null:t},serialize:e=>e.toISOString(),eq:qe}),js=V({parse:e=>{const t=new Date(e.slice(0,10));return Number.isNaN(t.valueOf())?null:t},serialize:e=>e.toISOString().slice(0,10),eq:qe});function Ke(e){return V({parse:t=>{try{const r=JSON.parse(t);return e(r)}catch{return null}},serialize:t=>JSON.stringify(t),eq(t,r){return t===r||JSON.stringify(t)===JSON.stringify(r)}})}var X=Mo();function jr(e,{history:t="replace",shallow:r=!0,scroll:i=!1,throttleMs:n=Y,parse:a=l=>l,serialize:m=String,eq:f=(l,_)=>l===_,defaultValue:s=void 0,clearOnDefault:u=!0,startTransition:g}={history:"replace",scroll:!1,shallow:!0,throttleMs:Y,parse:l=>l,serialize:String,eq:(l,_)=>l===_,clearOnDefault:!0,defaultValue:void 0}){const l=Ht(),_=l.searchParams,j=(0,d.useRef)((_==null?void 0:_.get(e))??null),[w,P]=(0,d.useState)(()=>{const I=qt(e),c=I===void 0?(_==null?void 0:_.get(e))??null:I;return c===null?null:ue(a,c,e)}),y=(0,d.useRef)(w);L("[nuqs `%s`] render - state: %O, iSP: %s",e,w,(_==null?void 0:_.get(e))??null),(0,d.useEffect)(()=>{const I=(_==null?void 0:_.get(e))??null;if(I===j.current)return;const c=I===null?null:ue(a,I,e);L("[nuqs `%s`] syncFromUseSearchParams %O",e,c),y.current=c,j.current=I,P(c)},[_==null?void 0:_.get(e),e]),(0,d.useEffect)(()=>{function I({state:c,query:p}){L("[nuqs `%s`] updateInternalState %O",e,c),y.current=c,j.current=p,P(c)}return L("[nuqs `%s`] subscribing to sync",e),X.on(e,I),()=>{L("[nuqs `%s`] unsubscribing from sync",e),X.off(e,I)}},[e]);const T=(0,d.useCallback)((I,c={})=>{let p=Ar(I)?I(y.current??s??null):I;(c.clearOnDefault??u)&&p!==null&&s!==void 0&&f(p,s)&&(p=null);const h=Kt(e,p,m,{history:c.history??t,shallow:c.shallow??r,scroll:c.scroll??i,throttleMs:c.throttleMs??n,startTransition:c.startTransition??g});return X.emit(e,{state:p,query:h}),Ut(l)},[e,t,r,i,n,g,l.updateUrl,l.getSearchParamsSnapshot,l.rateLimitFactor]);return[w??s??null,T]}function Ar(e){return typeof e=="function"}var kr={};function wr(e,{history:t="replace",scroll:r=!1,shallow:i=!0,throttleMs:n=Y,clearOnDefault:a=!0,startTransition:m,urlKeys:f=kr}={}){const s=Object.keys(e).join(","),u=(0,d.useMemo)(()=>Object.fromEntries(Object.keys(e).map(c=>[c,f[c]??c])),[s,JSON.stringify(f)]),g=Ht(),l=g.searchParams,_=(0,d.useRef)({}),j=(0,d.useMemo)(()=>Object.fromEntries(Object.keys(e).map(c=>[c,e[c].defaultValue??null])),[Object.values(e).map(({defaultValue:c})=>c).join(",")]),[w,P]=(0,d.useState)(()=>{const c=l??new URLSearchParams;return ye(e,f,c).state}),y=(0,d.useRef)(w);if(L("[nuq+ `%s`] render - state: %O, iSP: %s",s,w,l),Object.keys(_.current).join("&")!==Object.values(u).join("&")){const{state:c,hasChanged:p}=ye(e,f,l,_.current,y.current);p&&(y.current=c,P(c)),_.current=Object.fromEntries(Object.values(u).map(h=>[h,(l==null?void 0:l.get(h))??null]))}(0,d.useEffect)(()=>{const{state:c,hasChanged:p}=ye(e,f,l,_.current,y.current);p&&(y.current=c,P(c))},[Object.values(u).map(c=>`${c}=${l==null?void 0:l.get(c)}`).join("&")]),(0,d.useEffect)(()=>{function c(h){L("[nuq+ `%s`] updateInternalState %O",s,h),y.current=h,P(h)}const p=Object.keys(e).reduce((h,C)=>(h[C]=({state:N,query:O})=>{const{defaultValue:D}=e[C],v=u[C];y.current={...y.current,[C]:N??D??null},_.current[v]=O,L("[nuq+ `%s`] Cross-hook key sync %s: %O (default: %O). Resolved: %O",s,v,N,D,y.current),c(y.current)},h),{});for(const h of Object.keys(e)){const C=u[h];L("[nuq+ `%s`] Subscribing to sync for `%s`",s,C),X.on(C,p[h])}return()=>{for(const h of Object.keys(e)){const C=u[h];L("[nuq+ `%s`] Unsubscribing to sync for `%s`",s,C),X.off(C,p[h])}}},[s,u]);const T=(0,d.useCallback)((c,p={})=>{const h=Object.fromEntries(Object.keys(e).map(N=>[N,null])),C=typeof c=="function"?c(bt(y.current,j))??h:c??h;L("[nuq+ `%s`] setState: %O",s,C);for(let[N,O]of Object.entries(C)){const D=e[N],v=u[N];if(!D)continue;(p.clearOnDefault??D.clearOnDefault??a)&&O!==null&&D.defaultValue!==void 0&&(D.eq??((b,H)=>b===H))(O,D.defaultValue)&&(O=null);const A=Kt(v,O,D.serialize??String,{history:p.history??D.history??t,shallow:p.shallow??D.shallow??i,scroll:p.scroll??D.scroll??r,throttleMs:p.throttleMs??D.throttleMs??n,startTransition:p.startTransition??D.startTransition??m});X.emit(v,{state:O,query:A})}return Ut(g)},[s,t,i,r,n,m,u,g.updateUrl,g.getSearchParamsSnapshot,g.rateLimitFactor,j]);return[(0,d.useMemo)(()=>bt(w,j),[w,j]),T]}function ye(e,t,r,i,n){let a=!1;const m=Object.keys(e).reduce((f,s)=>{const u=(t==null?void 0:t[s])??s,{parse:g}=e[s],l=qt(u),_=l===void 0?(r==null?void 0:r.get(u))??null:l;if(i&&n&&(i[u]??null)===_)return f[s]=n[s]??null,f;a=!0;const j=_===null?null:ue(g,_,s);return f[s]=j??null,i&&(i[u]=_),f},{});if(!a){const f=Object.keys(e),s=Object.keys(n??{});a=f.length!==s.length||f.some(u=>!s.includes(u))}return{state:m,hasChanged:a}}function bt(e,t){return Object.fromEntries(Object.keys(e).map(r=>[r,e[r]??t[r]??null]))}const Ir=$.object({priceInverted:$.boolean(),fullRange:$.boolean(),minPrice:$.string(),maxPrice:$.string(),initialPrice:$.string(),isInitialPriceDirty:$.boolean()}).partial(),Dr=$.object({exactField:$.nativeEnum(G),exactAmounts:$.record($.nativeEnum(G),$.string())}).partial(),Pr=$.object({feeAmount:$.number(),tickSpacing:$.number(),isDynamic:$.boolean()}),Or=Ke(Pr.parse).withDefault(ir),Er=Ke(Ir.parse).withDefault({}),Nr=Ke(Dr.parse).withDefault({}),J=V({parse:e=>!e||typeof e!="string"?null:So(e)||null,serialize:e=>e});function Rr(e){const t=r=>{var i;return Vo(r)||r===((i=ke[e])===null||i===void 0?void 0:i.address)};return{currencyA:J,currencyB:J,validateCurrencies:(r,i)=>{const n=i===r?void 0:i,a=t(r),m=t(n);return{currencyAddressA:r,currencyAddressB:n&&!(a&&m)?n:void 0}}}}const Br=V({parse:e=>{if(!e||typeof e!="string")return null;const t=Lo(e);return t!==void 0?t:null},serialize:e=>e?Ho(e):""}),$r=V({parse:e=>{if(!e||typeof e!="string")return null;const t=Number(e);return!Number.isInteger(t)||t<0?null:Object.values(ze).includes(t)?t:null},serialize:e=>e.toString()}),Lr=V({parse:e=>{if(!e||typeof e!="string")return null;const t=To(e);return t?Bt(t):null},serialize:e=>e});function Hr({currencyA:e,currencyB:t,chainId:r}){const{currencyAddressA:i,currencyAddressB:n}=(0,d.useMemo)(()=>Rr(r).validateCurrencies(e,t),[e,t,r]),{currency:a,loading:m}=ut({address:i,chainId:r}),{currency:f,loading:s}=ut({address:n,chainId:r});return{currencyAddressA:i,currencyAddressB:n,currencyALoaded:a,currencyBLoaded:f,loading:m||s}}Nt();function Fr(e){const t={},r=[];let i=!1;if(e.feeTier){const n=Number(e.feeTier),a=Ae[n]||Ae[je.MEDIUM];t.fee={feeAmount:n,tickSpacing:a,isDynamic:Me({feeAmount:n,tickSpacing:a,isDynamic:!!e.isDynamic})},r.push("feeTier","isDynamic"),i=!0}return i?{updatedParams:t,clearParams:r}:null}function Vr(e){const t={},r=[];let i=!1;return e.currencya&&!e.currencyA&&(t.currencyA=e.currencya,r.push("currencya"),i=!0),e.currencyb&&!e.currencyB&&(t.currencyB=e.currencyb,r.push("currencyb"),i=!0),i?{updatedParams:t,clearParams:r}:null}const zr=[{version:1,migrate:Fr},{version:2,migrate:Vr}];function Mr(e){const t={},r=[];let i=!1;for(const n of zr){const a=n.migrate(e);a&&(Object.assign(t,a.updatedParams),r.push(...a.clearParams),i=!0,Object.assign(e,a.updatedParams))}return i?{updatedParams:t,clearParams:[...new Set(r)]}:null}const Wr={currencyA:J.withDefault(""),currencyB:J.withDefault(""),chain:Br,hook:Lr,fee:Or,priceRangeState:Er,depositState:Nr,feeTier:Cr,isDynamic:Tr,currencya:J.withDefault(""),currencyb:J.withDefault("")};function qr(){const e=mt(ft.CREATE_POSITION,pt.STARTS_WITH),t=mt(ft.MIGRATE_V3,pt.EXACT);return e||t}function Zt(){const{defaultChainId:e}=Dt(),t=we(e),[r,i]=(0,d.useState)(!1),[n,a]=jr("step",$r.withDefault(ze.SELECT_TOKENS_AND_FEE_TIER).withOptions({history:"push",clearOnDefault:!1,shallow:!1})),[m,f]=wr(Wr,{history:"replace"}),{currencyA:s,currencyB:u,chain:g,fee:l,hook:_,priceRangeState:j,depositState:w}=m;(0,d.useEffect)(()=>{const C=Mr(m);if(C){const{updatedParams:N,clearParams:O}=C,D={...m,...N};for(const v of O)D[v]=null;f(D)}i(!0)},[m,f]);const y=Oo(g??void 0)??e,{currencyALoaded:T,currencyBLoaded:I,loading:c}=Hr({currencyA:s,currencyB:u,chainId:y}),p=(0,d.useCallback)(C=>{var N,O,D,v,A;if(!qr()||!r)return;const b=!((N=C.currencyInputs.tokenA)===null||N===void 0)&&N.isNative?lt:(O=C.currencyInputs.tokenA)===null||O===void 0?void 0:O.address,H=!((D=C.currencyInputs.tokenB)===null||D===void 0)&&D.isNative?lt:(v=C.currencyInputs.tokenB)===null||v===void 0?void 0:v.address,z=C.positionState.hook?Bt(C.positionState.hook):void 0;f({currencyA:b,currencyB:H,chain:(A=C.currencyInputs.tokenA)===null||A===void 0?void 0:A.chainId,fee:C.positionState.fee,hook:z,priceRangeState:C.priceRangeState,depositState:C.depositState})},[f,r]),h=c||!r;return(0,d.useMemo)(()=>({defaultInitialToken:t,tokenA:T??t,tokenB:I,fee:l,hook:_,loading:h,priceRangeState:j,depositState:w,flowStep:n,chainId:y,syncToUrl:p,setHistoryState:a}),[T,I,l,_,t,h,j,w,n,y,a,p])}Nt();const St={priceInverted:!1,fullRange:!0,minPrice:"",maxPrice:"",initialPrice:""},yt={exactField:G.TOKEN0,exactAmounts:{}},Kr={feeAmount:je.MEDIUM,tickSpacing:Ae[je.MEDIUM],isDynamic:!1},Ce={fee:Kr,hook:void 0,userApprovedHook:void 0,protocolVersion:S.V4},Gt=(0,d.createContext)(void 0);function As({children:e,currencyInputs:t,setCurrencyInputs:r,defaultInitialToken:i,initialPositionState:n,initialPriceRangeState:a,initialDepositState:m,initialFlowStep:f}){const s=(0,d.useRef)(t).current,[u,g]=(0,d.useState)(()=>({...Ce,...n})),l=f,[_,j]=(0,d.useState)(),[w,P]=(0,d.useState)(!1),[y,T]=(0,d.useState)({open:!1,wishFeeData:Ce.fee}),[I,c]=(0,d.useState)(),p=u.initialPosition,h=!(p!=null&&p.isOutOfRange),C=a==null?void 0:a.fullRange,N=C!==void 0?C:h,[O,D]=(0,d.useState)(()=>({...St,fullRange:N,...a})),[v,A]=(0,d.useState)({...yt,...m}),b=xr(t,u),{setHistoryState:H,syncToUrl:z}=Zt();(0,d.useEffect)(()=>{z({currencyInputs:t,positionState:u,priceRangeState:O,depositState:v})},[t,u,O,v,z]);const E=(0,d.useMemo)(()=>rr({derivedPositionInfo:b,state:O,positionState:u}),[b,O,u]),U=(0,d.useMemo)(()=>{if(b.protocolVersion===S.V2&&E.protocolVersion===S.V2)return b.pair??E.mockPair;if(b.protocolVersion===S.V3&&E.protocolVersion===S.V3||b.protocolVersion===S.V4&&E.protocolVersion===S.V4)return b.pool??E.mockPool},[b,E]),ie=be(()=>{g({...Ce,protocolVersion:u.protocolVersion}),r({tokenA:i,tokenB:void 0}),H(ze.SELECT_TOKENS_AND_FEE_TIER)}),me=be(()=>{D(St)}),_e=be(()=>{A(yt)}),ne={...(0,d.useMemo)(()=>b.protocolVersion===S.V2?{protocolVersion:S.V2,poolOrPair:U,currencies:b.currencies}:b.protocolVersion===S.V3?{protocolVersion:S.V3,poolOrPair:U,currencies:b.currencies}:{protocolVersion:S.V4,poolOrPair:U,currencies:b.currencies},[b.protocolVersion,U,b.currencies]),poolId:b.poolId,poolOrPairLoading:b.poolOrPairLoading,creatingPoolOrPair:b.creatingPoolOrPair,price:E.price,ticks:E.protocolVersion===S.V2?[void 0,void 0]:E.ticks,ticksAtLimit:E.protocolVersion===S.V2?[!1,!1]:E.ticksAtLimit,pricesAtTicks:E.protocolVersion===S.V2?[void 0,void 0]:E.pricesAtTicks,areTokensUnchanged:t.tokenA===s.tokenA&&!t.tokenB,positionState:u,step:l,currentTransactionStep:_,feeTierSearchModalOpen:w,dynamicFeeTierSpeedbumpData:y,priceRangeState:O,depositState:v,refetch:I,setPositionState:g,setStep:H,setCurrentTransactionStep:j,setFeeTierSearchModalOpen:P,setDynamicFeeTierSpeedbumpData:T,setPriceRangeState:D,setDepositState:A,setCurrencyInputs:r,setRefetch:c,refetchPoolData:b.refetchPoolData,reset:ie,resetPriceRange:me,resetDeposit:_e};return(0,o.jsx)(Gt.Provider,{value:ne,children:e})}function fe(){const e=(0,d.useContext)(Gt);if(!e)throw new Error("useCreateLiquidityContext must be used within a CreateLiquidityContextProvider");return e}const Ur="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexDirection-column _flexWrap-wrap _flexShrink-1 _gap-t-space-gap52 ",Zr=" _opacity-1",Gr=" _opacity-0--4",Qr=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa1360334080 _pt-t-space-spa1360334080 _pr-t-space-spa1360334080 _pb-t-space-spa1360334080 _pl-t-space-spa1360334080 _borderTopLeftRadius-t-radius-ro291586449 _borderTopRightRadius-t-radius-ro291586449 _borderBottomRightRadius-t-radius-ro291586449 _borderBottomLeftRadius-t-radius-ro291586449 _backgroundColor-surface2  ";function Jr(){const{t:e}=q(),{creatingPoolOrPair:t,poolOrPairLoading:r}=fe(),n=Pt(t)&&r;return!n&&!t?null:(0,o.jsxs)("div",{className:Le(""+(Qr+(n?Gr:Zr))),children:[(0,o.jsx)(Fe,{flexShrink:0,size:"$icon.20",color:"$neutral2"}),(0,o.jsxs)("div",{className:Ur,children:[(0,o.jsx)(k,{variant:"body3",children:e("pool.create")}),(0,o.jsx)(k,{variant:"body3",color:"$neutral2",children:e("pool.create.info")})]})]})}var Xr=Jr;const Yr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",ei="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665589 _alignItems-center ",ti="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665593 _alignItems-center ";function Qt({title:e,tooltipText:t,Icon:r,onPress:i,elementName:n}){const{t:a}=q();return(0,o.jsxs)("div",{className:ti,children:[(0,o.jsxs)("div",{className:ei,children:[(0,o.jsx)(r,{size:"$icon.16",color:"$neutral2"}),(0,o.jsx)(Oe,{logPress:!!n,element:n,children:(0,o.jsx)(k,{variant:"body3",color:"$neutral2",textDecorationLine:"underline",textDecorationStyle:"dashed",onPress:i,...Ve,children:e})})]}),(0,o.jsxs)(k,{variant:"body3",color:"$neutral3",children:["(",a("common.advanced"),")"]}),t&&(0,o.jsx)(Ft,{text:t,placement:"auto",style:{maxHeight:"16px"},children:(0,o.jsx)("div",{className:Yr,children:(0,o.jsx)(Fe,{size:"$icon.16",color:"$neutral3"})})})]})}let R=(function(e){return e.BeforeAddLiquidity="before-add-liquidity",e.AfterAddLiquidity="after-add-liquidity",e.BeforeRemoveLiquidity="before-remove-liquidity",e.AfterRemoveLiquidity="after-remove-liquidity",e.BeforeSwap="before-swap",e.AfterSwap="after-swap",e.BeforeDonate="before-donate",e.AfterDonate="after-donate",e.BeforeSwapReturnsDelta="before-swap-returns-delta",e.AfterSwapReturnsDelta="after-swap-returns-delta",e.AfterAddLiquidityReturnsDelta="after-add-liquidity-returns-delta",e.AfterRemoveLiquidityReturnsDelta="after-remove-liquidity-returns-delta",e})({});const oi={[R.BeforeRemoveLiquidity]:512,[R.AfterRemoveLiquidity]:256,[R.BeforeAddLiquidity]:2048,[R.AfterAddLiquidity]:1024,[R.BeforeSwap]:128,[R.AfterSwap]:64,[R.BeforeDonate]:32,[R.AfterDonate]:16,[R.BeforeSwapReturnsDelta]:8,[R.AfterSwapReturnsDelta]:4,[R.AfterAddLiquidityReturnsDelta]:2,[R.AfterRemoveLiquidityReturnsDelta]:1};function ri(e){const t=e.slice(-4),i=parseInt(t,16).toString(2).slice(-12);return Object.entries(oi).filter(([,a])=>(parseInt(i,2)&a)!==0).map(([a])=>a)}function ii(e,t){switch(e){case R.BeforeSwap:case R.BeforeSwapReturnsDelta:return{Icon:fr,name:t("common.swap"),info:t("position.hook.swapWarning"),dangerous:!1};case R.BeforeAddLiquidity:case R.AfterAddLiquidity:return{Icon:$o,name:t("common.addLiquidity"),info:t("position.hook.liquidityWarning"),dangerous:!1};case R.BeforeRemoveLiquidity:case R.AfterRemoveLiquidity:return{Icon:it,name:t("common.warning"),info:t("position.hook.removeWarning"),dangerous:!0};case R.BeforeDonate:case R.AfterDonate:return{Icon:it,name:t("common.donate"),info:t("position.hook.donateWarning"),dangerous:!1};default:return}}const ni="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap56 ",si="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-gap56 _borderTopLeftRadius-t-radius-ro291586449 _borderTopRightRadius-t-radius-ro291586449 _borderBottomRightRadius-t-radius-ro291586449 _borderBottomLeftRadius-t-radius-ro291586449 _backgroundColor-surface2 _pt-t-space-gap1569 _pr-t-space-gap1569 _pb-t-space-gap1569 _pl-t-space-gap1569 ",ai="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-row _alignItems-center _flexGrow-1 _gap-t-space-gap52 ",li="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _borderTopLeftRadius-t-radius-ro291586449 _borderTopRightRadius-t-radius-ro291586449 _borderBottomRightRadius-t-radius-ro291586449 _borderBottomLeftRadius-t-radius-ro291586449 _backgroundColor-surface2 _pt-t-space-gap1569 _pb-t-space-gap1569 _pr-t-space-gap1573 _pl-t-space-gap1573 ",ci=" _backgroundColor-surface3",di=" _backgroundColor-statusCriti3045924",ui=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _mr-auto _ml-auto _pt-t-space-pad1331704929 _pr-t-space-pad1331704929 _pb-t-space-pad1331704929 _pl-t-space-pad1331704929 _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 _justifyContent-center  ",pi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",fi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334047 ",mi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _flexWrap-wrap _width-5537 ",_i="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-row _flexGrow-1 _alignItems-center _gap-t-space-gap52 _mb-auto ",Jt="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row ",hi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap56 _mt-t-space-pad1331704925 ",xi="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-row _flexGrow-1 _gap-t-space-gap52 _alignItems-center ",gi="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center ",vi="  is_Separator _display-flex _alignItems-stretch _flexDirection-column _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _flexShrink-1 _borderTopWidth-0px _borderRightWidth-0px _borderBottomWidth-1px _borderLeftWidth-0px _flexGrow-1 _height-0px _maxHeight-0px _mt-t-space-gap56 _mb-t-space-gap56 _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid ";function bi({flags:e,hasDangerous:t}){const{t:r}=q(),[i,n]=(0,d.useState)(t),a=()=>{n(m=>!m)};return e.length?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:vi}),(0,o.jsx)(le,{onPress:a,children:(0,o.jsxs)("div",{className:gi,children:[(0,o.jsxs)("div",{className:xi,children:[(0,o.jsx)(ur,{color:"$neutral2",size:"$icon.16"}),(0,o.jsx)(k,{variant:"buttonLabel3",color:"$neutral2",children:r(i?"position.addingHook.hideProperties":"position.addingHook.viewProperties")})]}),(0,o.jsx)(It,{direction:i?"up":"down",color:"$neutral2",width:16,height:16})]})}),i&&(0,o.jsx)("div",{className:hi,children:e.map(({Icon:m,name:f,info:s,dangerous:u})=>(0,o.jsxs)("div",{className:Jt,children:[(0,o.jsxs)("div",{className:_i,children:[(0,o.jsx)(m,{size:"$icon.16",color:u?"$statusCritical":"$neutral2"}),(0,o.jsx)(k,{variant:"body3",color:u?"$statusCritical":"$neutral2",children:f})]}),(0,o.jsx)("div",{className:mi,children:(0,o.jsx)(k,{variant:"body4",color:u?"$statusCritical":"$neutral2",children:s})})]},f))})]}):null}function Xt({isOpen:e,onClose:t,onClearHook:r,onContinue:i,address:n}){const{t:a}=q(),[m,f]=(0,d.useState)(!1),s=()=>{r(),t()},u=()=>{f(w=>!w)},{flags:g,hasDangerous:l}=(0,d.useMemo)(()=>{if(!n)return{flags:[],hasDangerous:!1};let w=!1;const P={};return ri(n).forEach(y=>{const T=ii(y,a);T!=null&&T.dangerous&&(w=!0),T!=null&&T.name&&(P[T.name]=T)}),{flags:Object.values(P),hasDangerous:w}},[n,a]),_=!l||m,j=()=>{_&&(i(),t())};return n?(0,o.jsx)(Ko,{name:yo.Hook,onClose:t,isModalOpen:e,analyticsProperties:{hook_address:n,hasDangerous:l},children:(0,o.jsx)($t,{children:(0,o.jsxs)("div",{className:fi,children:[(0,o.jsx)(Go,{closeModal:t}),(0,o.jsxs)("div",{className:pi,children:[(0,o.jsx)("div",{className:Le(""+(ui+(l?di:ci))),children:l?(0,o.jsx)(Bo,{size:"$icon.24",color:"$statusCritical"}):(0,o.jsx)(De,{size:"$icon.24",color:"$neutral1"})}),(0,o.jsx)(k,{variant:"subheading1",textAlign:"center",mt:"$padding16",children:a(l?"position.hook.warningHeader":"position.addingHook")}),(0,o.jsx)(k,{variant:"body2",color:"$neutral2",textAlign:"center",my:"$padding8",children:a(l?"position.hook.warningInfo":"position.addingHook.disclaimer")}),(0,o.jsx)(Uo,{centered:!0,url:Do.helpArticleUrls.addingV4Hooks,textVariant:"buttonLabel3"})]}),(0,o.jsxs)("div",{className:li,children:[(0,o.jsxs)("div",{className:Jt,children:[(0,o.jsxs)("div",{className:ai,children:[(0,o.jsx)(pr,{color:"$neutral2",size:"$icon.16"}),(0,o.jsx)(k,{variant:"body3",color:"$neutral2",children:a("common.text.contract")})]}),(0,o.jsx)(qo,{toCopy:n,iconSize:16,iconPosition:"right",color:"$neutral2",children:(0,o.jsx)(k,{variant:"body3",color:"$neutral2",children:Rt(n)})})]}),(0,o.jsx)(bi,{flags:g,hasDangerous:l})]}),l&&(0,o.jsxs)("div",{className:si,children:[(0,o.jsx)(Ro,{size:"$icon.16",checked:m,onPress:u}),(0,o.jsx)(k,{variant:"buttonLabel4",color:"$neutral2",children:a("position.hook.disclaimer")})]}),(0,o.jsxs)("div",{className:ni,children:[(0,o.jsx)(Oe,{logPress:!0,element:Te.Cancel,children:(0,o.jsx)(ae,{size:"small",emphasis:"secondary",onPress:s,children:a("position.removeHook")})}),(0,o.jsx)(Oe,{logPress:!0,element:Te.Continue,children:(0,o.jsx)(ae,{isDisabled:!_,size:"small",variant:"branded",onPress:j,children:a("common.button.continue")})})]})]})})}):null}const Si="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665589 ",yi="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _backgroundColor-surface3 _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 _gap-t-space-gap56 _pt-t-space-pad95589114 _pb-t-space-pad95589114 _pr-t-space-pad1331704929 _pl-t-space-pad1331704929 ",Ci="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa1360334080 ",Ti=He(pe,{animation:"fastHeavy",enterStyle:{top:30,opacity:0},exitStyle:{top:30,opacity:0},width:"calc(100% - 48px)",backgroundColor:"$surface2",borderColor:"$surface3",borderWidth:1,borderRadius:"$rounded12",position:"absolute",top:40,zIndex:100,p:"$padding16",opacity:1,shadowColor:"$shadowColor",shadowOffset:{width:0,height:25},shadowOpacity:.2,shadowRadius:50});function ji({address:e,handleSelectAddress:t}){const{t:r}=q(),i=(0,d.useMemo)(()=>{let a=go({address:e,withEVMChecksum:!0,platform:_o.EVM});if(!a)try{a=Co(e)}catch{a=null}return a},[e]);return(0,o.jsx)(Ti,{children:i?(0,o.jsx)(le,{onPress:()=>t(i),children:(0,o.jsx)(k,{variant:"body2",children:i})}):(0,o.jsx)(k,{variant:"body2",color:"$neutral2",children:r("position.addingHook.invalidAddress")})})}function Ai(){const{t:e}=q(),[t,r]=(0,d.useState)(!1),i=(0,d.useCallback)(c=>r(c),[]),n=(0,d.useRef)(null);fo({node:n,handler:t?()=>i(!1):void 0});const[a,m]=(0,d.useState)(!1),{hook:f}=Zt(),{positionState:{hook:s,fee:u,protocolVersion:g},setPositionState:l}=fe(),[_,j]=(0,d.useState)(!!s),[w,P]=(0,d.useState)(s??""),y=(0,d.useCallback)(c=>{l(p=>({...p,hook:c,userApprovedHook:c}))},[l]);(0,d.useEffect)(()=>{f&&g===S.V4&&(l(c=>({...c,hook:f})),j(!0))},[f,g,l]);const T=(0,d.useCallback)(()=>{Me(u)&&l(c=>({...c,fee:Mt.fee})),j(!1),P(""),y(void 0)},[u,y,l]),I=Pt(s);if((0,d.useEffect)(()=>{I&&!s&&T()},[s,T,I]),_){const c=t&&w;return(0,o.jsxs)(o.Fragment,{children:[a&&(0,o.jsx)(Xt,{isOpen:a,address:w,onClose:()=>m(!1),onClearHook:()=>{j(!1),P("")},onContinue:()=>y(w)}),s?(0,o.jsxs)("div",{className:Ci,children:[(0,o.jsx)(le,{onPress:()=>{j(!0),y(void 0)},children:(0,o.jsxs)("div",{className:yi,children:[(0,o.jsx)(De,{size:"$icon.20",color:"$neutral1"}),(0,o.jsx)(k,{variant:"buttonLabel3",children:Rt(s)})]})}),(0,o.jsx)(le,{onPress:T,children:(0,o.jsx)(k,{variant:"buttonLabel4",color:"$neutral2",children:e("common.clear")})})]}):(0,o.jsxs)("div",{ref:n,className:Si,children:[(0,o.jsx)(Zo,{autoFocus:!0,placeholder:e("liquidity.hooks.address.input"),autoCapitalize:"none",color:"$neutral1",fontFamily:"$subHeading",fontSize:at.body2.fontSize,fontWeight:at.body2.fontWeight,lineHeight:24,maxLength:42,numberOfLines:1,px:"$spacing16",py:5,returnKeyType:"done",width:"100%",borderWidth:1.5,borderColor:"$neutral3",borderRadius:"$rounded12",focusStyle:{borderColor:"$neutral3"},hoverStyle:{borderColor:"$neutral3"},value:w,onChangeText:P,onFocus:()=>i(!0)}),(0,o.jsx)(ao,{size:"xsmall",emphasis:"secondary",onPress:()=>{j(!1),P("")},icon:(0,o.jsx)(lo,{})}),c&&(0,o.jsx)(ji,{address:w,handleSelectAddress:p=>{P(p),m(!0)}})]})]})}return(0,o.jsx)(Qt,{title:e("position.addHook"),Icon:De,onPress:()=>j(!0),tooltipText:e("position.addHook.tooltip"),elementName:Te.AddHook})}xo();ho();function ki({chainId:e,protocolVersion:t,sdkCurrencies:r,withDynamicFeeTier:i=!1,hook:n}){const{t:a}=q(),{formatPercent:m}=$e(),{data:f}=zt({chainId:e,protocolVersions:[t],token0:de(r.TOKEN0),token1:de(r.TOKEN1),hooks:n},!!(e&&r.TOKEN0&&r.TOKEN1));return(0,d.useMemo)(()=>{const s=f==null?void 0:f.pools.reduce((g,l)=>et.from(l.totalLiquidityUsd.split(".")[0]??"0").add(g),et.from(0)),u={};if(f&&s&&r.TOKEN0&&r.TOKEN1)for(const g of f.pools){const l=W(g.fee,g.isDynamicFee),_=Number(g.totalLiquidityUsd.split(".")[0]??"0"),j=s.isZero()?new Ye(0,100):new Ye(_,s.toString());u[l]?(u[l].totalLiquidityUsd+=_,u[l].percentage=u[l].percentage.add(j)):u[l]={id:g.poolId,fee:{isDynamic:g.isDynamicFee,feeAmount:g.fee,tickSpacing:g.tickSpacing},formattedFee:g.isDynamicFee?a("fee.dynamic"):m(g.fee/mo,nr),totalLiquidityUsd:_,percentage:j,tvl:g.totalLiquidityUsd,created:!0,boostedApr:g.boostedApr}}return{feeTierData:lr({feeTiers:u,defaultFeeData:Object.values(sr({chainId:e,dynamicFeeTierEnabled:i,protocolVersion:t})),formatPercent:m,formattedDynamicFeeTier:a("fee.dynamic")}),hasExistingFeeTiers:Object.values(u).length>0}},[f,r,e,i,m,t,a])}const wi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row ",Ii="  _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _display-flex _gap-t-space-gap1569 ",Di="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa1360334080 _mt-t-space-spa94665589 _pt-t-space-spa1360334080 _pr-t-space-spa1360334080 _pb-t-space-spa1360334080 _pl-t-space-spa1360334080 _backgroundColor-accent2 _borderBottomLeftRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _width-10037  _pt-_sm_t-space-spa94665591 _pr-_sm_t-space-spa94665591 _pb-_sm_t-space-spa94665591 _pl-_sm_t-space-spa94665591 _gap-_sm_t-space-spa94665591",Pi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-center _borderTopLeftRadius-t-radius-ro840690004 _borderTopRightRadius-t-radius-ro840690004 _borderBottomRightRadius-t-radius-ro840690004 _borderBottomLeftRadius-t-radius-ro840690004 _backgroundColor-surface3 _pr-7px _pl-7px ",Oi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-center _borderTopLeftRadius-t-radius-ro840690004 _borderTopRightRadius-t-radius-ro840690004 _borderBottomRightRadius-t-radius-ro840690004 _borderBottomLeftRadius-t-radius-ro840690004 _backgroundColor-surface3 _pr-7px _pl-7px _pt-2px _pb-2px  _display-_md_none",Ei="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap56 _alignItems-center ",Ni="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _flexShrink-1 _flexDirection-column _gap-t-space-gap52 _flexGrow-1 _minWidth-0px ",Ri="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa1360334047 _justifyContent-space-betwe3241 _alignItems-center _pt-t-space-spa1360334080 _pb-t-space-spa1360334080 _pr-t-space-spa1360334076 _pl-t-space-spa1360334076 ",Bi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 _borderTopWidth-t-space-spa94665586 _borderRightWidth-t-space-spa94665586 _borderBottomWidth-t-space-spa94665586 _borderLeftWidth-t-space-spa94665586 _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid ",$i=" _pointerEvents-auto _opacity-1",Li=" _pointerEvents-none _opacity-0--5",Hi=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665593  ",Fi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334047 ",Ct="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _flexGrow-1 ",Vi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap1573  _flexDirection-_md_column",zi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _flexGrow-1 ",Mi="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap1573 _pt-t-space-spa94665589 _pb-t-space-spa94665589 _alignItems-center ",Wi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334080 ",qi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334076 ",Ee="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",Ki="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _width-10037 _alignItems-flex-end ",Ui="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _mt-t-space-spa1360334076 _gap-t-space-spa94665587 _alignItems-flex-end ",Zi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-10px _justifyContent-space-betwe3241 ",Gi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665593 ",Tt=({currencyInfo:e,onPress:t})=>{const{t:r}=q(),i=e==null?void 0:e.currency;return(0,o.jsx)(Xe,{emphasis:e?void 0:"primary",onPress:t,elementPositioning:"grouped",isExpanded:!1,icon:i?(0,o.jsx)(Fo,{size:Ie.icon24,chainId:i.chainId,name:i.name,symbol:i.symbol,url:e.logoUrl}):void 0,children:(0,o.jsx)(Xe.Text,{color:i?"$neutral1":"$surface1",children:i?i.symbol:r("fiatOnRamp.button.chooseToken")})})},Qi=He(pe,{flex:1,width:"100%",p:"$spacing12",gap:"$spacing8",borderRadius:"$rounded12",borderWidth:1,borderColor:"$surface3",position:"relative",...Ve});function jt(e,t){return t===S.V2?!!(e&&!Wt.includes(e)):t===S.V4?Vt(e):!1}const Ji=({feeTier:e,selected:t,onSelect:r,isLpIncentivesEnabled:i})=>{const{t:n}=q(),{formatNumberOrString:a,formatPercent:m}=$e();return(0,o.jsxs)(Qi,{onPress:()=>r(e.value),background:t?"$surface3":"$surface1",justifyContent:"space-between",children:[(0,o.jsxs)("div",{className:Gi,children:[(0,o.jsxs)("div",{className:Zi,children:[(0,o.jsx)(k,{variant:"buttonLabel3",children:e.value.isDynamic?n("common.dynamic"):m(e.value.feeAmount/Et,4)}),t&&(0,o.jsx)(so,{size:"$icon.16"})]}),(0,o.jsx)(k,{variant:"body4",children:e.title})]}),(0,o.jsx)("div",{className:Ui,children:(0,o.jsxs)("div",{className:Ki,children:[(0,o.jsxs)("div",{className:Ee,children:[(0,o.jsxs)(k,{variant:"body4",color:"$neutral2",children:[e.tvl==="0"?"0":a({value:e.tvl,type:Po.FiatTokenStats})," ",n("common.totalValueLocked")]}),e.selectionPercent&&e.selectionPercent.greaterThan(0)&&(0,o.jsx)(k,{variant:"body4",color:"$neutral2",children:n("fee.tier.percent.select",{percentage:m(e.selectionPercent.toSignificant(),3)})})]}),i&&e.boostedApr!==void 0&&e.boostedApr>0&&(0,o.jsx)(Pe,{lpIncentiveRewardApr:e.boostedApr,isSmall:!0})]})})]})},Xi=[];function ks({currencyInputs:e,setCurrencyInputs:t,onContinue:r,tokensLocked:i,...n}){const{useParsedQueryString:a}=co(),m=a(),{formatPercent:f}=$e(),{t:s}=q(),{setSelectedChainId:u}=Lt(),g=Eo(),[l,_]=(0,d.useState)(!1),[j,w]=(0,d.useState)(!1),P=Io(ko.LpIncentives),y=wo({config:Ao.AllowedV4WethHookAddresses,key:jo.HookAddresses,defaultValue:Xi}),{positionState:{hook:T,userApprovedHook:I,fee:c},setPositionState:p,protocolVersion:h,creatingPoolOrPair:C,currencies:N,poolOrPair:O,setFeeTierSearchModalOpen:D}=fe(),v=e.tokenA,A=e.tokenB,[b,H]=(0,d.useState)(void 0),[z,E]=(0,d.useReducer)(x=>!x,!1),U=jt(v==null?void 0:v.chainId,h)||jt(A==null?void 0:A.chainId,h),ie=C||O,me=(0,d.useCallback)(x=>{if(b===void 0)return;const B=b==="tokenA"?"tokenB":"tokenA",F=e[B],ro=x.isNative?x.wrapped:x,io=F!=null&&F.isNative?F.wrapped:F;if(u(x.chainId),tt(x,F)||tt(ro,io)){t(te=>({...te,[B]:void 0,[b]:x}));return}if(F&&F.chainId!==x.chainId){t(te=>({...te,[B]:void 0,[b]:x}));return}switch(b){case"tokenA":case"tokenB":xe(!1),t(te=>({...te,[b]:x}));break;default:break}},[b,t,e,u]),_e=(0,d.useCallback)(x=>{p(B=>({...B,fee:x})),st(rt.SelectLiquidityPoolFeeTier,{action:dt.Manual,fee_tier:x.feeAmount,...g})},[p,g]),{feeTierData:K,hasExistingFeeTiers:ne}=ki({chainId:v==null?void 0:v.chainId,protocolVersion:h,sdkCurrencies:N.sdk,hook:T??Ot}),he=(0,d.useMemo)(()=>Object.values(K).some(x=>x.boostedApr&&x.boostedApr>0)&&P,[K,P]),[Ue,xe]=(0,d.useState)(!1),Z=(0,d.useMemo)(()=>{if(ne&&Object.keys(K).length>0)return Object.values(K).reduce((x,B)=>B.percentage.greaterThan(x.percentage)?B:x)},[ne,K]);(0,d.useEffect)(()=>{xe(!1)},[I]),(0,d.useEffect)(()=>{const x=m.feeTier||m.fee;Z&&!Ue&&!x&&(xe(!0),p(B=>({...B,fee:Z.fee})),st(rt.SelectLiquidityPoolFeeTier,{action:dt.Recommended,fee_tier:Z.fee.feeAmount,...g}))},[Z,Ue,m,p,g]);const{chains:ge}=Dt(),Yt=(0,d.useMemo)(()=>h===S.V4?ge.filter(x=>!Vt(x)):h===S.V2?ge.filter(x=>Wt.includes(x)):void 0,[h,ge]),eo=()=>{if(se){w(!0);return}T!==I?_(!0):r()},se=(0,d.useMemo)(()=>{if(h!==S.V4){w(!1);return}if(T&&y.includes(T))return;const x=v&&ke[v.chainId];if(v&&(x!=null&&x.equals(v))){const F=we(v.chainId);return{wrappedToken:v,nativeToken:F,swapUrlParams:nt({chainId:v.chainId,inputCurrency:v,outputCurrency:F})}}const B=A&&ke[A.chainId];if(A&&(B!=null&&B.equals(A))){const F=we(A.chainId);return{wrappedToken:A,nativeToken:F,swapUrlParams:nt({chainId:A.chainId,inputCurrency:A,outputCurrency:F})}}w(!1)},[v,A,h,T,y]),Ze=ct(ot(v)),Ge=ct(ot(A)),to=ht(Ze,h),oo=ht(Ge,h),Qe=to||oo,ve=U||!!Qe,ee=(0,d.useMemo)(()=>{if(!P||h!==S.V4)return;const x=Object.values(K).find(B=>W(B.fee.feeAmount,B.fee.isDynamic)===W(c.feeAmount,c.isDynamic));return x!=null&&x.boostedApr&&x.boostedApr>0?x.boostedApr:void 0},[P,h,K,c.feeAmount,c.isDynamic]),Je=ar({chainId:v==null?void 0:v.chainId,feeTierData:K,protocolVersion:h});return(0,o.jsxs)(o.Fragment,{children:[T&&(0,o.jsx)(Xt,{isOpen:l,address:T,onClose:()=>_(!1),onClearHook:()=>p(x=>({...x,hook:void 0})),onContinue:()=>{p(x=>({...x,userApprovedHook:T})),r()}}),(0,o.jsxs)(vo,{children:[(0,o.jsxs)(mr,{...n,children:[(0,o.jsx)("div",{className:qi,children:(0,o.jsxs)("div",{className:Wi,children:[(0,o.jsxs)("div",{className:Ee,children:[(0,o.jsx)(k,{variant:"subheading1",children:s(i?"pool.tokenPair":"pool.selectPair")}),(0,o.jsx)(k,{variant:"body3",color:"$neutral2",children:s(i?"position.migrate.liquidity":"position.provide.liquidity")})]}),i&&v&&A?(0,o.jsxs)("div",{className:Mi,children:[(0,o.jsx)(Qo,{currencies:[v,A],size:44}),(0,o.jsx)("div",{className:zi,children:(0,o.jsxs)(k,{variant:"heading3",children:[v.symbol," / ",A.symbol]})})]}):(0,o.jsxs)("div",{className:Vi,children:[(0,o.jsx)("div",{className:Ct,children:(0,o.jsx)(Tt,{currencyInfo:Ze,onPress:()=>H("tokenA")})}),(0,o.jsx)("div",{className:Ct,children:(0,o.jsx)(Tt,{currencyInfo:Ge,onPress:()=>H("tokenB")})})]}),(0,o.jsx)(At,{isUnsupportedTokenSelected:U,protocolVersion:h,wrappedNativeWarning:void 0,fotToken:Qe}),!ve&&h===S.V4&&(0,o.jsx)(Ai,{})]})}),(0,o.jsxs)("div",{className:Fi,children:[(0,o.jsxs)("div",{className:Ee,children:[(0,o.jsx)(k,{variant:"subheading1",children:(0,o.jsx)(Q,{i18nKey:"fee.tier"})}),(0,o.jsx)(k,{variant:"body3",color:"$neutral2",children:h===S.V2?s("fee.tier.description.v2"):s("fee.tier.description")})]}),h!==S.V2&&(0,o.jsxs)("div",{className:Le(""+(Hi+(ve?Li:$i))),children:[(0,o.jsxs)("div",{className:Bi,children:[(0,o.jsxs)("div",{className:Ri,children:[(0,o.jsxs)("div",{className:Ni,children:[(0,o.jsxs)("div",{className:Ei,children:[(0,o.jsx)(k,{variant:"subheading2",color:"$neutral1",children:Me(c)?(0,o.jsx)(Q,{i18nKey:"fee.tier.dynamic"}):(0,o.jsx)(Q,{i18nKey:"fee.tierExact",values:{fee:f(c.feeAmount/Et,4)}})}),W(c.feeAmount,c.isDynamic)===(Z&&W(Z.fee.feeAmount,Z.fee.isDynamic))?(0,o.jsx)(Ft,{text:s("fee.tier.recommended.description"),children:(0,o.jsx)("div",{className:Oi,children:(0,o.jsx)(k,{variant:"buttonLabel4",children:(0,o.jsx)(Q,{i18nKey:"fee.tier.highestTvl"})})})}):Je.find(x=>W(x.value.feeAmount,x.value.isDynamic)===W(c.feeAmount,c.isDynamic))?null:(0,o.jsx)("div",{className:Pi,children:(0,o.jsx)(k,{variant:"buttonLabel4",children:(0,o.jsx)(Q,{i18nKey:"fee.tier.new"})})}),ee&&(0,o.jsx)(Pe,{lpIncentiveRewardApr:ee,$md:{display:"none"},isSmall:!0})]}),(0,o.jsx)(k,{variant:"body3",color:"$neutral2",children:(0,o.jsx)(Q,{i18nKey:"fee.tier.label"})}),ee&&(0,o.jsx)(Pe,{lpIncentiveRewardApr:ee,display:"none",$md:{display:"flex"},isSmall:!0})]}),(0,o.jsx)(ae,{fill:!1,isDisabled:!e.tokenA||!e.tokenB,size:"xsmall",maxWidth:"fit-content",emphasis:"secondary",onPress:E,$md:{width:32},icon:(0,o.jsx)(It,{direction:z?"up":"down",width:Ie.icon20,height:Ie.icon20}),iconPosition:"after",children:s(z?"common.less":"common.more")})]}),!ee&&he&&!z&&(0,o.jsxs)("div",{className:Di,children:[(0,o.jsx)(Fe,{color:"$accent1",size:"$icon.16"}),(0,o.jsx)(k,{variant:"body3",color:"$accent1",mt:"$spacing2",$sm:{variant:"body4",mt:"$spacing1"},children:s("pool.incentives.similarPoolHasRewards")}),(0,o.jsx)(k,{mt:"$spacing2",variant:"body3",color:"$neutral1",$sm:{variant:"body4",mt:"$spacing1"},...Ve,onPress:E,children:s("pool.incentives.switchPools")})]})]}),(0,o.jsx)($t,{open:z,children:(0,o.jsxs)("div",{className:Ii,children:[(0,o.jsx)(pe,{"$platform-web":{display:"grid"},gridTemplateColumns:he?"repeat(2, 1fr)":"repeat(4, 1fr)",$md:{gridTemplateColumns:he?"repeat(1, 1fr)":"repeat(2, 1fr)"},gap:10,children:Je.map(x=>(0,o.jsx)(Ji,{feeTier:x,selected:W(x.value.feeAmount,x.value.isDynamic)===W(c.feeAmount,c.isDynamic),onSelect:_e,isLpIncentivesEnabled:P},x.value.feeAmount))}),h===S.V4&&(0,o.jsx)(Qt,{title:s("fee.tier.search"),Icon:bo,onPress:()=>{D(!0)}})]})})]})]}),(0,o.jsx)(Xr,{}),(0,o.jsx)("div",{className:wi,children:(0,o.jsx)(ae,{size:"large",onPress:eo,loading:!!(!ie&&v&&A),isDisabled:!ie||ve||j&&!!se,children:s("common.button.continue")},"SelectTokensStep-continue")}),j&&se&&(0,o.jsx)(At,{isUnsupportedTokenSelected:!1,protocolVersion:h,wrappedNativeWarning:se,fotToken:void 0})]}),(0,o.jsx)(Jo,{isOpen:b!==void 0,onDismiss:()=>H(void 0),switchNetworkAction:No.LP,onCurrencySelect:me,chainIds:Yt})]})]})}function At({isUnsupportedTokenSelected:e,protocolVersion:t,wrappedNativeWarning:r,fotToken:i}){const{t:n}=q(),a=uo(),{setPositionState:m}=fe();return e?(0,o.jsx)(Se,{errorMessage:!0,title:t===S.V2?n("position.create.v2unsupportedChain"):n("position.migrate.v4unsupportedChain"),description:n("position.create.unsupportedToken.description")}):r?(0,o.jsx)(Se,{isWarning:!0,errorMessage:!0,title:n("position.wrapped.warning",{nativeToken:r.nativeToken.symbol}),description:n("position.wrapped.warning.info",{nativeToken:r.nativeToken.symbol,wrappedToken:r.wrappedToken.symbol}),action:n("position.wrapped.unwrap",{wrappedToken:r.wrappedToken.symbol}),onPress:()=>a(`/swap${r.swapUrlParams}`)}):i?(0,o.jsx)(Se,{errorMessage:!0,title:n("token.safety.warning.fotLow.title"),description:n("position.fot.warning",{token:i.currency.symbol}),action:n("position.fot.warning.cta"),onPress:()=>{a("/positions/create/v2"),m({...Mt,protocolVersion:S.V2})}}):null}export{mr as Container,As as CreateLiquidityContextProvider,Xr as CreatingPoolInfo_default,Tt as CurrencySelector,yt as DEFAULT_DEPOSIT_STATE,St as DEFAULT_PRICE_RANGE_STATE,ks as SelectTokensStep,ki as useAllFeeTierPoolData,fe as useCreateLiquidityContext,Zt as useLiquidityUrlState};
