import{__toESM as w}from"./chunk-DgAfPHQg.js";import{require_react as E}from"./react-CNoFhWkx.js";var n=w(E());function k(e,u){var r=(0,n.useRef)(null),c=(0,n.useRef)(null);c.current=u;var t=(0,n.useRef)(null);(0,n.useEffect)(function(){f()});var f=(0,n.useCallback)(function(){var i=t.current,a=c.current,o=i||(a?a instanceof Element?a:a.current:null);r.current&&r.current.element===o&&r.current.subscriber===e||(r.current&&r.current.cleanup&&r.current.cleanup(),r.current={element:o,subscriber:e,cleanup:o?e(o):void 0})},[e]);return(0,n.useEffect)(function(){return function(){r.current&&r.current.cleanup&&(r.current.cleanup(),r.current=null)}},[]),(0,n.useCallback)(function(i){t.current=i,f()},[f])}function S(e,u,r){return e[u]?e[u][0]?e[u][0][r]:e[u][r]:u==="contentBoxSize"?e.contentRect[r==="inlineSize"?"width":"height"]:void 0}function _(e){e===void 0&&(e={});var u=e.onResize,r=(0,n.useRef)(void 0);r.current=u;var c=e.round||Math.round,t=(0,n.useRef)(),f=(0,n.useState)({width:void 0,height:void 0}),i=f[0],a=f[1],o=(0,n.useRef)(!1);(0,n.useEffect)(function(){return o.current=!1,function(){o.current=!0}},[]);var v=(0,n.useRef)({width:void 0,height:void 0}),h=k((0,n.useCallback)(function(s){return(!t.current||t.current.box!==e.box||t.current.round!==c)&&(t.current={box:e.box,round:c,instance:new ResizeObserver(function(g){var R=g[0],b=e.box==="border-box"?"borderBoxSize":e.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",x=S(R,b,"inlineSize"),m=S(R,b,"blockSize"),l=x?c(x):void 0,d=m?c(m):void 0;if(v.current.width!==l||v.current.height!==d){var z={width:l,height:d};v.current.width=l,v.current.height=d,r.current?r.current(z):o.current||a(z)}})}),t.current.instance.observe(s,{box:e.box}),function(){t.current&&t.current.instance.unobserve(s)}},[e.box,c]),e.ref);return(0,n.useMemo)(function(){return{ref:h,width:i.width,height:i.height}},[h,i.width,i.height])}export{_ as useResizeObserver};
