import{__toESM as Z}from"./chunk-DgAfPHQg.js";import"./preload-helper-CaakwtpC.js";import"./i18next-DD3sT7R5.js";import{require_react as ao}from"./react-CNoFhWkx.js";import{Button as lo,SegmentedControl as co,TouchableArea as po,Trans as N,useIsTouchDevice as Ee}from"./src-DOOtfpHS.js";import{useTranslation as rt}from"./useTranslation-BotBuoJf.js";import"./index.web-BqgtOHN3.js";import{useCurrentLanguage as uo}from"./constants-CrXoXfFH.js";import"./es-Iwj7vF3u.js";import"./react-dom-xovCOntK.js";import"./react-is-BJXMVkew.js";import"./cache-BFZkIToX.js";import"./dist-Q7olfaoJ.js";import"./tslib.es6-Dbpxy1u8.js";import"./dist-QCpUvRkJ.js";import{Link as Wt,useLocation as mo,useNavigate as Ht,useParams as xo}from"./chunk-QMGIS6GS-B91ZVkXt.js";import{require_jsx_runtime as vo}from"./jsx-runtime-D7bMTQeG.js";import{useEnabledChains as J}from"./useEnabledChains-DuB86c95.js";import{logger as jt}from"./hooks-BXO4d1DJ.js";import"./dist-ceZDlR1V.js";import"./analytics.web-DLc1_wTk.js";import"./redux-toolkit.esm-BnRUBto_.js";import"./api-BsCrUy1C.js";import"./state-BVuwBOpM.js";import"./utils-CK6a47NA.js";import{BIPS_BASE as ho,Chain as fo,CurrencyAmount as ft,MULTICALL_ADDRESSES as _o,NONFUNGIBLE_POSITION_MANAGER_ADDRESSES as yo,Percent as go,PoolTransactionType as ie,ProtocolVersion as F,Token as At,TokenStandard as bo,UniverseChainId as Ct,V3_CORE_FACTORY_ADDRESSES as jo,ZERO_ADDRESS as To,fromGraphQLChain as ko,getChainInfo as wo,init_jsbi as So,init_sdk_core_esm as pt,jsbi_default as G,toGraphQLChain as Pt,usePoolVolumeHistoryQuery as Co,useUniswapPricesQuery as Po,useV2PairQuery as $o,useV2PairTransactionsQuery as Do,useV3PoolQuery as Io,useV3PoolTransactionsQuery as Ao,useV4PoolQuery as Lo,useV4PoolTransactionsQuery as Ro}from"./utils-BX1Fu73x.js";import"./bn-D7somgUb.js";import{BigNumber as Me,init_lib$5 as Eo}from"./lib-DPFIyRke.js";import{INTERNAL_JSON_RPC_ERROR_CODE as Mo}from"./misc-BMnlqqV4.js";import{currencyId as ne,isEVMChain as No}from"./currencyId-Ci6selsx.js";import"./constants-vVZBLDwL.js";import"./constants-CZ9iND_H.js";import"./slice-DimuiOR8.js";import"./config-C4KrHqHG.js";import"./time-D_OqcZ4M.js";import"./wallet-gHLp87c6.js";import"./features-yACC1hVw.js";import"./interface-BdpC4qOF.js";import{TokenWarningModal as Bo}from"./TokenSelector-CNVK2itZ.js";import"./element-Wnp4RkdY.js";import{ModalName as Vo}from"./modal-Dvm06CN4.js";import{InterfacePageName as Oo}from"./page-zDkoCQe4.js";import"./uniswap-Bm-6KILn.js";import"./isAddress-P2vaZgmG.js";import"./chain-ghiO403o.js";import"./slice-cfC6NcyN.js";import"./node-C_BraYgX.js";import"./formatUnits-DkyMpOD7.js";import"./_u64-b_viZRi_.js";import"./sha2-Jt0E41S_.js";import"./sha256-BqbhXHGu.js";import"./call-CTDbaN-t.js";import"./parseAccount-CRyN5swV.js";import"./encodeFunctionData-CD63gkvM.js";import"./public-fap09Zv6.js";import"./stringify-B82RFruy.js";import"./rpc-nQR4Ijs4.js";import"./dist-CBK-d0jO.js";import"./hmac-D-QTodfL.js";import{ExplorerDataType as tt,getExplorerLink as Tt}from"./linking-D29RyAR8.js";import"./lib-CKG8APVv.js";import"./lib-XGdDYWzD.js";import"./V3DutchOrderTrade-Cl7yELmp.js";import{NonfungiblePositionManager_default as Fo,Pool as zo,Position as Wo,computePoolAddress as Ho,init_NonfungiblePositionManager as Uo,init_v3_sdk_esm as Qo}from"./v3-sdk.esm-CHH6GWR1.js";import"./hash-05APZTFm.js";import"./inherits_browser-Dqx8HagI.js";import"./useQuery-D_ZCw8XG.js";import"./lib-CWHZrl0T.js";import"./v2-sdk.esm-CIiDMO7F.js";import"./lib-BncBk3QF.js";import{require_utils as Ne}from"./utils-7WDx1QGa.js";import"./lib-CgeiDO5B.js";import"./lib-Dj-AwQVD.js";import"./types-DbOmsKtk.js";import"./slice-CYdI68Yo.js";import"./defaultOptions-ENwqzwHj.js";import"./getCurrencyAmount-vvZpAzIm.js";import{isAddress as Be,shortenAddress as Ut}from"./addresses-D56PBUHX.js";import{deserializeToken as qo,serializeToken as Ko}from"./currency-DIOEzjz2.js";import"./actions-BvAnf7JG.js";import"./reducer-26KeQlno.js";import{require_ms as Qt}from"./ms-BqmEYo6j.js";import"./configs-B4dDdw82.js";import{FeatureFlags as Ve,useFeatureFlag as Oe}from"./hooks-Bp0VtWbX.js";import"./statsig-B7I9iQRf.js";import"./usePollingIntervalByChain-YBOfXXzb.js";import{RPC_PROVIDERS as Go}from"./providers-BELGpWsr.js";import{erc20_default as Fe}from"./erc20-CdGGKIp0.js";import{getContract as Yo}from"./getContract-CMwwszTa.js";import{WRAPPED_NATIVE_CURRENCY as ze,nativeOnChain as Xo}from"./objects-DlLkJwrJ.js";import"./analytics-Ccvj1WVk.js";import"./send.web-CrSXW2rw.js";import"./TradingApiClient-Cp_0ez5S.js";import{Swap as Zo,TokenWarningCard as re}from"./Swap-DKOTvxFh.js";import"./ProtocolItems-DhZWSiXS.js";import"./selectors-BwkayGDl.js";import{useUSDCPrice as We}from"./useUSDCPrice-HO7Wgroz.js";import{parseRestProtocolVersion as Jo}from"./balances-DV0Wvmri.js";import"./getCurrencySafetyInfo-BHD1ohD-.js";import"./mutation-CRQvRc5_.js";import"./infiniteQueryBehavior-C10I_UVS.js";import{useGetPositionsQuery as ti}from"./getPositions-B2zd3dQ2.js";import"./connector-Cw8HJLtm.js";import"./queryOptions-P48mrm5X.js";import"./connect-transport-9OnIgPz5.js";import"./proto3-DkSQZto4.js";import"./embeddedWallet-BdHUTaHg.js";import"./use-query-8AOGtvlP.js";import"./promise-client-BYLTs0DC.js";import"./urls-kwiZbYPW.js";import"./createApiClient-BjXZMbEB.js";import"./constants-D9cStT7K.js";import"./base-DVpWJ4NW.js";import{ProtocolVersion as ei}from"./types_pb-yZxlo4b1.js";import"./hooks-Dhx5teK4.js";import"./transactionDetails-BsNW_jus.js";import{NumberType as q}from"./types-JuyYLR0O.js";import{useAppFiatCurrency as oi,useLocalizationContext as ut}from"./LocalizationContext-B31peW1_.js";import"./getAlertColor-J5DrJWHv.js";import"./currency-xm5i4cH7.js";import"./ethers-D2SIY1xg.js";import{useIsSupportedChainIdCallback as ii}from"./useSupportedChainId-DskHoisQ.js";import"./useWallet-CL5owP9P.js";import"./TraceContext-Ddfk7zjz.js";import"./queryOptions-Dj3qRbwo.js";import"./types-7DAoWLTI.js";import"./analytics-UE3_EENu.js";import"./types-BSmAADNJ.js";import"./eventemitter3-DFes51ku.js";import"./eventemitter3-BHLpX1jX.js";import"./dist-BWRHWQ_J.js";import"./readContract-Cae4hIjn.js";import"./recoverAddress-oPdWABRo.js";import"./getBalance-TsPVbzB5.js";import"./localBatchGatewayRequest-CdT4Kija.js";import"./createBatchScheduler-BJBpfhFD.js";import"./createTransport-WEDNYdh5.js";import"./useEthersProvider-CBgc_azi.js";import"./http-CIklBnX8.js";import"./wagmiConfig-0BYSDqyO.js";import"./hashMessage-DdzTBpWL.js";import"./multicall-BYS6jvE9.js";import"./secp256k1-fbKD5lyl.js";import"./getAction-BBhbL9mE.js";import{useAccount as qt}from"./useAccount-C5hwiBwN.js";import"./config-CDfnfyHL.js";import"./useReadContracts-Orb8TypL.js";import"./wagmi-CsUiFCSO.js";import"./useSwitchChain-CY8eYAUF.js";import"./query-qNZtVuxH.js";import"./constants-CGJJmXwV.js";import{atom as ni,atomWithStorage as He,useAtom as Kt,useAtomValue as ri}from"./utils-CDaPKk14.js";import{Z_INDEX as Gt}from"./zIndex-CmEE31Ab.js";import"./passkey.web-DakcatU3.js";import"./hex-njd-4N-2.js";import"./slice-qANrfSbi.js";import"./noop-BDbB2pLB.js";import"./walletMeta-DaLhfhet.js";import"./signing-DH5GfhKu.js";import{i18n_default as yt}from"./i18n-CroUvoJw.js";import"./v4-D6Rlvprs.js";import"./errors-BaezSPLl.js";import"./swapErrorToUserReadableMessage-DgHZMHU-.js";import"./AccountDetails-pkaz6EG4.js";import"./lpIncentivesSaga-CyYcBLmn.js";import{Flex as Yt,Shine as Lt,Text as E,concatClassName as Ue,styled as Qe,useMedia as st}from"./Loader-D83W8G1W.js";import"./client-BlU1ozBP.js";import"./Anchor-B1nkrQbP.js";import"./Input-ClKbNpxm.js";import"./Checkbox-Id3GDHn8.js";import"./NetworkFee-D_F4jDwh.js";import"./AnimatePresencePager-Dk43KD9E.js";import"./HeightAnimator-DF8znv78.js";import"./getTradeSettingsDeadline-B3uZN4NF.js";import"./CurrencyInputPanel-CJ-UCFJ3.js";import{breakpoints as V}from"./breakpoints-B-pYqY7D.js";import"./urls-aCnKF23w.js";import"./useNewChainIds-CIAogFpa.js";import"./encode-utf8-DiSL6KQ9.js";import"./dijkstra-6umg7ymP.js";import"./UniconSVGs-CVEtuhJW.js";import"./NetworkFilter-ZFjNguMa.js";import"./AlertTriangleFilled-C9tf2eUJ.js";import"./ArrowDown-B8kFPZPX.js";import{LiquidityPositionCard as si}from"./LiquidityPositionCard-BpA_IBXB.js";import{calculateApr as ai}from"./state-DRfrbe8S.js";import"./Blocked-BNx3Epiv.js";import"./CheckmarkCircle-Znmo2ojy.js";import{CoinConvert as li}from"./CoinConvert-D8dLJ8GW.js";import"./CopyAlt-CU_LJNbN.js";import{LpIncentivesAprDisplay as Rt}from"./LpIncentivesAprDisplay-DAZ9W112.js";import"./ExternalLink-DO2F__JQ.js";import"./Eye-D482ahgC.js";import"./EyeOff-BiBJTOh0.js";import{LiquidityBarChartModel as di,TickTooltipContent as ci,useLiquidityBarData as pi,usePoolPriceChartData as ui}from"./LiquidityPositionRangeChart-CJw3rPyq.js";import"./InfoCircleFilled-CBAL5Wj0.js";import"./Lightning-BPcc3_Cc.js";import"./Minus-CNfbH3_0.js";import"./ThemeToggle-BcuKj11V.js";import"./MoreHorizontal-BC-VtLFW.js";import"./index.esm-CLP40SHA.js";import"./Passkey-Bey7xD4Z.js";import"./Person-B27R6hM-.js";import"./Plus-_LmEFxOC.js";import"./Pools-DKYxZO3F.js";import"./ReceiveAlt-nuO9D5GJ.js";import"./clipboard.web-CNSIHgMi.js";import"./SplitLogo-Ct--07LT.js";import"./LiquidityPositionInfo-Cs-PVI1A.js";import"./UniswapLogo-D1ayVSkF.js";import"./UniswapX-CtuHCpO-.js";import"./AnimatedFlex-BgzbJK30.js";import"./reducer-CcXO4HTO.js";import"./useSelectChain-CA5zoRWi.js";import{NATIVE_CHAIN_ID as it}from"./tokens-Dxd89cHj.js";import"./prices-BzyZhpWW.js";import"./useWallet-CpLwPvrh.js";import"./timing-DsWr56iv.js";import"./useIsUnichainFlashblocksEnabled-BbPYkimv.js";import"./uniswapx-DgS0k47c.js";import"./experiments-rc6XUB0U.js";import"./SwapFormStoreContext-3NrPQE3L.js";import"./useSwapFormStore-D1oVGbBf.js";import"./swapTxAndGasInfo-DxVAGFqc.js";import"./types-NWGai6aQ.js";import{useCurrencyInfo as se}from"./useCurrencyInfo-Bxa3J04d.js";import"./createEthersProvider-B5AW2bpJ.js";import"./reducer-1kwGyyVS.js";import"./constants-BNEwFtLH.js";import"./slice-CGCdMmTE.js";import"./actions-Budqlwp-.js";import"./slice-DoLbOto3.js";import"./slice-Crjw990S.js";import"./slice-CI92BTuM.js";import"./slice-CaJcHsUP.js";import"./usePrevious-CggM0Zir.js";import"./hooks-Muz170pO.js";import{getChainUrlParam as Xt,useChainIdFromUrlParam as qe}from"./chainParams-DIOvplzi.js";import{TimePeriod as Et,getTokenDetailsURL as kt,gqlToCurrency as K,supportedChainIdFromGQLChain as mi,toContractInput as ae,toHistoryDuration as xi,unwrapToken as Mt}from"./util-BZ6kLG7e.js";import"./useConversionTracking-9d_tCytj.js";import{UniswapInterfaceMulticall_default as vi}from"./UniswapInterfaceMulticall-DLE8QJ-2.js";import"./Arrow-DIna6t35.js";import"./TokenLogo-JlSSDr3Q.js";import"./hooks-CRfHBoLD.js";import"./use-transport-CPomNX05.js";import"./useModalState-BcPI2EiQ.js";import{useCurrency as le}from"./Tokens-HEKZ8edJ.js";import"./types-OmNOta2_.js";import"./useMultichainContext-BVmgxqO2.js";import"./UnitagsApiClient-CvShPRCK.js";import"./Identicon-SnsLMqUD.js";import"./api-u3dxy1Uz.js";import"./useIsWindowVisible-CtuFA8fK.js";import"./useBlockNumber-BeCJLIMW.js";import{ErrorBoundary as hi}from"./ErrorBoundary-oYzyK_hY.js";import"./useIsMobile-Cq3RSgOi.js";import{Ae as Ke,Xe as at,styled_components_default as C}from"./styled-components-DbVO3u5J.js";import{Text as Zt,ThemedText as X}from"./text-CK4eXdYc.js";import"./index.esm-D6PJCa7X.js";import"./CopyHelper-DOhhKKQB.js";import{copy_default as fi,useCopyClipboard as _i}from"./copy-bNdbH7uS.js";import{require_prop_types as yi}from"./prop-types-BL9JsGr9.js";import"./arrow-down-DCHNWUQ6.js";import"./check-8ct4mC1b.js";import{chevron_right_default as Nt}from"./chevron-right-fNEOKcTd.js";import"./info-HMx-E5JG.js";import{ActionButtonStyle as gi,ChartActionsContainer as bi,ChartHeader as Ge,ChartTypeDropdown as ji,DEFAULT_PILL_TIME_SELECTOR_OPTIONS as de,EtherscanLogo as Ye,ExplorerIcon as Xe,LoadingChart as Ti,MobileBottomBar as ki,PriceChartDelta as wi,PriceChartModel as Si,ShareButton as Ci,VolumeChart as Pi}from"./MobileBottomBar-CqxJ5qUR.js";import{Scrim as $i,plus_default as Di}from"./Scrim-CLHB7Sfw.js";import{x_default as Ii}from"./x-CjDIEWOj.js";import{ClickableStyle as _t,ClickableTamaguiStyle as Ze}from"./clickable-D5qUCIhr.js";import{EllipsisStyle as Jt,EllipsisTamaguiStyle as Ai}from"./ellipsis-DjwAKJIh.js";import{ExternalLink as te}from"./Links-Xomrvpth.js";import{ExploreTab as Li}from"./constants-B0Jk62hw.js";import"./tsafe-BS8OsPXq.js";import{useWeb3React as Ri}from"./web3reactShim-CQtxnXhb.js";import{Column_default as Y}from"./Column-ekA0cfjc.js";import{ScrollDirection as Ei,useDynamicMetatags as Mi,useScroll as Ni}from"./metatags-D5iocQQU.js";import{DeltaArrow as Bi}from"./Delta-_V0Ythbq.js";import"./useIsPage-CCVcHkKr.js";import{TestID as Vi}from"./testIDs-CxYpwoP6.js";import"./useCommonTokensOptionsWithFallback-7qZUIHia.js";import"./SwitchLocaleLink-BUGvLhIf.js";import"./styled-Cb09-IEr.js";import{Trace_default as Oi}from"./Trace-DgHN3Ak9.js";import"./Modal.web-DHbL39pN.js";import"./WarningModal-f8Gfhd_G.js";import"./InfoTooltip.web-CkgGEmd3.js";import"./assets-D-uPpcBZ.js";import"./LearnMoreLink-CrJtGK7U.js";import"./react-virtualized-auto-sizer.esm-5JBVmqYi.js";import"./MultichainContext-CEAgN3e0.js";import"./useGetPasskeyAuthStatus-QVLoUPch.js";import"./types-Ds0gKmju.js";import"./dismissNativeKeyboard.web-99F1bxCR.js";import"./TextInput-3sqL_9ZJ.js";import"./useDynamicFontSizing-DOxjEhTh.js";import"./wrap-ClUP-Vuk.js";import"./hooks-XT5i__xU.js";import"./toNumber-iK_F5vx6.js";import"./utils-LZMRiXFW.js";import"./InlineWarningCard-p0OrN1e9.js";import{DEFAULT_TICK_SPACING as Fi,V2_DEFAULT_FEE_TIER as zi}from"./pools-5GjP-hMy.js";import"./ContextMenuV2.web-DtsTwCPj.js";import"./useBooleanState-QNOWYlXb.js";import"./service-ExploreStatsService_connectquery-YoP81iJ5.js";import"./useDeviceDimensions-iftoqxuy.js";import"./types-Ctc23WnH.js";import"./isIFramed-Ir4iCEzS.js";import"./explore-CL40v3_c.js";import"./styles-nntGSkOP.js";import{Row_default as H}from"./Row-D0lmZ56K.js";import"./Badge-vnMif72r.js";import"./bundle.esm-B4P3X753.js";import"./api-PoolsService_connectquery-N1pfS4Yc.js";import{buildCurrencyKey as Bt,currencyKey as ct,currencyKeyFromGraphQL as Wi}from"./currencyKey-B-LQIyOE.js";import"./tryParseCurrencyAmount-Bt3FPZDG.js";import"./PortfolioLogo-C-reBpb6.js";import{CurrencyLogo as ee}from"./CurrencyLogo-CvvmRzOI.js";import{DoubleCurrencyLogo as wt}from"./DoubleLogo-D40dQ2P7.js";import{ReversedArrowsIcon as Hi}from"./iconExports-DR2SoqU0.js";import"./useOnClickOutside-B5O2_6zc.js";import{MouseoverTooltip as Ui,TooltipSize as Qi}from"./Tooltip-DPNhKWF2.js";import"./useInterval-7f86mkEJ.js";import"./polished.es-BASfrnSv.js";import"./useHoverProps-BdQsOXMz.js";import{LoadingBubble as nt}from"./loading-C4pQN7jn.js";import"./Portal-CDCMc_Hf.js";import{require_lib as qi}from"./lib-vcvVECAN.js";import"./colors-DAHeqJj_.js";import{ThemeProvider as Ki}from"./theme-BHMiWygR.js";import"./AdaptiveDropdown-Cv1C9ooR.js";import{Cell as Q,DISPLAYS as ce,Filter as Gi,FilterHeaderRow as Yi,Table as Xi,TableText as mt,TimePeriodDisplay as Zi,TimestampCell as Ji,createColumnHelper as tn,getTimePeriodFromDisplay as en}from"./Filter-Bbh2t7To.js";import{Chart as Je,ChartType as O,DataQuality as Vt,PriceChartType as on,checkDataQuality as nn,refitChartContentAtom as rn,withUTCTimestamp as sn}from"./util-CfowgtYu.js";import{getTokenOrZeroAddress as pe}from"./currency-Brc-ymXr.js";import"./protocolVersion-Djp_Gxjw.js";import{useGetPoolsByTokens as an}from"./networkSupportsV4-CXcYAtrx.js";import"./usePools-Bz9FGvMj.js";import"./getTickToPrice-BudeFeQp.js";import"./priceRangeInfo-DbHE3vOq.js";import{LP_INCENTIVES_REWARD_TOKEN as xt}from"./LPIncentiveFeeStatTooltip-CknsSvzz.js";import"./useLpIncentivesFormattedEarnings-Cp8RbAci.js";import"./feeTiers-D9BvLkmt.js";import{LiquidityPositionInfoBadges as ln}from"./LiquidityPositionInfoBadges-DdjNrqYk.js";import{getPositionUrl as dn}from"./getPositionUrl-Cmm1Puj7.js";import{parseRestPosition as cn}from"./parseFromRest-Dp36Fdyo.js";import{BreadcrumbNavContainer as pn,BreadcrumbNavLink as ue,CurrentPageBreadcrumb as un}from"./BreadcrumbNav-lC3fgSsx.js";import{DropdownSelector as mn}from"./DropdownSelector-CYN_6AdC.js";import{ChartSkeleton as me}from"./LoadingState-4OstYjDu.js";import"./utils-s6RXdTyR.js";import"./useDebounce-BRocP-mi.js";import"./useNativeCurrency-BDMzySGC.js";import{useColor as xe}from"./useColor-DAHloagH.js";var v=Z(ao()),gt=Z(yi());function Ot(){return Ot=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var i=arguments[o];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Ot.apply(this,arguments)}function xn(t,o){if(t==null)return{};var i=vn(t,o),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(o.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function vn(t,o){if(t==null)return{};var i={},r=Object.keys(t),s,l;for(l=0;l<r.length;l++)s=r[l],!(o.indexOf(s)>=0)&&(i[s]=t[s]);return i}var oe=(0,v.forwardRef)(function(t,o){var i=t.color,r=i===void 0?"currentColor":i,s=t.size,l=s===void 0?24:s,a=xn(t,["color","size"]);return v.createElement("svg",Ot({ref:o,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),v.createElement("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),v.createElement("polyline",{points:"15 3 21 3 21 9"}),v.createElement("line",{x1:"10",y1:"14",x2:"21",y2:"3"}))});oe.propTypes={color:gt.default.string,size:gt.default.oneOfType([gt.default.string,gt.default.number])};oe.displayName="ExternalLink";var hn=oe,ve=Z(Qt());function fn(t){if(!t)return;const o=new Date().getTime(),i=(o-(0,ve.default)("1d"))/1e3,r=(o-(0,ve.default)("2d"))/1e3,s=t.filter(a=>(a==null?void 0:a.timestamp)!==void 0&&a.timestamp>=i).reduce((a,d)=>a+d.value,0),l=t.filter(a=>(a==null?void 0:a.timestamp)!==void 0&&a.timestamp>=r&&a.timestamp<i).reduce((a,d)=>a+d.value,0);return(s-l)/l*100}function _n(t,o){const{defaultChainId:i}=J(),r=Pt(o??i),{loading:s,error:l,data:a}=Lo({variables:{chain:r,poolId:t},errorPolicy:"all"}),{loading:d,error:n,data:c}=Io({variables:{chain:r,address:t},errorPolicy:"all"}),{loading:h,error:b,data:m}=$o({variables:{chain:r,address:t},skip:!o,errorPolicy:"all"});return(0,v.useMemo)(()=>{var y,g,k,$,j,D,T,_,u,p,x,w,P,I,A;const S=!!(l||n||b),L=!!(s||d||h),f=(a==null?void 0:a.v4Pool)??(c==null?void 0:c.v3Pool)??(m==null?void 0:m.v2Pair)??void 0,R={feeAmount:(a==null||(y=a.v4Pool)===null||y===void 0?void 0:y.feeTier)??(c==null||(g=c.v3Pool)===null||g===void 0?void 0:g.feeTier)??zi,tickSpacing:Fi,isDynamic:(a==null||(k=a.v4Pool)===null||k===void 0?void 0:k.isDynamicFee)??!1},B=(a==null||($=a.v4Pool)===null||$===void 0?void 0:$.poolId)??(c==null||(j=c.v3Pool)===null||j===void 0?void 0:j.address)??(m==null||(D=m.v2Pair)===null||D===void 0?void 0:D.address)??t;return{data:f?{idOrAddress:B,txCount:f.txCount,protocolVersion:f.protocolVersion,token0:f.token0,tvlToken0:f.token0Supply,token0Price:((T=f.token0)===null||T===void 0||(T=T.project)===null||T===void 0||(T=T.markets)===null||T===void 0||(T=T[0])===null||T===void 0||(T=T.price)===null||T===void 0?void 0:T.value)??((_=f.token0)===null||_===void 0||(_=_.market)===null||_===void 0||(_=_.price)===null||_===void 0?void 0:_.value),token1:f.token1,tvlToken1:f.token1Supply,token1Price:((u=f.token1)===null||u===void 0||(u=u.project)===null||u===void 0||(u=u.markets)===null||u===void 0||(u=u[0])===null||u===void 0||(u=u.price)===null||u===void 0?void 0:u.value)??((p=f.token1)===null||p===void 0||(p=p.market)===null||p===void 0||(p=p.price)===null||p===void 0?void 0:p.value),feeTier:R,volumeUSD24H:(x=f.volume24h)===null||x===void 0?void 0:x.value,volumeUSD24HChange:fn((w=f.historicalVolume)===null||w===void 0?void 0:w.concat()),tvlUSD:(P=f.totalLiquidity)===null||P===void 0?void 0:P.value,tvlUSDChange:(I=f.totalLiquidityPercentChange24h)===null||I===void 0?void 0:I.value,hookAddress:"hook"in f?(A=f.hook)===null||A===void 0?void 0:A.address:void 0,rewardsCampaign:"rewardsCampaign"in f?f.rewardsCampaign:void 0}:void 0,error:S,loading:L}},[m==null?void 0:m.v2Pair,c==null?void 0:c.v3Pool,a==null?void 0:a.v4Pool,b,n,l,h,d,s,t])}pt();So();var yn=Z(Qt()),e=Z(vo());const gn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _flexShrink-1 _flexDirection-column _flexGrow-1 _gap-t-space-gap56 _minWidth-180px _mt-t-space-spa1360334051  _minWidth-_md_150px",he="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _width-10037 ",fe="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _alignItems-flex-end ",bn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _flexShrink-1 _flexDirection-column _flexGrow-1 _gap-t-space-gap56 _minWidth-180px  _minWidth-_md_150px",jn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _mb-24px _mt--24px _pt-t-space-spa1360334051 _pr-t-space-spa1360334051 _pb-t-space-spa1360334051 _pl-t-space-spa1360334051 _borderTopLeftRadius-t-space-spa1360334051 _borderTopRightRadius-t-space-spa1360334051 _borderBottomRightRadius-t-space-spa1360334051 _borderBottomLeftRadius-t-space-spa1360334051 _backgroundColor-surface2 _width-10037  _mt-_xl_0px _mb-_xl_0px";function Tn({startTimestamp:t,endTimestamp:o,locale:i}){if(!t||!o)return"";const r=new Date(t*1e3),s=new Date(o*1e3),l={month:"short",day:"numeric"},a=new Intl.DateTimeFormat(i,l).format(r),d=new Intl.DateTimeFormat(i,l).format(s);return`${a} - ${d}`}const kn=(t,o)=>{if(!t)return"";const i=Date.now(),s=t*1e3-i;if(s<=0)return o("common.ended");const l=s/(0,yn.default)("1d");return l<1?`< 1 ${o("common.day")}`:`${Math.ceil(l)} ${o("pool.incentives.daysLeft")}`},bt=({percent:t,color:o,isLeft:i})=>(0,e.jsx)(Yt,{height:8,width:`${t*100}%`,backgroundColor:o,...i?{borderTopLeftRadius:5,borderBottomLeftRadius:5,borderRightWidth:1,borderRightColor:"$surface2"}:{borderTopRightRadius:5,borderBottomRightRadius:5,borderLeftWidth:1,borderLeftColor:"$surface2"}}),wn=({rewardsCampaign:t})=>{const{formatCurrencyAmount:o,convertFiatAmountFormatted:i}=ut(),{price:r}=We(xt),{t:s}=rt(),l=uo(),a=(0,v.useMemo)(()=>{if(!t)return 0;const _=t.distributedRewards?G.BigInt(t.distributedRewards):G.BigInt(0),u=t.totalRewardAllocation?G.BigInt(t.totalRewardAllocation):G.BigInt(0);if(G.greaterThan(u,G.BigInt(0))){const p=parseFloat(_.toString()),x=parseFloat(u.toString());return x===0?0:Math.min(1,p/x)}return 0},[t]),d=(0,v.useMemo)(()=>{if(!t)return 0;const _=t.startTimestamp,u=t.endTimestamp;if(!_||!u||_>=u)return 0;const p=Date.now()/1e3;if(p<=_)return 0;if(p>=u)return 1;const x=u-_;return(p-_)/x},[t]);if(!t)return null;const n=t.distributedRewards?G.BigInt(t.distributedRewards):G.BigInt(0),c=t.totalRewardAllocation?G.BigInt(t.totalRewardAllocation):G.BigInt(0),h=ft.fromRawAmount(xt,n),b=ft.fromRawAmount(xt,c),m=r==null?void 0:r.quote(h),y=r==null?void 0:r.quote(b),g=o({value:h,type:q.TokenQuantityStats}),k=o({value:b,type:q.TokenQuantityStats}),$=i(m==null?void 0:m.toExact(),q.FiatTokenStats),j=i(y==null?void 0:y.toExact(),q.FiatTokenStats),D=kn(t.endTimestamp,s),T=Tn({startTimestamp:t.startTimestamp,endTimestamp:t.endTimestamp,locale:l});return(0,e.jsxs)("div",{className:jn,children:[(0,e.jsxs)("div",{className:bn,children:[(0,e.jsx)(E,{color:"$neutral2",variant:"body2",children:s("pool.incentives.rewardsDistribution")}),(0,e.jsxs)("div",{className:fe,children:[(0,e.jsxs)(E,{variant:"body3",color:"$neutral1",children:[g," ",xt.symbol," (",$,")"]}),(0,e.jsxs)(E,{variant:"body3",color:"$neutral2",children:["/ ",k," ",xt.symbol," (",j,")"]})]}),(0,e.jsxs)("div",{className:he,children:[(0,e.jsx)(bt,{percent:a,color:"$accent1",isLeft:!0}),(0,e.jsx)(bt,{percent:1-a,color:"$accent2",isLeft:!1})]})]}),(0,e.jsxs)("div",{className:gn,children:[(0,e.jsx)(E,{variant:"body2",color:"$neutral2",children:s("pool.incentives.timePeriod")}),(0,e.jsxs)("div",{className:fe,children:[(0,e.jsx)(E,{variant:"body3",color:"$neutral1",children:D}),(0,e.jsx)(E,{variant:"body3",color:"$neutral2",children:T})]}),(0,e.jsxs)("div",{className:he,children:[(0,e.jsx)(bt,{percent:d,color:"$accent1",isLeft:!0}),(0,e.jsx)(bt,{percent:1-d,color:"$accent2",isLeft:!1})]})]})]})};function Sn({variables:t}){const{data:o,loading:i}=Co({variables:t,skip:!t.addressOrId||t.addressOrId===""});return(0,v.useMemo)(()=>{const{historicalVolume:r}=(o==null?void 0:o.v2Pair)??(o==null?void 0:o.v3Pool)??(o==null?void 0:o.v4Pool)??{},s=(r==null?void 0:r.filter(a=>a!==void 0).map(sn))??[],l=nn({data:s,chartType:O.VOLUME,duration:t.duration});return{chartType:O.VOLUME,entries:s,loading:i,dataQuality:l}},[o==null?void 0:o.v2Pair,o==null?void 0:o.v3Pool,o==null?void 0:o.v4Pool,i,t.duration])}pt();const Cn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665593  _gap-_md_t-space-spa94665589",Pn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column  _width-_md_10037",$n="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",vt=356,Dn=[O.VOLUME,O.PRICE,O.LIQUIDITY],In=C.div`
  display: flex;
  gap: 8px;

  @media only screen and (max-width: ${({theme:t})=>t.breakpoint.md}px) {
    width: 100%;
  }
`,An=({chartType:t,onChartTypeChange:o,disabledOption:i})=>(0,e.jsx)(In,{children:(0,e.jsx)(ji,{options:Dn,currentChartType:t,onSelectOption:o,disabledOption:i})});function Ln({poolData:t,isReversed:o,chain:i,protocolVersion:r}){const[s,l]=(0,v.useState)(Et.DAY),[a,d]=(0,v.useState)(O.VOLUME),n=r===F.V2,c=r===F.V3,h=r===F.V4,b={addressOrId:(t==null?void 0:t.idOrAddress)??"",chain:i,duration:xi(s),isV4:h,isV3:c,isV2:n},m=ui({variables:b,priceInverted:o}),y=Sn({variables:b});return(0,v.useMemo)(()=>{const g=(()=>{switch(a){case O.PRICE:return m;case O.VOLUME:return y;case O.LIQUIDITY:return{chartType:O.LIQUIDITY,entries:[],loading:!1,dataQuality:Vt.VALID}}})();return{timePeriod:s,setTimePeriod:l,setChartType:d,activeQuery:g}},[a,y,m,s])}function Rn(t){var o,i,r,s;const{defaultChainId:l}=J(),a=st(),[d,n]=[((o=t.poolData)===null||o===void 0?void 0:o.token0)&&K(t.poolData.token0),((i=t.poolData)===null||i===void 0?void 0:i.token1)&&K(t.poolData.token1)],{setChartType:c,timePeriod:h,setTimePeriod:b,activeQuery:m}=Ln({poolData:t.poolData,isReversed:t.isReversed,chain:t.chain??fo.Ethereum,protocolVersion:((r=t.poolData)===null||r===void 0?void 0:r.protocolVersion)??F.V3}),y=ri(rn),g=t.loading||(m.chartType!==O.LIQUIDITY?m.loading:!1),k=(()=>{var D;if(!d||!n||!t.poolData||!t.chain)return(0,e.jsx)(me,{type:m.chartType,height:vt});const T={...t,feeTier:Number((D=t.poolData.feeTier)===null||D===void 0?void 0:D.feeAmount),height:vt,timePeriod:h,tokenA:d,tokenB:n,chainId:ko(t.chain)??l,poolId:t.poolData.idOrAddress,hooks:t.poolData.hookAddress,version:Jo(t.poolData.protocolVersion)??ei.V3};if(m.chartType===O.LIQUIDITY)return(0,e.jsx)(Nn,{...T});if(m.dataQuality===Vt.INVALID){const u=g?void 0:(0,e.jsx)(N,{i18nKey:"chart.error.pools"});return(0,e.jsx)(me,{type:m.chartType,height:vt,errorText:u})}const _=m.dataQuality===Vt.STALE;switch(m.chartType){case O.PRICE:return(0,e.jsx)(Mn,{...T,data:m.entries,stale:_,tokenFormatType:q.TokenNonTx});case O.VOLUME:return(0,e.jsx)(Pi,{...T,data:m.entries,stale:_})}})(),$=(0,v.useMemo)(()=>{if(m.chartType===O.PRICE){const D=de.filter(T=>T.value!==Zi.HOUR);return h===Et.HOUR&&b(Et.DAY),{options:D,selected:ce[h]}}return{options:de,selected:ce[h]}},[m.chartType,h,b]),j=((s=t.poolData)===null||s===void 0?void 0:s.protocolVersion)===F.V2?O.LIQUIDITY:void 0;return(0,e.jsxs)("div",{"data-testid":"pdp-chart-container",className:$n,children:[k,(0,e.jsxs)(bi,{children:[(0,e.jsx)(An,{chartType:m.chartType,onChartTypeChange:c,disabledOption:j}),m.chartType!==O.LIQUIDITY&&(0,e.jsx)("div",{className:Pn,children:(0,e.jsx)(co,{fullWidth:a.md,options:$.options,selectedOption:$.selected,onSelectOption:D=>{const T=en(D);T===h?y==null||y():b(T)}})})]})]})}const En=C.div`
  display: flex;
  flex-wrap: wrap;
  column-gap: 4px;
`,_e=C(X.HeadlineMedium)`
  ${Jt}
  @media screen and (max-width: ${({theme:t})=>t.breakpoint.md}px) {
    font-size: 24px !important;
    line-height: 32px !important;
  }
`;function Mn({tokenA:t,tokenB:o,isReversed:i,data:r,stale:s,tokenFormatType:l}){const{convertFiatAmountFormatted:a,formatCurrencyAmount:d}=ut(),[n,c]=i?[o,t]:[t,o],h=(0,v.useMemo)(()=>({data:r,stale:s,type:on.LINE,tokenFormatType:l}),[r,s,l]),{price:b}=We(n),m=r[r.length-1];return(0,e.jsx)(Je,{height:vt,Model:Si,params:h,children:y=>{const g=y??m,k=Math.floor(((g==null?void 0:g.value)??g.close)*10**n.decimals),$=(0,e.jsxs)(En,{children:[(0,e.jsx)(_e,{children:`1 ${n.symbol} = ${d({value:ft.fromRawAmount(n,k)})} 
            ${c.symbol}`}),(0,e.jsx)(_e,{color:"neutral2",children:b?"("+a(b.toSignificant(),q.FiatTokenPrice)+")":""})]});return(0,e.jsx)(Ge,{value:$,additionalFields:(0,e.jsx)(wi,{startingPrice:r[0],endingPrice:g}),valueFormatterType:q.FiatTokenPrice,time:y==null?void 0:y.time})}})}function Nn({tokenA:t,tokenB:o,feeTier:i,isReversed:r,chainId:s,version:l,hooks:a,poolId:d}){var n;const{t:c}=rt(),h=t.symbol??t.name??c("common.tokenA"),b=o.symbol??o.name??c("common.tokenB"),{data:m}=an({fee:i,chainId:s,protocolVersions:[l],token0:pe(t),token1:pe(o),hooks:a??To},!0),y=(0,v.useMemo)(()=>({TOKEN0:t,TOKEN1:o}),[t,o]),{tickData:g,activeTick:k,loading:$}=pi({sdkCurrencies:y,feeTier:i,isReversed:r,chainId:s,version:l,hooks:a,poolId:d,tickSpacing:m==null||(n=m.pools[0])===null||n===void 0?void 0:n.tickSpacing}),j=at(),D=(0,v.useMemo)(()=>({data:(g==null?void 0:g.barData)??[],tokenAColor:r?j.token1:j.token0,tokenBColor:r?j.token0:j.token1,highlightColor:j.surface3,activeTick:k,activeTickProgress:g==null?void 0:g.activeRangePercentage,hideTooltipBorder:!0}),[k,r,j,g]);return $?(0,e.jsx)(Ti,{}):(0,e.jsx)(Je,{height:vt,Model:di,params:D,TooltipBody:({data:T})=>(0,e.jsx)(hi,{fallback:()=>null,children:(g==null?void 0:g.activeRangeData)&&(0,e.jsx)(ci,{baseCurrency:o,quoteCurrency:t,hoveredTick:T,currentTick:g.activeRangeData.tick,currentPrice:parseFloat(g.activeRangeData.price0),showQuoteCurrencyFirst:!1})}),children:T=>{const _=T??(g==null?void 0:g.activeRangeData),u=(0,e.jsxs)("div",{className:Cn,children:[(0,e.jsx)(E,{variant:"heading3",animation:"125ms",enterStyle:{opacity:0},children:`1 ${h} = ${_==null?void 0:_.price0} ${b}`}),(0,e.jsx)(E,{variant:"heading3",animation:"125ms",enterStyle:{opacity:0},children:`1 ${b} = ${_==null?void 0:_.price1} ${h}`}),_&&_.tick===k&&(0,e.jsx)(E,{variant:"subheading2",color:"$neutral2",animation:"125ms",enterStyle:{opacity:0},$md:{variant:"body3"},children:(0,e.jsx)(N,{i18nKey:"pool.activeRange"})})]});return(0,e.jsx)(Ge,{value:u})}})}pt();const Bn=(t,o)=>{const i=new go(Math.round(o*100),ho);return t.add(i)},ye="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _alignItems-center _gap-t-space-gap56 ",Vn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _mt-t-space-spa94665593 _gap-t-space-spa94665591 ",On="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",Fn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _gap-t-space-spa1360334080 _pt-t-space-spa1360334051 _pr-t-space-spa1360334051 _pb-t-space-spa1360334051 _pl-t-space-spa1360334051 _borderTopLeftRadius-t-space-spa1360334051 _borderTopRightRadius-t-space-spa1360334051 _borderBottomRightRadius-t-space-spa1360334051 _borderBottomLeftRadius-t-space-spa1360334051 _backgroundColor-surface2 _width-10037 _flexDirection-column _mt--24px _mb-24px  _mt-_xl_0px _mb-_xl_0px",zn=({poolApr:t,rewardsApr:o})=>{const{t:i}=rt(),{formatPercent:r}=ut(),s=o!==void 0&&o>0,l=o?r(Bn(t,o).toSignificant(),2):`${t.toFixed(2)}%`;return(0,e.jsxs)("div",{className:Fn,children:[(0,e.jsxs)("div",{className:On,children:[(0,e.jsx)(E,{variant:"body2",color:"$neutral2",children:i("pool.totalAPR")}),(0,e.jsx)(E,{variant:"heading2",color:"$neutral1",mt:"$spacing4",children:l})]}),s&&(0,e.jsxs)("div",{className:Vn,children:[(0,e.jsxs)("div",{className:ye,children:[(0,e.jsx)(E,{variant:"body3",color:"$neutral2",children:i("pool.apr.base")}),(0,e.jsx)(E,{variant:"body3",color:"$neutral1",children:r(t.toSignificant())})]}),(0,e.jsxs)("div",{className:ye,children:[(0,e.jsx)(E,{variant:"body3",color:"$neutral2",children:i("pool.apr.reward")}),(0,e.jsx)(Rt,{lpIncentiveRewardApr:o,hideBackground:!0,showTokenSymbol:!0})]})]})]})},to=C(nt)`
  height: ${({$height:t})=>t?`${t}px`:"16px"};
  width: ${({$width:t})=>t?`${t}px`:"80px"};
`,Wn="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _alignItems-center _width-10037 ",Hn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _flexGrow-1 ",Un=" _gap-t-space-spa1360334080",Qn=" _gap-t-space-spa1360334076",qn=" _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _width-10037  ",Kn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665593 _justifyContent-space-betwe3241 ",Gn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665589 _width-10037 ",Yn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _width-200px _height-32px _borderTopLeftRadius-t-radius-ro840690002 _borderTopRightRadius-t-radius-ro840690002 _borderBottomRightRadius-t-radius-ro840690002 _borderBottomLeftRadius-t-radius-ro840690002 _backgroundColor-surface3 ",Xn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _width-32px _height-32px _borderTopLeftRadius-t-radius-ro1041013639 _borderTopRightRadius-t-radius-ro1041013639 _borderBottomRightRadius-t-radius-ro1041013639 _borderBottomLeftRadius-t-radius-ro1041013639 _backgroundColor-surface3 ",ge="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-space-betwe3241 _alignItems-flex-start _width-10037 ",Zn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665587 ",Jn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row ",tr="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa1360334080 _alignItems-center _width-max-content ",er="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _width-80px _height-20px _borderTopLeftRadius-20px _borderTopRightRadius-20px _borderBottomRightRadius-20px _borderBottomLeftRadius-20px _backgroundColor-surface3 ",or=C(te)`
  &:hover {
    // Override hover behavior from ExternalLink
    opacity: 1;
  }
`;function ir({chainId:t,poolAddress:o,token0:i,token1:r,loading:s}){const{defaultChainId:l}=J(),a=Xt(t??l),d=`/explore/${a}`,n=`/explore/pools/${a}`;return(0,e.jsxs)(pn,{"aria-label":"breadcrumb-nav",children:[(0,e.jsxs)(ue,{to:d,children:[(0,e.jsx)(N,{i18nKey:"common.explore"})," ",(0,e.jsx)(Nt,{size:14})]}),(0,e.jsxs)(ue,{to:n,children:[(0,e.jsx)(N,{i18nKey:"common.pools"})," ",(0,e.jsx)(Nt,{size:14})]}),s||!o?(0,e.jsx)(Lt,{children:(0,e.jsx)("div",{className:er})}):(0,e.jsx)(un,{address:o,poolName:`${i==null?void 0:i.symbol} / ${r==null?void 0:r.symbol}`})]})}const be=({token0:t,token1:o,chainId:i,feeTier:r,protocolVersion:s,toggleReversed:l,hookAddress:a})=>{const d=at(),{defaultChainId:n}=J(),c=Pt(i??n);return(0,e.jsxs)("div",{className:tr,children:[(0,e.jsxs)("div",{className:Jn,children:[(0,e.jsx)(ke,{to:kt({address:t==null?void 0:t.address,chain:c}),children:(0,e.jsxs)(E,{variant:"heading1",fontSize:24,$md:{variant:"subheading1"},children:[t==null?void 0:t.symbol," /"," "]})}),(0,e.jsx)(ke,{to:kt({address:o==null?void 0:o.address,chain:c}),children:(0,e.jsx)(E,{variant:"heading1",fontSize:24,$md:{variant:"subheading1"},children:o==null?void 0:o.symbol})})]}),(0,e.jsx)("div",{className:Zn,children:(0,e.jsx)(ln,{version:s,v4hook:a,feeTier:r,size:"default"})}),(0,e.jsx)(po,{hoverable:!0,...Ze,onPress:l,testID:"toggle-tokens-reverse-arrows",children:(0,e.jsx)(Hi,{size:"20px",color:d.neutral2})})]})},je=Qe(Yt,{row:!0,alignItems:"center",cursor:"pointer",gap:"$gap12",px:"$padding6",py:"$padding8",borderRadius:"$rounded8",...Ai,"$platform-web":{textDecoration:"none"},hoverStyle:{background:"$surface3"}}),$t=({address:t,chainId:o,tokens:i})=>{var r;const s=at(),l=i[0]&&K(i[0]),a=i.length===2,d=a&&i[1]?[l,K(i[1])]:[l],c=o&&Tt({chainId:o,data:t,type:t===it||!t?tt.NATIVE:a?tt.ADDRESS:tt.TOKEN});return!o||!c?(0,e.jsx)(je,{children:(0,e.jsx)(to,{$width:117})}):(0,e.jsx)(or,{href:c,children:(0,e.jsxs)(je,{children:[(0,e.jsxs)(H,{gap:"sm",children:[a?(0,e.jsx)(wt,{currencies:d,size:24}):(0,e.jsx)(ee,{currency:l,size:24}),(0,e.jsx)(X.BodyPrimary,{children:a?(0,e.jsx)(N,{i18nKey:"common.pool"}):(r=i[0])===null||r===void 0?void 0:r.symbol}),(0,e.jsx)(X.BodySecondary,{children:Ut(t)})]}),(0,e.jsx)(hn,{size:"16px",stroke:s.neutral2})]})})},Te=({chainId:t,poolAddress:o,poolName:i,token0:r,token1:s,protocolVersion:l})=>{const{t:a}=rt(),d=at(),n=Ee(),[c,h]=(0,v.useState)(!1);return(0,e.jsxs)(H,{width:"max-content",justify:"flex-end",gap:"sm",children:[(0,e.jsx)(mn,{isOpen:c,toggleOpen:h,menuLabel:t===Ct.Mainnet?(0,e.jsx)(Ye,{width:"18px",height:"18px",fill:d.neutral1}):(0,e.jsx)(Xe,{width:"18px",height:"18px",fill:d.neutral1}),tooltipText:n?void 0:a("pool.explorers"),hideChevron:!0,buttonStyle:gi,dropdownStyle:{minWidth:235},alignRight:!0,children:(0,e.jsxs)(e.Fragment,{children:[l!==F.V4&&(0,e.jsx)($t,{address:o,chainId:t,tokens:[r,s]}),(0,e.jsx)($t,{address:r==null?void 0:r.address,chainId:t,tokens:[r]}),(0,e.jsx)($t,{address:s==null?void 0:s.address,chainId:t,tokens:[s]})]})}),(0,e.jsx)(Ci,{name:i,utmSource:"share-pool"})]})},ke=Qe(Wt,{color:"$neutral1",...Ze,"$platform-web":{textDecoration:"none"}});function nr({chainId:t,poolAddress:o,token0:i,token1:r,feeTier:s,protocolVersion:l,hookAddress:a,toggleReversed:d,loading:n,rewardsApr:c}){const b=st().md,m=`${i==null?void 0:i.symbol} / ${r==null?void 0:r.symbol}`,y=(0,v.useMemo)(()=>i&&r?[K(i),K(r)]:[],[i,r]),k=Oe(Ve.LpIncentives)&&c&&c>0;return n?(0,e.jsx)("div",{"data-testid":"pdp-header-loading-skeleton",className:ge,children:(0,e.jsxs)(Yt,{gap:"$gap12",alignItems:b?"flex-start":"center",row:!b,style:{width:"100%"},children:[(0,e.jsx)(Lt,{children:(0,e.jsx)("div",{className:Xn})}),(0,e.jsx)(Lt,{children:(0,e.jsx)("div",{className:Yn})})]})}):(0,e.jsx)("div",{className:ge,children:b?(0,e.jsxs)("div",{className:Gn,children:[(0,e.jsxs)("div",{className:Kn,children:[(0,e.jsx)(wt,{currencies:y,"data-testid":"double-token-logo"}),(0,e.jsx)(Te,{chainId:t,poolAddress:o,poolName:m,token0:i,token1:r,protocolVersion:l})]}),(0,e.jsx)(be,{token0:i,token1:r,chainId:t,feeTier:s,protocolVersion:l,toggleReversed:d}),k&&(0,e.jsx)(Rt,{lpIncentiveRewardApr:c,hideBackground:!0})]}):(0,e.jsxs)("div",{className:Ue(""+(qn+(k?Qn:Un))),children:[(0,e.jsx)(wt,{size:k?56:30,currencies:y,"data-testid":"double-token-logo"}),(0,e.jsxs)("div",{className:Hn,children:[(0,e.jsxs)("div",{className:Wn,children:[(0,e.jsx)(be,{token0:i,token1:r,chainId:t,feeTier:s,protocolVersion:l,toggleReversed:d,hookAddress:a}),(0,e.jsx)(Te,{chainId:t,poolAddress:o,poolName:m,token0:i,token1:r,protocolVersion:l})]}),k&&(0,e.jsx)(Rt,{lpIncentiveRewardApr:c,hideBackground:!0})]})]})})}const rr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665593 ",sr=C(X.BodyPrimary)`
  display: none;

  @media (max-width: ${V.xl}px) and (min-width: ${V.xs}px) {
    display: block;
  }
  ${Jt}
`,ar=C(H)`
  gap: 8px;
  margin-right: 12px;
  ${Jt}
  ${({isClickable:t})=>t&&_t}
`,lr=C(X.BodyPrimary)`
  flex-shrink: 0;

  @media (max-width: ${V.xl}px) and (min-width: ${V.xs}px) {
    color: ${({theme:t})=>t.neutral2};
  }
`,dr=C(H)`
  gap: 8px;
  padding: 8px 12px;
  border-radius: 20px;
  background-color: ${({theme:t})=>t.surface3};
  font-size: 14px;
  font-weight: 535;
  line-height: 16px;
  width: max-content;
  flex-shrink: 0;
  ${_t}
`,cr=C(fi)`
  width: 16px;
  height: 16px;
  color: ${({theme:t})=>t.neutral2};
  flex-shrink: 0;
`,pr=C.div`
  padding: 8px;
  border-radius: 20px;
  background-color: ${({theme:t})=>t.surface3};
  display: flex;
  ${_t}
`,ur=C(H)`
  gap: 8px;
  flex-shrink: 0;
  width: max-content;
`;function Dt({address:t,chainId:o,tokens:i,loading:r}){var s,l,a,d,n,c,h;const b=at(),{t:m}=rt(),y=i[0]&&K(i[0]),[g,k]=_i(),$=(0,v.useCallback)(()=>{const S=Be(t);S&&k(S)},[t,k]),j=i.length===2,D=t===it||i[0]&&!j&&i[0].standard===bo.Native,T=j&&i[1]?[y,K(i[1])]:[y],_=o&&Tt({chainId:o,data:t??"",type:D?tt.NATIVE:j?tt.ADDRESS:tt.TOKEN}),u=Ht(),{defaultChainId:p}=J(),x=Xt(o??p),w=(0,v.useCallback)(()=>{var S;j||u(kt({address:(S=i[0])===null||S===void 0?void 0:S.address,chainUrlParam:x}))},[u,i,j,x]),[P,I]=(0,v.useState)(!1),A=(0,v.useCallback)(S=>{S&&S.clientWidth<S.scrollWidth&&I(f=>f?"both":"start")},[P]);return r||!o?(0,e.jsxs)("div",{className:rr,children:[(0,e.jsx)(nt,{containerWidth:"100%",width:"100%"}),(0,e.jsx)(nt,{containerWidth:"100%",width:"100%"})]}):(0,e.jsxs)(H,{align:"space-between",children:[(0,e.jsxs)(ar,{"data-testid":j?`pdp-pool-logo-${(s=i[0])===null||s===void 0?void 0:s.symbol}-${(l=i[1])===null||l===void 0?void 0:l.symbol}`:`pdp-token-logo-${(a=i[0])===null||a===void 0?void 0:a.symbol}`,isClickable:!j,onClick:w,ref:A,children:[j?(0,e.jsx)(wt,{currencies:T,size:20}):(0,e.jsx)(ee,{currency:y,size:20}),(0,e.jsx)(sr,{children:j?(0,e.jsx)(N,{i18nKey:"common.pool"}):(d=i[0])===null||d===void 0?void 0:d.name}),(0,e.jsx)(lr,{children:j?`${(n=i[0])===null||n===void 0?void 0:n.symbol} / ${(c=i[1])===null||c===void 0?void 0:c.symbol}`:(0,e.jsxs)(H,{gap:"4px",children:[(h=i[0])===null||h===void 0?void 0:h.symbol," ",(0,e.jsx)(Nt,{size:16,color:b.neutral2})]})})]}),(0,e.jsxs)(ur,{children:[!D&&(0,e.jsx)(Ui,{disabled:!0,forceShow:g,placement:"bottom",size:Qi.Max,text:m("common.copied"),children:(0,e.jsxs)(dr,{"data-testid":`copy-address-${t}`,onClick:$,children:[Ut(t,P?2:void 0,P==="both"?2:void 0),(0,e.jsx)(cr,{})]})}),_&&(0,e.jsx)(te,{href:_,"data-testid":`explorer-url-${_}`,children:(0,e.jsx)(pr,{children:o===Ct.Mainnet?(0,e.jsx)(Ye,{width:"16px",height:"16px",fill:b.neutral1}):(0,e.jsx)(Xe,{width:"16px",height:"16px",fill:b.neutral1})})})]})]})}const mr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _width-max-content _pt-t-space-spa94665589 _pb-t-space-spa94665589  _pt-_lg_0px _pb-_lg_0px",xr="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa94665589 ",we=C(Zt)`
  font-weight: 485;
  font-size: 24px;
  line-height: 36px;
  @media (max-width: ${V.xl}px) {
    width: 100%;
  }
`,Se=C(Y)`
  gap: 24px;
  padding: 20px;
  border-radius: 20px;
  background: ${({theme:t})=>t.surface2};
  width: 100%;
  z-index: 1;
  margin-top: ${({loaded:t})=>t&&"-24px"};

  @media (max-width: ${V.xl}px) {
    flex-direction: row;
    background: transparent;
    flex-wrap: wrap;
    padding: 20px 0px;
    justify-content: space-between;
    margin-top: 0px;
  }
`,eo=C(Y)`
  gap: 8px;
  flex: 1;
  min-width: 180px;

  @media (max-width: ${V.md}px) {
    min-width: 150px;
  }
`,vr=C(H)`
  justify-content: space-between;

  @media (max-width: ${V.xl}px) {
    flex-direction: column;
  }
`,hr=C(H)`
  font-weight: 485;
  font-size: 16px;
  line-height: 24px;
  width: max-content;

  @media (max-width: ${V.xl}px) {
    font-size: 20px;
    line-height: 28px;
    width: 100%;
  }
`,fr=C(Wt)`
  display: flex;
  align-items: center;
  color: ${({theme:t})=>t.neutral1};
  ${_t}
`,_r=Ke`
  border-top-left-radius: 5px;
  border-bottom-left-radius: 5px;
  border-right: 1px solid ${({theme:t})=>t.surface2};
`,yr=Ke`
  border-top-right-radius: 5px;
  border-bottom-right-radius: 5px;
  border-left: 1px solid ${({theme:t})=>t.surface2};
`,Ce=C.div`
  height: 8px;
  width: ${({percent:t})=>t*100}%;
  background: ${({$color:t})=>t};
  ${({isLeft:t})=>t?_r:yr}
`,gr=C(nt)`
  width: 180px;
  height: 40px;
`,br=C(nt)`
  width: 116px;
  height: 24px;
  border-radius: 8px;
`,Pe=({token:t,chainId:o})=>{const r=!st().xl,{formatNumberOrString:s}=ut(),l=o?Mt(o,t):t,d=l.address===it&&o?Xo(o):t.currency,{defaultChainId:n}=J();return(0,e.jsx)(hr,{children:(0,e.jsxs)("div",{className:xr,children:[!r&&(0,e.jsx)(ee,{currency:d,size:20}),(0,e.jsx)(E,{variant:"heading3",fontSize:20,children:s({value:t.tvl,type:q.TokenQuantityStats})}),(0,e.jsx)(fr,{to:kt({address:l.address,chain:Pt(o??n)}),children:l.symbol})]})})};function jr({poolData:t,isReversed:o,chainId:i,loading:r}){const l=!st().xl,a=at(),d=le({address:t==null?void 0:t.token0.address,chainId:i}),n=le({address:t==null?void 0:t.token1.address,chainId:i}),[c,h]=(0,v.useMemo)(()=>{if(t&&t.tvlToken0&&t.token0Price&&t.tvlToken1&&t.token1Price){const b=t.tvlToken0*t.token0Price+t.tvlToken1*t.token1Price,m={...t.token0,price:t.token0Price,tvl:t.tvlToken0,percent:t.tvlToken0*t.token0Price/b,currency:d},y={...t.token1,price:t.token1Price,tvl:t.tvlToken1,percent:t.tvlToken1*t.token1Price/b,currency:n};return o?[y,m]:[m,y]}else return[void 0,void 0]},[d,n,o,t]);return r||!c||!h||!t?(0,e.jsxs)(Se,{children:[(0,e.jsx)(we,{children:(0,e.jsx)(br,{})}),Array.from({length:4}).map((b,m)=>(0,e.jsxs)(Y,{gap:"md",children:[(0,e.jsx)(to,{}),(0,e.jsx)(gr,{})]},`loading-info-row-${m}`))]}):(0,e.jsxs)(Se,{loaded:!0,children:[(0,e.jsx)(we,{children:(0,e.jsx)(N,{i18nKey:"common.stats"})}),(0,e.jsxs)(eo,{children:[(0,e.jsx)(X.BodySecondary,{children:(0,e.jsx)(N,{i18nKey:"pool.balances"})}),(0,e.jsxs)(vr,{children:[(0,e.jsx)(Pe,{token:c,chainId:i}),(0,e.jsx)(Pe,{token:h,chainId:i})]}),l&&(0,e.jsxs)(H,{"data-testid":"pool-balance-chart",children:[(0,e.jsx)(Ce,{percent:c.percent,$color:a.token0,isLeft:!0}),(0,e.jsx)(Ce,{percent:h.percent,$color:a.token1,isLeft:!1})]})]}),t.tvlUSD&&(0,e.jsx)(It,{title:(0,e.jsx)(N,{i18nKey:"common.totalValueLocked"}),value:t.tvlUSD,delta:t.tvlUSDChange}),t.volumeUSD24H!==void 0&&(0,e.jsx)(It,{title:(0,e.jsx)(N,{i18nKey:"stats.24volume"}),value:t.volumeUSD24H,delta:t.volumeUSD24HChange}),t.volumeUSD24H!==void 0&&t.feeTier!==void 0&&(0,e.jsx)(It,{title:(0,e.jsx)(N,{i18nKey:"stats.24fees"}),value:t.volumeUSD24H*(t.feeTier.feeAmount/1e6)})]})}const Tr=C(H)`
  gap: 4px;
  width: 100%;
  align-items: flex-end;

  @media (max-width: ${V.xl}px) {
    flex-direction: column;
    gap: 0px;
    align-items: flex-start;
  }
`,kr=C(Zt)`
  color: ${({theme:t})=>t.neutral1};
  font-size: 36px;
  font-weight: 485;
  line-height: 44px;

  @media (max-width: ${V.xl}px) {
    font-size: 20px;
    line-height: 28px;
  }
`;function It({title:t,value:o,delta:i}){const{formatPercent:r,formatNumberOrString:s}=ut();return(0,e.jsxs)(eo,{children:[(0,e.jsx)(X.BodySecondary,{children:t}),(0,e.jsxs)(Tr,{children:[(0,e.jsx)(kr,{children:s({value:o,type:q.FiatTokenStats})}),!!i&&(0,e.jsxs)("div",{className:mr,children:[(0,e.jsx)(Bi,{delta:i,formattedDelta:r(Math.abs(i))}),(0,e.jsx)(X.BodySecondary,{children:r(Math.abs(i))})]})]})]})}const wr="hh-sol-artifact-1",Sr="IUniswapV3PoolState",Cr="contracts/interfaces/pool/IUniswapV3PoolState.sol",Pr=[{inputs:[],name:"feeGrowthGlobal0X128",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"feeGrowthGlobal1X128",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"liquidity",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"observations",outputs:[{internalType:"uint32",name:"blockTimestamp",type:"uint32"},{internalType:"int56",name:"tickCumulative",type:"int56"},{internalType:"uint160",name:"secondsPerLiquidityCumulativeX128",type:"uint160"},{internalType:"bool",name:"initialized",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"key",type:"bytes32"}],name:"positions",outputs:[{internalType:"uint128",name:"_liquidity",type:"uint128"},{internalType:"uint256",name:"feeGrowthInside0LastX128",type:"uint256"},{internalType:"uint256",name:"feeGrowthInside1LastX128",type:"uint256"},{internalType:"uint128",name:"tokensOwed0",type:"uint128"},{internalType:"uint128",name:"tokensOwed1",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"protocolFees",outputs:[{internalType:"uint128",name:"token0",type:"uint128"},{internalType:"uint128",name:"token1",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"slot0",outputs:[{internalType:"uint160",name:"sqrtPriceX96",type:"uint160"},{internalType:"int24",name:"tick",type:"int24"},{internalType:"uint16",name:"observationIndex",type:"uint16"},{internalType:"uint16",name:"observationCardinality",type:"uint16"},{internalType:"uint16",name:"observationCardinalityNext",type:"uint16"},{internalType:"uint8",name:"feeProtocol",type:"uint8"},{internalType:"bool",name:"unlocked",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"int16",name:"wordPosition",type:"int16"}],name:"tickBitmap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"int24",name:"tick",type:"int24"}],name:"ticks",outputs:[{internalType:"uint128",name:"liquidityGross",type:"uint128"},{internalType:"int128",name:"liquidityNet",type:"int128"},{internalType:"uint256",name:"feeGrowthOutside0X128",type:"uint256"},{internalType:"uint256",name:"feeGrowthOutside1X128",type:"uint256"},{internalType:"int56",name:"tickCumulativeOutside",type:"int56"},{internalType:"uint160",name:"secondsPerLiquidityOutsideX128",type:"uint160"},{internalType:"uint32",name:"secondsOutside",type:"uint32"},{internalType:"bool",name:"initialized",type:"bool"}],stateMutability:"view",type:"function"}],$r="0x",Dr="0x",Ir={},Ar={};var Lr={_format:wr,contractName:Sr,sourceName:Cr,abi:Pr,bytecode:$r,deployedBytecode:Dr,linkReferences:Ir,deployedLinkReferences:Ar};const Ft=18;function Rr(t,o){if(t.length%o!==0)throw new Error("Input array length must be a multiple of desired output size");return Array.from({length:Math.floor(t.length/o)},(i,r)=>t.slice(r*o,r*o+o))}pt();var oo=Z(Ne());const io=1e6,ht=new oo.Interface(Fe),St=new oo.Interface(Fe);async function zt(t,o){try{return(await t.callStatic.multicall(o)).returnData}catch(r){var i;if((r.code===Mo||((i=r.message)===null||i===void 0?void 0:i.indexOf("execution ran out of gas"))!==-1)&&o.length>1){const s=Math.floor(o.length/2);return Promise.all([zt(t,o.slice(0,s)),zt(t,o.slice(s,o.length))]).then(([l,a])=>[...l,...a])}throw jt.debug("getTokensAsync","fetchChunk","Error fetching chunk",{error:r,extra:{chunk:o}}),r}}function Er({address:t,chainId:o,data:i}){try{const[r,s,l,a,d]=i,n=r.success?ht.decodeFunctionResult("name",r.returnData)[0]:a.success?St.decodeFunctionResult("name",a.returnData)[0]:void 0,c=s.success?ht.decodeFunctionResult("symbol",s.returnData)[0]:d.success?St.decodeFunctionResult("symbol",d.returnData)[0]:void 0,h=l.success?parseInt(l.returnData):Ft;return new At(o,t,h,c,n)}catch(r){jt.debug("getTokensAsync","tryParseToken","Failed to parse token",{error:r,address:t,chainId:o});return}}function Mr({addresses:t,chainId:o,returnData:i}){return Rr(i,5).reduce((s,l,a)=>{const d=Er({address:t[a],chainId:o,data:l});return d&&(s[d.address]=d),s},{})}const Nr=(t,o)=>o.map(i=>({target:t,callData:i,gasLimit:io}));function Br(t){return Nr(t,[ht.encodeFunctionData("name"),ht.encodeFunctionData("symbol"),ht.encodeFunctionData("decimals"),St.encodeFunctionData("name"),St.encodeFunctionData("symbol")])}const $e={};async function Vr({addresses:t,chainId:o,multicall:i}){if(t.length===0)return{};const r=[],s=[],l=[];t.forEach(c=>{const h=Bt(o,c),b=$e[h];if(b!==void 0)l.push(b);else{const m=Be(c);if(!m)return;r.push(m),s.push(...Br(m))}});const a=zt(i,s).then(c=>Mr({addresses:t,chainId:o,returnData:c}));r.forEach(c=>$e[Bt(o,c)]=a.then(h=>h[c]));const d=await a;return(await Promise.all(l)).forEach(c=>c&&(d[ct(c)]=c)),d}pt();Uo();function no({addressMap:t,ABI:o,chainIds:i}){const r=qt(),{provider:s}=Ri(),l=ii();return(0,v.useMemo)(()=>(i??Object.keys(t).map(d=>parseInt(d)).filter(d=>l(d))).reduce((d,n)=>{const c=l(n)&&No(n),h=s&&r.chainId===n?s:c?Go[n]:void 0;return h&&(d[n]=Yo({address:t[n]??"",ABI:o,provider:h})),d},{}),[o,t,i,l,r.chainId,s])}function Or(t){return no({addressMap:yo,ABI:Fo.abi,chainIds:t})}function ro(t){return no({addressMap:_o,ABI:vi.abi,chainIds:t})}function Fr(t){const{defaultChainId:o}=J(),i=(0,v.useMemo)(()=>{if(!t||!t.length)return[];const a=t.reduce((d,{pool:{token0:n,token1:c}})=>(d[ct(n)]=ae(n,o),d[ct(c)]=ae(c,o),d),{});return Object.values(a)},[o,t]),{data:r,loading:s}=Po({variables:{contracts:i},skip:!i.length});return{priceMap:(0,v.useMemo)(()=>{var a;return(r==null||(a=r.tokens)===null||a===void 0?void 0:a.reduce((d,n)=>{var c;return n&&(d[Wi(n)]=(c=n.project)===null||c===void 0||(c=c.markets)===null||c===void 0||(c=c[0])===null||c===void 0||(c=c.price)===null||c===void 0?void 0:c.value),d},{}))??{}},[r==null?void 0:r.tokens]),pricesLoading:s&&!r}}var zr=Z(Qt());const Wr=(0,zr.default)("1m"),Hr=ni({});function Ur(t){const[o,i]=Kt(Hr),r=(0,v.useCallback)(s=>{i(l=>({...l,[t]:{result:s,stale:!1}})),setTimeout(()=>i(l=>{var a;return s===((a=l[t])===null||a===void 0?void 0:a.result)?{...l,[t]:{result:s,stale:!0}}:l}),Wr)},[t,i]);return[o[t],r]}const De=(t,o)=>`${o}-${t.token0}-${t.token1}-${t.fee}`,Qr=He("poolCache",{});function qr(){const[t,o]=Kt(Qr),i=(0,v.useCallback)((s,l)=>t[De(s,l)],[t]),r=(0,v.useCallback)((s,l,a)=>o(d=>({...d,[De(s,l)]:a})),[o]);return{get:i,set:r}}const Kr=He("cachedAsyncTokens",{});function Gr(){const[t,o]=Kt(Kr),i=(0,v.useCallback)((s,l)=>{const a=t[Bt(s,l)];return a?qo(a):void 0},[t]),r=(0,v.useCallback)(s=>{s&&o(l=>({...l,[ct(s)]:Ko(s)}))},[o]);return{get:i,set:r}}function Yr(t){const o=ro(t),i=Gr(),r=(0,v.useCallback)(async(l,a)=>{const d=await Vr({addresses:l,chainId:a,multicall:o[a]});return Object.values(d).forEach(i.set),d},[o,i]);return(0,v.useCallback)(async(l,a)=>{const d={},n=new Set;l.forEach(h=>{const b=i.get(a,h);b?d[h]=b:n.add(h)});const c=await r([...n],a);return{...d,...c}},[r,i])}Eo();pt();Qo();var Xr=Z(Ne());function Zr({owner:t,chainId:o,details:i,slot0:r,tokenA:s,tokenB:l}){const a=new zo(s,l,i.fee,r.sqrtPriceX96.toString(),0,r.tick),d=new Wo({pool:a,liquidity:i.liquidity.toString(),tickLower:i.tickLower,tickUpper:i.tickUpper}),n=r.tick>=i.tickLower&&r.tick<i.tickUpper,c=i.liquidity.eq(0);return{owner:t,chainId:o,pool:a,position:d,details:i,inRange:n,closed:c}}const Ie=Me.from(2).pow(128).sub(1);function Jr(t){const{chains:o}=J(),i=Or(o),r=ro(o),s=Yr(o),l=qr(),[a,d]=Ur(t),n=a==null?void 0:a.result,c=(0,v.useRef)(!1),h=!(a!=null&&a.result)&&c.current,[b,m]=(0,v.useState)({}),{priceMap:y,pricesLoading:g}=Fr(n),k=(0,v.useCallback)(async(p,x,w)=>{const P=x.map(A=>p.interface.encodeFunctionData("collect",[{tokenId:A,recipient:t,amount0Max:Ie,amount1Max:Ie}])),I=(await p.callStatic.multicall(P)).reduce((A,S,L)=>{const f=w.toString()+x[L];return A[f]=p.interface.decodeFunctionResult("collect",S),A},{});m(A=>({...A,...I}))},[t]),$=(0,v.useCallback)(async(p,x)=>{const w=Array.from({length:x.toNumber()},(P,I)=>p.interface.encodeFunctionData("tokenOfOwnerByIndex",[t,I]));return(await p.callStatic.multicall(w)).map(P=>Me.from(P))},[t]),j=(0,v.useCallback)(async(p,x)=>{const w=x.map(P=>p.interface.encodeFunctionData("positions",[P]));return(await p.callStatic.multicall(w)).map((P,I)=>({...p.interface.decodeFunctionResult("positions",P),tokenId:x[I]}))},[]),D=(0,v.useCallback)(async(p,x,w)=>{const P=new Xr.Interface(Lr.abi),I=await s(p.flatMap(L=>[L.token0,L.token1]),x),A=[],S=[];return p.forEach(L=>{const f=I[L.token0]??new At(x,L.token0,Ft),R=I[L.token1]??new At(x,L.token1,Ft);let B=l.get(L,x);if(!B){const W=jo[x];B=Ho({factoryAddress:W,tokenA:f,tokenB:R,fee:L.fee,chainId:x}),l.set(L,x,B)}S.push([f,R]),A.push({target:B,callData:P.encodeFunctionData("slot0"),gasLimit:io})},[]),(await w.callStatic.multicall(A)).returnData.reduce((L,f,R)=>{if(f.success){const B=P.decodeFunctionResult("slot0",f.returnData);L.push(Zr({owner:t,chainId:x,details:p[R],slot0:B,tokenA:S[R][0],tokenB:S[R][1]}))}else jt.debug("useMultiChainPositions","fetchPositionInfo","slot0 fetch errored",f);return L},[])},[t,l,s]),T=(0,v.useCallback)(async p=>{if(!t||t.length===0)return[];try{const x=i[p],w=r[p],P=await(x==null?void 0:x.balanceOf(t));if(!x||!w||P.lt(1))return[];const I=await $(x,P);k(x,I,p);const A=await j(x,I);return D(A,p,w)}catch(x){const w=new Error("Failed to fetch positions for chain",{cause:x});return jt.debug("useMultiChainPositions","fetchPositionsForChain",w.message,{error:w,chainId:p}),[]}},[t,j,k,$,D,i,r]),_=(0,v.useCallback)(async()=>{c.current=!0;const p=(await Promise.all(o.map(T))).flat();c.current=!1,d(p)},[o,T,d]);return(0,v.useEffect)(()=>{if(!(c.current||(a==null?void 0:a.stale)===!1))if(document.hasFocus())_();else{const p=()=>{_(),window.removeEventListener("focus",p)};return window.addEventListener("focus",p),()=>{window.removeEventListener("focus",p)}}},[_,c,a==null?void 0:a.stale]),{positions:(0,v.useMemo)(()=>n==null?void 0:n.map(p=>{var x,w;const P=p.chainId.toString()+p.details.tokenId,I=b[P]?[parseFloat(ft.fromRawAmount(p.pool.token0,(x=b[P])===null||x===void 0?void 0:x[0].toString()).toExact()),parseFloat(ft.fromRawAmount(p.pool.token1,(w=b[P])===null||w===void 0?void 0:w[1].toString()).toExact())]:void 0,A=[y[ct(p.pool.token0)],y[ct(p.pool.token1)]];return{...p,fees:I,prices:A}}),[b,n,y]),loading:g||h}}const ts=" _gap-t-space-spa1360334076",es=" _gap-t-space-spa1360334080",os=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center _width-10037  ",is="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1602 ",ns="  is_Spacer _display-flex _alignItems-stretch _flexDirection-column _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-t-space-spa94665591 _minWidth-t-space-spa94665591 _flexShrink-0 _pointerEvents-none _width-t-space-spa94665591 _height-t-space-spa94665591 ",rs="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _mb-t-space-spa1360334080 ",ss=C(H)`
  gap: 12px;
  z-index: 1;

  @media (max-width: ${V.xl}px) {
    gap: 8px;
    position: fixed;
    bottom: 0px;
    left: 0;
    padding: 16px;
    & > :first-child {
      margin-right: auto;
    }
    z-index: ${Gt.sticky};
  }
`,as=C(Y)`
  z-index: 0;
  gap: 24px;
  visibility: ${({open:t})=>t?"visible":"hidden"};
  opacity: ${({open:t})=>t?"1":"0"};
  max-height: ${({open:t})=>t?"100vh":"0"};
  transition: ${({theme:t})=>`max-height ${t.transition.duration.medium} ${t.transition.timing.ease}`};
  padding-bottom: ${({open:t})=>t?"24px":"0"};

  @media (max-width: ${V.xl}px) {
    position: fixed;
    width: calc(100% - 16px);
    padding: 0px 12px 12px;
    border-radius: 24px;
    max-width: 480px;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    z-index: ${Gt.fixed};
    background: ${({theme:t})=>t.surface1};
    transition: ${({theme:t})=>`opacity ${t.transition.duration.medium} ${t.transition.timing.ease}`};
  }
`,Ae=({isOpen:t,icon:o,onPress:i,children:r,"data-testid":s})=>{const l=st();return(0,e.jsx)(lo,{onPress:i,icon:o,variant:t?"default":"branded",emphasis:l.xl?"primary":"secondary","data-testid":s,children:r})};function ls({positions:t,token0:o,token1:i,feeTier:r}){return t.find(s=>(s.details.token0.toLowerCase()===(o==null?void 0:o.address)||s.details.token0.toLowerCase()===(i==null?void 0:i.address))&&(s.details.token1.toLowerCase()===(o==null?void 0:o.address)||s.details.token1.toLowerCase()===(i==null?void 0:i.address))&&s.details.fee==r&&!s.closed)}function ds({chainId:t,token0:o,token1:i,feeTier:r,hookAddress:s,isDynamic:l,protocolVersion:a,loading:d}){const n=qt(),{t:c}=rt(),{positions:h}=Jr(n.address??""),b=h&&ls({positions:h,token0:o,token1:i,feeTier:r}),m=b==null?void 0:b.details.tokenId,y=Ht(),g=mo(),k=o&&K(o),$=i&&K(i),j=se(k&&ne(k)),D=se($&&ne($)),T=async()=>{if(k&&$){const R=k.isNative?it:k.address,B=$.isNative?it:$.address,W=Xt(t??k.chainId);if(m)y(`/positions/${a==null?void 0:a.toLowerCase()}/${W}/${m}`,{state:{from:g.pathname}});else{const z=new URLSearchParams;z.set("currencyA",R),z.set("currencyB",B),z.set("chain",W),r&&z.set("feeTier",r.toString()),s&&z.set("hook",s),l&&z.set("isDynamic","true");const et=`/positions/create/${a==null?void 0:a.toLowerCase()}?${z.toString()}`;y(et,{state:{from:g.pathname}})}}},[_,u]=(0,v.useReducer)(R=>!R,!1),p=st(),x=!p.xl,w=p.md,[P,I]=(0,v.useState)(!1),A=(0,v.useCallback)(()=>I(!1),[]),[S,L]=(0,v.useState)(),f=(0,v.useCallback)(R=>{L(R),I(!0)},[]);return d||!k||!$?(0,e.jsxs)("div",{"data-testid":"pdp-buttons-loading-skeleton",className:rs,children:[(0,e.jsx)(nt,{containerWidth:"50%",width:"95%"}),(0,e.jsx)("span",{className:ns}),(0,e.jsx)(nt,{containerWidth:"50%",width:"95%"})]}):(0,e.jsxs)("div",{className:is,children:[(0,e.jsx)(cs,{isMobile:w,children:(0,e.jsxs)("div",{className:Ue(""+(os+(w||x?es:ts))),children:[(0,e.jsx)(Ae,{icon:_?(0,e.jsx)(Ii,{size:"$icon.20"}):(0,e.jsx)(li,{size:"$icon.20"}),onPress:u,isOpen:_,"data-testid":`pool-details-${_?"close":"swap"}-button`,children:c(_?"common.close":"common.swap")}),(0,e.jsx)(Ae,{icon:(0,e.jsx)(Di,{size:"$icon.20"}),onPress:T,"data-testid":Vi.PoolDetailsAddLiquidityButton,children:c("common.addLiquidity")})]})}),(0,e.jsxs)(as,{open:_,"data-testid":"pool-details-swap-modal",children:[(0,e.jsx)(Zo,{syncTabToUrl:!1,chainId:t,initialInputCurrency:k,initialOutputCurrency:$}),(0,e.jsx)(re,{currencyInfo:j,onPress:()=>f(j)}),(0,e.jsx)(re,{currencyInfo:D,onPress:()=>f(D)}),S&&(0,e.jsx)(Bo,{currencyInfo0:S,isInfoOnlyWarning:!0,isVisible:P,closeModalOnly:A,onAcknowledge:A})]}),(0,e.jsx)($i,{$open:_&&!x,$maxWidth:V.xl,$zIndex:Gt.sticky,onClick:u})]})}function cs({children:t,isMobile:o}){const i=Ee(),{direction:r}=Ni(),s=o?ki:ss,l=o?{hide:i&&r===Ei.DOWN}:{};return(0,e.jsx)(s,{...l,children:t})}const ps="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1602 _width-10037 ";function us({positions:t}){return(0,e.jsx)("div",{className:ps,children:t==null?void 0:t.map(o=>(0,e.jsx)(Wt,{style:{textDecoration:"none"},to:dn(o),children:(0,e.jsx)(si,{liquidityPosition:o})},`${o.poolId}-${o.status}`))})}let M=(function(t){return t.BUY="Buy",t.SELL="Sell",t.REMOVE="Remove",t.ADD="Add",t})({});const ms=t=>{switch(t){case M.BUY:return yt.t("common.buy.label");case M.SELL:return yt.t("common.sell.label");case M.REMOVE:return yt.t("common.remove.label");case M.ADD:return yt.t("common.add.label");default:return""}},xs=25;function vs({address:t,chainId:o,filter:i=[M.BUY,M.SELL,M.REMOVE,M.ADD],token0:r,protocolVersion:s=F.V3,first:l=xs}){var a,d,n;const{defaultChainId:c}=J(),h={first:l,chain:Pt(o??c)},{loading:b,error:m,data:y,fetchMore:g}=Ro({variables:{...h,poolId:t},skip:s!==F.V4}),{loading:k,error:$,data:j,fetchMore:D}=Ao({variables:{...h,address:t},skip:s!==F.V3}),{loading:T,error:_,data:u,fetchMore:p}=Do({variables:{...h,address:t},skip:!o||s!==F.V2}),x=(0,v.useRef)(!1),{transactions:w,loading:P,fetchMore:I,error:A}=s===F.V4?{transactions:y==null||(a=y.v4Pool)===null||a===void 0?void 0:a.transactions,loading:b,fetchMore:g,error:m}:s===F.V3?{transactions:j==null||(d=j.v3Pool)===null||d===void 0?void 0:d.transactions,loading:k,fetchMore:D,error:$}:{transactions:u==null||(n=u.v2Pair)===null||n===void 0?void 0:n.transactions,loading:T,fetchMore:p,error:_},S=(0,v.useCallback)(({onComplete:f})=>{var R;x.current||(x.current=!0,I({variables:{cursor:w==null||(R=w[w.length-1])===null||R===void 0?void 0:R.timestamp},updateQuery:(B,{fetchMoreResult:W})=>{var z,et,lt;if(!W)return x.current=!1,B;f==null||f();const so=s===F.V4?{v4Pool:{...W.v4Pool,transactions:[...((z=B.v4Pool)===null||z===void 0?void 0:z.transactions)??[],...W.v4Pool.transactions]}}:s===F.V3?{v3Pool:{...W.v3Pool,transactions:[...((et=B.v3Pool)===null||et===void 0?void 0:et.transactions)??[],...W.v3Pool.transactions]}}:{v2Pair:{...W.v2Pair,transactions:[...((lt=B.v2Pair)===null||lt===void 0?void 0:lt.transactions)??[],...W.v2Pair.transactions]}};return x.current=!1,so}}))},[I,w,s]),L=(0,v.useMemo)(()=>(w??[]).map(f=>{var R,B;if(!f)return;const W=parseFloat(f.token0Quantity)>0?f.token0:f.token1,z=(r==null?void 0:r.address)===it?(R=ze[o??Ct.Mainnet])===null||R===void 0?void 0:R.address:r==null?void 0:r.address,et=((B=W.address)===null||B===void 0?void 0:B.toLowerCase())===(z==null?void 0:z.toLowerCase()),lt=f.type===ie.Swap?et?M.SELL:M.BUY:f.type===ie.Remove?M.REMOVE:M.ADD;if(i.includes(lt))return{timestamp:f.timestamp,transaction:f.hash,pool:{token0:{id:f.token0.address??null,symbol:f.token0.symbol??""},token1:{id:f.token1.address??null,symbol:f.token1.symbol??""}},maker:f.account,amount0:parseFloat(f.token0Quantity),amount1:parseFloat(f.token1Quantity),amountUSD:f.usdValue.value,type:lt}}).filter(f=>f!==void 0),[w,r==null?void 0:r.address,o,i]);return(0,v.useMemo)(()=>({transactions:L,loading:P,loadMore:S,error:A}),[L,P,S,A])}const hs="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-4px ",fs=C(te)`
  color: ${({theme:t})=>t.neutral2};
  stroke: ${({theme:t})=>t.neutral2};
`,_s=C.div`
  min-height: 256px;
`;var U=(function(t){return t[t.Timestamp=0]="Timestamp",t[t.Type=1]="Type",t[t.MakerAddress=2]="MakerAddress",t[t.FiatValue=3]="FiatValue",t[t.InputAmount=4]="InputAmount",t[t.OutputAmount=5]="OutputAmount",t})(U||{});const dt={[U.Timestamp]:80,[U.Type]:90,[U.MakerAddress]:125,[U.FiatValue]:125,[U.InputAmount]:125,[U.OutputAmount]:125};function Le(t,o){var i,r;if((o==null?void 0:o.address)===it){var s,l;const a=mi(o.chain);return a&&((s=t.id)===null||s===void 0?void 0:s.toLowerCase())===((l=ze[a])===null||l===void 0?void 0:l.address.toLowerCase())}return((i=t.id)===null||i===void 0?void 0:i.toLowerCase())===(o==null||(r=o.address)===null||r===void 0?void 0:r.toLowerCase())}function ys({poolAddress:t,token0:o,token1:i,protocolVersion:r}){const s=qe()??Ct.Mainnet,l=oi(),{convertFiatAmountFormatted:a,formatNumberOrString:d}=ut(),[n,c]=(0,v.useReducer)(_=>!_,!1),h=(0,v.useRef)(null),[b,m]=(0,v.useState)([M.BUY,M.SELL,M.REMOVE,M.ADD]),{transactions:y,loading:g,loadMore:k,error:$}=vs({address:t,chainId:s,filter:b,token0:o,protocolVersion:r}),j=g||!!$,D=(0,v.useMemo)(()=>{const _=tn();return[_.accessor(u=>u,{id:"timestamp",size:dt[U.Timestamp],header:()=>(0,e.jsx)(Q,{justifyContent:"flex-start",children:(0,e.jsx)("div",{className:hs,children:(0,e.jsx)(E,{variant:"body3",color:"$neutral1",children:(0,e.jsx)(N,{i18nKey:"common.time"})})})}),cell:u=>{var p,x;return(0,e.jsx)(Q,{loading:j,justifyContent:"flex-start",children:(0,e.jsx)(Ji,{timestamp:Number((p=u.getValue)===null||p===void 0?void 0:p.call(u).timestamp),link:Tt({chainId:s,data:(x=u.getValue)===null||x===void 0?void 0:x.call(u).transaction,type:tt.TRANSACTION})})})}}),_.accessor(u=>{let p,x;return u.type===M.BUY?(p="$statusSuccess",x=(0,e.jsxs)("span",{children:[(0,e.jsx)(N,{i18nKey:"common.buy.label"}),"",o==null?void 0:o.symbol]})):u.type===M.SELL?(p="$statusCritical",x=(0,e.jsxs)("span",{children:[(0,e.jsx)(N,{i18nKey:"common.sell.label"}),"",o==null?void 0:o.symbol]})):(p=u.type===M.ADD?"$statusSuccess":"$statusCritical",x=u.type===M.ADD?(0,e.jsx)(N,{i18nKey:"common.add.label"}):(0,e.jsx)(N,{i18nKey:"common.remove.label"})),(0,e.jsx)(mt,{color:p,children:x})},{id:"swap-type",size:dt[U.Type],header:()=>(0,e.jsx)(Q,{justifyContent:"flex-start",children:(0,e.jsxs)(Yi,{clickable:n,onPress:()=>c(),ref:h,children:[(0,e.jsx)(Gi,{allFilters:Object.values(M).map(u=>({value:u,label:ms(u)})),activeFilter:b,setFilters:m,isOpen:n,toggleFilterModal:c,anchorRef:h}),(0,e.jsx)(E,{variant:"body3",color:"$neutral1",children:(0,e.jsx)(N,{i18nKey:"common.type.label"})})]})}),cell:u=>{var p;return(0,e.jsx)(Q,{loading:j,justifyContent:"flex-start",children:(p=u.getValue)===null||p===void 0?void 0:p.call(u)})}}),_.accessor(u=>u.amountUSD,{id:"fiat-value",maxSize:dt[U.FiatValue],header:()=>(0,e.jsx)(Q,{justifyContent:"flex-end",grow:!0,children:(0,e.jsx)(E,{variant:"body3",color:"$neutral1",children:l})}),cell:u=>{var p;return(0,e.jsx)(Q,{loading:j,justifyContent:"flex-end",grow:!0,children:(0,e.jsx)(mt,{children:a((p=u.getValue)===null||p===void 0?void 0:p.call(u),q.FiatTokenPrice)})})}}),_.accessor(u=>Le(u.pool.token0,o)?u.amount0:u.amount1,{id:"input-amount",maxSize:dt[U.InputAmount],header:()=>(0,e.jsx)(Q,{loading:j,justifyContent:"flex-end",grow:!0,children:(0,e.jsx)(E,{variant:"body3",color:"$neutral1",children:o==null?void 0:o.symbol})}),cell:u=>{var p;return(0,e.jsx)(Q,{loading:j,justifyContent:"flex-end",grow:!0,children:(0,e.jsx)(mt,{children:d({value:Math.abs(((p=u.getValue)===null||p===void 0?void 0:p.call(u))??0),type:q.TokenTx})})})}}),_.accessor(u=>Le(u.pool.token0,o)?u.amount1:u.amount0,{id:"output-amount",maxSize:dt[U.OutputAmount],header:()=>(0,e.jsx)(Q,{loading:j,justifyContent:"flex-end",grow:!0,children:(0,e.jsx)(E,{variant:"body3",color:"$neutral1",children:i==null?void 0:i.symbol})}),cell:u=>{var p;return(0,e.jsx)(Q,{loading:j,justifyContent:"flex-end",grow:!0,children:(0,e.jsx)(mt,{children:d({value:Math.abs(((p=u.getValue)===null||p===void 0?void 0:p.call(u))??0),type:q.TokenTx})})})}}),_.accessor(u=>u.maker,{id:"maker-address",maxSize:dt[U.MakerAddress],header:()=>(0,e.jsx)(Q,{justifyContent:"flex-end",grow:!0,children:(0,e.jsx)(E,{variant:"body3",color:"$neutral1",children:(0,e.jsx)(N,{i18nKey:"common.wallet.label"})})}),cell:u=>{var p,x;return(0,e.jsx)(Q,{loading:j,justifyContent:"flex-end",grow:!0,children:(0,e.jsx)(fs,{href:Tt({chainId:s,data:(p=u.getValue)===null||p===void 0?void 0:p.call(u),type:tt.ADDRESS}),children:(0,e.jsx)(mt,{children:Ut((x=u.getValue)===null||x===void 0?void 0:x.call(u),4,4)})})})}})]},[l,s,b,n,a,d,j,o,i==null?void 0:i.symbol]),T=st();return(0,e.jsx)(_s,{"data-testid":"pool-details-transactions-table",children:(0,e.jsx)(Xi,{columns:D,data:y,loading:g,error:$,loadMore:k,maxHeight:600,defaultPinnedColumns:["timestamp","swap-type"],forcePinning:T.xxl})})}var ot=(function(t){return t.TRANSACTIONS="transactions",t.POSITIONS="positions",t})(ot||{});const Re=C(X.HeadlineMedium)`
  color: ${({theme:t,active:o})=>!o&&t.neutral2};
  ${({disabled:t})=>!t&&_t}
  user-select: none;
`;function gs({poolAddress:t,token0:o,token1:i,protocolVersion:r}){const[s,l]=(0,v.useState)(ot.TRANSACTIONS),a=qt(),{data:d}=ti({address:a.address,poolId:t}),n=(0,v.useMemo)(()=>d==null?void 0:d.positions.map(c=>cn(c)).filter(c=>c!==void 0),[d==null?void 0:d.positions]);return(0,e.jsxs)(Y,{gap:"lg",children:[(0,e.jsxs)(H,{gap:"16px",children:[(0,e.jsx)(Re,{active:s===ot.TRANSACTIONS,onClick:()=>l(ot.TRANSACTIONS),disabled:!(n!=null&&n.length),children:(0,e.jsx)(N,{i18nKey:"common.transactions"})}),!!(n!=null&&n.length)&&(0,e.jsxs)(Re,{active:s===ot.POSITIONS,onClick:()=>l(ot.POSITIONS),children:[(0,e.jsx)(N,{i18nKey:"pool.positions"}),` (${n==null?void 0:n.length})`]})]}),s===ot.TRANSACTIONS?(0,e.jsx)(ys,{poolAddress:t,token0:o,token1:i,protocolVersion:r}):(0,e.jsx)(us,{positions:n})]})}const bs=(t,o)=>{const i=o==null?void 0:o.token0.symbol,r=o==null?void 0:o.token1.symbol,s=t("common.buyAndSell");return!i||!r?s:`${i}/${r}: ${s}`};var js=Z(qi());const Ts="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column  _mt-_xl_-24px",ks="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334047 _width-360px  _width-_xl_10037 _mt-_xl_44px",ws=C(H)`
  padding: 0 20px 52px;
  justify-content: center;
  width: 100%;
  gap: 80px;
  align-items: flex-start;

  @media screen and (min-width: ${({theme:t})=>t.breakpoint.lg}px) {
    padding: 48px 40px;
  }
  @media screen and (max-width: ${({theme:t})=>t.breakpoint.xl}px) {
    flex-direction: column;
    align-items: center;
    gap: 0px;
  }
`,Ss=C(Y)`
  gap: 40px;
  max-width: 780px;
  overflow: hidden;
  justify-content: flex-start;
  width: 100%;

  @media (max-width: ${V.xl}px) {
    max-width: unset;
  }
`,Cs=C.hr`
  border: 0.5px solid ${({theme:t})=>t.surface3};
  width: 100%;
`,Ps=C(Y)`
  gap: 24px;
  padding: 20px;

  @media (max-width: ${V.xl}px) and (min-width: ${V.md}px) {
    flex-direction: row;
    flex-wrap: wrap;
    padding: unset;
  }

  @media (max-width: ${V.md}px) {
    padding: unset;
  }
`,$s=C(Zt)`
  width: 100%;
  font-size: 24px;
  font-weight: 485;
  line-height: 32px;
`,Ds=C(Y)`
  gap: 16px;
  width: 100%;
`;function Is({poolData:t,chainId:o,protocolVersion:i}){return i===F.V4?[t==null?void 0:t.token0,t==null?void 0:t.token1]:t&&o?[Mt(o,t.token0),Mt(o,t.token1)]:[void 0,void 0]}function sm(){var t,o,i,r;const{t:s}=rt(),{poolAddress:l}=xo(),a=qe(),d=a?wo(a):void 0,{data:n,loading:c}=_n((l==null?void 0:l.toLowerCase())??"",d==null?void 0:d.id),[h,b]=(0,v.useReducer)(S=>!S,!1),m=Is({poolData:n,chainId:d==null?void 0:d.id,protocolVersion:n==null?void 0:n.protocolVersion}),[y,g]=h?[m[1],m[0]]:m,k=Oe(Ve.LpIncentives),$=(0,v.useMemo)(()=>{var S;return ai({volume24h:n==null?void 0:n.volumeUSD24H,tvl:n==null?void 0:n.tvlUSD,feeTier:n==null||(S=n.feeTier)===null||S===void 0?void 0:S.feeAmount})},[n==null?void 0:n.volumeUSD24H,n==null?void 0:n.tvlUSD,n==null?void 0:n.feeTier]),j=Ht(),{darkMode:D,surface2:T,accent1:_}=at(),u=xe(y&&K(y),{backgroundColor:T,darkMode:D}),p=xe(g&&K(g),{backgroundColor:T,darkMode:D}),w=!c&&!n||(!l||!d),P=(0,v.useMemo)(()=>{const S=n==null?void 0:n.token0.symbol,L=n==null?void 0:n.token1.symbol,f=`${S}/${L}`,R=(d==null?void 0:d.label)??"Ethereum";return{title:f,url:window.location.href,description:`Swap ${f} on ${R}. Trade tokens and provide liquidity. Real-time prices, charts, transaction data, and more.`}},[d==null?void 0:d.label,n==null?void 0:n.token0.symbol,n==null?void 0:n.token1.symbol]),I=Mi(P),A=(0,v.useMemo)(()=>{var S;return!!(k&&n&&(!((S=n.rewardsCampaign)===null||S===void 0)&&S.boostedApr)&&n.rewardsCampaign.boostedApr>0)},[k,n]);return(0,v.useEffect)(()=>{w&&j(`/explore/pools?type=${Li.Pools}&result=${Vo.NotFound}`)},[w,j]),w?null:(0,e.jsxs)(Ki,{token0:u!==_?u:void 0,token1:p!==_?p:void 0,children:[(0,e.jsxs)(js.Helmet,{children:[(0,e.jsx)("title",{children:bs(s,n)}),I.map((S,L)=>(0,e.jsx)("meta",{...S},L))]}),(0,e.jsx)(Oi,{logImpression:!c,page:Oo.PoolDetailsPage,properties:{poolAddress:l,chainId:d.id,feeTier:n==null?void 0:n.feeTier,token0Address:n==null?void 0:n.token0.address,token1Address:n==null?void 0:n.token1.address,token0Symbol:n==null?void 0:n.token0.symbol,token1Symbol:n==null?void 0:n.token1.symbol,token0Name:n==null?void 0:n.token0.name,token1Name:n==null?void 0:n.token1.name},children:(0,e.jsxs)(ws,{children:[(0,e.jsxs)(Ss,{children:[(0,e.jsxs)(Y,{gap:"20px",children:[(0,e.jsxs)(Y,{children:[(0,e.jsx)(ir,{chainId:d.id,poolAddress:l,token0:y,token1:g,loading:c}),(0,e.jsx)(nr,{chainId:d.id,poolAddress:l,token0:y,token1:g,feeTier:n==null?void 0:n.feeTier,hookAddress:n==null?void 0:n.hookAddress,protocolVersion:n==null?void 0:n.protocolVersion,rewardsApr:n==null||(t=n.rewardsCampaign)===null||t===void 0?void 0:t.boostedApr,toggleReversed:b,loading:c})]}),(0,e.jsx)(Rn,{poolData:n,loading:c,isReversed:h,chain:d.backendChain.chain})]}),(0,e.jsx)(Cs,{}),(0,e.jsx)(gs,{poolAddress:l,token0:y,token1:g,protocolVersion:n==null?void 0:n.protocolVersion})]}),(0,e.jsxs)("div",{className:ks,children:[(0,e.jsx)("div",{className:Ts,children:(0,e.jsx)(ds,{chainId:d.id,token0:y,token1:g,feeTier:n==null||(o=n.feeTier)===null||o===void 0?void 0:o.feeAmount,hookAddress:n==null?void 0:n.hookAddress,isDynamic:n==null||(i=n.feeTier)===null||i===void 0?void 0:i.isDynamic,protocolVersion:n==null?void 0:n.protocolVersion,loading:c})}),n&&(0,e.jsx)(zn,{poolApr:$,rewardsApr:k?(r=n.rewardsCampaign)===null||r===void 0?void 0:r.boostedApr:void 0}),A&&(0,e.jsx)(wn,{rewardsCampaign:n==null?void 0:n.rewardsCampaign}),(0,e.jsx)(jr,{poolData:n,isReversed:h,chainId:d.id,loading:c}),(0,e.jsxs)(Ps,{children:[(0,e.jsx)($s,{children:(0,e.jsx)(N,{i18nKey:"common.links"})}),(0,e.jsxs)(Ds,{children:[(n==null?void 0:n.protocolVersion)!==F.V4&&(0,e.jsx)(Dt,{address:l,chainId:d.id,tokens:[y,g],loading:c}),(0,e.jsx)(Dt,{address:y==null?void 0:y.address,chainId:d.id,tokens:[y],loading:c}),(0,e.jsx)(Dt,{address:g==null?void 0:g.address,chainId:d.id,tokens:[g],loading:c})]})]})]})]})})]})}export{sm as default};
