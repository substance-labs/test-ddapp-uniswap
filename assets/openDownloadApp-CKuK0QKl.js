import{__toESM as P}from"./chunk-DgAfPHQg.js";import{require_react as h}from"./react-CNoFhWkx.js";import{isWebAndroid as E,isWebIOS as I}from"./index.web-BqgtOHN3.js";import{InterfaceEventName as y}from"./interface-BdpC4qOF.js";import{ElementName as l}from"./element-Wnp4RkdY.js";import{sendAnalyticsEvent as b}from"./send.web-CrSXW2rw.js";import{UserRejectedRequestError as _}from"./errors-BaezSPLl.js";import{AppDownloadPlatform as m}from"./types-DhBONJgE.js";var v=(function(t){function r(n){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(n)}function o(n,e){if(r(n)!="object"||!n)return n;var a=n[Symbol.toPrimitive];if(a!==void 0){var f=a.call(n,e||"default");if(r(f)!="object")return f;throw TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function p(n){var e=o(n,"string");return r(e)=="symbol"?e:e+""}function S(n,e,a){return(e=p(e))in n?Object.defineProperty(n,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[e]=a,n}return t.defineProperty=S,t})({}),W=P(h());let i=(function(t){return t.Idle="idle",t.Pending="pending",t})({});var d=class extends Error{constructor(t){super(`Already connecting to ${t}`),v.defineProperty(this,"existingConnectorId",void 0),this.existingConnectorId=t}};let u={status:i.Idle,error:void 0};function A(){return u}const c=new Set;function D(t){return c.add(t),()=>{c.delete(t)}}function N(t){u=t,c.forEach(r=>r())}function s(t){N(t)}function B(){return(0,W.useSyncExternalStore)(D,A)}function x(t){return{connect:async r=>{try{if(u.status===i.Pending)throw new d(u.meta.name);s({status:i.Pending,meta:r.walletConnector}),await t.connect(r),s({status:i.Idle})}catch(o){if(o instanceof _||o instanceof d){s({status:i.Idle});return}const p=o instanceof Error?o.message:"Unknown error";throw s({status:i.Idle,error:p}),o}}}}const g={[l.UniswapWalletModalDownloadButton]:"https://uniswapwallet.onelink.me/8q3y/qfwlncf9",[l.UniswapWalletNavbarMenuDownloadButton]:"https://uniswapwallet.onelink.me/8q3y/46tvu6pb",[l.UniswapWalletLandingPageDownloadButton]:"https://uniswapwallet.onelink.me/8q3y/79gveilz",[l.UniswapWalletBannerDownloadButton]:"https://uniswapwallet.onelink.me/8q3y/jh9orof3"},L="https://wallet.uniswap.org/";function R({element:t}){I?w({element:t,appPlatform:m.Ios,linkTarget:"uniswap_wallet_appstore"}):E?w({element:t,appPlatform:m.Android,linkTarget:"uniswap_wallet_playstore"}):(b(y.UniswapWalletMicrositeOpened,{element:t}),window.open(g[t],"uniswap_wallet_microsite"))}const w=t=>{b(y.UniswapWalletAppDownloadOpened,{element:t.element,appPlatform:t.appPlatform}),window.open(g[t.element],t.linkTarget)};export{i as ConnectionStatus,L as MICROSITE_LINK,R as openDownloadApp,s as updateConnectionState,B as useConnectionState,x as wrapConnectWalletServiceWithStateTracking};
