import{__commonJS as ri,__require as Fe,__toESM as Qe}from"./chunk-DgAfPHQg.js";import{require_react as ni}from"./react-CNoFhWkx.js";import{Switch as ai}from"./src-DOOtfpHS.js";import{isInterface as ii}from"./index.web-BqgtOHN3.js";import{DEFAULT_LOCALE as oi,FiatCurrency as zr,Language as si,Locale as vt,mapLocaleToLanguage as ci}from"./constants-CrXoXfFH.js";import{useDispatch as Bt,useSelector as ui}from"./es-Iwj7vF3u.js";import{ReactQueryCacheKey as Yr}from"./cache-BFZkIToX.js";import{global as ye,init_dist as li}from"./dist-Q7olfaoJ.js";import{require_jsx_runtime as di}from"./jsx-runtime-D7bMTQeG.js";import{getFeatureFlaggedChainIds as fi,selectIsTestnetModeEnabled as Qr}from"./useEnabledChains-DuB86c95.js";import{createDatadogReduxEnhancer as pi,getDevLogger as Xe,isDevEnv as vi,isTestEnv as Sr,logger as W,tryCatch as hi,useEvent as Ge}from"./hooks-BXO4d1DJ.js";import{Buffer as Xr,Buffer$1 as gi,init_dist as Gr}from"./dist-ceZDlR1V.js";import{ALLOW_ANALYTICS_ATOM_KEY as mi}from"./analytics.web-DLc1_wTk.js";import{combineReducers as Kr,compose as yi,configureStore as Si,createAction as Pt,createListenerMiddleware as _i,createReducer as Ut,createSlice as Ke,createStore as wi}from"./redux-toolkit.esm-BnRUBto_.js";import{fiatOnRampAggregatorApi as bt,setupListeners as Ti}from"./api-BsCrUy1C.js";import{ACTION_CHANNEL as bi,ALL as Ii,CALL as Ei,CANCEL as Ci,CANCEL$1 as Oi,CANCELLED as Ai,CHANNEL_END_TYPE as Jr,CPS as Ri,DEFAULT_VERSION as Zr,FLUSH as Ni,FLUSH$1 as en,FORK as Di,GET_CONTEXT as Bi,HandledTransactionInterrupt as Pi,IO as Ui,JOIN as ki,JupiterExecuteError as Li,KEY_PREFIX as kt,MATCH as _r,MULTICAST as xi,PAUSE as tn,PERSIST as rn,PURGE as nn,PUT as Fi,RACE as $i,REGISTER as an,REHYDRATE as Lt,SAGA_ACTION as Mi,SELECT as qi,SELF_CANCELLATION as Vi,SET_CONTEXT as ji,TAKE as Wi,TASK as Hi,TASK_CANCEL as Ae,TERMINATE as zi,TransactionStepFailedError as Yi,UnexpectedTransactionStateError as xt,_extends as Qi,addTransactionBreadcrumb as Xi,array as Pe,assignWithSymbols as Ft,call as $,createAllStyleChildCallbacks as on,createEmptyArray as Gi,createSaga as $t,delay as It,expanding as Ki,flatMap as Ji,func as We,getDisplayableError as Zi,getLocation as eo,getMetaInfo as Mt,getSigner as to,getSwapTransactionInfo as Je,handleApprovalTransactionStep as ro,handleOnChainStep as sn,handlePermitTransactionStep as no,handleSignatureStep as cn,identity as ao,internalErr as Et,iterator as qt,kTrue as io,logError as oo,makeIterator as wr,noop as re,notUndef as so,once as co,promise as Ze,put as He,remove as et,select as un,shouldCancel as uo,shouldComplete as lo,shouldTerminate as fo,spawn as po,string as vo,stringableFunc as ho,symbol as go,undef as mo,waitForRehydration as yo,watchForInterruption as So,wrapSagaDispatch as _o}from"./utils-CK6a47NA.js";import{Currency as wo,GQL_MAINNET_CHAINS as To,GQL_TESTNET_CHAINS as bo,Platform as Ct,PortfolioBalancesDocument as ln,Token as Tr,TokenBalancePartsFragmentDoc as Io,TokenDocument as dn,TransactionStatus as ht,UniverseChainId as ve,VersionedTransaction as Eo,fromGraphQLChain as ze,getEnabledChains as Co,getPrimaryStablecoin as Oo,init_index_browser_esm as Ao,init_sdk_core_esm as fn,invariant as Ro,isArray as No,isL2ChainId as Do,isTestnetChain as Bo}from"./utils-BX1Fu73x.js";import{DEFAULT_DEADLINE_FROM_NOW as pn,DEFAULT_TXN_DISMISS_MS as Po,INTERNAL_JSON_RPC_ERROR_CODE as Uo,L2_TXN_DISMISS_MS as ko,ZERO_PERCENT as Lo}from"./misc-BMnlqqV4.js";import{buildCurrencyId as Be,buildNativeCurrencyId as xo,buildWrappedNativeCurrencyId as Fo,currencyIdToAddress as $o,currencyIdToChain as Mo,getNativeAddress as Vt,getValidAddress as Ot,isNativeCurrencyAddress as qo,isReference as Vo,isSVMChain as jo}from"./currencyId-Ci6selsx.js";import{SearchResultType as Ce,favoritesReducer as Wo,searchHistoryReducer as Ho,searchResultId as zo,useTokenBalancesQuery as Yo}from"./slice-DimuiOR8.js";import{ONE_SECOND_MS as jt}from"./time-D_OqcZ4M.js";import{WalletEventName as Qo}from"./wallet-gHLp87c6.js";import{SwapEventName as tt}from"./features-yACC1hVw.js";import{InterfaceEventName as gt}from"./interface-BdpC4qOF.js";import{UniswapEventName as Xo}from"./uniswap-Bm-6KILn.js";import{tokenAddressOrNativeAddress as Go}from"./linking-D29RyAR8.js";import{RouterPreference as Ye}from"./types-DbOmsKtk.js";import{getCurrentLanguageFromNavigator as Ko,userSettingsReducer as Jo}from"./slice-CYdI68Yo.js";import{GetCapabilitiesStatus as Zo,UniswapUserPropertyName as es,handleGetCapabilities as ts,reducer_default as rs,setCapabilitiesByChain as ns,setUserProperty as as,signSolanaTransactionWithCurrentWallet as is,walletCapabilitiesListenerMiddleware as os}from"./defaultOptions-ENwqzwHj.js";import{ValueType as vn,getCurrencyAmount as hn}from"./getCurrencyAmount-vvZpAzIm.js";import{serializeToken as br}from"./currency-DIOEzjz2.js";import{DEFAULT_INACTIVE_LIST_URLS as Se,VersionUpgrade as ss,acceptListUpdate as cs,addList as us,fetchTokenList as mt,getVersionUpgrade as ls,removeList as ds}from"./actions-BvAnf7JG.js";import{SlippageTolerance as Ir,initialState as fs,reducer_default as ps}from"./reducer-26KeQlno.js";import{DynamicConfigs as vs,NetworkRequestsConfigKey as hs}from"./configs-B4dDdw82.js";import{FeatureFlags as gs,getDynamicConfigValue as ms,getFeatureFlagName as ys}from"./hooks-Bp0VtWbX.js";import{getStatsigClient as Ss}from"./statsig-B7I9iQRf.js";import{formatSwapSignedAnalyticsEventProperties as Oe}from"./analytics-Ccvj1WVk.js";import{sendAnalyticsEvent as ce}from"./send.web-CrSXW2rw.js";import{RoutingPreference as gn,fetchQuote as _s,fetchSwap as ws,getClassicQuoteFromResponse as Ts,slippageToleranceToPercent as At,submitOrder as bs,toTradingApiSupportedChainId as Is,useV4SwapEnabled as Es}from"./TradingApiClient-Cp_0ez5S.js";import{Routing as he,UNISWAPX_ROUTING_VARIANTS as Cs,isBridge as Os,isClassic as mn,isJupiter as yn,isUniswapX as As}from"./selectors-BwkayGDl.js";import{JupiterApiClient as Rs,SharedQueryClient as Ns,TradeType as Ds,getBaseTradeAnalyticsProperties as Bs,getOnChainBalancesFetch as Ps}from"./useUSDCPrice-HO7Wgroz.js";import{currencyIdToContractInput as Sn}from"./getCurrencySafetyInfo-BHD1ohD-.js";import{uniswapUrls as _n}from"./urls-kwiZbYPW.js";import{is404Error as Us}from"./createApiClient-BjXZMbEB.js";import{TransactionOriginType as wn,TransactionStatus as Tn,TransactionType as k}from"./transactionDetails-BsNW_jus.js";import{useLocalizationContext as ks}from"./LocalizationContext-B31peW1_.js";import{useWallet as Ls}from"./useWallet-CL5owP9P.js";import{useTrace as xs}from"./TraceContext-Ddfk7zjz.js";import{routingApi as Re}from"./queryOptions-Dj3qRbwo.js";import{TransactionStepType as ee}from"./types-7DAoWLTI.js";import{PopupType as _e,popupRegistry as we}from"./types-BSmAADNJ.js";import{wagmiConfig as Fs}from"./wagmiConfig-0BYSDqyO.js";import{getAccount as $s,useAccount as bn}from"./useAccount-C5hwiBwN.js";import{atom as In,useAtomValue as Er,useUpdateAtom as Wt}from"./utils-CDaPKk14.js";import{SignatureType as yt,addTransaction as En,getRoutingForTransaction as Ms,transactionReducer as qs}from"./slice-qANrfSbi.js";import{noop as Vs}from"./noop-BDbB2pLB.js";import{didUserReject as Cn}from"./swapErrorToUserReadableMessage-DgHZMHU-.js";import{createApprovalTransactionStep as js,createPermit2SignatureStep as Ws,createPermit2TransactionStep as Hs,createRevocationTransactionStep as zs,isSignerMnemonicAccountDetails as Ys,liquiditySaga as Qs,validateTransactionRequest as Xs}from"./AccountDetails-pkaz6EG4.js";import{lpIncentivesClaimSaga as Gs}from"./lpIncentivesSaga-CyYcBLmn.js";import{reducer_default as Ks}from"./reducer-CcXO4HTO.js";import{useSelectChain as On}from"./useSelectChain-CA5zoRWi.js";import{z as J}from"./timing-DsWr56iv.js";import{FLASHBLOCKS_UI_SKIP_ROUTES as Js,addSignature as Zs,getIsFlashblocksEnabled as ec,reducer_default as tc}from"./useIsUnichainFlashblocksEnabled-BbPYkimv.js";import{UniswapXOrderStatus as rc}from"./uniswapx-DgS0k47c.js";import{useSwapFormStore as nc}from"./useSwapFormStore-D1oVGbBf.js";import{PermitMethod as ac,isValidSwapTxContext as ic}from"./swapTxAndGasInfo-DxVAGFqc.js";import{gqlTokenToCurrencyInfo as oc}from"./useCurrencyInfo-Bxa3J04d.js";import{reducer_default as sc}from"./reducer-1kwGyyVS.js";import{reducer_default as cc}from"./constants-BNEwFtLH.js";import{slice_default as uc}from"./slice-CGCdMmTE.js";import{Field as lc,resetMintState as dc,setFullRange as fc,typeInput as pc,typeLeftRangeInput as vc,typeRightRangeInput as hc,typeStartPriceInput as gc}from"./actions-Budqlwp-.js";import{uniswapBehaviorHistoryReducer as mc}from"./slice-DoLbOto3.js";import{notificationReducer as yc}from"./slice-Crjw990S.js";import{tokensReducer as Sc}from"./slice-CI92BTuM.js";import{visibilityReducer as _c}from"./slice-CaJcHsUP.js";var An=ri({"../../node_modules/localforage/dist/localforage.js"(e,t){li();/*!
localForage -- Offline Storage, Improved
Version 1.10.0
https://localforage.github.io/localForage
(c) 2013-2017 Mozilla, Apache License 2.0
*/(function(r){if(typeof e=="object"&&typeof t<"u")t.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var a;typeof window<"u"?a=window:typeof ye<"u"?a=ye:typeof self<"u"?a=self:a=this,a.localforage=r()}})(function(){var r,a,o;return(function s(p,f,u){function h(S,O){if(!f[S]){if(!p[S]){var m=typeof Fe=="function"&&Fe;if(!O&&m)return m(S,!0);if(g)return g(S,!0);var T=new Error("Cannot find module '"+S+"'");throw T.code="MODULE_NOT_FOUND",T}var A=f[S]={exports:{}};p[S][0].call(A.exports,function(N){var L=p[S][1][N];return h(L||N)},A,A.exports,s,p,f,u)}return f[S].exports}for(var g=typeof Fe=="function"&&Fe,y=0;y<u.length;y++)h(u[y]);return h})({1:[function(s,p,f){(function(u){"use strict";var h=u.MutationObserver||u.WebKitMutationObserver,g;if(h){var y=0,S=new h(N),O=u.document.createTextNode("");S.observe(O,{characterData:!0}),g=function(){O.data=y=++y%2}}else if(!u.setImmediate&&typeof u.MessageChannel<"u"){var m=new u.MessageChannel;m.port1.onmessage=N,g=function(){m.port2.postMessage(0)}}else"document"in u&&"onreadystatechange"in u.document.createElement("script")?g=function(){var U=u.document.createElement("script");U.onreadystatechange=function(){N(),U.onreadystatechange=null,U.parentNode.removeChild(U),U=null},u.document.documentElement.appendChild(U)}:g=function(){setTimeout(N,0)};var T,A=[];function N(){T=!0;for(var U,R,B=A.length;B;){for(R=A,A=[],U=-1;++U<B;)R[U]();B=A.length}T=!1}p.exports=L;function L(U){A.push(U)===1&&!T&&g()}}).call(this,typeof ye<"u"?ye:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(s,p,f){"use strict";var u=s(1);function h(){}var g={},y=["REJECTED"],S=["FULFILLED"],O=["PENDING"];p.exports=m;function m(C){if(typeof C!="function")throw new TypeError("resolver must be a function");this.state=O,this.queue=[],this.outcome=void 0,C!==h&&L(this,C)}m.prototype.catch=function(C){return this.then(null,C)},m.prototype.then=function(C,x){if(typeof C!="function"&&this.state===S||typeof x!="function"&&this.state===y)return this;var P=new this.constructor(h);if(this.state!==O){var q=this.state===S?C:x;A(P,q,this.outcome)}else this.queue.push(new T(P,C,x));return P};function T(C,x,P){this.promise=C,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof P=="function"&&(this.onRejected=P,this.callRejected=this.otherCallRejected)}T.prototype.callFulfilled=function(C){g.resolve(this.promise,C)},T.prototype.otherCallFulfilled=function(C){A(this.promise,this.onFulfilled,C)},T.prototype.callRejected=function(C){g.reject(this.promise,C)},T.prototype.otherCallRejected=function(C){A(this.promise,this.onRejected,C)};function A(C,x,P){u(function(){var q;try{q=x(P)}catch(H){return g.reject(C,H)}q===C?g.reject(C,new TypeError("Cannot resolve promise with itself")):g.resolve(C,q)})}g.resolve=function(C,x){var P=U(N,x);if(P.status==="error")return g.reject(C,P.value);var q=P.value;if(q)L(C,q);else{C.state=S,C.outcome=x;for(var H=-1,Z=C.queue.length;++H<Z;)C.queue[H].callFulfilled(x)}return C},g.reject=function(C,x){C.state=y,C.outcome=x;for(var P=-1,q=C.queue.length;++P<q;)C.queue[P].callRejected(x);return C};function N(C){var x=C&&C.then;if(C&&(typeof C=="object"||typeof C=="function")&&typeof x=="function")return function(){x.apply(C,arguments)}}function L(C,x){var P=!1;function q(te){P||(P=!0,g.reject(C,te))}function H(te){P||(P=!0,g.resolve(C,te))}function Z(){x(H,q)}var K=U(Z);K.status==="error"&&q(K.value)}function U(C,x){var P={};try{P.value=C(x),P.status="success"}catch(q){P.status="error",P.value=q}return P}m.resolve=R;function R(C){return C instanceof this?C:g.resolve(new this(h),C)}m.reject=B;function B(C){var x=new this(h);return g.reject(x,C)}m.all=M;function M(C){var x=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var P=C.length,q=!1;if(!P)return this.resolve([]);for(var H=new Array(P),Z=0,K=-1,te=new this(h);++K<P;)ae(C[K],K);return te;function ae(ue,le){x.resolve(ue).then(Te,function(de){q||(q=!0,g.reject(te,de))});function Te(de){H[le]=de,++Z===P&&!q&&(q=!0,g.resolve(te,H))}}}m.race=z;function z(C){var x=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var P=C.length,q=!1;if(!P)return this.resolve([]);for(var H=-1,Z=new this(h);++H<P;)K(C[H]);return Z;function K(te){x.resolve(te).then(function(ae){q||(q=!0,g.resolve(Z,ae))},function(ae){q||(q=!0,g.reject(Z,ae))})}}},{1:1}],3:[function(s,p,f){(function(u){"use strict";typeof u.Promise!="function"&&(u.Promise=s(2))}).call(this,typeof ye<"u"?ye:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(s,p,f){"use strict";var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function h(n,c){if(!(n instanceof c))throw new TypeError("Cannot call a class as a function")}function g(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var y=g();function S(){try{if(!y||!y.open)return!1;var n=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),c=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!n||c)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function O(n,c){n=n||[],c=c||{};try{return new Blob(n,c)}catch(l){if(l.name!=="TypeError")throw l;for(var i=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,d=new i,v=0;v<n.length;v+=1)d.append(n[v]);return d.getBlob(c.type)}}typeof Promise>"u"&&s(3);var m=Promise;function T(n,c){c&&n.then(function(i){c(null,i)},function(i){c(i)})}function A(n,c,i){typeof c=="function"&&n.then(c),typeof i=="function"&&n.catch(i)}function N(n){return typeof n!="string"&&(console.warn(n+" used as a key, but it is not a string."),n=String(n)),n}function L(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var U="local-forage-detect-blob-support",R=void 0,B={},M=Object.prototype.toString,z="readonly",C="readwrite";function x(n){for(var c=n.length,i=new ArrayBuffer(c),d=new Uint8Array(i),v=0;v<c;v++)d[v]=n.charCodeAt(v);return i}function P(n){return new m(function(c){var i=n.transaction(U,C),d=O([""]);i.objectStore(U).put(d,"key"),i.onabort=function(v){v.preventDefault(),v.stopPropagation(),c(!1)},i.oncomplete=function(){var v=navigator.userAgent.match(/Chrome\/(\d+)/),l=navigator.userAgent.match(/Edge\//);c(l||!v||parseInt(v[1],10)>=43)}}).catch(function(){return!1})}function q(n){return typeof R=="boolean"?m.resolve(R):P(n).then(function(c){return R=c,R})}function H(n){var c=B[n.name],i={};i.promise=new m(function(d,v){i.resolve=d,i.reject=v}),c.deferredOperations.push(i),c.dbReady?c.dbReady=c.dbReady.then(function(){return i.promise}):c.dbReady=i.promise}function Z(n){var c=B[n.name],i=c.deferredOperations.pop();if(i)return i.resolve(),i.promise}function K(n,c){var i=B[n.name],d=i.deferredOperations.pop();if(d)return d.reject(c),d.promise}function te(n,c){return new m(function(i,d){if(B[n.name]=B[n.name]||Zt(),n.db)if(c)H(n),n.db.close();else return i(n.db);var v=[n.name];c&&v.push(n.version);var l=y.open.apply(y,v);c&&(l.onupgradeneeded=function(_){var w=l.result;try{w.createObjectStore(n.storeName),_.oldVersion<=1&&w.createObjectStore(U)}catch(b){if(b.name==="ConstraintError")console.warn('The database "'+n.name+'" has been upgraded from version '+_.oldVersion+" to version "+_.newVersion+', but the storage "'+n.storeName+'" already exists.');else throw b}}),l.onerror=function(_){_.preventDefault(),d(l.error)},l.onsuccess=function(){var _=l.result;_.onversionchange=function(w){w.target.close()},i(_),Z(n)}})}function ae(n){return te(n,!1)}function ue(n){return te(n,!0)}function le(n,c){if(!n.db)return!0;var i=!n.db.objectStoreNames.contains(n.storeName),d=n.version<n.db.version,v=n.version>n.db.version;if(d&&(n.version!==c&&console.warn('The database "'+n.name+`" can't be downgraded from version `+n.db.version+" to version "+n.version+"."),n.version=n.db.version),v||i){if(i){var l=n.db.version+1;l>n.version&&(n.version=l)}return!0}return!1}function Te(n){return new m(function(c,i){var d=new FileReader;d.onerror=i,d.onloadend=function(v){var l=btoa(v.target.result||"");c({__local_forage_encoded_blob:!0,data:l,type:n.type})},d.readAsBinaryString(n)})}function de(n){var c=x(atob(n.data));return O([c],{type:n.type})}function ke(n){return n&&n.__local_forage_encoded_blob}function na(n){var c=this,i=c._initReady().then(function(){var d=B[c._dbInfo.name];if(d&&d.dbReady)return d.dbReady});return A(i,n,n),i}function aa(n){H(n);for(var c=B[n.name],i=c.forages,d=0;d<i.length;d++){var v=i[d];v._dbInfo.db&&(v._dbInfo.db.close(),v._dbInfo.db=null)}return n.db=null,ae(n).then(function(l){return n.db=l,le(n)?ue(n):l}).then(function(l){n.db=c.db=l;for(var _=0;_<i.length;_++)i[_]._dbInfo.db=l}).catch(function(l){throw K(n,l),l})}function ie(n,c,i,d){d===void 0&&(d=1);try{var v=n.db.transaction(n.storeName,c);i(null,v)}catch(l){if(d>0&&(!n.db||l.name==="InvalidStateError"||l.name==="NotFoundError"))return m.resolve().then(function(){if(!n.db||l.name==="NotFoundError"&&!n.db.objectStoreNames.contains(n.storeName)&&n.version<=n.db.version)return n.db&&(n.version=n.db.version+1),ue(n)}).then(function(){return aa(n).then(function(){ie(n,c,i,d-1)})}).catch(i);i(l)}}function Zt(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ia(n){var c=this,i={db:null};if(n)for(var d in n)i[d]=n[d];var v=B[i.name];v||(v=Zt(),B[i.name]=v),v.forages.push(c),c._initReady||(c._initReady=c.ready,c.ready=na);var l=[];function _(){return m.resolve()}for(var w=0;w<v.forages.length;w++){var b=v.forages[w];b!==c&&l.push(b._initReady().catch(_))}var I=v.forages.slice(0);return m.all(l).then(function(){return i.db=v.db,ae(i)}).then(function(E){return i.db=E,le(i,c._defaultConfig.version)?ue(i):E}).then(function(E){i.db=v.db=E,c._dbInfo=i;for(var D=0;D<I.length;D++){var F=I[D];F!==c&&(F._dbInfo.db=i.db,F._dbInfo.version=i.version)}})}function oa(n,c){var i=this;n=N(n);var d=new m(function(v,l){i.ready().then(function(){ie(i._dbInfo,z,function(_,w){if(_)return l(_);try{var b=w.objectStore(i._dbInfo.storeName),I=b.get(n);I.onsuccess=function(){var E=I.result;E===void 0&&(E=null),ke(E)&&(E=de(E)),v(E)},I.onerror=function(){l(I.error)}}catch(E){l(E)}})}).catch(l)});return T(d,c),d}function sa(n,c){var i=this,d=new m(function(v,l){i.ready().then(function(){ie(i._dbInfo,z,function(_,w){if(_)return l(_);try{var b=w.objectStore(i._dbInfo.storeName),I=b.openCursor(),E=1;I.onsuccess=function(){var D=I.result;if(D){var F=D.value;ke(F)&&(F=de(F));var V=n(F,D.key,E++);V!==void 0?v(V):D.continue()}else v()},I.onerror=function(){l(I.error)}}catch(D){l(D)}})}).catch(l)});return T(d,c),d}function ca(n,c,i){var d=this;n=N(n);var v=new m(function(l,_){var w;d.ready().then(function(){return w=d._dbInfo,M.call(c)==="[object Blob]"?q(w.db).then(function(b){return b?c:Te(c)}):c}).then(function(b){ie(d._dbInfo,C,function(I,E){if(I)return _(I);try{var D=E.objectStore(d._dbInfo.storeName);b===null&&(b=void 0);var F=D.put(b,n);E.oncomplete=function(){b===void 0&&(b=null),l(b)},E.onabort=E.onerror=function(){var V=F.error?F.error:F.transaction.error;_(V)}}catch(V){_(V)}})}).catch(_)});return T(v,i),v}function ua(n,c){var i=this;n=N(n);var d=new m(function(v,l){i.ready().then(function(){ie(i._dbInfo,C,function(_,w){if(_)return l(_);try{var b=w.objectStore(i._dbInfo.storeName),I=b.delete(n);w.oncomplete=function(){v()},w.onerror=function(){l(I.error)},w.onabort=function(){var E=I.error?I.error:I.transaction.error;l(E)}}catch(E){l(E)}})}).catch(l)});return T(d,c),d}function la(n){var c=this,i=new m(function(d,v){c.ready().then(function(){ie(c._dbInfo,C,function(l,_){if(l)return v(l);try{var w=_.objectStore(c._dbInfo.storeName),b=w.clear();_.oncomplete=function(){d()},_.onabort=_.onerror=function(){var I=b.error?b.error:b.transaction.error;v(I)}}catch(I){v(I)}})}).catch(v)});return T(i,n),i}function da(n){var c=this,i=new m(function(d,v){c.ready().then(function(){ie(c._dbInfo,z,function(l,_){if(l)return v(l);try{var w=_.objectStore(c._dbInfo.storeName),b=w.count();b.onsuccess=function(){d(b.result)},b.onerror=function(){v(b.error)}}catch(I){v(I)}})}).catch(v)});return T(i,n),i}function fa(n,c){var i=this,d=new m(function(v,l){if(n<0){v(null);return}i.ready().then(function(){ie(i._dbInfo,z,function(_,w){if(_)return l(_);try{var b=w.objectStore(i._dbInfo.storeName),I=!1,E=b.openKeyCursor();E.onsuccess=function(){var D=E.result;if(!D){v(null);return}n===0||I?v(D.key):(I=!0,D.advance(n))},E.onerror=function(){l(E.error)}}catch(D){l(D)}})}).catch(l)});return T(d,c),d}function pa(n){var c=this,i=new m(function(d,v){c.ready().then(function(){ie(c._dbInfo,z,function(l,_){if(l)return v(l);try{var w=_.objectStore(c._dbInfo.storeName),b=w.openKeyCursor(),I=[];b.onsuccess=function(){var E=b.result;if(!E){d(I);return}I.push(E.key),E.continue()},b.onerror=function(){v(b.error)}}catch(E){v(E)}})}).catch(v)});return T(i,n),i}function va(n,c){c=L.apply(this,arguments);var i=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||i.name,n.storeName=n.storeName||i.storeName);var d=this,v;if(!n.name)v=m.reject("Invalid arguments");else{var l=n.name===i.name&&d._dbInfo.db,_=l?m.resolve(d._dbInfo.db):ae(n).then(function(w){var b=B[n.name],I=b.forages;b.db=w;for(var E=0;E<I.length;E++)I[E]._dbInfo.db=w;return w});n.storeName?v=_.then(function(w){if(w.objectStoreNames.contains(n.storeName)){var b=w.version+1;H(n);var I=B[n.name],E=I.forages;w.close();for(var D=0;D<E.length;D++){var F=E[D];F._dbInfo.db=null,F._dbInfo.version=b}var V=new m(function(j,X){var Y=y.open(n.name,b);Y.onerror=function(ne){var Ie=Y.result;Ie.close(),X(ne)},Y.onupgradeneeded=function(){var ne=Y.result;ne.deleteObjectStore(n.storeName)},Y.onsuccess=function(){var ne=Y.result;ne.close(),j(ne)}});return V.then(function(j){I.db=j;for(var X=0;X<E.length;X++){var Y=E[X];Y._dbInfo.db=j,Z(Y._dbInfo)}}).catch(function(j){throw(K(n,j)||m.resolve()).catch(function(){}),j})}}):v=_.then(function(w){H(n);var b=B[n.name],I=b.forages;w.close();for(var E=0;E<I.length;E++){var D=I[E];D._dbInfo.db=null}var F=new m(function(V,j){var X=y.deleteDatabase(n.name);X.onerror=function(){var Y=X.result;Y&&Y.close(),j(X.error)},X.onblocked=function(){console.warn('dropInstance blocked for database "'+n.name+'" until all open connections are closed')},X.onsuccess=function(){var Y=X.result;Y&&Y.close(),V(Y)}});return F.then(function(V){b.db=V;for(var j=0;j<I.length;j++){var X=I[j];Z(X._dbInfo)}}).catch(function(V){throw(K(n,V)||m.resolve()).catch(function(){}),V})})}return T(v,c),v}var ha={_driver:"asyncStorage",_initStorage:ia,_support:S(),iterate:sa,getItem:oa,setItem:ca,removeItem:ua,clear:la,length:da,key:fa,keys:pa,dropInstance:va};function ga(){return typeof openDatabase=="function"}var fe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ma="~~local_forage_type~",er=/^~~local_forage_type~([^~]+)~/,Le="__lfsc__:",it=Le.length,ot="arbf",st="blob",tr="si08",rr="ui08",nr="uic8",ar="si16",ir="si32",or="ur16",sr="ui32",cr="fl32",ur="fl64",lr=it+ot.length,dr=Object.prototype.toString;function fr(n){var c=n.length*.75,i=n.length,d,v=0,l,_,w,b;n[n.length-1]==="="&&(c--,n[n.length-2]==="="&&c--);var I=new ArrayBuffer(c),E=new Uint8Array(I);for(d=0;d<i;d+=4)l=fe.indexOf(n[d]),_=fe.indexOf(n[d+1]),w=fe.indexOf(n[d+2]),b=fe.indexOf(n[d+3]),E[v++]=l<<2|_>>4,E[v++]=(_&15)<<4|w>>2,E[v++]=(w&3)<<6|b&63;return I}function ct(n){var c=new Uint8Array(n),i="",d;for(d=0;d<c.length;d+=3)i+=fe[c[d]>>2],i+=fe[(c[d]&3)<<4|c[d+1]>>4],i+=fe[(c[d+1]&15)<<2|c[d+2]>>6],i+=fe[c[d+2]&63];return c.length%3===2?i=i.substring(0,i.length-1)+"=":c.length%3===1&&(i=i.substring(0,i.length-2)+"=="),i}function ya(n,c){var i="";if(n&&(i=dr.call(n)),n&&(i==="[object ArrayBuffer]"||n.buffer&&dr.call(n.buffer)==="[object ArrayBuffer]")){var d,v=Le;n instanceof ArrayBuffer?(d=n,v+=ot):(d=n.buffer,i==="[object Int8Array]"?v+=tr:i==="[object Uint8Array]"?v+=rr:i==="[object Uint8ClampedArray]"?v+=nr:i==="[object Int16Array]"?v+=ar:i==="[object Uint16Array]"?v+=or:i==="[object Int32Array]"?v+=ir:i==="[object Uint32Array]"?v+=sr:i==="[object Float32Array]"?v+=cr:i==="[object Float64Array]"?v+=ur:c(new Error("Failed to get type for BinaryArray"))),c(v+ct(d))}else if(i==="[object Blob]"){var l=new FileReader;l.onload=function(){var _=ma+n.type+"~"+ct(this.result);c(Le+st+_)},l.readAsArrayBuffer(n)}else try{c(JSON.stringify(n))}catch(_){console.error("Couldn't convert value into a JSON string: ",n),c(null,_)}}function Sa(n){if(n.substring(0,it)!==Le)return JSON.parse(n);var c=n.substring(lr),i=n.substring(it,lr),d;if(i===st&&er.test(c)){var v=c.match(er);d=v[1],c=c.substring(v[0].length)}var l=fr(c);switch(i){case ot:return l;case st:return O([l],{type:d});case tr:return new Int8Array(l);case rr:return new Uint8Array(l);case nr:return new Uint8ClampedArray(l);case ar:return new Int16Array(l);case or:return new Uint16Array(l);case ir:return new Int32Array(l);case sr:return new Uint32Array(l);case cr:return new Float32Array(l);case ur:return new Float64Array(l);default:throw new Error("Unkown type: "+i)}}var ut={serialize:ya,deserialize:Sa,stringToBuffer:fr,bufferToString:ct};function pr(n,c,i,d){n.executeSql("CREATE TABLE IF NOT EXISTS "+c.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],i,d)}function _a(n){var c=this,i={db:null};if(n)for(var d in n)i[d]=typeof n[d]!="string"?n[d].toString():n[d];var v=new m(function(l,_){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(w){return _(w)}i.db.transaction(function(w){pr(w,i,function(){c._dbInfo=i,l()},function(b,I){_(I)})},_)});return i.serializer=ut,v}function pe(n,c,i,d,v,l){n.executeSql(i,d,v,function(_,w){w.code===w.SYNTAX_ERR?_.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[c.storeName],function(b,I){I.rows.length?l(b,w):pr(b,c,function(){b.executeSql(i,d,v,l)},l)},l):l(_,w)},l)}function wa(n,c){var i=this;n=N(n);var d=new m(function(v,l){i.ready().then(function(){var _=i._dbInfo;_.db.transaction(function(w){pe(w,_,"SELECT * FROM "+_.storeName+" WHERE key = ? LIMIT 1",[n],function(b,I){var E=I.rows.length?I.rows.item(0).value:null;E&&(E=_.serializer.deserialize(E)),v(E)},function(b,I){l(I)})})}).catch(l)});return T(d,c),d}function Ta(n,c){var i=this,d=new m(function(v,l){i.ready().then(function(){var _=i._dbInfo;_.db.transaction(function(w){pe(w,_,"SELECT * FROM "+_.storeName,[],function(b,I){for(var E=I.rows,D=E.length,F=0;F<D;F++){var V=E.item(F),j=V.value;if(j&&(j=_.serializer.deserialize(j)),j=n(j,V.key,F+1),j!==void 0){v(j);return}}v()},function(b,I){l(I)})})}).catch(l)});return T(d,c),d}function vr(n,c,i,d){var v=this;n=N(n);var l=new m(function(_,w){v.ready().then(function(){c===void 0&&(c=null);var b=c,I=v._dbInfo;I.serializer.serialize(c,function(E,D){D?w(D):I.db.transaction(function(F){pe(F,I,"INSERT OR REPLACE INTO "+I.storeName+" (key, value) VALUES (?, ?)",[n,E],function(){_(b)},function(V,j){w(j)})},function(F){if(F.code===F.QUOTA_ERR){if(d>0){_(vr.apply(v,[n,b,i,d-1]));return}w(F)}})})}).catch(w)});return T(l,i),l}function ba(n,c,i){return vr.apply(this,[n,c,i,1])}function Ia(n,c){var i=this;n=N(n);var d=new m(function(v,l){i.ready().then(function(){var _=i._dbInfo;_.db.transaction(function(w){pe(w,_,"DELETE FROM "+_.storeName+" WHERE key = ?",[n],function(){v()},function(b,I){l(I)})})}).catch(l)});return T(d,c),d}function Ea(n){var c=this,i=new m(function(d,v){c.ready().then(function(){var l=c._dbInfo;l.db.transaction(function(_){pe(_,l,"DELETE FROM "+l.storeName,[],function(){d()},function(w,b){v(b)})})}).catch(v)});return T(i,n),i}function Ca(n){var c=this,i=new m(function(d,v){c.ready().then(function(){var l=c._dbInfo;l.db.transaction(function(_){pe(_,l,"SELECT COUNT(key) as c FROM "+l.storeName,[],function(w,b){var I=b.rows.item(0).c;d(I)},function(w,b){v(b)})})}).catch(v)});return T(i,n),i}function Oa(n,c){var i=this,d=new m(function(v,l){i.ready().then(function(){var _=i._dbInfo;_.db.transaction(function(w){pe(w,_,"SELECT key FROM "+_.storeName+" WHERE id = ? LIMIT 1",[n+1],function(b,I){var E=I.rows.length?I.rows.item(0).key:null;v(E)},function(b,I){l(I)})})}).catch(l)});return T(d,c),d}function Aa(n){var c=this,i=new m(function(d,v){c.ready().then(function(){var l=c._dbInfo;l.db.transaction(function(_){pe(_,l,"SELECT key FROM "+l.storeName,[],function(w,b){for(var I=[],E=0;E<b.rows.length;E++)I.push(b.rows.item(E).key);d(I)},function(w,b){v(b)})})}).catch(v)});return T(i,n),i}function Ra(n){return new m(function(c,i){n.transaction(function(d){d.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(v,l){for(var _=[],w=0;w<l.rows.length;w++)_.push(l.rows.item(w).name);c({db:n,storeNames:_})},function(v,l){i(l)})},function(d){i(d)})})}function Na(n,c){c=L.apply(this,arguments);var i=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||i.name,n.storeName=n.storeName||i.storeName);var d=this,v;return n.name?v=new m(function(l){var _;n.name===i.name?_=d._dbInfo.db:_=openDatabase(n.name,"","",0),n.storeName?l({db:_,storeNames:[n.storeName]}):l(Ra(_))}).then(function(l){return new m(function(_,w){l.db.transaction(function(b){function I(V){return new m(function(j,X){b.executeSql("DROP TABLE IF EXISTS "+V,[],function(){j()},function(Y,ne){X(ne)})})}for(var E=[],D=0,F=l.storeNames.length;D<F;D++)E.push(I(l.storeNames[D]));m.all(E).then(function(){_()}).catch(function(V){w(V)})},function(b){w(b)})})}):v=m.reject("Invalid arguments"),T(v,c),v}var Da={_driver:"webSQLStorage",_initStorage:_a,_support:ga(),iterate:Ta,getItem:wa,setItem:ba,removeItem:Ia,clear:Ea,length:Ca,key:Oa,keys:Aa,dropInstance:Na};function Ba(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function hr(n,c){var i=n.name+"/";return n.storeName!==c.storeName&&(i+=n.storeName+"/"),i}function Pa(){var n="_localforage_support_test";try{return localStorage.setItem(n,!0),localStorage.removeItem(n),!1}catch{return!0}}function Ua(){return!Pa()||localStorage.length>0}function ka(n){var c=this,i={};if(n)for(var d in n)i[d]=n[d];return i.keyPrefix=hr(n,c._defaultConfig),Ua()?(c._dbInfo=i,i.serializer=ut,m.resolve()):m.reject()}function La(n){var c=this,i=c.ready().then(function(){for(var d=c._dbInfo.keyPrefix,v=localStorage.length-1;v>=0;v--){var l=localStorage.key(v);l.indexOf(d)===0&&localStorage.removeItem(l)}});return T(i,n),i}function xa(n,c){var i=this;n=N(n);var d=i.ready().then(function(){var v=i._dbInfo,l=localStorage.getItem(v.keyPrefix+n);return l&&(l=v.serializer.deserialize(l)),l});return T(d,c),d}function Fa(n,c){var i=this,d=i.ready().then(function(){for(var v=i._dbInfo,l=v.keyPrefix,_=l.length,w=localStorage.length,b=1,I=0;I<w;I++){var E=localStorage.key(I);if(E.indexOf(l)===0){var D=localStorage.getItem(E);if(D&&(D=v.serializer.deserialize(D)),D=n(D,E.substring(_),b++),D!==void 0)return D}}});return T(d,c),d}function $a(n,c){var i=this,d=i.ready().then(function(){var v=i._dbInfo,l;try{l=localStorage.key(n)}catch{l=null}return l&&(l=l.substring(v.keyPrefix.length)),l});return T(d,c),d}function Ma(n){var c=this,i=c.ready().then(function(){for(var d=c._dbInfo,v=localStorage.length,l=[],_=0;_<v;_++){var w=localStorage.key(_);w.indexOf(d.keyPrefix)===0&&l.push(w.substring(d.keyPrefix.length))}return l});return T(i,n),i}function qa(n){var c=this,i=c.keys().then(function(d){return d.length});return T(i,n),i}function Va(n,c){var i=this;n=N(n);var d=i.ready().then(function(){var v=i._dbInfo;localStorage.removeItem(v.keyPrefix+n)});return T(d,c),d}function ja(n,c,i){var d=this;n=N(n);var v=d.ready().then(function(){c===void 0&&(c=null);var l=c;return new m(function(_,w){var b=d._dbInfo;b.serializer.serialize(c,function(I,E){if(E)w(E);else try{localStorage.setItem(b.keyPrefix+n,I),_(l)}catch(D){(D.name==="QuotaExceededError"||D.name==="NS_ERROR_DOM_QUOTA_REACHED")&&w(D),w(D)}})})});return T(v,i),v}function Wa(n,c){if(c=L.apply(this,arguments),n=typeof n!="function"&&n||{},!n.name){var i=this.config();n.name=n.name||i.name,n.storeName=n.storeName||i.storeName}var d=this,v;return n.name?v=new m(function(l){n.storeName?l(hr(n,d._defaultConfig)):l(n.name+"/")}).then(function(l){for(var _=localStorage.length-1;_>=0;_--){var w=localStorage.key(_);w.indexOf(l)===0&&localStorage.removeItem(w)}}):v=m.reject("Invalid arguments"),T(v,c),v}var Ha={_driver:"localStorageWrapper",_initStorage:ka,_support:Ba(),iterate:Fa,getItem:xa,setItem:ja,removeItem:Va,clear:La,length:qa,key:$a,keys:Ma,dropInstance:Wa},za=function(c,i){return c===i||typeof c=="number"&&typeof i=="number"&&isNaN(c)&&isNaN(i)},Ya=function(c,i){for(var d=c.length,v=0;v<d;){if(za(c[v],i))return!0;v++}return!1},gr=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},be={},mr={},me={INDEXEDDB:ha,WEBSQL:Da,LOCALSTORAGE:Ha},Qa=[me.INDEXEDDB._driver,me.WEBSQL._driver,me.LOCALSTORAGE._driver],xe=["dropInstance"],lt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(xe),Xa={description:"",driver:Qa.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ga(n,c){n[c]=function(){var i=arguments;return n.ready().then(function(){return n[c].apply(n,i)})}}function dt(){for(var n=1;n<arguments.length;n++){var c=arguments[n];if(c)for(var i in c)c.hasOwnProperty(i)&&(gr(c[i])?arguments[0][i]=c[i].slice():arguments[0][i]=c[i])}return arguments[0]}var Ka=(function(){function n(c){h(this,n);for(var i in me)if(me.hasOwnProperty(i)){var d=me[i],v=d._driver;this[i]=v,be[v]||this.defineDriver(d)}this._defaultConfig=dt({},Xa),this._config=dt({},this._defaultConfig,c),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return n.prototype.config=function(i){if((typeof i>"u"?"undefined":u(i))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var d in i){if(d==="storeName"&&(i[d]=i[d].replace(/\W/g,"_")),d==="version"&&typeof i[d]!="number")return new Error("Database version must be a number.");this._config[d]=i[d]}return"driver"in i&&i.driver?this.setDriver(this._config.driver):!0}else return typeof i=="string"?this._config[i]:this._config},n.prototype.defineDriver=function(i,d,v){var l=new m(function(_,w){try{var b=i._driver,I=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!i._driver){w(I);return}for(var E=lt.concat("_initStorage"),D=0,F=E.length;D<F;D++){var V=E[D],j=!Ya(xe,V);if((j||i[V])&&typeof i[V]!="function"){w(I);return}}var X=function(){for(var Ie=function(ei){return function(){var ti=new Error("Method "+ei+" is not implemented by the current driver"),yr=m.reject(ti);return T(yr,arguments[arguments.length-1]),yr}},ft=0,Za=xe.length;ft<Za;ft++){var pt=xe[ft];i[pt]||(i[pt]=Ie(pt))}};X();var Y=function(Ie){be[b]&&console.info("Redefining LocalForage driver: "+b),be[b]=i,mr[b]=Ie,_()};"_support"in i?i._support&&typeof i._support=="function"?i._support().then(Y,w):Y(!!i._support):Y(!0)}catch(ne){w(ne)}});return A(l,d,v),l},n.prototype.driver=function(){return this._driver||null},n.prototype.getDriver=function(i,d,v){var l=be[i]?m.resolve(be[i]):m.reject(new Error("Driver not found."));return A(l,d,v),l},n.prototype.getSerializer=function(i){var d=m.resolve(ut);return A(d,i),d},n.prototype.ready=function(i){var d=this,v=d._driverSet.then(function(){return d._ready===null&&(d._ready=d._initDriver()),d._ready});return A(v,i,i),v},n.prototype.setDriver=function(i,d,v){var l=this;gr(i)||(i=[i]);var _=this._getSupportedDrivers(i);function w(){l._config.driver=l.driver()}function b(D){return l._extend(D),w(),l._ready=l._initStorage(l._config),l._ready}function I(D){return function(){var F=0;function V(){for(;F<D.length;){var j=D[F];return F++,l._dbInfo=null,l._ready=null,l.getDriver(j).then(b).catch(V)}w();var X=new Error("No available storage method found.");return l._driverSet=m.reject(X),l._driverSet}return V()}}var E=this._driverSet!==null?this._driverSet.catch(function(){return m.resolve()}):m.resolve();return this._driverSet=E.then(function(){var D=_[0];return l._dbInfo=null,l._ready=null,l.getDriver(D).then(function(F){l._driver=F._driver,w(),l._wrapLibraryMethodsWithReady(),l._initDriver=I(_)})}).catch(function(){w();var D=new Error("No available storage method found.");return l._driverSet=m.reject(D),l._driverSet}),A(this._driverSet,d,v),this._driverSet},n.prototype.supports=function(i){return!!mr[i]},n.prototype._extend=function(i){dt(this,i)},n.prototype._getSupportedDrivers=function(i){for(var d=[],v=0,l=i.length;v<l;v++){var _=i[v];this.supports(_)&&d.push(_)}return d},n.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,d=lt.length;i<d;i++)Ga(this,lt[i])},n.prototype.createInstance=function(i){return new n(i)},n})(),Ja=new Ka;p.exports=Ja},{3:3}]},{},[4])(4)})}});function qe(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qe=function(r){return typeof r}:qe=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},qe(e)}function Cr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,a)}return r}function wc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cr(r,!0).forEach(function(a){Tc(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cr(r).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Tc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bc(e,t,r,a){var o=a.debug,s=wc({},r);return e&&qe(e)==="object"&&Object.keys(e).forEach(function(p){p!=="_persist"&&t[p]===r[p]&&(s[p]=e[p])}),s}function Ic(e){var t=e.blacklist||null,r=e.whitelist||null,a=e.transforms||[],o=e.throttle||0,s="".concat(e.keyPrefix!==void 0?e.keyPrefix:kt).concat(e.key),p=e.storage,f;e.serialize===!1?f=function(B){return B}:typeof e.serialize=="function"?f=e.serialize:f=Ec;var u=e.writeFailHandler||null,h={},g={},y=[],S=null,O=null,m=function(B){Object.keys(B).forEach(function(M){N(M)&&h[M]!==B[M]&&y.indexOf(M)===-1&&y.push(M)}),Object.keys(h).forEach(function(M){B[M]===void 0&&N(M)&&y.indexOf(M)===-1&&h[M]!==void 0&&y.push(M)}),S===null&&(S=setInterval(T,o)),h=B};function T(){if(y.length===0){S&&clearInterval(S),S=null;return}var R=y.shift(),B=a.reduce(function(M,z){return z.in(M,R,h)},h[R]);if(B!==void 0)try{g[R]=f(B)}catch(M){console.error("redux-persist/createPersistoid: error serializing state",M)}else delete g[R];y.length===0&&A()}function A(){Object.keys(g).forEach(function(R){h[R]===void 0&&delete g[R]}),O=p.setItem(s,f(g)).catch(L)}function N(R){return!(r&&r.indexOf(R)===-1&&R!=="_persist"||t&&t.indexOf(R)!==-1)}function L(R){u&&u(R)}var U=function(){for(;y.length!==0;)T();return O||Promise.resolve()};return{update:m,flush:U}}function Ec(e){return JSON.stringify(e)}function Cc(e){var t=e.transforms||[],r="".concat(e.keyPrefix!==void 0?e.keyPrefix:kt).concat(e.key),a=e.storage,o=e.debug,s;return e.deserialize===!1?s=function(f){return f}:typeof e.deserialize=="function"?s=e.deserialize:s=Oc,a.getItem(r).then(function(p){if(p)try{var f={},u=s(p);return Object.keys(u).forEach(function(h){f[h]=t.reduceRight(function(g,y){return y.out(g,h,u)},s(u[h]))}),f}catch(h){throw h}else return})}function Oc(e){return JSON.parse(e)}function Ac(e){var t=e.storage,r="".concat(e.keyPrefix!==void 0?e.keyPrefix:kt).concat(e.key);return t.removeItem(r,Rc)}function Rc(e){}function Or(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,a)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Or(r,!0).forEach(function(a){Nc(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Or(r).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Nc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dc(e,t){if(e==null)return{};var r=Bc(e,t),a,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)a=s[o],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Bc(e,t){if(e==null)return{};var r={},a=Object.keys(e),o,s;for(s=0;s<a.length;s++)o=a[s],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var Pc=5e3;function Uc(e,t){var r=e.version!==void 0?e.version:Zr,a=e.debug||!1,o=e.stateReconciler===void 0?bc:e.stateReconciler,s=e.getStoredState||Cc,p=e.timeout!==void 0?e.timeout:Pc,f=null,u=!1,h=!0,g=function(S){return S._persist.rehydrated&&f&&!h&&f.update(S),S};return function(y,S){var O=y||{},m=O._persist,T=Dc(O,["_persist"]),A=T;if(S.type===rn){var N=!1,L=function(x,P){N||(S.rehydrate(e.key,x,P),N=!0)};if(p&&setTimeout(function(){!N&&L(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},p),h=!1,f||(f=Ic(e)),m)return oe({},t(A,S),{_persist:m});if(typeof S.rehydrate!="function"||typeof S.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return S.register(e.key),s(e).then(function(C){var x=e.migrate||function(P,q){return Promise.resolve(P)};x(C,r).then(function(P){L(P)},function(P){L(void 0,P)})},function(C){L(void 0,C)}),oe({},t(A,S),{_persist:{version:r,rehydrated:!1}})}else{if(S.type===nn)return u=!0,S.result(Ac(e)),oe({},t(A,S),{_persist:m});if(S.type===en)return S.result(f&&f.flush()),oe({},t(A,S),{_persist:m});if(S.type===tn)h=!0;else if(S.type===Lt){if(u)return oe({},A,{_persist:oe({},m,{rehydrated:!0})});if(S.key===e.key){var U=t(A,S),R=S.payload,B=o!==!1&&R!==void 0?o(R,y,U,e):U,M=oe({},B,{_persist:oe({},m,{rehydrated:!0})});return g(M)}}}if(!m)return t(y,S);var z=t(A,S);return z===A?y:g(oe({},z,{_persist:m}))}}function Ar(e){return xc(e)||Lc(e)||kc()}function kc(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Lc(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function xc(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function Rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,a)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rr(r,!0).forEach(function(a){Fc(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rr(r).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Fc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Rn={registry:[],bootstrapped:!1},$c=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rn,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case an:return Rt({},t,{registry:[].concat(Ar(t.registry),[r.key])});case Lt:var a=t.registry.indexOf(r.key),o=Ar(t.registry);return o.splice(a,1),Rt({},t,{registry:o,bootstrapped:o.length===0});default:return t}};function Mc(e,t,r){if(0)var a,o;var s=r||!1,p=wi($c,Rn,t&&t.enhancer?t.enhancer:void 0),f=function(y){p.dispatch({type:an,key:y})},u=function(y,S,O){var m={type:Lt,payload:S,err:O,key:y};e.dispatch(m),p.dispatch(m),s&&h.getState().bootstrapped&&(s(),s=!1)},h=Rt({},p,{purge:function(){var y=[];return e.dispatch({type:nn,result:function(O){y.push(O)}}),Promise.all(y)},flush:function(){var y=[];return e.dispatch({type:en,result:function(O){y.push(O)}}),Promise.all(y)},pause:function(){e.dispatch({type:tn})},persist:function(){e.dispatch({type:rn,register:f,rehydrate:u})}});return t&&t.manualPersist||h.persist(),h}function qc(e,t){var r=t||{},a=r.debug;return function(o,s){if(!o)return Promise.resolve(void 0);var p=o._persist&&o._persist.version!==void 0?o._persist.version:Zr;if(p===s||p>s)return Promise.resolve(o);var f=Object.keys(e).map(function(h){return parseInt(h)}).filter(function(h){return s>=h&&h>p}).sort(function(h,g){return h-g});try{var u=f.reduce(function(h,g){return e[g](h)},o);return Promise.resolve(u)}catch(h){return Promise.reject(h)}}}function Vc(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function jc(){var e={};return e.promise=new Promise(function(t,r){e.resolve=t,e.reject=r}),e}var Wc=jc,Nn=[],rt=0;function Hc(e){try{Ht(),e()}finally{Pn()}}function Dn(e){Nn.push(e),rt||(Ht(),Un())}function Bn(e){try{return Ht(),e()}finally{Un()}}function Ht(){rt++}function Pn(){rt--}function Un(){Pn();for(var e;!rt&&(e=Nn.shift())!==void 0;)Hc(e)}var zc=function(t){return function(r){return t.some(function(a){return zt(a)(r)})}},Yc=function(t){return function(r){return t(r)}},Nr=function(t){return function(r){return r.type===String(t)}},Qc=function(t){return function(r){return r.type===t}},kn=function(){return io};function zt(e){var t=e==="*"?kn:vo(e)?Nr:Pe(e)?zc:ho(e)?Nr:We(e)?Yc:go(e)?Qc:null;if(t===null)throw new Error("invalid pattern: "+e);return t(e)}var Ne={type:Jr},Yt=function(t){return t&&t.type===Jr},Ln="Cannot have a closed channel with pending takers";function Xc(e){e===void 0&&(e=Ki());var t=!1,r=[];function a(){if(t&&r.length)throw Et(Ln);if(r.length&&!e.isEmpty())throw Et("Cannot have pending takers with non empty buffer")}function o(u){if(!t){if(r.length===0)return e.put(u);var h=r.shift();h(u)}}function s(u){t&&e.isEmpty()?u(Ne):e.isEmpty()?(r.push(u),u.cancel=function(){et(r,u)}):u(e.take())}function p(u){if(t&&e.isEmpty()){u(Ne);return}u(e.flush())}function f(){if(!t){t=!0;var u=r;r=[];for(var h=0,g=u.length;h<g;h++){var y=u[h];y(Ne)}}}return{take:s,put:o,flush:p,close:f}}function Gc(){var e,t=!1,r=[],a=r;function o(){if(t&&a.length)throw Et(Ln)}var s=function(){a===r&&(a=r.slice())},p=function(){t=!0;var u=r=a;a=[],u.forEach(function(h){h(Ne)})};return e={},e[xi]=!0,e.put=function(u){if(!t){if(Yt(u)){p();return}for(var h=r=a,g=0,y=h.length;g<y;g++){var S=h[g];S[_r](u)&&(S.cancel(),S(u))}}},e.take=function(u,h){if(h===void 0&&(h=kn),t){u(Ne);return}u[_r]=h,s(),a.push(u),u.cancel=co(function(){s(),et(a,u)})},e.close=p,e}function xn(){var e=Gc(),t=e.put;return e.put=function(r){if(r[Mi]){t(r);return}Dn(function(){t(r)})},e}var ge=0,se=1,Ve=2,Fn=3;function Qt(e,t){var r=e[Oi];We(r)&&(t.cancel=r),e.then(t,function(a){t(a,!0)})}var Ue=0,$n=function(){return++Ue},G;function Kc(e,t){return e.isSagaIterator?{name:e.meta.name}:Mt(t)}function Jc(e){var t=e.context,r=e.fn,a=e.args;try{var o=r.apply(t,a);if(qt(o))return o;var s=!1,p=function(u){return s?{value:u,done:!0}:(s=!0,{value:o,done:!Ze(o)})};return wr(p)}catch(f){return wr(function(){throw f})}}function Zc(e,t,r){var a=t.channel,o=t.action,s=t.resolve;Dn(function(){var p;try{p=(a?a.put:e.dispatch)(o)}catch(f){r(f,!0);return}s&&Ze(p)?Qt(p,r):r(p)})}function eu(e,t,r){var a=t.channel,o=a===void 0?e.channel:a,s=t.pattern,p=t.maybe,f=function(h){if(h instanceof Error){r(h,!0);return}if(Yt(h)&&!p){r(zi);return}r(h)};try{o.take(f,so(s)?zt(s):null)}catch(u){r(u,!0);return}r.cancel=f.cancel}function tu(e,t,r,a){var o=t.context,s=t.fn,p=t.args,f=a.task;try{var u=s.apply(o,p);if(Ze(u)){Qt(u,r);return}if(qt(u)){nt(e,u,f.context,Ue,Mt(s),!1,r);return}r(u)}catch(h){r(h,!0)}}function ru(e,t,r){var a=t.context,o=t.fn,s=t.args;try{var p=function(u,h){mo(u)?r(h):r(u,!0)};o.apply(a,s.concat(p)),p.cancel&&(r.cancel=p.cancel)}catch(f){r(f,!0)}}function nu(e,t,r,a){var o=t.context,s=t.fn,p=t.args,f=t.detached,u=a.task,h=Jc({context:o,fn:s,args:p}),g=Kc(h,s);Bn(function(){var y=nt(e,h,u.context,Ue,g,f,void 0);f?r(y):y.isRunning()?(u.queue.addTask(y),r(y)):y.isAborted()?u.queue.abort(y.error()):r(y)})}function au(e,t,r,a){var o=a.task,s=function(u,h){if(u.isRunning()){var g={task:o,cb:h};h.cancel=function(){u.isRunning()&&et(u.joiners,g)},u.joiners.push(g)}else u.isAborted()?h(u.error(),!0):h(u.result())};if(Pe(t)){if(t.length===0){r([]);return}var p=on(t,r);t.forEach(function(f,u){s(f,p[u])})}else s(t,r)}function St(e){e.isRunning()&&e.cancel()}function iu(e,t,r,a){var o=a.task;t===Vi?St(o):Pe(t)?t.forEach(St):St(t),r()}function ou(e,t,r,a){var o=a.digestEffect,s=Ue,p=Object.keys(t);if(p.length===0){r(Pe(t)?[]:{});return}var f=on(t,r);p.forEach(function(u){o(t[u],s,f[u],u)})}function su(e,t,r,a){var o=a.digestEffect,s=Ue,p=Object.keys(t),f=Pe(t)?Gi(p.length):{},u={},h=!1;p.forEach(function(g){var y=function(O,m){h||(m||lo(O)?(r.cancel(),r(O,m)):(r.cancel(),h=!0,f[g]=O,r(f)))};y.cancel=re,u[g]=y}),r.cancel=function(){h||(h=!0,p.forEach(function(g){return u[g].cancel()}))},p.forEach(function(g){h||o(t[g],s,u[g],g)})}function cu(e,t,r){var a=t.selector,o=t.args;try{var s=a.apply(void 0,[e.getState()].concat(o));r(s)}catch(p){r(p,!0)}}function uu(e,t,r){var a=t.pattern,o=t.buffer,s=Xc(o),p=zt(a),f=function h(g){Yt(g)||e.channel.take(h,p),s.put(g)},u=s.close;s.close=function(){f.cancel(),u()},e.channel.take(f,p),r(s)}function lu(e,t,r,a){var o=a.task;r(o.isCancelled())}function du(e,t,r){t.flush(r)}function fu(e,t,r,a){var o=a.task;r(o.context[t])}function pu(e,t,r,a){var o=a.task;Ft(o.context,t),r()}var vu=(G={},G[Wi]=eu,G[Fi]=Zc,G[Ii]=ou,G[$i]=su,G[Ei]=tu,G[Ri]=ru,G[Di]=nu,G[ki]=au,G[Ci]=iu,G[qi]=cu,G[bi]=uu,G[Ai]=lu,G[Ni]=du,G[Bi]=fu,G[ji]=pu,G);function hu(e,t,r){var a=[],o,s=!1;u(e);var p=function(){return a};function f(g){t(),h(),r(g,!0)}function u(g){a.push(g),g.cont=function(y,S){s||(et(a,g),g.cont=re,S?f(y):(g===e&&(o=y),a.length||(s=!0,r(o))))}}function h(){s||(s=!0,a.forEach(function(g){g.cont=re,g.cancel()}),a=[])}return{addTask:u,cancelAll:h,abort:f,getTasks:p}}function Mn(e,t){return e+"?"+t}function gu(e){var t=eo(e);if(t){var r=t.code,a=t.fileName,o=t.lineNumber,s=r+"  "+Mn(a,o);return s}return""}function Dr(e){var t=e.name,r=e.location;return r?t+"  "+Mn(r.fileName,r.lineNumber):t}function mu(e){var t=Ji(function(r){return r.cancelledTasks},e);return t.length?["Tasks cancelled due to error:"].concat(t).join(`
`):""}var Xt=null,De=[],yu=function(t){t.crashedEffect=Xt,De.push(t)},qn=function(){Xt=null,De.length=0},Su=function(t){Xt=t},_u=function(){var t=De[0],r=De.slice(1),a=t.crashedEffect?gu(t.crashedEffect):null,o="The above error occurred in task "+Dr(t.meta)+(a?` 
 when executing effect `+a:"");return[o].concat(r.map(function(s){return"    created by "+Dr(s.meta)}),[mu(De)]).join(`
`)};function wu(e,t,r,a,o,s,p){var f;p===void 0&&(p=re);var u=ge,h,g,y=null,S=[],O=Object.create(r),m=hu(t,function(){S.push.apply(S,m.getTasks().map(function(B){return B.meta.name}))},A);function T(){u===ge&&(u=se,m.cancelAll(),A(Ae,!1))}function A(R,B){if(!B)R===Ae?u=se:u!==se&&(u=Fn),h=R,y&&y.resolve(R);else{if(u=Ve,yu({meta:o,cancelledTasks:S}),U.isRoot){var M=_u();qn(),e.onError(R,{sagaStack:M})}g=R,y&&y.reject(R)}U.cont(R,B),U.joiners.forEach(function(z){z.cb(R,B)}),U.joiners=null}function N(R){Ft(O,R)}function L(){return y||(y=Wc(),u===Ve?y.reject(g):u!==ge&&y.resolve(h)),y.promise}var U=(f={},f[Hi]=!0,f.id=a,f.meta=o,f.isRoot=s,f.context=O,f.joiners=[],f.queue=m,f.cancel=T,f.cont=p,f.end=A,f.setContext=N,f.toPromise=L,f.isRunning=function(){return u===ge},f.isCancelled=function(){return u===se||u===ge&&t.status===se},f.isAborted=function(){return u===Ve},f.result=function(){return h},f.error=function(){return g},f);return U}function nt(e,t,r,a,o,s,p){var f=e.finalizeRunEffect(O);S.cancel=re;var u={meta:o,cancel:y,status:ge},h=wu(e,u,r,a,o,s,p),g={task:h,digestEffect:m};function y(){u.status===ge&&(u.status=se,S(Ae))}return p&&(p.cancel=h.cancel),S(),h;function S(T,A){try{var N;A?(N=t.throw(T),qn()):uo(T)?(u.status=se,S.cancel(),N=We(t.return)?t.return(Ae):{done:!0,value:Ae}):fo(T)?N=We(t.return)?t.return():{done:!0}:N=t.next(T),N.done?(u.status!==se&&(u.status=Fn),u.cont(N.value)):m(N.value,a,S)}catch(L){if(u.status===se)throw L;u.status=Ve,u.cont(L,!0)}}function O(T,A,N){if(Ze(T))Qt(T,N);else if(qt(T))nt(e,T,h.context,A,o,!1,N);else if(T&&T[Ui]){var L=vu[T.type];L(e,T.payload,N,g)}else N(T)}function m(T,A,N,L){L===void 0&&(L="");var U=$n();e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:U,parentEffectId:A,label:L,effect:T});var R;function B(M,z){R||(R=!0,N.cancel=re,e.sagaMonitor&&(z?e.sagaMonitor.effectRejected(U,M):e.sagaMonitor.effectResolved(U,M)),z&&Su(T),N(M,z))}B.cancel=re,N.cancel=function(){R||(R=!0,B.cancel(),B.cancel=re,e.sagaMonitor&&e.sagaMonitor.effectCancelled(U))},f(T,U,B)}}var Tu="runSaga(options, saga, ...args)",mp=Tu+": saga argument must be a Generator function!";function bu(e,t){for(var r=e.channel,a=r===void 0?xn():r,o=e.dispatch,s=e.getState,p=e.context,f=p===void 0?{}:p,u=e.sagaMonitor,h=e.effectMiddlewares,g=e.onError,y=g===void 0?oo:g,S=arguments.length,O=new Array(S>2?S-2:0),m=2;m<S;m++)O[m-2]=arguments[m];var T=t.apply(void 0,O),A=$n();if(u&&(u.rootSagaStarted=u.rootSagaStarted||re,u.effectTriggered=u.effectTriggered||re,u.effectResolved=u.effectResolved||re,u.effectRejected=u.effectRejected||re,u.effectCancelled=u.effectCancelled||re,u.actionDispatched=u.actionDispatched||re,u.rootSagaStarted({effectId:A,saga:t,args:O})),0)var N;var L;if(h){var U=yi.apply(void 0,h);L=function(M){return function(z,C,x){var P=function(H){return M(H,C,x)};return U(P)(z)}}}else L=ao;var R={channel:a,dispatch:_o(o),getState:s,sagaMonitor:u,onError:y,finalizeRunEffect:L};return Bn(function(){var B=nt(R,T,f,A,Mt(t),!0,void 0);return u&&u.effectResolved(A,B),B})}function Iu(e){var t=e===void 0?{}:e,r=t.context,a=r===void 0?{}:r,o=t.channel,s=o===void 0?xn():o,p=t.sagaMonitor,f=Vc(t,["context","channel","sagaMonitor"]),u;function h(g){var y=g.getState,S=g.dispatch;return u=bu.bind(null,Qi({},f,{context:a,channel:s,dispatch:S,getState:y,sagaMonitor:p})),function(O){return function(m){p&&p.actionDispatched&&p.actionDispatched(m);var T=O(m);return s.put(m),T}}}return h.run=function(){return u.apply(void 0,arguments)},h.setContext=function(g){Ft(a,g)},h}var Eu=Iu,Cu=Eu;const Vn=Pt("global/updateVersion"),Ou=e=>e,Au=e=>e!=null&&e.user&&e.user.userDeadline===1800?{...e,user:{...e.user,userDeadline:pn},_persist:{...e._persist,version:1}}:e,Ru=e=>{var t;return!(e==null||(t=e.user)===null||t===void 0)&&t.recentConnectionMeta?(delete e.user.recentConnectionMeta,{...e,_persist:{...e._persist,version:10}}):e},Nu=e=>e!=null&&e.user?(delete e.user.recentConnectionMeta,{...e,_persist:{...e._persist,version:11}}):e,Du=e=>{if(!(e!=null&&e.transactions))return e;for(const t in e.transactions){const r=e.transactions[t];for(const a in r){const{receipt:o,...s}=r[a],p=o?o.status===1?ht.Confirmed:ht.Failed:ht.Pending;s.status=p,r[a]=s}}return{...e,_persist:{...e._persist,version:12}}},Bu=e=>{if(!(e!=null&&e.transactions))return e;const t={...e};return t.localWebTransactions=e.transactions,delete t.transactions,{...t,_persist:{...e._persist,version:13}}},Br="hideSmallBalances",Pr="hideSpamBalances",Pu=e=>{if(!e)return;const t={...e},r=localStorage.getItem(Br),a=localStorage.getItem(Pr);return t.userSettings={hideSmallBalances:r!=="false",hideSpamTokens:a!=="false"},localStorage.removeItem(Br),localStorage.removeItem(Pr),{...t,_persist:{...e._persist,version:14}}},Ur="recentlySearchedAssetsV3";function Uu(e){return e.type===Ce.Token?{type:Ce.Token,chainId:e.chainId,symbol:e.symbol,address:e.address,name:e.name,logoUrl:e.logoUrl,safetyInfo:e.safetyInfo}:e.type===Ce.NFTCollection?{type:Ce.NFTCollection,chainId:e.chainId,address:e.address,name:e.name,imageUrl:e.logoUrl,isVerified:!1}:null}const ku=e=>{if(!e)return;const t={...e},r=localStorage.getItem(Ur),o=JSON.parse(r??"[]").map(Uu).filter(s=>s!==null);return t.searchHistory={results:o},localStorage.removeItem(Ur),{...t,_persist:{...e._persist,version:15}}},Lu=e=>{var t;if(!e)return;const r={...e};return r.tokens={dismissedTokenWarnings:((t=e.user)===null||t===void 0?void 0:t.tokens)??{}},delete r.user.tokens,{...r,_persist:{...e._persist,version:16}}},xu=e=>{if(!e)return;const t={...e};t.searchHistory.results.forEach(a=>{if(a.type===Ce.Token&&a.address){const o=Go(a.address,a.chainId);a.address!==o&&(a.address=o,a.searchId=zo(a))}});const r=t.searchHistory.results.filter((a,o,s)=>s.findIndex(p=>p.searchId===a.searchId)===o);return t.searchHistory.results=r,{...t,_persist:{...e._persist,version:17}}},Fu=e=>{var t,r;if(!(e!=null&&e.userSettings))return;const a={...e};return(t=a.userSettings).currentLanguage??(t.currentLanguage="en"),(r=a.userSettings).currentCurrency??(r.currentCurrency="USD"),{...a,_persist:{...e._persist,version:18}}},$u=e=>{var t;if(!e)return;const r={...e},a={"zh-CN":vt.ChineseSimplified,"zh-TW":vt.ChineseTraditional},o=(t=e.user)===null||t===void 0?void 0:t.userLocale;if(o){const s=Object.keys(a).includes(o)?a[o]:o;Object.values(vt).includes(s)&&(r.userSettings.currentLanguage=ci[s])}return delete r.user.userLocale,{...r,_persist:{...e._persist,version:19}}},Mu=e=>e!=null&&e.user&&e.user.userRouterPreference==="client"?{...e,user:{...e.user,userRouterPreference:Ye.API},_persist:{...e._persist,version:2}}:e,kr="activeLocalCurrency",qu=e=>{if(!e)return;const t=localStorage.getItem(kr),r=Object.values(zr).includes(t)?t:"USD",a={...e,userSettings:{...e.userSettings,currentCurrency:r}};return localStorage.removeItem(kr),{...a,_persist:{...e._persist,version:20}}};function Vu(e){var t;if(!(!(e==null||(t=e.tokens)===null||t===void 0)&&t.dismissedTokenWarnings))return e;const r=Object.entries(e.tokens.dismissedTokenWarnings).reduce((a,[o,s])=>({...a,[o]:Object.entries(s).reduce((p,[f,u])=>{const h=Ot({address:f,platform:Ct.EVM,withEVMChecksum:!1});return h?{...p,[h]:u}:p},{})}),{});return{...e,tokens:{...e.tokens,dismissedTokenWarnings:r}}}function ju(e){const t={...e};return t.userSettings.currentCurrency==="THB"&&(t.userSettings.currentCurrency=zr.UnitedStatesDollar),t}const Wu=e=>{if(e)return{...Vu(e),_persist:{...e._persist,version:21}}},Hu=e=>{if(!(e!=null&&e.userSettings))return;const t={...e};return t.userSettings.currentLanguage===si.English&&ii&&(t.userSettings.currentLanguage=Ko()),{...t,_persist:{...e._persist,version:22}}},zu=e=>{var t,r;if(e)return{...e,visibility:{...e.visibility,tokens:((t=e.visibility)===null||t===void 0?void 0:t.tokens)??{},positions:((r=e.visibility)===null||r===void 0?void 0:r.positions)??{}},_persist:{...e._persist,version:23}}},Yu=e=>!!e&&typeof e=="object"&&"byChain"in e&&typeof e.byChain=="object"&&"getCapabilitiesStatus"in e&&typeof e.getCapabilitiesStatus=="string",Qu=e=>{if(e)return Yu(e.walletCapabilities)?{...e,_persist:{...e._persist,version:24}}:{...e,walletCapabilities:{getCapabilitiesStatus:Zo.Unknown,byChain:{}},_persist:{...e._persist,version:24}}},Xu=e=>{if(e)return{...ju(e),_persist:{...e._persist,version:25}}};fn();const Gu=e=>{if(e!=null&&e.user){var t;const a={[ve.Optimism]:"0x7F5c764cBc14f9669B88837ca1490cCa17c31607",[ve.ArbitrumOne]:"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8",[ve.Avalanche]:"0xA7D7079b0FEaD91F3e65f86E8915Cb59c1a4C664",[ve.Polygon]:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174"};for(const[s,p]of Object.entries(a)){var r;const f=Number(s);!((r=e.user.tokens)===null||r===void 0||(r=r[f])===null||r===void 0)&&r[p]&&(e.user.tokens[f][p]=br(new Tr(f,p,6,"USDC.e","Bridged USDC")))}const o=new Tr(ve.Base,"0xd9aAEc86B65D86f6A7B5B1b0c42FFA531710b6CA",6,"USDbC","USD Base Coin");return!((t=e.user.tokens)===null||t===void 0||(t=t[ve.Base])===null||t===void 0)&&t[o.address]&&(e.user.tokens[ve.Base][o.address]=br(o)),{...e,_persist:{...e._persist,version:3}}}return e},Ku=e=>e!=null&&e.user?(e.user.userLocale==="de-DE"&&(e.user.userLocale=oi),{...e,_persist:{...e._persist,version:4}}):e,Ju=e=>{if(!e)return;const{localWebTransactions:t,...r}=e;return{...r,_persist:{...e._persist,version:49}}},Zu=e=>{var t;if(!e)return e;e.user&&"disabledUniswapX"in e.user&&delete e.user.disabledUniswapX;const r=(t=e.user)===null||t===void 0?void 0:t.optedOutOfUniswapX;return e.user&&"optedOutOfUniswapX"in e.user&&delete e.user.optedOutOfUniswapX,e.user&&!r?{...e,user:{...e.user,userRouterPreference:Ye.X},_persist:{...e._persist,version:5}}:{...e,_persist:{...e._persist,version:5}}},el=e=>{if(!e)return e;if(e.user&&"selectedWallet"in e.user){const t=e.user.selectedWallet;t!==void 0&&(e.user.recentConnectionMeta={type:t}),delete e.user.selectedWallet}return{...e,_persist:{...e._persist,version:6}}},tl=e=>{var t;if(!e)return e;const r=(t=e.user)===null||t===void 0?void 0:t.hideAndroidAnnouncementBanner;return e.user&&"hideAndroidAnnouncementBanner"in e.user&&delete e.user.hideAndroidAnnouncementBanner,e.user&&r?{...e,user:{...e.user,hideAppPromoBanner:r},_persist:{...e._persist,version:7}}:{...e,_persist:{...e._persist,version:7}}},rl=e=>e&&(e.user&&"hideAppPromoBanner"in e.user&&delete e.user.hideAppPromoBanner,{...e,_persist:{...e._persist,version:8}}),nl=e=>{var t,r;if(!e)return e;let a=(t=e.lists)===null||t===void 0?void 0:t.byUrl;return!((r=e.lists)===null||r===void 0)&&r.byUrl&&(a=Object.fromEntries(Object.entries(e.lists.byUrl).filter(([o])=>Se.includes(o)))),{...e,lists:{byUrl:a},_persist:{...e._persist,version:9}}};function Lr(e){return t=>{if(t)return{...t,localWebTransactions:{},signatures:{},_persist:{...t._persist,version:e}}}}const Nt={error:null,current:null,loadingRequestId:null,pendingUpdate:null},Dt={lastInitializedDefaultListOfLists:Se,byUrl:{...Se.reduce((e,t)=>(e[t]=Nt,e),{})}};var al=Ut(Dt,e=>e.addCase(mt.pending,(t,{payload:{requestId:r,url:a}})=>{var o,s;const p=((o=t.byUrl[a])===null||o===void 0?void 0:o.current)??null,f=((s=t.byUrl[a])===null||s===void 0?void 0:s.pendingUpdate)??null;t.byUrl[a]={current:p,pendingUpdate:f,loadingRequestId:r,error:null}}).addCase(mt.fulfilled,(t,{payload:{requestId:r,tokenList:a,url:o}})=>{var s,p;const f=(s=t.byUrl[o])===null||s===void 0?void 0:s.current,u=(p=t.byUrl[o])===null||p===void 0?void 0:p.loadingRequestId;if(f){if(ls(f.version,a.version)===ss.NONE)return;(u===null||u===r)&&(t.byUrl[o]={current:f,pendingUpdate:a,loadingRequestId:null,error:null})}else t.byUrl[o]={current:a,pendingUpdate:null,loadingRequestId:null,error:null}}).addCase(mt.rejected,(t,{payload:{url:r,requestId:a,errorMessage:o}})=>{var s;((s=t.byUrl[r])===null||s===void 0?void 0:s.loadingRequestId)===a&&(t.byUrl[r]={current:t.byUrl[r].current?t.byUrl[r].current:null,pendingUpdate:null,loadingRequestId:null,error:o})}).addCase(us,(t,{payload:r})=>{t.byUrl[r]||(t.byUrl[r]=Nt)}).addCase(ds,(t,{payload:r})=>{t.byUrl[r]&&delete t.byUrl[r]}).addCase(cs,(t,{payload:r})=>{var a;if(!(!((a=t.byUrl[r])===null||a===void 0)&&a.pendingUpdate))throw new Error("accept list update called without pending update");t.byUrl[r]={...t.byUrl[r],current:t.byUrl[r].pendingUpdate,pendingUpdate:null}}).addCase(Vn,t=>{if(!t.lastInitializedDefaultListOfLists)t.byUrl=Dt.byUrl;else{const r=t.lastInitializedDefaultListOfLists.reduce((o,s)=>o.add(s),new Set),a=Se.reduce((o,s)=>o.add(s),new Set);Se.forEach(o=>{r.has(o)||(t.byUrl[o]=Nt)}),t.lastInitializedDefaultListOfLists.forEach(o=>{a.has(o)||delete t.byUrl[o]})}t.lastInitializedDefaultListOfLists=Se}));const il={},ol=()=>new Date().getTime();function $e(e,t){try{return e?JSON.parse(e):t}catch{return t}}const sl=async()=>{const e=localStorage.getItem("redux_localstorage_simple_transactions"),t=localStorage.getItem("redux_localstorage_simple_user"),r=localStorage.getItem("redux_localstorage_simple_lists"),a=localStorage.getItem("redux_localstorage_simple_signatures"),o=$e(e,il),s=$e(t,fs),p=$e(r,Dt),f=$e(a,{}),u={user:ul(s),transactions:cl(o),lists:p,signatures:f,_persist:{version:0,rehydrated:!0}};return await zd.flush(),localStorage.removeItem("redux_localstorage_simple_transactions"),localStorage.removeItem("redux_localstorage_simple_user"),localStorage.removeItem("redux_localstorage_simple_lists"),localStorage.removeItem("redux_localstorage_simple_signatures"),u};function cl(e){const t=JSON.parse(JSON.stringify(e));return Object.keys(t).forEach(r=>{const a=t[r];Object.keys(a).forEach(o=>{"info"in a[o]||delete a[o]})}),t}function ul(e){const t=JSON.parse(JSON.stringify(e));if(t.selectedWallet){const r=t.selectedWallet;(r==="UNIWALLET"||r==="UNISWAP_WALLET"||r==="WALLET_CONNECT")&&delete t.selectedWallet}return typeof t.userSlippageTolerance!="number"||!Number.isInteger(t.userSlippageTolerance)||t.userSlippageTolerance<0||t.userSlippageTolerance>5e3?t.userSlippageTolerance=Ir.Auto:!t.userSlippageToleranceHasBeenMigratedToAuto&&[10,50,100].indexOf(t.userSlippageTolerance)!==-1&&(t.userSlippageTolerance=Ir.Auto,t.userSlippageToleranceHasBeenMigratedToAuto=!0),(typeof t.userDeadline!="number"||!Number.isInteger(t.userDeadline)||t.userDeadline<60||t.userDeadline>10800)&&(t.userDeadline=pn),typeof t.userRouterPreference!="string"&&(t.userRouterPreference=Ye.X),t.userRouterPreference==="auto"&&(t.userRouterPreference=Ye.X),"buyFiatFlowCompleted"in t&&delete t.buyFiatFlowCompleted,t.lastUpdateVersionTimestamp=ol(),t}function Q(e){return t=>{if(t)return{...t,localWebTransactions:{},_persist:{...t._persist,version:e}}}}var ll=Qe(An());const dl={0:Ou,1:Au,2:Mu,3:Gu,4:Ku,5:Zu,6:el,7:tl,8:rl,9:nl,10:Ru,11:Nu,12:Du,13:Bu,14:Pu,15:ku,16:Lu,17:xu,18:Fu,19:$u,20:qu,21:Wu,22:Hu,23:zu,24:Qu,25:Xu,26:Q(26),27:Q(27),28:Q(28),29:Q(29),30:Lr(30),31:Lr(31),32:Q(32),33:Q(33),34:Q(34),35:Q(35),36:Q(36),37:Q(37),38:Q(38),39:Q(39),40:Q(40),41:Q(41),42:Q(42),43:Q(43),44:Q(44),45:Q(45),46:Q(46),47:Q(47),48:Q(48),49:Ju},fl=49,jn="redux",xr=ll.default.createInstance({name:jn});function pl(e,t){const r=qc(e,t);return async(a,o)=>{if(a!==void 0)return r(a,o);const s=await xr.getItem("persist:interface");return s?(xr.clear(),r(s,o)):(a=await sl(),r(a,o))}}function vl(){var e;return(e=Yo({cacheOnly:!0}).data)===null||e===void 0||(e=e.portfolios)===null||e===void 0||(e=e[0])===null||e===void 0||(e=e.tokensTotalDenominatedValue)===null||e===void 0?void 0:e.value}var hl=Qe(di());const Fr=In(!0),Gt=In(!1);function gl(){const e=Wt(Gt);return Ge(()=>e(!1))}function Wn(){const e=Wt(Gt);return Ge(()=>e(!0))}function ml(){const e=Er(Fr),t=Er(Gt),r=Wt(Fr),a=gl(),o=e&&!t,s=Ge(p=>{r(p),p&&a()});return{enabled:o,toggle:s}}const yp={renderTitle:e=>e("swap.settings.oneClickSwap.title"),renderTooltip:e=>e("swap.settings.oneClickSwap.tooltip"),Control(){const e=ml();return(0,hl.jsx)(ai,{checked:e.enabled,variant:"branded",onCheckedChange:e.toggle})}},yl="2.0.0";async function Sl(e){const{signer:t,batchedTxRequests:r,from:a}=e,o=`0x${e.chainId.toString(16)}`,s=r.map(({to:f,data:u,value:h})=>({to:f,data:u,value:h}));return(await t.provider.send("wallet_sendCalls",[{version:yl,calls:s,from:a,chainId:o,atomicRequired:!0}])).id}function*_l(e){const{step:t,info:r,account:a,ignoreInterrupt:o,disableOneClickSwap:s}=e,p=a.address,{batchedTxRequests:f}=t,u=f[0].chainId;try{var h;const{throwIfInterrupted:g}=yield*So(o),y=yield*$(to,a.address),S=yield*$(()=>Sl({signer:y,batchedTxRequests:f,from:p,chainId:u})),m={connectorId:(h=$s(Fs).connector)===null||h===void 0?void 0:h.id,batchId:S,chainId:u};return yield*He(En({id:S,hash:S,from:a.address,typeInfo:r,chainId:u,batchInfo:m,routing:Ms(r),transactionOriginType:wn.Internal,status:Tn.Pending,addedTime:Date.now(),options:{request:{to:f[0].to,from:a.address,data:f[0].data,value:f[0].value,gasLimit:f[0].gasLimit,gasPrice:f[0].gasPrice,nonce:f[0].nonce,chainId:f[0].chainId}}})),we.addPopup({type:_e.Transaction,hash:S},S),yield*$(g),S}catch(g){if(g.code===5750||wl(g)){const y=yield*$(ts);y&&(yield*He(ns(y))),s()}throw g}}function wl(e){return Cn(e)&&e.code===-32603}function Tl(e){return function(r){if(r instanceof Yi&&r.step.type===ee.SwapTransactionBatched)return e.disableOneClickSwap}}function bl(){const e=Wn();return Ge(Tl({disableOneClickSwap:e}))}const Il=J.enum(["Success","Failed"]),El=J.object({inputMint:J.string(),inputAmount:J.string(),outputMint:J.string(),outputAmount:J.string()}),Cl=J.object({status:Il,signature:J.string().optional(),slot:J.string().optional(),error:J.string().optional(),code:J.number(),totalInputAmount:J.string().optional(),totalOutputAmount:J.string().optional(),inputAmountResult:J.string().optional(),outputAmountResult:J.string().optional(),swapEvents:J.array(El).optional()}).passthrough();async function Ol(e){const t=await Rs.post(_n.jupiterApiPaths.execute,{body:JSON.stringify(e)});return Cl.parse(t)}Gr();Ao();async function Al({transaction:e,requestId:t,signSolanaTransaction:r}){const a=await r(e),o=Xr.from(a.serialize()).toString("base64");return await Ol({signedTransaction:o,requestId:t})}function Rl({hash:e,trade:t,from:r}){const a=Je(t);Yd.dispatch(En({from:r,typeInfo:a,hash:e,chainId:ve.Solana,routing:he.JUPITER,status:Tn.Success,addedTime:Date.now(),id:e,transactionOriginType:wn.Internal,options:{request:{}}})),we.addPopup({type:_e.Transaction,hash:e},e)}function Nl(e){return function*(r){const{swapTxContext:a,account:o}=r,{trade:s,transactionBase64:p}=a,{requestId:f}=s.quote.quote,u=Eo.deserialize(Xr.from(p,"base64")),{data:h,error:g}=yield*$(()=>hi(Al({transaction:u,requestId:f,signSolanaTransaction:e})));if(g)throw g;const{signature:y,status:S,code:O,error:m}=h;if(S!=="Success"||!y)throw new Li(m??"Unknown Jupiter Execution Error",O);Rl({hash:y,trade:s,from:o.address})}}const Dl=Nl(is);function*Bl(e){const{analytics:t,step:r,trade:a}=e,{quote:o,routing:s}=a.quote,p=o.orderId,f=a.inputAmount.currency.chainId,u=Ul({step:r,trade:a,chainId:f,routing:s}),h={trade:a,allowedSlippage:At(a.slippageTolerance),fiatValues:{amountIn:t.token_in_amount_usd,amountOut:t.token_out_amount_usd,feeUsd:t.fee_usd},portfolioBalanceUsd:t.total_balances_usd,trace:{...t}};ce(gt.UniswapXSignatureRequested,Oe(h));const g=yield*$(cn,e);if(Date.now()/1e3>r.deadline)throw new Pi("User signed after deadline");Xi({step:r,data:{routing:s,...u.swapInfo},status:"in progress"}),ce(tt.SwapSigned,Oe({trade:a,allowedSlippage:At(a.slippageTolerance),fiatValues:{amountIn:t.token_in_amount_usd,amountOut:t.token_out_amount_usd,feeUsd:t.fee_usd},portfolioBalanceUsd:t.total_balances_usd,trace:{...t}}));try{yield*$(bs,{signature:g,quote:o,routing:s})}catch(y){throw ce(gt.UniswapXOrderPostError,{...Oe(h),detail:y.message}),y}ce(gt.UniswapXOrderSubmitted,Oe(h)),yield*He(Zs(u)),we.addPopup({type:_e.Order,orderHash:p},p)}const Pl={[he.DUTCH_V2]:yt.SIGN_UNISWAPX_V2_ORDER,[he.DUTCH_V3]:yt.SIGN_UNISWAPX_V3_ORDER,[he.PRIORITY]:yt.SIGN_PRIORITY_ORDER};function Ul({step:e,trade:t,chainId:r,routing:a}){const o=Je(t);return{type:Pl[a],id:e.quote.orderId,addedTime:Date.now(),chainId:r,encodedOrder:t.quote.quote.encodedOrder,offerer:t.quote.quote.orderInfo.swapper,orderHash:t.quote.quote.orderId,status:rc.OPEN,swapInfo:o}}const kl=e=>e.timing.swap.startTimestamp,Ll={swap:{startTimestamp:void 0}},Hn=Ke({name:"timing",initialState:Ll,reducers:{updateSwapStartTimestamp:(e,{payload:{timestamp:t}})=>{e.swap.startTimestamp=t}}}),{updateSwapStartTimestamp:xl}=Hn.actions,{reducer:Fl}=Hn;function Ee(e){const t=[];return e.revocation&&t.push(e.revocation),e.approval&&t.push(e.approval),e.permit&&t.push(e.permit),t.push(e.swap),t}function $l(e,t){return{type:ee.UniswapXSignature,deadline:t.orderInfo.deadline,quote:t,...e}}function $r(e){return{type:ee.SwapTransaction,txRequest:e}}function Ml(e){return{type:ee.SwapTransactionAsync,getTxRequest:async t=>{if(!e)return;const{swap:r}=await ws({...e,signature:t,simulateTransaction:!0});return Xs(r)}}}function Mr(e){return{type:ee.SwapTransactionBatched,batchedTxRequests:e}}function ql(e){const t=[];return e.revocation&&t.push(e.revocation),e.approval&&t.push(e.approval),t.push(e.signOrder),t}function Vl(e){if(ic(e)){const{trade:r,approveTxRequest:a,revocationTxRequest:o}=e,s=zs(o,r.inputAmount.currency.wrapped),p=js({txRequest:a,amountIn:r.inputAmount});if(mn(e)){const{swapRequestArgs:f}=e;if(e.unsigned)return Ee({revocation:s,approval:p,permit:Ws(e.permit.typedData,r.inputAmount.currency),swap:Ml(f)});if(e.txRequests.length>1)return Ee({permit:void 0,swap:Mr(e.txRequests)});const u=e.permit?Hs({txRequest:e.permit.txRequest,amountIn:r.inputAmount}):void 0;return Ee({revocation:s,approval:p,permit:u,swap:$r(e.txRequests[0])})}else{if(As(e))return ql({revocation:s,approval:p,signOrder:$l(e.permit.typedData,e.trade.quote.quote)});if(Os(e))return e.txRequests.length>1?Ee({permit:void 0,swap:Mr(e.txRequests)}):Ee({revocation:s,approval:p,permit:void 0,swap:$r(e.txRequests[0])})}}return[]}var Kt=Qe(ni());function*jl(e){const{trade:t,step:r,signature:a,analytics:o,onTransactionHash:s}=e,p=Je(t),f=yield*$(Hl,r,a),u=({hash:y,data:S})=>{var O;ce(tt.SwapModifiedInWallet,{...o,txHash:y,expected:((O=f.data)===null||O===void 0?void 0:O.toString())??"",actual:S})},h={...r,txRequest:f},g=yield*$(sn,{...e,info:p,step:h,ignoreInterrupt:!0,shouldWaitForConfirmation:!1,onModification:u});zn({...e,hash:g}),(!ec(t.inputAmount.currency.chainId)||Js.includes(t.routing))&&we.addPopup({type:_e.Transaction,hash:g},g,Do(t.inputAmount.currency.chainId)?ko:Po),s&&s(g)}function*Wl(e){const{trade:t,step:r,disableOneClickSwap:a}=e,o=Je(t),s=yield*_l({...e,info:o,step:r,ignoreInterrupt:!0,shouldWaitForConfirmation:!1,disableOneClickSwap:a});zn({...e,batchId:s}),we.addPopup({type:_e.Transaction,hash:s},s)}function zn(e){const{trade:t,analytics:r,hash:a,batchId:o}=e;ce(tt.SwapSigned,Oe({trade:t,allowedSlippage:t.slippageTolerance?At(t.slippageTolerance):Lo,fiatValues:{amountIn:r.token_in_amount_usd,amountOut:r.token_out_amount_usd,feeUsd:r.fee_usd},txHash:a,portfolioBalanceUsd:r.total_balances_usd,trace:r,isBatched:!!o,includedPermitTransactionStep:r.included_permit_transaction_step,batchId:o}))}function*Hl(e,t){if(e.type===ee.SwapTransaction)return e.txRequest;if(!t)throw new xt("Signature required for async swap transaction step");const r=yield*$(e.getTxRequest,t);return Ro(r!==void 0),r}function _t(e,t){if(!t.includes(e.routing))throw new xt(`Expected routing ${t}, got ${e.routing}`)}async function zl(e){const{selectChain:t,startChainId:r,swapTxContext:a}=e,o=a.trade.inputAmount.currency.chainId;return yn(a)||o===r?{chainSwitchFailed:!1}:{chainSwitchFailed:!await t(o)}}function*Yl(e){const{account:t,disableOneClickSwap:r,setCurrentStep:a,swapTxContext:o,analytics:s,onSuccess:p,onFailure:f,v4Enabled:u,setSteps:h}=e,{trade:g}=o,{chainSwitchFailed:y}=yield*$(zl,e);if(y){f();return}const S=yield*$(Vl,o,u);h(S);let O,m;try{if(yn(o)){yield*$(Dl,{...e,swapTxContext:o}),yield*$(p);return}for(m of S)switch(m.type){case ee.TokenRevocationTransaction:case ee.TokenApprovalTransaction:{yield*$(ro,{account:t,step:m,setCurrentStep:a});break}case ee.Permit2Signature:{O=yield*$(cn,{account:t,step:m,setCurrentStep:a});break}case ee.Permit2Transaction:{yield*$(no,{account:t,step:m,setCurrentStep:a});break}case ee.SwapTransaction:case ee.SwapTransactionAsync:{_t(g,[he.CLASSIC,he.BRIDGE]),yield*$(jl,{account:t,signature:O,step:m,setCurrentStep:a,trade:g,analytics:s,onTransactionHash:e.onTransactionHash});break}case ee.SwapTransactionBatched:{_t(g,[he.CLASSIC,he.BRIDGE]),yield*$(Wl,{account:t,step:m,setCurrentStep:a,trade:g,analytics:s,disableOneClickSwap:r});break}case ee.UniswapXSignature:{_t(g,Cs),yield*$(Bl,{account:t,step:m,setCurrentStep:a,trade:g,analytics:s});break}default:throw new xt(`Unexpected step type: ${m.type}`)}}catch(T){const A=Zi({error:T,step:m});A&&W.error(A,{tags:{file:"swapSaga",function:"swap"}});const N=e.getOnPressRetry(A);f(A,N);return}yield*$(p)}const Yn=$t(Yl,"swapSaga");function Sp(){const e=Bt(),t=ks(),r=ui(kl),a=On(),s=bn().chainId,p=Es(s),f=xs(),u=nc(O=>O.updateSwapForm),h=vl(),g=Wn(),y=bl(),S=Ls();return(0,Kt.useCallback)(O=>{var m,T,A;const{swapTxContext:N,onSuccess:L,onFailure:U,currencyInAmountUSD:R,currencyOutAmountUSD:B,presetPercentage:M,preselectAsset:z,isAutoSlippage:C,isFiatInputMode:x,setCurrentStep:P,setSteps:q}=O,{trade:H,gasFee:Z}=N,K=mn(N),te=K&&N.txRequests&&N.txRequests.length>1,ae=K&&((m=N.permit)===null||m===void 0?void 0:m.method)===ac.Transaction,ue=Bs({formatter:t,trade:H,currencyInAmountUSD:R,currencyOutAmountUSD:B,presetPercentage:M,preselectAsset:z,portfolioBalanceUsd:h,trace:f,isBatched:te,includedPermitTransactionStep:ae}),le=jo(H.inputAmount.currency.chainId)?S.svmAccount:S.evmAccount;if(!le||!Ys(le))throw new Error("No account found");const Te={swapTxContext:N,account:le,analytics:ue,getOnPressRetry:y,disableOneClickSwap:g,onSuccess:L,onFailure:U,setCurrentStep:P,setSteps:q,selectChain:a,startChainId:s,v4Enabled:p,onTransactionHash:ke=>{u({txHash:ke,txHashReceivedTime:Date.now()})}};e(Yn.actions.trigger(Te));const de=(T=Ts(H.quote))===null||T===void 0||(T=T.blockNumber)===null||T===void 0?void 0:T.toString();ce(tt.SwapSubmittedButtonClicked,{...ue,estimated_network_fee_wei:Z.value,gas_limit:K?(A=N.txRequests)===null||A===void 0||(A=A[0])===null||A===void 0||(A=A.gasLimit)===null||A===void 0?void 0:A.toString():void 0,transaction_deadline_seconds:H.deadline,swap_quote_block_number:de,is_auto_slippage:C,swap_flow_duration_milliseconds:r?Date.now()-r:void 0,is_fiat_input_mode:x}),e(xl({timestamp:void 0}))},[t,h,f,a,s,p,e,r,y,g,S.evmAccount,S.svmAccount,u])}const wt=({inputCurrencyId:e,outputCurrencyId:t})=>({typeInfo:{type:k.Swap,inputCurrencyId:e,outputCurrencyId:t}}),Ql=e=>({typeInfo:{type:k.Wrap,unwrapped:e.unwrapped,currencyAmountRaw:e.currencyAmountRaw}}),Tt=e=>({typeInfo:e}),Xl=({info:e,chainId:t,address:r})=>{const a={chainId:t,from:r};let o;switch(e.type){case k.Swap:o=wt(e);break;case k.Bridge:o=Tt(e);break;case k.Send:o=Tt(e);break;case k.Wrap:o=Ql(e);break;case k.CreatePool:case k.CreatePair:case k.LiquidityIncrease:case k.LiquidityDecrease:case k.MigrateLiquidityV3ToV4:o=wt({inputCurrencyId:e.currency0Id,outputCurrencyId:e.currency1Id});break;case k.CollectFees:o=Tt(e);break;case k.MigrateLiquidityV2ToV3:o=wt({inputCurrencyId:e.baseCurrencyId,outputCurrencyId:e.quoteCurrencyId});break;case k.Approve:case k.ClaimUni:case k.LPIncentivesClaimRewards:case k.Permit2Approve:return{...a,...e};case k.Receive:case k.NFTTrade:case k.NFTApprove:case k.NFTMint:case k.WCConfirm:case k.Unknown:case k.OnRampPurchase:case k.OnRampTransfer:case k.OffRampSale:case k.LocalOnRamp:case k.LocalOffRamp:case k.SendCalls:case k.RemoveDelegation:return{...a,...e};default:Gl(e)}return{...a,...o}};function Gl(e){throw new Error("Unhandled case: "+e)}function Kl(){return Ss().checkGate(ys(gs.InstantTokenBalanceUpdate))}let je=(function(e){return e.Nfts="Nfts",e.NFTItemScreen="NFTItemScreen",e.NftCollectionScreen="NftCollectionScreen",e.NftsTab="NftsTab",e.PortfolioBalances="PortfolioBalances",e.SelectWalletScreen="SelectWalletScreen",e.TransactionHistoryUpdater="TransactionHistoryUpdater",e.Token="Token",e.TokenDetailsScreen="TokenDetailsScreen",e.TokenPriceHistory="TokenPriceHistory",e.TokenProjects="TokenProjects",e.TransactionList="TransactionList",e.TopTokens="TopTokens",e.SearchTokens="SearchTokens",e.ExploreSearch="ExploreSearch",e.SpotPrices="SpotPrices",e.ExploreTokensTab="ExploreTokensTab",e.FavoriteTokenCard="FavoriteTokenCard",e})({});const Qn=[je.PortfolioBalances,je.TransactionList,je.NftsTab];function Xn(e){var t;const r=new Set,a=e.chainId;switch(r.add(xo(a)),(t=e.typeInfo)===null||t===void 0?void 0:t.type){case k.Swap:case k.Bridge:r.add(e.typeInfo.inputCurrencyId.toLowerCase()),r.add(e.typeInfo.outputCurrencyId.toLowerCase());break;case k.Send:r.add(Be(a,e.typeInfo.tokenAddress).toLowerCase());break;case k.Wrap:r.add(Fo(a));break;case k.OnRampPurchase:case k.OnRampTransfer:case k.OffRampSale:r.add(Be(a,e.typeInfo.destinationTokenAddress).toLowerCase());break;default:var o;W.info("getCurrenciesWithExpectedUpdates.ts","getCurrenciesWithExpectedUpdates","Unhandled transaction type",{type:(o=e.typeInfo)===null||o===void 0?void 0:o.type,info:JSON.stringify(e.typeInfo)});break}return r}const Me=jt*3,Jl=30;function*Zl({transaction:e,apolloClient:t,activeAddress:r}){const a=e.from,o=yield*un(Qr),s=Xn(e),p=qr({owner:a,currencyIds:s,apolloClient:t,isTestnetMode:o}),f=ms({config:vs.NetworkRequests,key:hs.BalanceMaxRefetchAttempts,defaultValue:Jl});if(a!==r||(yield*It(Me),yield*$([t,t.refetchQueries],{include:Qn}),!p))return;let u=Me,h=0,g;for(;h<f;){const y=qr({owner:a,currencyIds:s,apolloClient:t,isTestnetMode:o});if(g=y,ed(p,y)||(yield*It(Me),a!==r))break;yield*$([t,t.refetchQueries],{include:[je.PortfolioBalances]}),u+=Me,h+=1}h>=10&&W.info("refetchGQLQueriesSaga","refetchGQLQueries","Large balance freshness lag",{iterations:h,startingBalances:p,lastUpdatedBalances:g,currencyIds:s}),ce(Qo.PortfolioBalanceFreshnessLag,{freshnessLag:u,updatedCurrencies:Object.keys(p)})}function qr({owner:e,currencyIds:t,apolloClient:r,isTestnetMode:a}){var o;if(!(t!=null&&t.size))return;const s=new Set(t),p=Array.from(s).reduce((y,S)=>({...y,[S]:0}),{}),f=a?bo:To,u=r.readQuery({query:ln,variables:{ownerAddress:e,chains:f}});u||W.info("refetchGQLQueriesSaga","readBalancesFromCache","No cached balances data",{currencyIds:s});for(const y of(u==null||(o=u.portfolios)===null||o===void 0||(o=o[0])===null||o===void 0?void 0:o.tokenBalances)??[]){var h,g;const S=ze(y==null||(h=y.token)===null||h===void 0?void 0:h.chain);if(!S)continue;const O=(y==null||(g=y.token)===null||g===void 0?void 0:g.address)??Vt(S),m=Be(S,O).toLowerCase();if(s.has(m)&&(s.delete(m),p[m]=(y==null?void 0:y.quantity)??0),!s.size)break}return p}function ed(e,t){if(!t)return!0;const r=Object.keys(e);for(const a of r)if(e[a]===t[a])return!1;return!0}function td(e){return[Yr.TradingApi,_n.tradingApiPaths.quote,gn.FASTEST,e]}async function rd({queryClient:e=Ns,params:t}){try{return await e.fetchQuery({queryKey:td(t),queryFn:async()=>_s({...t,routingPreference:gn.FASTEST})})}catch(r){if(Us(r))return;throw r}}async function nd({apolloCache:e,cachedPortfolio:t,accountAddress:r,currencyIds:a}){const o=new Map;return W.debug("getOnChainBalances.ts","getOnChainBalances","[ITBU] Fetching onchain balances",a),await Promise.all(Array.from(a).map(async s=>{var p;const f=$o(s),u=Mo(s);if(!f||!u){W.error(new Error("Unable to parse `currencyId`"),{tags:{file:"fetchOnChainBalances.ts",function:"fetchOnChainBalances"},extra:{currencyId:s}});return}const{balance:h}=await Ps({currencyAddress:f,chainId:u,currencyIsNative:qo(u,f),accountAddress:r}),g=(p=e.readQuery({query:dn,variables:Sn(s)}))===null||p===void 0?void 0:p.token;if(!g){W.warn("fetchOnChainBalances.ts","fetchOnChainBalances","No `token` found",{currencyId:s});return}const y=oc(g);if(!y){W.warn("fetchOnChainBalances.ts","fetchOnChainBalances","No `currency` found");return}const S=hn({value:h,valueType:vn.Raw,currency:y.currency}),O=S==null?void 0:S.toExact(),m=S?await ad({accountAddress:r,onchainQuantityCurrencyAmount:S,token:g,cachedPortfolio:t}):void 0;o.set(s,{currencyAddress:f,chainId:u,rawBalance:h,quantity:O?parseFloat(O):void 0,denominatedValue:m})})),W.debug("getOnChainBalances.ts","getOnChainBalances","[ITBU] Onchain balances fetched",JSON.stringify(Object.fromEntries(o))),o}async function ad({accountAddress:e,onchainQuantityCurrencyAmount:t,token:r,cachedPortfolio:a}){var o;const s=id({cachedPortfolio:a,token:r,onchainQuantityCurrencyAmount:t});if(s)return s;const p={cachedPortfolio:a,token:r,onchainQuantityCurrencyAmount:t},f=Is(ze(r.chain));if(!f){W.error(new Error("[ITBU] No `chainId` found"),{tags:{file:"fetchOnChainBalances.ts",function:"getDenominatedValue"},extra:p});return}const u=ze(r.chain);if(!u)return;const h=r.address??Vt(u),g=Oo(u),y=await od({type:Ds.EXACT_INPUT,amount:t.quotient.toString(),tokenInChainId:f,tokenOutChainId:f,tokenIn:h,tokenOut:g.address,swapper:e}),S=y&&"output"in y.quote?(o=y.quote.output)===null||o===void 0?void 0:o.amount:void 0;if(!S)return;const O=hn({value:S,valueType:vn.Raw,currency:g});return O?{value:parseFloat(O.toFixed()),currency:"USD"}:void 0}function id({cachedPortfolio:e,token:t,onchainQuantityCurrencyAmount:r}){var a;const o=e==null||(a=e.tokenBalances)===null||a===void 0?void 0:a.find(s=>{var p,f;return(s==null||(p=s.token)===null||p===void 0?void 0:p.address)===t.address&&(s==null||(f=s.token)===null||f===void 0?void 0:f.chain)===t.chain});if(o!=null&&o.denominatedValue&&o.quantity){const s=r.toExact();return{value:o.denominatedValue.value*parseFloat(s)/o.quantity,currency:o.denominatedValue.currency??"USD"}}}async function od(e){try{return await rd({params:e})}catch(t){W.error(t,{tags:{file:"fetchOnChainBalances.ts",function:"fetchIndicativeQuote"},extra:{params:e}});return}}const sd=1800*1e3,cd={tokenBalanceOverrides:{}},Gn=Ke({name:"portfolio",initialState:cd,reducers:{addTokensToBalanceOverride:(e,t)=>{const{ownerAddress:r,currencyIds:a}=t.payload,o=Ot({address:r,platform:Ct.EVM});if(!o){W.error(new Error("Unexpected call to `addTokensToBalanceOverride` with an invalid address"),{tags:{file:"portfolio/slice/slice.ts",function:"addTokensToBalanceOverride"},extra:{ownerAddress:r,currencyIds:a}});return}const s=e.tokenBalanceOverrides[o]??{},p=new Date().getTime();a.forEach(f=>{s[f]={updatedAt:p}}),e.tokenBalanceOverrides[o]=s},removeTokenFromBalanceOverride:(e,t)=>{var r;const{ownerAddress:a,chainId:o,tokenAddress:s}=t.payload,p=Ot({address:a,platform:Ct.EVM});if(!p){W.error(new Error("Unexpected call to `removeTokenFromBalanceOverride` with an invalid address"),{tags:{file:"portfolio/slice/slice.ts",function:"removeTokenFromBalanceOverride"},extra:{ownerAddress:a,chainId:o,tokenAddress:s}});return}const f=Be(o,s).toLowerCase();(r=e.tokenBalanceOverrides[p])===null||r===void 0||delete r[f],Object.keys(e.tokenBalanceOverrides[p]??{}).length===0&&delete e.tokenBalanceOverrides[p]},removeExpiredBalanceOverrides:e=>{Object.keys(e.tokenBalanceOverrides).forEach(t=>{const r=e.tokenBalanceOverrides[t],a=Date.now();Object.keys(r).forEach(o=>{a-r[o].updatedAt>sd&&(W.warn("portfolio/slice/slice.ts","removeExpiredBalanceOverrides",`[ITBU] Removing expired token balance override for ${t}: ${o}`),delete r[o])}),Object.keys(r).length===0&&delete e.tokenBalanceOverrides[t]})}}}),{addTokensToBalanceOverride:ud,removeTokenFromBalanceOverride:_p,removeExpiredBalanceOverrides:wp}=Gn.actions,ld=Gn.reducer;Gr();function dd({apolloCache:e,ownerAddress:t,currencyId:r,onchainBalanceQuantity:a,denominatedValue:o}){var s;const p=(s=e.readQuery({query:dn,variables:Sn(r)}))===null||s===void 0?void 0:s.token;if(!p)return W.warn("getInstantTokenBalanceUpdateApolloLink.ts","createTokenBalance","[ITBU] No `token` found",{currencyId:r}),null;const f=fd("TokenBalance",[t,p.id,wo.Usd]);W.debug("getInstantTokenBalanceUpdateApolloLink.ts","createTokenBalanceRef",`[ITBU]Calling apolloCache.writeFragment for ${r}`,{onchainBalanceQuantity:a,denominatedValue:o});const u=e.writeFragment({data:{__typename:"TokenBalance",id:f,quantity:a,denominatedValue:o?{__typename:"Amount",value:o.value,currency:o.currency}:null,isHidden:!1,token:p,tokenProjectMarket:{relativeChange24:null}},fragment:Io,fragmentName:"TokenBalanceParts"});return u||(W.warn("getInstantTokenBalanceUpdateApolloLink.ts","createTokenBalanceRef","[ITBU] Failed to write `newTokenBalanceRef`",{tokenBalanceId:f,ownerAddress:t,currencyId:r}),null)}function fd(e,t){const r=t.map(a=>a===null?"null":a).join("_");return gi.from(`${e}:${r}`).toString("base64")}function*pd(e){const t=yield*un(Qr),r=yield*$(fi);return yield*$(Co,{platform:e,isTestnetModeEnabled:t,featureFlaggedChainIds:r})}const vd=jt*3;function*hd({transaction:e,apolloClient:t,activeAddress:r,queryClient:a}){const o=e.from,s=Xn(e);o===r&&(s&&(yield*$(gd,{apolloClient:t,ownerAddress:r,currencyIds:s,queryClient:a})),yield*It(vd),yield*$([t,t.refetchQueries],{include:Qn}))}function*gd({apolloClient:e,ownerAddress:t,currencyIds:r,queryClient:a}){var o;W.debug("refetchGQLQueriesViaOnchainOverrideVariantSaga.ts","modifyLocalCache",`[ITBU] modifyLocalCache called with ${r.size} currencyIds`,{currencyIds:r}),yield*He(ud({ownerAddress:t,currencyIds:Array.from(r)}));const{gqlChains:s}=yield*$(pd),p=(o=e.readQuery({query:ln,variables:{ownerAddress:t,chains:s}}))===null||o===void 0||(o=o.portfolios)===null||o===void 0?void 0:o[0];if(!p){W.warn("refetchGQLQueriesViaOnchainOverrideVariantSaga.ts","modifyLocalCache","[ITBU] No `cachedPortfolio` found");return}const f=yield*$(nd,{apolloCache:e.cache,cachedPortfolio:p,accountAddress:t,currencyIds:r});if(a)for(const u of r)a.setQueryData([Yr.OnchainBalances,t,u],h=>{var g;return{...h,balance:(g=f.get(u))===null||g===void 0?void 0:g.rawBalance}});e.cache.modify({id:e.cache.identify(p),fields:{tokenBalances(u,{readField:h}){if(!No(u))return u;u.forEach(y=>{const S=h("token",y),O=ze(h("chain",S)),m=O?h("address",S)??Vt(O):null;if(!S||!O||!m){W.error(new Error("Missing required value: `tokenRef`, `chainId` or `tokenAddress`"),{tags:{file:"refetchGQLQueriesViaOnchainOverrideVariantSaga.ts",function:"modifyLocalCache"},extra:{tokenRef:S,chainId:O,tokenAddress:m}});return}const T=Be(O,m).toLowerCase(),A=f.get(T);if(!A)return;const N=A.quantity;if(f.delete(T),N===void 0){W.warn("refetchGQLQueriesViaOnchainOverrideVariantSaga.ts","modifyLocalCache","[ITBU] Unable to override local cache because of missing `onchainQuantity`",{currencyId:T});return}const L=h("quantity",y),U=e.cache.identify(y);W.debug("refetchGQLQueriesViaOnchainOverrideVariantSaga.ts","modifyLocalCache",`[ITBU] Calling apolloClient.cache.modify for ${T}`,{tokenBalanceRef:y,tokenBalanceId:U}),e.cache.modify({id:U,fields:{quantity:()=>N,denominatedValue:R=>{if(!R)return W.debug("refetchGQLQueriesViaOnchainOverrideVariantSaga.ts","modifyLocalCache",`[ITBU] No cachedDenominatedValue found for ${T}`),R;if(!L)return W.debug("refetchGQLQueriesViaOnchainOverrideVariantSaga.ts","modifyLocalCache",`[ITBU] No cachedQuantity found for ${T}`),R;if(Vo(R))return W.error(new Error("Unexpected `cachedDenominatedValue` as Reference instead of Amount"),{tags:{file:"refetchGQLQueriesViaOnchainOverrideVariantSaga.ts",function:"modifyLocalCache"},extra:{currencyId:T,cachedDenominatedValue:R}}),R;const B=R.value*N/L;return W.debug("refetchGQLQueriesViaOnchainOverrideVariantSaga.ts","modifyLocalCache",`[ITBU] Overriding ${T} with $${B}`),{...R,value:B}}}})});const g=[];return Array.from(f).forEach(([y])=>{var S,O;const m=(S=f.get(y))===null||S===void 0?void 0:S.quantity,T=(O=f.get(y))===null||O===void 0?void 0:O.denominatedValue;if(m===void 0){W.warn("refetchGQLQueriesViaOnchainOverrideVariantSaga.ts","modifyLocalCache","[ITBU] No `onchainBalance.quantity` found for token",{currencyId:y,ownerAddress:t});return}const A=dd({apolloCache:e.cache,ownerAddress:t,currencyId:y,onchainBalanceQuantity:m,denominatedValue:T??null});A&&g.push(A)}),g.length>0?[...u,...g]:u}}})}fn();const Tp=jt*3;function*md({transaction:e,apolloClient:t,activeAddress:r,queryClient:a}){Kl()?yield*hd({transaction:e,apolloClient:t,activeAddress:r,queryClient:a}):yield*Zl({transaction:e,apolloClient:t,activeAddress:r})}function*yd(e){const{address:t,chainId:r,pendingDiff:a,apolloClient:o,queryClient:s}=e,p=a[0].typeInfo,f=Xl({info:p,chainId:r,address:t});yield $(md,{transaction:f,apolloClient:o,activeAddress:t,queryClient:s})}const Kn=$t(yd,"watchTransactions");function bp(){const e=Bt();return(0,Kt.useCallback)(t=>{e(Kn.actions.trigger(t))},[e])}function*Sd(e){const t=wd(e.step.amount);return yield*$(sn,{...e,info:t})}function*_d(e){try{const{account:t,inputCurrencyAmount:r,selectChain:a,txRequest:o,startChainId:s,onFailure:p}=e;if(o.chainId!==s&&!(yield*$(a,o.chainId))){p();return}const f={type:ee.WrapTransaction,txRequest:o,amount:r},u=yield*$(Sd,{step:f,account:t,setCurrentStep:Vs,shouldWaitForConfirmation:!1,allowDuplicativeTx:!0});we.addPopup({type:_e.Transaction,hash:u},u),e.onSuccess()}catch(t){if(Cn(t)){e.onFailure();return}Bo(e.txRequest.chainId)&&t.code===Uo||W.error(t,{tags:{file:"wrapSaga",function:"wrap",chainId:e.txRequest.chainId}}),e.onFailure()}}function wd(e){return e.currency.isNative?{type:k.Wrap,unwrapped:!1,currencyAmountRaw:e.quotient.toString()}:{type:k.Wrap,unwrapped:!0,currencyAmountRaw:e.quotient.toString()}}const Jn=$t(_d,"wrap");function Ip(){const e=Bt(),t=On(),r=bn().chainId;return(0,Kt.useCallback)(a=>{e(Jn.actions.trigger({...a,selectChain:t,startChainId:r}))},[e,t,r])}const Td=[Yn.wrappedSaga,Jn.wrappedSaga,Qs.wrappedSaga,Kn.wrappedSaga,Gs.wrappedSaga];function*bd(){yield*$(yo);for(const e of Td)yield*po(e)}let Id=(function(e){return e.CURRENCY_A="CURRENCY_A",e.CURRENCY_B="CURRENCY_B",e})({});const Ed=Pt("mint/typeInputMint"),Cd=Pt("mint/resetMintState"),Vr={independentField:Id.CURRENCY_A,typedValue:"",otherTypedValue:"",startPriceTypedValue:"",leftRangeTypedValue:"",rightRangeTypedValue:""};var Od=Ut(Vr,e=>e.addCase(Cd,()=>Vr).addCase(Ed,(t,{payload:{field:r,typedValue:a,noLiquidity:o}})=>o?r===t.independentField?{...t,independentField:r,typedValue:a}:{...t,independentField:r,typedValue:a,otherTypedValue:t.typedValue}:{...t,independentField:r,typedValue:a,otherTypedValue:""}));const jr={independentField:lc.CURRENCY_A,typedValue:"",startPriceTypedValue:"",leftRangeTypedValue:"",rightRangeTypedValue:""};var Ad=Ut(jr,e=>e.addCase(dc,()=>jr).addCase(fc,t=>({...t,leftRangeTypedValue:!0,rightRangeTypedValue:!0})).addCase(gc,(t,{payload:{typedValue:r}})=>({...t,startPriceTypedValue:r})).addCase(vc,(t,{payload:{typedValue:r}})=>({...t,leftRangeTypedValue:r})).addCase(hc,(t,{payload:{typedValue:r}})=>({...t,rightRangeTypedValue:r})).addCase(pc,(t,{payload:{field:r,typedValue:a,noLiquidity:o}})=>o?r===t.independentField?{...t,independentField:r,typedValue:a}:{...t,independentField:r,typedValue:a}:{...t,independentField:r,typedValue:a}));function Rd(e){const{getOriginalState:t,getState:r,logger:a}=e;function o(s){var p;const{action:f}=s;a==null||a.debug("effects.ts","handleOnUpdateDelegatedState",`Updating delegated state for chain id ${f.payload.chainId}`);const u=t(),h=r(),g=u.delegation.delegations,y=!g[f.payload.chainId]||g[f.payload.chainId]!==f.payload.address,S=(p=h.delegation.activeChainId)===null||p===void 0?void 0:p.toString(),O=m=>S===m;y&&(a==null||a.info("effects.ts","handleOnUpdateDelegatedState",`New delegated state detected for chain id ${JSON.stringify(f.payload)}`),e.onNewDelegateState({delegations:h.delegation.delegations}),a==null||a.info("effects.ts","handleOnUpdateDelegatedState",`Tracking delegation detected event for chain id ${JSON.stringify(f.payload)}`),e.onDelegationDetected({chainId:parseInt(f.payload.chainId,10),address:f.payload.address,isActiveChain:O(f.payload.chainId)}))}return o}function Nd(e){const{getState:t,logger:r}=e;function a(o){const{action:s}=o;if(s.payload.chainId){r==null||r.info("effects.ts","handleOnSetActiveChainId",`Setting active chain id to ${s.payload.chainId}`);const p=s.payload.chainId.toString(),u=t().delegation.delegations[p];u&&(r==null||r.info("effects.ts","handleOnSetActiveChainId",`Delegation address found for chain id ${p}`),e.onDelegationDetected({chainId:parseInt(p,10),address:u,isActiveChain:!0}))}}return a}const Dd={delegations:{},activeChainId:void 0},Zn=Ke({name:"delegation",initialState:Dd,reducers:{updateDelegatedState(e,{payload:t}){e.delegations={...e.delegations,[t.chainId]:t.address}},setActiveChainId(e,{payload:t}){e.activeChainId=t.chainId}}}),{updateDelegatedState:Bd,setActiveChainId:Pd}=Zn.actions,Ud=Zn.reducer,Jt=_i();Jt.startListening({actionCreator:Bd,effect:(e,{getOriginalState:t,getState:r})=>{Rd({getOriginalState:t,getState:r,onDelegationDetected:ea,onNewDelegateState:kd,logger:Xe()})({action:e})}});Jt.startListening({actionCreator:Pd,effect:(e,{getState:t})=>{Nd({getState:t,onDelegationDetected:ea,logger:Xe()})({action:e})}});function kd(e){Xe().info("slice.ts","handleNewDelegateState",`Updating user property for delegated EOA: ${JSON.stringify(Object.keys(e.delegations))}`),as(es.IsDelegatedEOA,Object.keys(e.delegations))}function ea(e){Xe().info("slice.ts","handleDelegationDetected",`Sending analytics event for delegation detected: ${JSON.stringify(e)}`),ce(Xo.DelegationDetected,{chainId:e.chainId,delegationAddress:e.address,isActiveChain:e.isActiveChain})}const Ld={filteredChainIds:void 0},ta=Ke({name:"swapSettings",initialState:Ld,reducers:{updateFilteredChainIds:(e,{payload:{filteredChainIds:t}})=>{e.filteredChainIds={...t}},resetFilteredChainIds:e=>{e.filteredChainIds=void 0}}}),{updateFilteredChainIds:Ep}=ta.actions,{reducer:xd}=ta,ra={[bt.reducerPath]:bt.reducer,swapSettings:xd,favorites:Wo,notifications:yc,portfolio:ld,searchHistory:Ho,timing:Fl,tokens:Sc,transactions:qs,uniswapBehaviorHistory:mc,userSettings:Jo,visibility:_c,delegation:Ud},Cp=Kr(ra),Fd=["favorites","portfolio","searchHistory","tokens","transactions","uniswapBehaviorHistory","userSettings","visibility"],$d={...ra,user:ps,signatures:tc,lists:al,fiatOnRampTransactions:cc,application:sc,wallets:Ks,walletCapabilities:rs,mint:Od,mintV3:Ad,logs:uc,[Re.reducerPath]:Re.reducer},Md=Kr($d),qd=[...Fd,"user","signatures","lists","fiatOnRampTransactions","walletCapabilities"];var Wr=Qe(An());const Vd={key:"interface",version:fl,storage:Wr.default.createInstance({name:jn,driver:Wr.default.LOCALSTORAGE}),migrate:pl(dl,{debug:!1}),whitelist:qd,throttle:1e3,serialize:!1,deserialize:!1,debug:vi()},jd=Uc(Vd,Md),Hr=Cu(),Wd=pi({shouldLogReduxState:()=>!!(window.localStorage.getItem(mi)!=="false")});function Hd(){const e=Si({reducer:jd,enhancers:t=>t.concat(Wd),middleware:t=>t({thunk:!0,immutableCheck:Sr()?!1:{ignoredPaths:[Re.reducerPath,"logs","lists"]},serializableCheck:Sr()?!1:{warnAfter:128,ignoredActionPaths:["meta.arg","meta.baseQueryMeta","payload.trade"],ignoredPaths:[Re.reducerPath],ignoredActions:["persist/PERSIST","persist/REHYDRATE","persist/PURGE","persist/FLUSH"]}}).concat(Re.middleware).concat(bt.middleware).concat(Hr).concat(os.middleware).concat(Jt.middleware)});return Hr.run(bd),e}const at=Hd(),zd=Mc(at);Ti(at.dispatch);at.dispatch(Vn());var Yd=at;export{yp as OneClickSwap,Pd as setActiveChainId,Yd as state_default,Bd as updateDelegatedState,Ep as updateFilteredChainIds,ml as useOneClickSwapSetting,gl as useResetOverrideOneClickSwapFlag,Sp as useSwapCallback,vl as useTotalBalancesUsdForAnalytics,bp as useWatchTransactionsCallback,Ip as useWrapCallback};
