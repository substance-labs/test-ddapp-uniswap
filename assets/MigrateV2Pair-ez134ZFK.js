import{__toESM as oe}from"./chunk-DgAfPHQg.js";import"./preload-helper-CaakwtpC.js";import"./i18next-DD3sT7R5.js";import{require_react as vi}from"./react-CNoFhWkx.js";import{Button as de,RadioButton as bi,RadioButtonGroup as yi,TouchableArea as Ue,Trans as _,useSporeColors as Ct}from"./src-DOOtfpHS.js";import{useTranslation as At}from"./useTranslation-BotBuoJf.js";import"./index.web-BqgtOHN3.js";import"./constants-CrXoXfFH.js";import"./es-Iwj7vF3u.js";import"./react-dom-xovCOntK.js";import"./react-is-BJXMVkew.js";import"./cache-BFZkIToX.js";import"./dist-Q7olfaoJ.js";import"./tslib.es6-Dbpxy1u8.js";import"./dist-QCpUvRkJ.js";import{Navigate as Si,useNavigate as Ii,useParams as ji}from"./chunk-QMGIS6GS-B91ZVkXt.js";import{require_jsx_runtime as Ti}from"./jsx-runtime-D7bMTQeG.js";import{useEnabledChains as Ei}from"./useEnabledChains-DuB86c95.js";import{logger as ye}from"./hooks-BXO4d1DJ.js";import"./dist-ceZDlR1V.js";import"./analytics.web-DLc1_wTk.js";import"./redux-toolkit.esm-BnRUBto_.js";import{ALL_EVM_CHAIN_IDS as xe,ARGENT_WALLET_DETECTOR_ADDRESS as wi,CurrencyAmount as ee,Fraction as Oi,Percent as q,Price as Ni,Token as Li,UniverseChainId as B,V2_FACTORY_ADDRESSES as Di,init_jsbi as Fe,init_sdk_core_esm as ce,isL2ChainId as Pi,jsbi_default as N,toGraphQLChain as Mi,useFeeTierDistributionQuery as Wi,useIsV3SubgraphStaleQuery as Ci}from"./utils-BX1Fu73x.js";import"./bn-D7somgUb.js";import{MaxUint256 as lt,init_lib$1 as Ai,init_lib$6 as Ri,splitSignature as ki}from"./lib-DPFIyRke.js";import{DEFAULT_DEADLINE_FROM_NOW as Ae}from"./misc-BMnlqqV4.js";import{currencyId as dt}from"./currencyId-Ci6selsx.js";import"./config-C4KrHqHG.js";import"./time-D_OqcZ4M.js";import{LiquidityEventName as $e}from"./features-yACC1hVw.js";import{InterfaceEventName as $i}from"./interface-BdpC4qOF.js";import"./element-Wnp4RkdY.js";import{ModalName as Hi}from"./modal-Dvm06CN4.js";import{InterfacePageName as zi}from"./page-zDkoCQe4.js";import"./isAddress-P2vaZgmG.js";import"./chain-ghiO403o.js";import"./slice-cfC6NcyN.js";import"./node-C_BraYgX.js";import"./formatUnits-DkyMpOD7.js";import"./_u64-b_viZRi_.js";import"./sha2-Jt0E41S_.js";import"./sha256-BqbhXHGu.js";import"./call-CTDbaN-t.js";import"./parseAccount-CRyN5swV.js";import"./encodeFunctionData-CD63gkvM.js";import"./stringify-B82RFruy.js";import"./rpc-nQR4Ijs4.js";import"./dist-CBK-d0jO.js";import"./hmac-D-QTodfL.js";import{ExplorerDataType as Bi,getExplorerLink as Vi}from"./linking-D29RyAR8.js";import"./lib-CKG8APVv.js";import"./lib-XGdDYWzD.js";import"./V3DutchOrderTrade-Cl7yELmp.js";import{FeeAmount as a,Pool as Ui,Position as Fi,TickMath as Ki,init_v3_sdk_esm as Ee,priceToClosestTick as qi}from"./v3-sdk.esm-CHH6GWR1.js";import"./hash-05APZTFm.js";import"./inherits_browser-Dqx8HagI.js";import"./useQuery-D_ZCw8XG.js";import"./lib-CWHZrl0T.js";import"./v2-sdk.esm-CIiDMO7F.js";import"./lib-BncBk3QF.js";import"./utils-7WDx1QGa.js";import"./lib-CgeiDO5B.js";import"./lib-Dj-AwQVD.js";import"./types-DbOmsKtk.js";import"./getCurrencyAmount-vvZpAzIm.js";import{isAddress as Gi}from"./addresses-D56PBUHX.js";import"./currency-DIOEzjz2.js";import{SlippageTolerance as H}from"./reducer-26KeQlno.js";import{require_ms as Rt}from"./ms-BqmEYo6j.js";import"./configs-B4dDdw82.js";import"./hooks-Bp0VtWbX.js";import"./statsig-B7I9iQRf.js";import"./usePollingIntervalByChain-YBOfXXzb.js";import"./providers-BELGpWsr.js";import"./erc20-CdGGKIp0.js";import"./getContract-CMwwszTa.js";import{DAI as Xi,UNI as ct,USDC_MAINNET as Yi,WRAPPED_NATIVE_CURRENCY as pt}from"./objects-DlLkJwrJ.js";import{getTokenAddress as Qi}from"./analytics-Ccvj1WVk.js";import{sendAnalyticsEvent as Se}from"./send.web-CrSXW2rw.js";import"./TradingApiClient-Cp_0ez5S.js";import"./ProtocolItems-DhZWSiXS.js";import"./selectors-BwkayGDl.js";import{useUSDCValue as ut}from"./useUSDCPrice-HO7Wgroz.js";import"./balances-DV0Wvmri.js";import"./getCurrencySafetyInfo-BHD1ohD-.js";import"./mutation-CRQvRc5_.js";import"./infiniteQueryBehavior-C10I_UVS.js";import"./getPositions-B2zd3dQ2.js";import"./queryOptions-P48mrm5X.js";import"./connect-transport-9OnIgPz5.js";import"./proto3-DkSQZto4.js";import"./use-query-8AOGtvlP.js";import"./promise-client-BYLTs0DC.js";import"./urls-kwiZbYPW.js";import"./createApiClient-BjXZMbEB.js";import"./constants-D9cStT7K.js";import"./base-DVpWJ4NW.js";import{ProtocolVersion as Zi}from"./types_pb-yZxlo4b1.js";import"./hooks-Dhx5teK4.js";import{TransactionType as kt}from"./transactionDetails-BsNW_jus.js";import{NumberType as mt}from"./types-JuyYLR0O.js";import{useLocalizationContext as ne}from"./LocalizationContext-B31peW1_.js";import"./getAlertColor-J5DrJWHv.js";import"./currency-xm5i4cH7.js";import"./ethers-D2SIY1xg.js";import{useIsSupportedChainId as Ji}from"./useSupportedChainId-DskHoisQ.js";import"./useWallet-CL5owP9P.js";import{useTrace as $t}from"./TraceContext-Ddfk7zjz.js";import"./types-7DAoWLTI.js";import{getLPBaseAnalyticsProperties as eo}from"./analytics-UE3_EENu.js";import"./readContract-Cae4hIjn.js";import"./getBalance-TsPVbzB5.js";import"./createBatchScheduler-BJBpfhFD.js";import"./createTransport-WEDNYdh5.js";import{useEthersWeb3Provider as to}from"./useEthersProvider-CBgc_azi.js";import"./multicall-BYS6jvE9.js";import"./getAction-BBhbL9mE.js";import{useAccount as G}from"./useAccount-C5hwiBwN.js";import"./config-CDfnfyHL.js";import{useTokenBalance as io}from"./useCurrencyBalance-BuHM_Z2M.js";import{useReadContracts as oo}from"./useReadContracts-Orb8TypL.js";import{assume0xAddress as Ie}from"./wagmi-CsUiFCSO.js";import"./query-qNZtVuxH.js";import{useReadContract as we}from"./useReadContract-DodDFlY8.js";import{Z_INDEX as xt}from"./zIndex-CmEE31Ab.js";import"./hex-njd-4N-2.js";import"./slice-qANrfSbi.js";import"./noop-BDbB2pLB.js";import"./i18n-CroUvoJw.js";import"./v4-D6Rlvprs.js";import"./errors-BaezSPLl.js";import"./swapErrorToUserReadableMessage-DgHZMHU-.js";import{Flex as F,Text as I,concatClassName as Ht,iconSizes as Oe,styled as Ke}from"./Loader-D83W8G1W.js";import"./client-BlU1ozBP.js";import{HeightAnimator as no}from"./HeightAnimator-DF8znv78.js";import"./breakpoints-B-pYqY7D.js";import"./urls-aCnKF23w.js";import"./encode-utf8-DiSL6KQ9.js";import"./dijkstra-6umg7ymP.js";import"./UniconSVGs-CVEtuhJW.js";import"./AlertTriangleFilled-C9tf2eUJ.js";import"./ArrowDown-B8kFPZPX.js";import{InfoCircleFilled as ro}from"./InfoCircleFilled-CBAL5Wj0.js";import"./SplitLogo-Ct--07LT.js";import"./tokens-Dxd89cHj.js";import"./prices-BzyZhpWW.js";import"./timing-DsWr56iv.js";import"./experiments-rc6XUB0U.js";import"./useCurrencyInfo-Bxa3J04d.js";import"./createEthersProvider-B5AW2bpJ.js";import"./reducer-1kwGyyVS.js";import{Bound as O,resetMintState as ft}from"./actions-Budqlwp-.js";import{useAppDispatch as so}from"./hooks-Muz170pO.js";import"./chainParams-DIOvplzi.js";import"./util-BZ6kLG7e.js";import{usePairContract as ao,useTokenContract as lo,useV2MigratorContract as co}from"./useContract-CKZ4cOLX.js";import"./UniswapInterfaceMulticall-DLE8QJ-2.js";import{Arrow as zt}from"./Arrow-DIna6t35.js";import"./TokenLogo-JlSSDr3Q.js";import{useHasPendingApproval as po,useIsTransactionPending as uo,useTransactionAdder as Bt}from"./hooks-BA_A7Su9.js";import{FeePoolSelectAction as _t,LiquiditySource as Re}from"./types-DhBONJgE.js";import"./use-transport-CPomNX05.js";import{useModalState as mo}from"./useModalState-BcPI2EiQ.js";import{useToken as gt}from"./Tokens-HEKZ8edJ.js";import"./types-OmNOta2_.js";import"./useMultichainContext-BVmgxqO2.js";import{useIsMobile as xo}from"./useIsMobile-Cq3RSgOi.js";import{styled_components_default as V}from"./styled-components-DbVO3u5J.js";import{ThemedText as z}from"./text-CK4eXdYc.js";import"./index.esm-D6PJCa7X.js";import{require_prop_types as Vt}from"./prop-types-BL9JsGr9.js";import{alert_triangle_default as ht}from"./alert-triangle-DFSqv9bh.js";import"./chevron-down-D6qx6nnR.js";import{Scrim as fo,plus_default as _o}from"./Scrim-CLHB7Sfw.js";import{x_default as go}from"./x-CjDIEWOj.js";import"./clickable-D5qUCIhr.js";import{ExternalLink as ho}from"./Links-Xomrvpth.js";import{AutoColumn as Ut}from"./Column-ekA0cfjc.js";import{Dots as vt}from"./styled-Cb09-IEr.js";import{Trace_default as vo}from"./Trace-DgHN3Ak9.js";import"./pools-5GjP-hMy.js";import"./useDeviceDimensions-iftoqxuy.js";import{transitions as bo}from"./styles-nntGSkOP.js";import{RowBetween as bt,Row_default as ie}from"./Row-D0lmZ56K.js";import{Expand as Ft}from"./Expand-BRv-QJMD.js";import{Badge_default as yo}from"./Badge-vnMif72r.js";import"./api-PoolsService_connectquery-N1pfS4Yc.js";import{Settings as yt,useDisableScrolling as So}from"./useDisableScrolling-CbCTFGTa.js";import"./currencyKey-B-LQIyOE.js";import"./tryParseCurrencyAmount-Bt3FPZDG.js";import{CurrencyLogo as Io}from"./CurrencyLogo-CvvmRzOI.js";import{DoubleCurrencyLogo as jo}from"./DoubleLogo-D40dQ2P7.js";import"./styled-qLLlrMEu.js";import{MemoizedInput as To}from"./NumericalInput-wkthWxek.js";import{useOnClickOutside as Eo}from"./useOnClickOutside-B5O2_6zc.js";import{calculateGasMargin as Kt}from"./calculateGasMargin-D8W-u5un.js";import{MouseoverTooltip as qt,TooltipSize as wo}from"./Tooltip-DPNhKWF2.js";import"./useInterval-7f86mkEJ.js";import"./polished.es-BASfrnSv.js";import{Portal as Oo}from"./Portal-CDCMc_Hf.js";import{useUserSlippageTolerance as Gt,useUserSlippageToleranceWithDefault as No,useUserTransactionTTL as Lo}from"./hooks-ViKlw47o.js";import{PoolState as E,usePool as U,usePools as Do}from"./usePools-Bz9FGvMj.js";import"./getTickToPrice-BudeFeQp.js";import{getFeeTierTitle as fe}from"./feeTiers-D9BvLkmt.js";import{BlueCard as Po,DarkGrayCard as Mo,LightCard as St,OutlineCard as Xt,YellowCard as ke}from"./cards-Dfv3X3g5.js";import"./useCurrentBlockTimestamp-Bm-OUlbk.js";import{CautionTriangle as Wo}from"./CautionTriangle-DUngMXb7.js";import"./dist-BxQUC-sk.js";import"./useSwapTaxes-CDZk7xg5.js";import"./hooks-BCKOZK7U.js";import{useRangeHopCallbacks as Co,useV3DerivedMintInfo as Ao,useV3MintActionHandlers as Ro}from"./hooks-SFdPlDvR.js";import{useNetworkSupportsV2 as ko}from"./useNetworkSupportsV2-BFYJkGkx.js";import{V2Unsupported as $o,useTotalSupply as Ho}from"./useTotalSupply-y8EMKKe8.js";import{useTokenAllowance as zo}from"./useTokenAllowance-B1d-BbCj.js";import{usePositionOwnerV2 as Bo}from"./usePositionOwnerV2-DAmnUDmZ.js";import{useGetTransactionDeadline as Vo,useTransactionDeadline as Uo}from"./useTransactionDeadline-CTg1dE5v.js";import{BodyWrapper as Fo}from"./AppBody-DSS6xi7C.js";import{unwrappedToken as je}from"./unwrappedToken-BclHT9I4.js";var p=oe(vi()),_e=oe(Vt());function He(){return He=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},He.apply(this,arguments)}function Ko(e,i){if(e==null)return{};var s=qo(e,i),r,o;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)r=n[o],!(i.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function qo(e,i){if(e==null)return{};var s={},r=Object.keys(e),o,n;for(n=0;n<r.length;n++)o=r[n],!(i.indexOf(o)>=0)&&(s[o]=e[o]);return s}var qe=(0,p.forwardRef)(function(e,i){var s=e.color,r=s===void 0?"currentColor":s,o=e.size,n=o===void 0?24:o,l=Ko(e,["color","size"]);return p.createElement("svg",He({ref:i,xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),p.createElement("circle",{cx:"12",cy:"12",r:"10"}),p.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),p.createElement("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"}))});qe.propTypes={color:_e.default.string,size:_e.default.oneOfType([_e.default.string,_e.default.number])};qe.displayName="AlertCircle";var Go=qe,ge=oe(Vt());function ze(){return ze=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},ze.apply(this,arguments)}function Xo(e,i){if(e==null)return{};var s=Yo(e,i),r,o;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)r=n[o],!(i.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Yo(e,i){if(e==null)return{};var s={},r=Object.keys(e),o,n;for(n=0;n<r.length;n++)o=r[n],!(i.indexOf(o)>=0)&&(s[o]=e[o]);return s}var Ge=(0,p.forwardRef)(function(e,i){var s=e.color,r=s===void 0?"currentColor":s,o=e.size,n=o===void 0?24:o,l=Xo(e,["color","size"]);return p.createElement("svg",ze({ref:i,xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),p.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))});Ge.propTypes={color:ge.default.string,size:ge.default.oneOfType([ge.default.string,ge.default.number])};Ge.displayName="Minus";var Qo=Ge;Ee();const Te={[a.LOWEST]:{label:"0.01",description:fe(a.LOWEST),supportedChains:xe},[a.LOW_200]:{label:"0.02",supportedChains:[B.Base]},[a.LOW_300]:{label:"0.03",supportedChains:[B.Base]},[a.LOW_400]:{label:"0.04",supportedChains:[B.Base]},[a.LOW]:{label:"0.05",description:fe(a.LOW),supportedChains:xe},[a.MEDIUM]:{label:"0.3",description:fe(a.MEDIUM),supportedChains:xe},[a.HIGH]:{label:"1",description:fe(a.HIGH),supportedChains:xe}};var t=oe(Ti());const Zo=" _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3",Jo=" _borderTopColor-accent1 _borderRightColor-accent1 _borderBottomColor-accent1 _borderLeftColor-accent1",en=" _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-flex-start _pt-t-space-pad1331704929 _pb-t-space-pad1331704929 _pr-t-space-pad95589114 _pl-t-space-pad95589114 _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 _borderTopWidth-t-space-spa94665586 _borderRightWidth-t-space-spa94665586 _borderBottomWidth-t-space-spa94665586 _borderLeftWidth-t-space-spa94665586 _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid _boxShadow-0focus-0px0pxvar--550680213 _boxShadow-0active-0px0pxvar--550680213 _boxShadow-0hover-0px0pxvar--1961822511 _opacity-0disabled-0--5 _cursor-0disabled-auto  ";function tn({feeAmount:e,selected:i,poolState:s,distributions:r,onClick:o}){var n;const{formatPercent:l}=ne(),u=r==null||(n=r[e])===null||n===void 0?void 0:n.toFixed(0),x=Te[e].description;return(0,t.jsx)(qt,{disabled:!x,text:x,size:wo.Max,placement:"auto",children:(0,t.jsxs)("div",{className:Ht(""+(en+(i?Jo:Zo))),children:[(0,t.jsx)(bi,{position:"absolute",top:"$spacing8",right:"$spacing8",value:e.toString(),onPress:o,variant:"branded"}),(0,t.jsxs)(Ut,{gap:"sm",justify:"flex-start",children:[(0,t.jsx)(I,{variant:"buttonLabel3",children:l(parseFloat(Te[e].label))}),r&&(0,t.jsx)(I,{variant:"body4",color:"$neutral2",children:s===E.NOT_EXISTS||s===E.INVALID?(0,t.jsx)(_,{i18nKey:"common.notCreated.label"}):r[e]!==void 0?(0,t.jsx)(_,{i18nKey:"fee.selectPercent",values:{pct:u}}):(0,t.jsx)(_,{i18nKey:"common.noData"})})]})]})})}function on({feeAmount:e,distributions:i,poolState:s}){var r;const o=i==null||(r=i[e])===null||r===void 0?void 0:r.toFixed(0);return(0,t.jsx)(I,{variant:"body3",color:"$neutral2",children:!i||s===E.NOT_EXISTS||s===E.INVALID?(0,t.jsx)(_,{i18nKey:"common.notCreated.label"}):i[e]!==void 0?(0,t.jsx)(_,{i18nKey:"fee.selectPercentDescription",values:{pct:o}}):(0,t.jsx)(_,{i18nKey:"common.noData"})})}Ee();var It=oe(Rt());function nn(e,i){const{isLoading:s,error:r,distributions:o}=rn(e==null?void 0:e.wrapped,i==null?void 0:i.wrapped),[n]=U({currencyA:e,currencyB:i,feeAmount:a.LOWEST}),[l]=U({currencyA:e,currencyB:i,feeAmount:a.LOW_200}),[u]=U({currencyA:e,currencyB:i,feeAmount:a.LOW_300}),[x]=U({currencyA:e,currencyB:i,feeAmount:a.LOW_400}),[m]=U({currencyA:e,currencyB:i,feeAmount:a.LOW}),[d]=U({currencyA:e,currencyB:i,feeAmount:a.MEDIUM}),[c]=U({currencyA:e,currencyB:i,feeAmount:a.HIGH});return(0,p.useMemo)(()=>{if(s||r||!o)return{isLoading:s,isError:!!r,distributions:o};const g=Object.keys(o).map(v=>Number(v)).filter(v=>o[v]!==0&&o[v]!==void 0).reduce((v,h)=>(o[v]??0)>(o[h]??0)?v:h,-1),y=n!==E.LOADING&&l!==E.LOADING&&u!==E.LOADING&&x!==E.LOADING&&m!==E.LOADING&&d!==E.LOADING&&c!==E.LOADING?{[a.LOWEST]:n===E.EXISTS?(o[a.LOWEST]??0)*100:void 0,[a.LOW_200]:l===E.EXISTS?(o[a.LOW_200]??0)*100:void 0,[a.LOW_300]:u===E.EXISTS?(o[a.LOW_300]??0)*100:void 0,[a.LOW_400]:x===E.EXISTS?(o[a.LOW_400]??0)*100:void 0,[a.LOW]:m===E.EXISTS?(o[a.LOW]??0)*100:void 0,[a.MEDIUM]:d===E.EXISTS?(o[a.MEDIUM]??0)*100:void 0,[a.HIGH]:c===E.EXISTS?(o[a.HIGH]??0)*100:void 0}:void 0;return{isLoading:s,isError:!!r,distributions:y,largestUsageFeeTier:g===-1?void 0:g}},[s,r,o,n,m,d,c,l,u,x])}function rn(e,i){const{defaultChainId:s}=Ei(),r=Mi((e==null?void 0:e.chainId)??s),{loading:o,error:n,data:l}=Wi({variables:{chain:r,token0:(e==null?void 0:e.address)??"",token1:(i==null?void 0:i.address)??""},pollInterval:(0,It.default)("30s")}),{data:u,error:x}=Ci({variables:{chain:r},pollInterval:(0,It.default)("30s")}),{v3PoolsForTokenPair:m}=l??{};return(0,p.useMemo)(()=>{if(x||!m)return{isLoading:o,error:n??x};if(u!=null&&u.isV3SubgraphStale)return ye.info("useFeeTierDistribution","usePoolTVL","Subgraph stale"),{isLoading:o,error:n};const d=m.reduce((h,f)=>{var T;return f.feeTier&&(h[T=f.feeTier]??(h[T]=[0,0]),h[f.feeTier][0]=(h[f.feeTier][0]??0)+Number(f.token0Supply),h[f.feeTier][1]=(h[f.feeTier][1]??0)+Number(f.token1Supply)),h},{[a.LOWEST]:[void 0,void 0],[a.LOW]:[void 0,void 0],[a.MEDIUM]:[void 0,void 0],[a.HIGH]:[void 0,void 0],[a.LOW_200]:[void 0,void 0],[a.LOW_300]:[void 0,void 0],[a.LOW_400]:[void 0,void 0]}),[c,g]=Object.values(d).reduce((h,f)=>(h[0]+=f[0]??0,h[1]+=f[1]??0,h),[0,0]),y=({tvl0:h,sumTvl0:f,tvl1:T,sumTvl1:b})=>h===void 0&&T===void 0?void 0:((h??0)+(T??0))/(f+b)||0,v={[a.LOWEST]:y({tvl0:d[a.LOWEST][0],sumTvl0:c,tvl1:d[a.LOWEST][1],sumTvl1:g}),[a.LOW]:y({tvl0:d[a.LOW][0],sumTvl0:c,tvl1:d[a.LOW][1],sumTvl1:g}),[a.MEDIUM]:y({tvl0:d[a.MEDIUM][0],sumTvl0:c,tvl1:d[a.MEDIUM][1],sumTvl1:g}),[a.HIGH]:y({tvl0:d[a.HIGH][0],sumTvl0:c,tvl1:d[a.HIGH][1],sumTvl1:g}),[a.LOW_200]:y({tvl0:d[a.LOW_200][0],sumTvl0:c,tvl1:d[a.LOW_200][1],sumTvl1:g}),[a.LOW_300]:y({tvl0:d[a.LOW_300][0],sumTvl0:c,tvl1:d[a.LOW_300][1],sumTvl1:g}),[a.LOW_400]:y({tvl0:d[a.LOW_400][0],sumTvl0:c,tvl1:d[a.LOW_400][1],sumTvl1:g})};return{isLoading:o,error:n,distributions:v}},[x,m,u==null?void 0:u.isV3SubgraphStale,o,n])}Ee();const sn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row  selected-fee-percentage",an="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _alignItems-center ",ln="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1573 ",dn=V.div`
  align-items: flex-start;
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  grid-gap: 8px;
  width: 100%;
`,cn=V(Ut)`
  opacity: ${({disabled:e})=>e?"0.2":"1"};
  pointer-events: ${({disabled:e})=>e?"none":"initial"};
`;function pn({disabled:e=!1,feeAmount:i,handleFeePoolSelect:s,currencyA:r,currencyB:o}){const{chainId:n}=G(),l=$t(),{formatPercent:u}=ne(),{isLoading:x,isError:m,largestUsageFeeTier:d,distributions:c}=nn(r,o),g=Do([[r,o,a.LOWEST],[r,o,a.LOW_200],[r,o,a.LOW_300],[r,o,a.LOW_400],[r,o,a.LOW],[r,o,a.MEDIUM],[r,o,a.HIGH]],n),y=(0,p.useMemo)(()=>g.reduce((b,[j,S])=>(b={...b,[S==null?void 0:S.fee]:j},b),{[a.LOWEST]:E.NOT_EXISTS,[a.LOW_200]:E.NOT_EXISTS,[a.LOW_300]:E.NOT_EXISTS,[a.LOW_400]:E.NOT_EXISTS,[a.LOW]:E.NOT_EXISTS,[a.MEDIUM]:E.NOT_EXISTS,[a.HIGH]:E.NOT_EXISTS}),[g]),[v,h]=(0,p.useState)(!1),f=(0,p.useRef)(!1),T=(0,p.useCallback)(b=>{Se($e.SelectLiquidityPoolFeeTier,{action:_t.Manual,fee_tier:b,...l}),s(b)},[s,l]);return(0,p.useEffect)(()=>{i||x||m||(d?(h(!1),f.current=!0,Se($e.SelectLiquidityPoolFeeTier,{action:_t.Recommended,fee_tier:d,...l}),s(d)):h(!0))},[i,x,m,d,s,l]),(0,p.useEffect)(()=>{h(m)},[m]),(0,t.jsx)("div",{className:ln,children:(0,t.jsxs)(cn,{gap:"md",disabled:e,children:[(0,t.jsx)(Xt,{"$platform-web":{alignSelf:"center"},children:(0,t.jsxs)("div",{className:an,children:[(0,t.jsx)(F,{id:"add-liquidity-selected-fee",children:i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I,{className:"selected-fee-label",children:(0,t.jsx)(_,{i18nKey:"fee.tierExact",values:{fee:u(parseFloat(Te[i].label))}})}),c&&(0,t.jsx)("div",{className:sn,children:(0,t.jsx)(on,{distributions:c,feeAmount:i,poolState:y[i]})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I,{children:(0,t.jsx)(_,{i18nKey:"fee.tier"})}),(0,t.jsx)(I,{variant:"body3",color:"$neutral2",children:(0,t.jsx)(_,{i18nKey:"fee.percentEarned"})})]})}),(0,t.jsx)(de,{onPress:()=>h(!v),variant:"default",emphasis:"secondary",size:"small",fill:!1,children:v?(0,t.jsx)(_,{i18nKey:"common.hide.button"}):(0,t.jsx)(_,{i18nKey:"common.edit.button"})})]})}),n&&v&&(0,t.jsx)(yi,{value:i==null?void 0:i.toString(),orientation:"horizontal",justifyContent:"flex-start",flexWrap:"wrap",children:(0,t.jsx)(dn,{children:[a.LOWEST,a.LOW_200,a.LOW_300,a.LOW_400,a.LOW,a.MEDIUM,a.HIGH].map((b,j)=>{const{supportedChains:S}=Te[b];return S.includes(n)?(0,t.jsx)(tn,{feeAmount:b,selected:b===i,onClick:()=>T(b),distributions:c,poolState:y[b]},j):null})})})]})})}ce();Fe();const jt=new Oi(N.BigInt(1),N.BigInt(1e6));function un({currencyAmount:e,significantDigits:i=4}){return(0,t.jsx)(t.Fragment,{children:e.equalTo(N.BigInt(0))?"0":e.greaterThan(jt)?e.toSignificant(i):`<${jt.toSignificant(1)}`})}const Tt="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-center ",mn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap56 ",xn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _width-10037 _justifyContent-flex-start ",fn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",_n=V(To)`
  background-color: transparent;
  font-weight: 535;
  text-align: left;
  width: 100%;

  ${({theme:e})=>e.deprecated_mediaWidth.deprecated_upToSmall`
    font-size: 16px;
  `};
`,Et=Ke(I,{fontSize:12,fontWeight:"$medium",color:"$neutral2"}),gn=({value:e,decrement:i,increment:s,decrementDisabled:r=!1,incrementDisabled:o=!1,width:n,locked:l,onUserInput:u,title:x,tokenA:m,tokenB:d})=>{const c=Ct(),[g,y]=(0,p.useState)(""),[v,h]=(0,p.useState)(!1),f=()=>{h(!0)},T=(0,p.useCallback)(()=>{h(!1),u(g)},[g,u]),b=(0,p.useCallback)(()=>{h(!1),u(i())},[i,u]),j=(0,p.useCallback)(()=>{h(!1),u(s())},[s,u]);return(0,p.useEffect)(()=>{g!==e&&!v&&setTimeout(()=>{y(e)},0)},[g,v,e]),(0,t.jsx)(Xt,{onFocus:f,onBlur:T,width:n,children:(0,t.jsxs)("div",{className:fn,children:[(0,t.jsxs)("div",{className:xn,children:[(0,t.jsx)(Et,{fontSize:12,textAlign:"center",children:x}),(0,t.jsx)(_n,{className:"rate-input-0",value:g,fontSize:"20px",disabled:l,onUserInput:S=>{y(S)}}),(0,t.jsx)(Et,{fontSize:12,textAlign:"left",children:(0,t.jsx)(_,{i18nKey:"common.feesEarnedPerBase",values:{symbolA:d,symbolB:m}})})]}),(0,t.jsxs)("div",{className:mn,children:[!l&&(0,t.jsx)(de,{size:"xxsmall",emphasis:"tertiary","data-testid":"increment-price-range",onPress:j,isDisabled:o,children:(0,t.jsx)("div",{className:Tt,children:(0,t.jsx)(_o,{size:16,color:c.neutral2.val})})}),!l&&(0,t.jsx)(de,{size:"xxsmall",emphasis:"tertiary","data-testid":"decrement-price-range",onPress:b,isDisabled:r,children:(0,t.jsx)("div",{className:Tt,children:(0,t.jsx)(Qo,{size:16,color:c.neutral2.val})})})]})]})})};var wt=gn;const hn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap56 _width-10037 ";function vn({priceLower:e,priceUpper:i,onLeftRangeInput:s,onRightRangeInput:r,getDecrementLower:o,getIncrementLower:n,getDecrementUpper:l,getIncrementUpper:u,currencyA:x,currencyB:m,feeAmount:d,ticksAtLimit:c}){var g,y;const v=(g=x??void 0)===null||g===void 0?void 0:g.wrapped,h=(y=m??void 0)===null||y===void 0?void 0:y.wrapped,f=v&&h&&v.sortsBefore(h),T=f?e:i==null?void 0:i.invert(),b=f?i:e==null?void 0:e.invert();return(0,t.jsxs)("div",{className:hn,children:[(0,t.jsx)(wt,{width:"100%",value:c[f?O.LOWER:O.UPPER]?"0":(T==null?void 0:T.toSignificant(8))??"",onUserInput:s,decrement:f?o:u,increment:f?n:l,decrementDisabled:T===void 0||c[f?O.LOWER:O.UPPER],incrementDisabled:T===void 0||c[f?O.LOWER:O.UPPER],feeAmount:d,label:T?`${m==null?void 0:m.symbol}`:"-",title:(0,t.jsx)(_,{i18nKey:"common.lowPrice"}),tokenA:x==null?void 0:x.symbol,tokenB:m==null?void 0:m.symbol}),(0,t.jsx)(wt,{width:"100%",value:c[f?O.UPPER:O.LOWER]?"âˆž":(b==null?void 0:b.toSignificant(8))??"",onUserInput:r,decrement:f?l:n,increment:f?u:o,incrementDisabled:b===void 0||c[f?O.UPPER:O.LOWER],decrementDisabled:b===void 0||c[f?O.UPPER:O.LOWER],feeAmount:d,label:b?`${m==null?void 0:m.symbol}`:"-",tokenA:x==null?void 0:x.symbol,tokenB:m==null?void 0:m.symbol,title:(0,t.jsx)(_,{i18nKey:"common.highPrice"})})]})}const bn=V.button`
  display: flex;
  align-items: center;
  width: ${({width:e})=>e??"100%"};
  padding: 1px;
  background: ${({theme:e})=>e.surface2};
  border-radius: 8px;
  border: ${({theme:e})=>"1px solid "+e.surface3};
  cursor: pointer;
  outline: none;
`,Ot=V.span`
  display: flex;
  align-items: center;
  width: 100%;
  padding: 4px 0.5rem;
  border-radius: 6px;
  justify-content: center;
  height: 100%;
  background: ${({theme:e,isActive:i})=>i?e.surface1:"none"};
  color: ${({theme:e,isActive:i})=>i?e.neutral1:e.neutral3};
  font-size: ${({fontSize:e})=>e??"1rem"};
  font-weight: 535;
  white-space: nowrap;
  :hover {
    user-select: initial;
    color: ${({theme:e,isActive:i})=>i?e.neutral2:e.neutral3};
  }
`,yn="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _width-fit-content _alignItems-center ";function Sn({currencyA:e,currencyB:i,handleRateToggle:s}){const r=e.wrapped,o=i.wrapped,n=r.sortsBefore(o);return(0,t.jsx)("div",{onClick:s,className:yn,children:(0,t.jsxs)(bn,{width:"fit-content",children:[(0,t.jsx)(Ot,{isActive:n,fontSize:"12px",children:n?e.symbol:i.symbol}),(0,t.jsx)(Ot,{isActive:!n,fontSize:"12px",children:n?i.symbol:e.symbol})]})})}Ai();let C=(function(e){return e.UNKNOWN="UNKNOWN",e.NOT_APPROVED="NOT_APPROVED",e.PENDING="PENDING",e.APPROVED="APPROVED",e})({});function In({amountToApprove:e,spender:i,useIsPendingApproval:s}){const r=G(),o=e!=null&&e.currency.isToken?e.currency:void 0,{tokenAllowance:n}=zo({token:o,owner:r.address,spender:i}),l=s(o,i);return(0,p.useMemo)(()=>!e||!i?C.UNKNOWN:e.currency.isNative?C.APPROVED:n?n.lessThan(e)?l?C.PENDING:C.NOT_APPROVED:C.APPROVED:C.UNKNOWN,[e,l,i,n])}function jn({amountToApprove:e,spender:i,useIsPendingApproval:s}){const{chainId:r}=G(),o=e!=null&&e.currency.isToken?e.currency:void 0,n=In({amountToApprove:e,spender:i,useIsPendingApproval:s}),l=lo({tokenAddress:o==null?void 0:o.address,withSignerIfPossible:!0,chainId:o==null?void 0:o.chainId}),u=(0,p.useCallback)(async()=>{function x(c){typeof c=="string"?ye.debug("useApproval","approve",c):ye.debug("useApproval","approve","Failed to approve amount",{error:c,tokenChain:o==null?void 0:o.chainId,token:o==null?void 0:o.address,chainId:r,amountToApprove:e==null?void 0:e.toFixed()})}if(n!==C.NOT_APPROVED)return x("approve was called unnecessarily");if(r)if(o)if(l)if(e){if(!i)return x("no spender")}else return x("missing amount to approve");else return x("tokenContract is null");else return x("no token");else return x("no chainId");let m=!1;const d=await l.estimateGas.approve(i,lt).catch(()=>(m=!0,l.estimateGas.approve(i,e.quotient.toString())));return l.approve(i,m?e.quotient.toString():lt,{gasLimit:Kt(d)}).then(c=>{const g={chain_id:r,token_symbol:o.symbol,token_address:Qi(o)};return Se($i.ApproveTokenTxnSubmitted,g),{response:c,tokenAddress:o.address,spenderAddress:i,amount:e}}).catch(c=>{throw x(c),c})},[n,o,l,e,i,r]);return[n,u]}function Tn(e){const i=Bt();return(0,p.useCallback)(()=>e().then(s=>{if(s){const{response:r,tokenAddress:o,spenderAddress:n,amount:l}=s;i(r,{type:kt.Approve,tokenAddress:o,spender:n,approvalAmount:l.quotient.toString()})}}),[i,e])}function En(e,i){const[s,r]=jn({amountToApprove:e,spender:i,useIsPendingApproval:po});return[s,Tn(r)]}ce();function Yt(){const e=G();return we({address:Ie(wi[e.chainId??B.Mainnet]),abi:[{inputs:[{internalType:"address",name:"_wallet",type:"address"}],name:"isArgentWallet",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],functionName:"isArgentWallet",args:e.address?[e.address]:void 0,query:{enabled:!!e.address}}).data??!1}const wn=[{constant:!0,inputs:[{name:"owner",type:"address"}],name:"nonces",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"}];Ri();Fe();let te=(function(e){return e[e.AMOUNT=1]="AMOUNT",e[e.ALLOWED=2]="ALLOWED",e})({});const On=1200,Nn={[B.Mainnet]:{[Yi.address]:{type:te.AMOUNT,name:"USD Coin",version:"2"},[Xi.address]:{type:te.ALLOWED,name:"Dai Stablecoin",version:"1"},[ct[B.Mainnet].address]:{type:te.AMOUNT,name:"Uniswap"}},[B.Sepolia]:{[ct[B.Sepolia].address]:{type:te.AMOUNT,name:"Uniswap"}}};var le=(function(e){return e[e.NOT_APPLICABLE=0]="NOT_APPLICABLE",e[e.LOADING=1]="LOADING",e[e.NOT_SIGNED=2]="NOT_SIGNED",e[e.SIGNED=3]="SIGNED",e})(le||{});const Ln=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Dn=[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Pn=[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}],Mn=[{name:"holder",type:"address"},{name:"spender",type:"address"},{name:"nonce",type:"uint256"},{name:"expiry",type:"uint256"},{name:"allowed",type:"bool"}];function Wn({currencyAmount:e,spender:i,transactionDeadline:s,overridePermitInfo:r}){var o;const n=G(),l=to(),u=e!=null&&e.currency.isToken?e.currency.address:void 0,x=Yt(),{data:m,isLoading:d}=we({address:Ie(u),chainId:e==null?void 0:e.currency.chainId,abi:wn,functionName:"nonces",args:n.address?[Ie(n.address)]:void 0,query:{enabled:!!n.address}}),c=r??(n.isConnected&&n.chainId&&u?(o=Nn[n.chainId])===null||o===void 0?void 0:o[u]:void 0),[g,y]=(0,p.useState)(null);return(0,p.useMemo)(()=>{if(x||!e||!n.chainId||!n.address||!s||!l||m===void 0||!u||!i||!c)return{state:le.NOT_APPLICABLE,signatureData:null,gatherPermitSignature:null};const v=Number(m);if(d||typeof v!="number")return{state:le.LOADING,signatureData:null,gatherPermitSignature:null};const h=g&&g.owner===n.address&&g.deadline>=s.toNumber()&&g.tokenAddress===u&&g.nonce===v&&g.spender===i&&("allowed"in g||N.greaterThanOrEqual(N.BigInt(g.amount),e.quotient));return{state:h?le.SIGNED:le.NOT_SIGNED,signatureData:h?g:null,gatherPermitSignature:async function(){const T=c.type===te.ALLOWED,b=s.toNumber()+On,j=e.quotient.toString(),S=T?{holder:n.address,spender:i,allowed:T,nonce:v,expiry:b}:{owner:n.address,spender:i,value:j,nonce:v,deadline:b},k=c.version?{name:c.name,version:c.version,verifyingContract:u,chainId:n.chainId}:{name:c.name,verifyingContract:u,chainId:n.chainId},K=JSON.stringify({types:{EIP712Domain:c.version?Ln:Dn,Permit:T?Mn:Pn},domain:k,primaryType:"Permit",message:S});return l.send("eth_signTypedData_v4",[n.address,K]).then(ki).then(X=>{y({v:X.v,r:X.r,s:X.s,deadline:b,...T?{allowed:T}:{amount:j},nonce:v,chainId:n.chainId,owner:n.address,spender:i,tokenAddress:u,permitType:c.type})})}}},[x,e,n.chainId,n.address,s,l,m,d,u,i,c,g])}const Cn={version:"1",name:"Uniswap V2",type:te.AMOUNT};function An(e,i){const s=Uo();return Wn({currencyAmount:e,spender:i,transactionDeadline:s,overridePermitInfo:Cn})}const Rn="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _ml-t-space-spa94665589 _alignItems-center ",kn=Ke(F,{alignItems:"center",justifyContent:"center",borderRadius:"$rounded12",width:18,height:18,outlineWidth:0,borderWidth:0,cursor:"default",hoverStyle:{opacity:.7}});function Qt({text:e,size:i=16,placement:s}){const[r,o]=(0,p.useState)(!1),n=(0,p.useCallback)(()=>o(!0),[o]),l=(0,p.useCallback)(()=>o(!1),[o]);return(0,t.jsx)("div",{className:Rn,children:(0,t.jsx)(qt,{text:e,forceShow:r,placement:s,children:(0,t.jsx)(kn,{onPress:n,onMouseEnter:n,onMouseLeave:l,children:(0,t.jsx)(ro,{size:i,color:"$neutral3"})})})})}const Zt=V.input`
  width: 100%;
  display: flex;
  flex: 1;
  font-size: 16px;
  border: 0;
  outline: none;
  background: transparent;
  text-align: right;
  &::-webkit-outer-spin-button,
  &::-webkit-inner-spin-button {
    -webkit-appearance: none;
  }
  ::placeholder {
    color: ${({theme:e})=>e.neutral3};
  }
`,Jt=V(ie)`
  padding: 8px 16px;
  border-radius: 12px;
  width: auto;
  min-width: 100px;
  flex: 1;
  input {
    color: ${({theme:e,error:i})=>i?e.critical:e.neutral1};
  }
  border: 1px solid ${({theme:e,error:i})=>i?e.critical:e.surface2};
  ${({theme:e,error:i})=>i?`
        border: 1px solid ${e.critical};
        :focus-within {
          border-color: ${e.deprecated_accentFailureSoft};
        }
      `:`
        border: 1px solid ${e.surface3};
        :focus-within {
          border-color: ${e.accent2};
        }
      `}
`;ce();var Be=(function(e){return e.InvalidInput="InvalidInput",e})(Be||{});const Nt=V(ie)`
  width: auto;
  cursor: pointer;
  padding: 6px 12px;
  text-align: center;
  gap: 4px;
  border-radius: 12px;
  background: ${({isActive:e,theme:i})=>e?i.surface3:"transparent"};
  pointer-events: ${({isActive:e})=>e&&"none"};
`,$n=V(ie)`
  width: auto;
  padding: 4px;
  border: 1px solid ${({theme:e})=>e.surface3};
  border-radius: 16px;
`,Hn=/^(?:\d*\.\d{0,2}|\d+)$/,Lt=new q(5,1e4),zn=new q(1,100);function Bn(){const{formatPercent:e}=ne();return i=>e(i.toSignificant()).slice(0,-1)}function Vn({autoSlippage:e}){const[i,s]=Gt(),{formatPercent:r}=ne(),o=Bn(),n=i!==H.Auto&&!i.equalTo(e)?o(i):"",[l,u]=(0,p.useState)(n),[x,m]=(0,p.useState)(!1),[d,c]=(0,p.useState)(n.length>0),g=h=>{if(!(h.length>0&&!Hn.test(h))){if(u(h),m(!1),h.length===0){s(H.Auto);return}if(h!==".")try{const f=Math.floor(Number.parseFloat(h)*100);f>5e3?(s(new q(5e3,1e4)),m(Be.InvalidInput)):s(new q(f,1e4))}catch{m(Be.InvalidInput)}}},y=i!==H.Auto&&i.lessThan(Lt),v=i!==H.Auto&&i.greaterThan(zn);return(0,t.jsxs)(Ft,{testId:"max-slippage-settings",padding:"6px 0px",isOpen:d,onToggle:()=>c(!d),header:(0,t.jsxs)(ie,{width:"auto",children:[(0,t.jsx)(z.BodyPrimary,{children:(0,t.jsx)(_,{i18nKey:"settings.maxSlippage"})}),(0,t.jsx)(Qt,{text:(0,t.jsx)(_,{i18nKey:"swap.settings.transactionRevertPrice"})})]}),button:(0,t.jsx)(z.BodyPrimary,{children:i===H.Auto?(0,t.jsx)(_,{i18nKey:"common.automatic"}):r(i.toSignificant())}),children:[(0,t.jsxs)(bt,{gap:"md",children:[(0,t.jsxs)($n,{children:[(0,t.jsx)(Nt,{onClick:()=>{u(""),s(H.Auto)},isActive:i===H.Auto,children:(0,t.jsx)(z.BodyPrimary,{children:(0,t.jsx)(_,{i18nKey:"common.automatic"})})}),(0,t.jsx)(Nt,{onClick:()=>{s(e)},isActive:i!==H.Auto,children:(0,t.jsx)(z.BodyPrimary,{children:(0,t.jsx)(_,{i18nKey:"common.custom"})})})]}),(0,t.jsxs)(Jt,{gap:"md",error:!!x,children:[(0,t.jsx)(Zt,{"data-testid":"slippage-input",placeholder:o(e),value:l,onChange:h=>g(h.target.value),onBlur:()=>{u(n),m(!1)}}),(0,t.jsx)(I,{variant:"body1",color:x?"$statusCritical":"$neutral1",children:"%"})]})]}),y||v?(0,t.jsxs)(bt,{gap:"md",children:[(0,t.jsx)(Wo,{}),(0,t.jsx)(z.BodySmall,{color:"deprecated_accentWarning",children:y?(0,t.jsx)(_,{i18nKey:"swap.slippageBelow.warning",values:{amt:r(Lt.toSignificant())}}):(0,t.jsx)(_,{i18nKey:"swap.frontrun.warning"})})]}):null]})}ce();let he=(function(e){return e[e.TooLow=0]="TooLow",e[e.TooHigh=1]="TooHigh",e[e.Valid=2]="Valid",e})({});const Un=new q(5,1e4),Fn=new q(1,100);function Kn(e){return e.lessThan(Un)?he.TooLow:e.greaterThan(Fn)?he.TooHigh:he.Valid}const qn=" _backgroundColor-surface2",Gn=" _backgroundColor-statusWarni108953",Xn=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _pr-t-space-spa94665591 _pl-t-space-spa94665591 _pt-t-space-spa1360334080 _pb-t-space-spa1360334080 _borderTopLeftRadius-t-radius-ro291586449 _borderTopRightRadius-t-radius-ro291586449 _borderBottomRightRadius-t-radius-ro291586449 _borderBottomLeftRadius-t-radius-ro291586449 _gap-t-space-gap56  ",Yn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _pr-spacing6 _pl-spacing6 _pt-spacing12 _pb-spacing12 _borderTopLeftRadius-t-radius-ro291586449 _borderTopRightRadius-t-radius-ro291586449 _borderBottomRightRadius-t-radius-ro291586449 _borderBottomLeftRadius-t-radius-ro291586449 ",Qn=({compact:e})=>{const[i]=Gt(),{formatPercent:s}=ne();if(i===H.Auto)return(0,t.jsx)("div",{className:Yn,children:(0,t.jsx)(yt,{height:"24px",width:"24px",fill:"neutral2"})});const r=Kn(i)!==he.Valid;return(0,t.jsxs)("div",{"data-testid":"settings-icon-with-slippage",className:Ht(""+(Xn+(r?Gn:qn))),children:[(0,t.jsx)(z.Caption,{color:r?"accentWarning":"neutral2",children:e?s(i.toSignificant()):(0,t.jsx)(_,{i18nKey:"swap.slippage.amt",values:{amt:s(i.toSignificant())}})}),(0,t.jsx)(yt,{height:"24px",width:"24px",fill:"neutral2"})]})};function Zn({disabled:e,onClick:i,isActive:s,compact:r}){const{t:o}=At();return(0,t.jsx)(Ue,{disabled:e,onPress:i,id:"open-settings-dialog-button","data-testid":"open-settings-dialog-button","aria-label":o("common.transactionSettings"),hoverStyle:{opacity:.7},opacity:s?.7:1,children:(0,t.jsx)(Qn,{compact:r})})}var Jn=oe(Rt()),Ve=(function(e){return e.InvalidInput="InvalidInput",e})(Ve||{});const er=(0,Jn.default)("3d")/1e3,tr=/^[0-9\b]+$/;function ir(){const[e,i]=Lo(),s=e&&e!==Ae?(e/60).toString():"",[r,o]=(0,p.useState)(s),[n,l]=(0,p.useState)(!1),[u,x]=(0,p.useState)(s.length>0);function m(d){if(!(d.length>0&&!tr.test(d))){if(o(d),l(!1),d.length===0){i(Ae);return}try{const c=Number.parseInt(d)*60;c===0||c>er?l(Ve.InvalidInput):i(c)}catch{l(Ve.InvalidInput)}}}return(0,t.jsx)(Ft,{isOpen:u,onToggle:()=>x(!u),padding:"6px 0px",testId:"transaction-deadline-settings",header:(0,t.jsxs)(ie,{width:"auto",children:[(0,t.jsx)(z.BodyPrimary,{children:(0,t.jsx)(_,{i18nKey:"swap.transaction.deadline"})}),(0,t.jsx)(Qt,{text:(0,t.jsx)(_,{i18nKey:"swap.transaction.revertAfter"})})]}),button:(0,t.jsx)(_,{i18nKey:"common.time.minute.amt",values:{time:e/60}}),children:(0,t.jsx)(ie,{children:(0,t.jsxs)(Jt,{gap:"md",error:!!n,children:[(0,t.jsx)(Zt,{"data-testid":"deadline-input",placeholder:(Ae/60).toString(),value:r,onChange:d=>m(d.target.value),onBlur:()=>{o(s),l(!1)}}),(0,t.jsx)(z.BodyPrimary,{children:(0,t.jsx)(_,{i18nKey:"common.time.minutes"})})]})})})}const or="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _width-10037 _pr-24px _justifyContent-center ",nr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _pt-8px _pb-4px _mb-16px ",rr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _position-relative ",sr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665593 ",ar=Ke(F,{minWidth:"20.125rem",backgroundColor:"$surface1",borderWidth:1,borderColor:"$surface3",boxShadow:"0px 0px 1px rgba(0, 0, 0, 0.01), 0px 4px 8px rgba(0, 0, 0, 0.04), 0px 16px 24px rgba(0, 0, 0, 0.04), 0px 24px 32px rgba(0, 0, 0, 0.01)",borderRadius:12,position:"absolute",top:"100%",mt:10,right:0,zIndex:100,userSelect:"none",p:16});function lr({autoSlippage:e,chainId:i,compact:s=!1}){const r=!Pi(i),o=(0,p.useRef)(null),n=(0,p.useRef)(null),{isOpen:l,closeModal:u,toggleModal:x}=mo(Hi.Settings),m=(0,p.useCallback)(()=>u(),[u]),d=xo(),c=l&&d,g=l&&!d;Eo({node:n,handler:g?m:void 0,ignoredNodes:[o]}),So(l);const y=Ji(i),v=(0,p.useMemo)(()=>(0,t.jsx)(no,{open:!0,children:(0,t.jsxs)("div",{className:sr,children:[(0,t.jsx)(Vn,{autoSlippage:e}),r&&(0,t.jsx)(ir,{})]})}),[e,r]);return(0,t.jsxs)("div",{ref:o,className:rr,children:[(0,t.jsx)(Zn,{disabled:!y,isActive:l,compact:s,onClick:x}),g&&(0,t.jsx)(ar,{ref:n,children:v}),c&&(0,t.jsx)(Oo,{children:(0,t.jsxs)(F,{row:!0,"data-testid":"mobile-settings-menu",ref:n,"$platform-web":{position:"fixed"},height:"100%",top:"100vh",left:"0",right:"0",width:"100%",zIndex:xt.fixed,overflow:"visible",children:[(0,t.jsx)(fo,{onClick:m,$open:!0}),(0,t.jsxs)(F,{height:"min-content",width:"100%",pt:8,px:16,pb:24,backgroundColor:"$surface1",overflow:"hidden",position:"absolute",bottom:"100vh",transition:`bottom ${bo.duration.medium}`,borderWidth:1,borderColor:"$surface3",borderRadius:12,borderBottomRightRadius:0,borderBottomLeftRadius:0,boxShadow:"unset",zIndex:xt.modal,children:[(0,t.jsxs)("div",{className:nr,children:[(0,t.jsx)(Ue,{"data-testid":"mobile-settings-close",onPress:m,children:(0,t.jsx)(go,{size:24})}),(0,t.jsx)("div",{className:or,children:(0,t.jsx)(z.SubHeader,{children:(0,t.jsx)(_,{i18nKey:"common.settings"})})})]}),v]})]})})]})}ce();Ee();Fe();const dr="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241 _gap-t-space-gap56 ",cr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1573 ",pr="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _alignItems-center _overflowX-hidden _overflowY-hidden ",J="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _alignItems-center ",ur="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap56 _mt-t-space-spa1360334080 ",mr="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center ",Dt="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334076 ",xr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1598 ",fr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row ",ve="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap56 ",_r="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center ",ei="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 ",gr="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-center _justifyContent-center _minHeight-200px ",Pt=N.BigInt(0),ti=new q(75,1e4),be=[{constant:!0,inputs:[],name:"token0",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token1",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getReserves",outputs:[{internalType:"uint112",name:"reserve0",type:"uint112"},{internalType:"uint112",name:"reserve1",type:"uint112"},{internalType:"uint32",name:"blockTimestampLast",type:"uint32"}],payable:!1,stateMutability:"view",type:"function"}];function hr({message:e}){return(0,t.jsx)("div",{className:gr,children:(0,t.jsx)(I,{variant:"body2",children:e})})}const Mt=({children:e,currency0:i,currency1:s,badgeText:r})=>(0,t.jsxs)("div",{className:ei,children:[(0,t.jsxs)("div",{className:_r,children:[(0,t.jsx)(jo,{currencies:[i,s],size:Oe.icon20}),(0,t.jsx)(I,{variant:"subheading1",ml:"$spacing8",children:e})]}),(0,t.jsx)(yo,{placement:"only",children:r})]});function Wt({token0Amount:e,token1Amount:i}){const s=[{currency:je(e.currency),amount:e},{currency:je(i.currency),amount:i}];return(0,t.jsx)("div",{className:ve,children:s.map(({currency:r,amount:o})=>(0,t.jsxs)("div",{className:ei,children:[(0,t.jsxs)("div",{className:fr,children:[(0,t.jsx)(Io,{size:Oe.icon20,currency:r}),(0,t.jsx)(I,{variant:"body3",ml:"$spacing8",children:r.symbol})]}),(0,t.jsx)(I,{variant:"body3",children:(0,t.jsx)(un,{currencyAmount:o})})]},r.symbol))})}const vr=100;function br({pairAddress:e,pairBalance:i,totalSupply:s,reserve0:r,reserve1:o,token0:n,token1:l}){var u,x;const{t:m}=At(),d=G(),c=Ct(),g=d.chainId?Di[d.chainId]:void 0,y=$t(),{formatCurrencyAmount:v}=ne(),{data:h}=we({address:Ie(e),functionName:"factory",abi:be}),f=!!h&&h!==g,T=Vo(),b=No(ti),j=je(n),S=je(l),k=(0,p.useMemo)(()=>ee.fromRawAmount(n,N.divide(N.multiply(i.quotient,r.quotient),s.quotient)),[n,i,r,s]),K=(0,p.useMemo)(()=>ee.fromRawAmount(l,N.divide(N.multiply(i.quotient,o.quotient),s.quotient)),[l,i,o,s]),X=ut(k),Xe=ut(K),[A,ii]=(0,p.useState)(a.MEDIUM),[Ye,P]=U({currencyA:n,currencyB:l,feeAmount:A}),re=Ye===E.NOT_EXISTS,Y=(0,p.useMemo)(()=>new Ni(n,l,r.quotient,o.quotient),[n,l,r,o]),M=Ye===E.EXISTS?P==null?void 0:P.token0Price:void 0;let R=M?M.divide(Y).subtract(1).multiply(100):void 0;R!=null&&R.lessThan(Pt)&&(R=R.multiply(-1));const oi=R&&!R.lessThan(N.BigInt(2)),[Ne,ni]=(0,p.useState)(n),{ticks:ri,pricesAtTicks:si,invertPrice:L,invalidRange:pe,outOfRange:ai,ticksAtLimit:li}=Ao({currencyA:n,currencyB:l,feeAmount:A,baseCurrency:Ne}),{[O.LOWER]:Q,[O.UPPER]:Z}=ri,{[O.LOWER]:di,[O.UPPER]:ci}=si,{getDecrementLower:pi,getIncrementLower:ui,getDecrementUpper:mi,getIncrementUpper:xi}=Co({baseCurrency:Ne,quoteCurrency:Ne.equals(n)?l:n,feeAmount:A,tickLower:Q,tickUpper:Z,pool:P}),{onLeftRangeInput:Qe,onRightRangeInput:Ze}=Ro(re),Je=(P==null?void 0:P.tickCurrent)??qi(Y),Le=(P==null?void 0:P.sqrtRatioX96)??Ki.getSqrtRatioAtTick(Je),D=typeof Q=="number"&&typeof Z=="number"&&!pe?Fi.fromAmounts({pool:P??new Ui(n,l,A,Le,0,Je,[]),tickLower:Q,tickUpper:Z,amount0:k.quotient,amount1:K.quotient,useFullPrecision:!0}):void 0,{amount0:se,amount1:et}=(0,p.useMemo)(()=>D?D.mintAmountsWithSlippage(b):{amount0:void 0,amount1:void 0},[D,b]),tt=(0,p.useMemo)(()=>D&&ee.fromRawAmount(n,N.subtract(k.quotient,D.amount0.quotient)),[k,D,n]),it=(0,p.useMemo)(()=>D&&ee.fromRawAmount(l,N.subtract(K.quotient,D.amount1.quotient)),[K,D,l]),[ot,nt]=(0,p.useState)(!1),[rt,fi]=(0,p.useState)(null),w=co(),[ue,me]=En(i,w==null?void 0:w.address),{signatureData:W,gatherPermitSignature:De}=An(i,w==null?void 0:w.address),st=Yt(),_i=(0,p.useCallback)(async()=>{if(f||st)await me();else if(De)try{await De()}catch($){($==null?void 0:$.code)!==4001&&await me()}else await me()},[f,st,De,me]),at=Bt(),Pe=uo(rt??void 0),Me=ko(),gi=(0,p.useCallback)(async()=>{if(!w||!d.address||typeof Q!="number"||typeof Z!="number"||!se||!d.chainId||!Me)return;const $=(W==null?void 0:W.deadline)??await T();if(!$)throw new Error("could not get deadline");const ae=[];W&&ae.push(w.interface.encodeFunctionData("selfPermit",[e,`0x${i.quotient.toString(16)}`,$,W.v,W.r,W.s])),re&&ae.push(w.interface.encodeFunctionData("createAndInitializePoolIfNecessary",[n.address,l.address,A,`0x${Le.toString(16)}`])),ae.push(w.interface.encodeFunctionData("migrate",[{pair:e,liquidityToMigrate:`0x${i.quotient.toString(16)}`,percentageToMigrate:vr,token0:n.address,token1:l.address,fee:A,tickLower:Q,tickUpper:Z,amount0Min:`0x${se.toString(16)}`,amount1Min:`0x${et.toString(16)}`,recipient:d.address,deadline:$,refundAsETH:!0}])),nt(!0),w.estimateGas.multicall(ae).then(hi=>w.multicall(ae,{gasLimit:Kt(hi)}).then(Ce=>{Se($e.MigrateLiquiditySubmitted,{...eo({trace:y,fee:A,tickSpacing:void 0,tickLower:void 0,tickUpper:void 0,hook:void 0,currency0:n,currency1:l,poolId:e,version:Zi.V2,currency0AmountUsd:X,currency1AmountUsd:Xe}),action:`${f?Re.Sushiswap:Re.V2}->${Re.V3}`,transaction_hash:Ce.hash}),at(Ce,{type:kt.MigrateLiquidityV2ToV3,baseCurrencyId:dt(j),quoteCurrencyId:dt(S),isFork:f}),fi(Ce.hash)})).catch(()=>{nt(!1)})},[w,d.address,d.chainId,Q,Z,se,et,Me,W,T,re,e,i.quotient,n,l,A,Le,y,X,Xe,f,at,j,S]),We=!!rt&&N.equal(i.quotient,Pt);return Me?(0,t.jsxs)("div",{className:xr,children:[(0,t.jsxs)(I,{my:"$spacing8",variant:"body2",textAlign:"center",children:[(0,t.jsx)(_,{i18nKey:"migrate.v2Description",values:{source:f?"SushiSwap":"V2"},children:(0,t.jsx)(ho,{href:Vi({chainId:d.chainId??B.Mainnet,data:(w==null?void 0:w.address)??"",type:Bi.ADDRESS}),children:(0,t.jsxs)(I,{color:"$accent1",display:"inline",children:[(0,t.jsx)(_,{i18nKey:"migrate.contract"})," â†—"]})},"migration-contract")}),"."]}),(0,t.jsx)(St,{children:(0,t.jsxs)("div",{className:Dt,children:[(0,t.jsx)(Mt,{currency0:j,currency1:S,badgeText:f?"Sushi":"V2",children:(0,t.jsx)(_,{i18nKey:"migrate.lpTokens",values:{symA:j.symbol,symB:S.symbol}})}),(0,t.jsx)(Wt,{token0Amount:k,token1Amount:K})]})}),(0,t.jsx)("div",{className:mr,children:(0,t.jsx)(zt,{direction:"s",color:"$neutral1",size:Oe.icon24})}),(0,t.jsx)(St,{children:(0,t.jsxs)("div",{className:Dt,children:[(0,t.jsx)(Mt,{currency0:j,currency1:S,badgeText:"V3",children:(0,t.jsx)(_,{i18nKey:"migrate.lpNFT",values:{symA:j.symbol,symB:S.symbol}})}),(0,t.jsx)(pn,{feeAmount:A,handleFeePoolSelect:ii,currencyA:j,currencyB:S}),re&&(0,t.jsxs)(Po,{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,t.jsx)(Go,{color:c.neutral1.val,style:{marginBottom:"12px",opacity:.8}}),(0,t.jsx)(I,{variant:"body3",opacity:.8,mb:"$spacing8",textAlign:"center",children:(0,t.jsx)(_,{i18nKey:"migrate.firstLP",values:{source:f?"SushiSwap":"V2"}})}),(0,t.jsx)(I,{variant:"body3",opacity:.8,mt:"$spacing8",textAlign:"center",children:(0,t.jsx)(_,{i18nKey:"migrate.highGasCost"})}),(0,t.jsx)("div",{className:ur,children:(0,t.jsx)("div",{className:J,children:(0,t.jsxs)(I,{variant:"body2",children:[(0,t.jsx)(_,{i18nKey:"migrate.symbolPrice",values:{protocolName:f?"SushiSwap":"V2",tokenSymbol:L?S.symbol:j.symbol}})," ",L?`${Y.invert().toSignificant(6)} ${j.symbol}`:`${Y.toSignificant(6)} ${S.symbol}`]})})})]}),oi?(0,t.jsxs)(ke,{overflow:"hidden",children:[(0,t.jsxs)("div",{className:ve,children:[(0,t.jsxs)("div",{className:J,children:[(0,t.jsx)(I,{variant:"body3",children:(0,t.jsx)(_,{i18nKey:"migrate.symbolPrice",values:{protocolName:f?"SushiSwap":"V2",tokenSymbol:L?S.symbol:j.symbol}})}),(0,t.jsx)(I,{variant:"body3",children:L?`${Y.invert().toSignificant(6)} ${j.symbol}`:`${Y.toSignificant(6)} ${S.symbol}`})]}),(0,t.jsxs)("div",{className:pr,children:[(0,t.jsxs)(I,{variant:"body3",children:["V3 ",L?S.symbol:j.symbol," ",m("common.price"),":"]}),(0,t.jsx)(I,{variant:"body3",children:L?`${M==null?void 0:M.invert().toSignificant(6)} ${j.symbol}`:`${M==null?void 0:M.toSignificant(6)} ${S.symbol}`})]}),(0,t.jsxs)(F,{row:!0,justifyContent:"space-between",alignItems:"center","$platform-web":{color:c.statusWarning.val},children:[(0,t.jsx)(I,{variant:"body3",color:"inherit",children:(0,t.jsx)(_,{i18nKey:"migrate.priceDifference"})}),(0,t.jsxs)(I,{variant:"body3",color:"inherit",children:[R==null?void 0:R.toSignificant(4),"%"]})]})]}),(0,t.jsx)(I,{variant:"body3",mt:"$spacing8",children:(0,t.jsx)(_,{i18nKey:"migrate.priceWarning"})})]}):!re&&M?(0,t.jsxs)("div",{className:J,children:[(0,t.jsx)(I,{variant:"body3",children:(0,t.jsx)(_,{i18nKey:"migrate.v3Price",values:{sym:L?S.symbol:j.symbol}})}),(0,t.jsx)(I,{variant:"body3",children:L?`${M.invert().toSignificant(6)} ${j.symbol}`:`${M.toSignificant(6)} ${S.symbol}`})]}):null,(0,t.jsxs)("div",{className:J,children:[(0,t.jsx)(I,{variant:"body1",children:(0,t.jsx)(_,{i18nKey:"migrate.setRange"})}),(0,t.jsx)(Sn,{currencyA:L?S:j,currencyB:L?j:S,handleRateToggle:()=>{Qe(""),Ze(""),ni($=>$.equals(n)?l:n)}})]}),(0,t.jsx)(vn,{priceLower:di,priceUpper:ci,getDecrementLower:pi,getIncrementLower:ui,getDecrementUpper:mi,getIncrementUpper:xi,onLeftRangeInput:Qe,onRightRangeInput:Ze,currencyA:L?S:j,currencyB:L?j:S,feeAmount:A,ticksAtLimit:li}),ai?(0,t.jsx)(ke,{px:"$spacing8",py:"$spacing12",children:(0,t.jsxs)("div",{className:J,children:[(0,t.jsx)(ht,{stroke:c.statusWarning.val,size:"24px"}),(0,t.jsx)(I,{color:"$yellow600",ml:12,fontSize:12,children:(0,t.jsx)(_,{i18nKey:"migrate.positionNoFees"})})]})}):null,pe?(0,t.jsx)(ke,{px:"$spacing8",py:"$spacing12",children:(0,t.jsxs)("div",{className:J,children:[(0,t.jsx)(ht,{stroke:c.statusWarning.val,size:"16px"}),(0,t.jsx)(I,{ml:12,fontSize:12,children:(0,t.jsx)(_,{i18nKey:"migrate.invalidRange"})})]})}):null,D?(0,t.jsx)(Mo,{children:(0,t.jsxs)("div",{className:ve,children:[(0,t.jsx)(Wt,{token0Amount:D.amount0,token1Amount:D.amount1}),d.chainId&&tt&&it?(0,t.jsx)(I,{variant:"body4",children:(0,t.jsx)(_,{i18nKey:"migrate.refund",values:{amtA:v({value:tt,type:mt.TokenTx}),symA:!((u=pt[d.chainId])===null||u===void 0)&&u.equals(n)?"ETH":n.symbol,amtB:v({value:it,type:mt.TokenTx}),symB:!((x=pt[d.chainId])===null||x===void 0)&&x.equals(l)?"ETH":l.symbol}})}):null]})}):null,(0,t.jsxs)("div",{className:ve,children:[!We&&!Pe?(0,t.jsx)(F,{gap:"$gap12",style:{flex:"1"},children:(0,t.jsx)(de,{isDisabled:ue!==C.NOT_APPROVED||W!==null||!se||pe||ot,onPress:_i,children:ue===C.PENDING?(0,t.jsx)(vt,{children:(0,t.jsx)(_,{i18nKey:"common.approving"})}):ue===C.APPROVED||W!==null?(0,t.jsx)(_,{i18nKey:"migrate.allowed"}):(0,t.jsx)(_,{i18nKey:"migrate.allowLpMigration"})})}):null,(0,t.jsx)(F,{gap:"$gap12",style:{flex:"1"},children:(0,t.jsx)(de,{isDisabled:!se||pe||ue!==C.APPROVED&&W===null||ot||Pe||We,onPress:gi,children:We?"Success!":Pe?(0,t.jsx)(vt,{children:(0,t.jsx)(_,{i18nKey:"migrate.migrating"})}):(0,t.jsx)(_,{i18nKey:"common.migrate"})})})]})]})})]}):(0,t.jsx)($o,{})}function Id(){const{address:e}=ji(),i=so(),s=Ii();(0,p.useEffect)(()=>(i(ft()),()=>{i(ft())}),[i]);const r=G(),o=Gi(e),n=ao(o||void 0),{data:l,isLoading:u}=oo({contracts:[{address:o||void 0,functionName:"token0",abi:be},{address:o||void 0,functionName:"token1",abi:be}]}),x=l==null?void 0:l[0].result,m=l==null?void 0:l[1].result,d=gt(x),c=gt(m),g=(0,p.useMemo)(()=>r.chainId&&o?new Li(r.chainId,o,18):void 0,[r.chainId,o]),y=io(r.address,g),v=Bo({account:r.address,address:g==null?void 0:g.address,chainId:d==null?void 0:d.chainId}),h=Ho(g),[f,T]=we({address:o||void 0,functionName:"getReserves",abi:be}).data??[],b=(0,p.useMemo)(()=>d&&f?ee.fromRawAmount(d,f.toString()):void 0,[d,f]),j=(0,p.useMemo)(()=>c&&T?ee.fromRawAmount(c,T.toString()):void 0,[c,T]),S="/migrate/v2",k=(0,p.useCallback)(()=>{s(S)},[s]);return!o||!n||!u&&!x&&!r.isConnecting?(ye.warn("MigrateV2Pair","MigrateV2Pair","Invalid pair address",{token0Address:x,token1Address:m,chainId:r.chainId}),(0,t.jsx)(Si,{to:S,replace:!0})):(0,t.jsx)(vo,{logImpression:!0,page:zi.MigrateV2Pair,properties:{pool_address:o,chain_id:r.chainId,label:[d==null?void 0:d.symbol,c==null?void 0:c.symbol].join("/"),token0Address:x,token1Address:m},children:(0,t.jsx)(Fo,{style:{padding:24},children:(0,t.jsxs)("div",{className:cr,children:[(0,t.jsxs)("div",{className:dr,children:[(0,t.jsx)(Ue,{p:"$spacing6",borderRadius:"$rounded8",onPress:k,hoverable:!0,hoverStyle:{backgroundColor:"$backgroundHover"},children:(0,t.jsx)(zt,{direction:"w",color:"$neutral1",size:Oe.icon24})}),(0,t.jsx)(I,{variant:"heading3",tag:"h1",fontWeight:"$medium",children:(0,t.jsx)(_,{i18nKey:"migrate.v2Title"})}),(0,t.jsx)(lr,{autoSlippage:ti,chainId:r.chainId})]}),!r.isConnected||!v?(0,t.jsx)(I,{variant:"heading3",children:(0,t.jsx)(_,{i18nKey:"migrate.connectAccount"})}):y&&h&&b&&j&&d&&c?(0,t.jsx)(br,{pairAddress:o,pairBalance:y,totalSupply:h,reserve0:b,reserve1:j,token0:d,token1:c}):(0,t.jsx)(hr,{message:(0,t.jsx)(_,{i18nKey:"common.loading"})})]})})})}export{Id as default};
