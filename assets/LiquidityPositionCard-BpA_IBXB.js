import{__toESM as ee}from"./chunk-DgAfPHQg.js";import{require_react as Ie}from"./react-CNoFhWkx.js";import{G as we,Path as N,RightArrow as X,Svg as T,TouchableArea as re,Trans as M,createIcon as V,useIsTouchDevice as Le,zIndexes as ke}from"./src-DOOtfpHS.js";import{useTranslation as I}from"./useTranslation-BotBuoJf.js";import{useNavigate as ye}from"./chunk-QMGIS6GS-B91ZVkXt.js";import{require_jsx_runtime as $e}from"./jsx-runtime-D7bMTQeG.js";import{PollingInterval as k,getChainInfo as De}from"./utils-BX1Fu73x.js";import{buildCurrencyId as Y,currencyAddress as Q}from"./currencyId-Ci6selsx.js";import{ModalName as R}from"./modal-Dvm06CN4.js";import{getPoolDetailsURL as Be}from"./linking-D29RyAR8.js";import{FeatureFlags as Ae,useFeatureFlag as He}from"./hooks-Bp0VtWbX.js";import{useUSDCValue as y}from"./useUSDCPrice-HO7Wgroz.js";import{PositionStatus as Re,ProtocolVersion as u}from"./types_pb-yZxlo4b1.js";import{NumberType as Fe}from"./types-JuyYLR0O.js";import{useLocalizationContext as O}from"./LocalizationContext-B31peW1_.js";import{useAccount as ze}from"./useAccount-C5hwiBwN.js";import{useSwitchChain as Me}from"./useSwitchChain-CY8eYAUF.js";import{Flex as w,Shine as We,Text as d,concatClassName as Ne,styled as U,useMedia as oe}from"./Loader-D83W8G1W.js";import{Eye as Te}from"./Eye-D482ahgC.js";import{EyeOff as Ve}from"./EyeOff-BiBJTOh0.js";import{CHART_HEIGHT as Oe,CHART_WIDTH as te,LiquidityPositionRangeChartLoader as Ue,WrappedLiquidityPositionRangeChart as Ee}from"./LiquidityPositionRangeChart-CJw3rPyq.js";import{InfoCircleFilled as ne}from"./InfoCircleFilled-CBAL5Wj0.js";import{Minus as Ke}from"./Minus-CNfbH3_0.js";import{MoreHorizontal as Ge}from"./MoreHorizontal-BC-VtLFW.js";import{Plus as Ze}from"./Plus-_LmEFxOC.js";import{LiquidityPositionInfo as ie,LiquidityPositionInfoLoader as Xe,TextLoader as J}from"./LiquidityPositionInfo-Cs-PVI1A.js";import{useCurrencyInfo as P}from"./useCurrencyInfo-Bxa3J04d.js";import{setOpenModal as F}from"./reducer-1kwGyyVS.js";import{togglePositionVisibility as Ye}from"./slice-CaJcHsUP.js";import{useAppDispatch as Qe}from"./hooks-Muz170pO.js";import{ClickableTamaguiStyle as se}from"./clickable-D5qUCIhr.js";import{ContextMenu as Je,ContextMenuTriggerMode as Pe,MenuContent as qe}from"./ContextMenuV2.web-DtsTwCPj.js";import{useBooleanState as er}from"./useBooleanState-QNOWYlXb.js";import{BadgeVariant as rr,Badge_default as or}from"./Badge-vnMif72r.js";import{CurrencyLogo as tr}from"./CurrencyLogo-CvvmRzOI.js";import{MouseoverTooltip as D,TooltipSize as nr}from"./Tooltip-DPNhKWF2.js";import{useHoverProps as ir}from"./useHoverProps-BdQsOXMz.js";import{AdaptiveDropdown as sr}from"./AdaptiveDropdown-Cv1C9ooR.js";import{getBaseAndQuoteCurrencies as ar}from"./currency-Brc-ymXr.js";import{isV4UnsupportedChain as cr}from"./networkSupportsV4-CXcYAtrx.js";import{LPIncentiveFeeStatTooltip_default as lr,LP_INCENTIVES_REWARD_TOKEN as pr}from"./LPIncentiveFeeStatTooltip-CknsSvzz.js";import{useGetRangeDisplay as ae,useLpIncentivesFormattedEarnings as dr}from"./useLpIncentivesFormattedEarnings-Cp8RbAci.js";var e=ee($e());const[_r,Wo]=V({name:"ArrowDownArrowUp",getIcon:r=>(0,e.jsx)(T,{viewBox:"0 0 24 24",fill:"none",...r,children:(0,e.jsx)(N,{d:"M21.7069 7.7071C21.5119 7.9021 21.2559 8.00007 20.9999 8.00007C20.7439 8.00007 20.4879 7.9021 20.2929 7.7071L17.9999 5.41413V17.0001C17.9999 17.5521 17.5529 18.0001 16.9999 18.0001C16.4469 18.0001 15.9999 17.5521 15.9999 17.0001V5.41413L13.7069 7.7071C13.3159 8.0981 12.6839 8.0981 12.2929 7.7071C11.9019 7.3161 11.9019 6.68403 12.2929 6.29304L16.2919 2.29401C16.3849 2.20101 16.4948 2.12797 16.6178 2.07697C16.8618 1.97597 17.138 1.97597 17.382 2.07697C17.505 2.12797 17.6149 2.20101 17.7079 2.29401L21.7069 6.29304C22.0979 6.68403 22.0979 7.3161 21.7069 7.7071ZM10.2929 16.293L7.99992 18.586V7.00007C7.99992 6.44807 7.55292 6.00007 6.99992 6.00007C6.44692 6.00007 5.99992 6.44807 5.99992 7.00007V18.586L3.70695 16.293C3.31595 15.902 2.68388 15.902 2.29288 16.293C1.90188 16.684 1.90188 17.3161 2.29288 17.7071L6.29191 21.7061C6.38491 21.7991 6.49483 21.8722 6.61784 21.9232C6.73984 21.9742 6.86992 22.0001 6.99992 22.0001C7.12992 22.0001 7.25999 21.9732 7.382 21.9232C7.505 21.8722 7.61492 21.7991 7.70792 21.7061L11.7069 17.7071C12.0979 17.3161 12.0979 16.684 11.7069 16.293C11.3159 15.902 10.6839 15.902 10.2929 16.293Z",fill:"currentColor"})})}),[xr,No]=V({name:"ArrowsLeftRight",getIcon:r=>(0,e.jsx)(T,{viewBox:"0 0 16 16",fill:"none",...r,children:(0,e.jsx)(we,{id:"arrows-left-right",children:(0,e.jsx)(N,{id:"arrows-left-right_2",d:"M14.2353 8.23617L11.5686 10.9028C11.5033 10.9682 11.418 11.0002 11.3326 11.0002C11.2473 11.0002 11.162 10.9675 11.0966 10.9028C10.9666 10.7728 10.9666 10.5615 11.0966 10.4315L13.194 8.33415H2.80334L4.90067 10.4315C5.03067 10.5615 5.03067 10.7728 4.90067 10.9028C4.83534 10.9682 4.75 11.0002 4.66467 11.0002C4.57934 11.0002 4.494 10.9675 4.42867 10.9028L1.762 8.23617C1.73133 8.20551 1.70656 8.16811 1.6899 8.12745C1.6559 8.04611 1.6559 7.95422 1.6899 7.87289C1.70656 7.83156 1.73133 7.79483 1.762 7.76417L4.42867 5.0975C4.55867 4.9675 4.77002 4.9675 4.90002 5.0975C5.03002 5.2275 5.03002 5.43885 4.90002 5.56885L2.80269 7.66619H13.1933L11.096 5.56885C10.966 5.43885 10.966 5.2275 11.096 5.0975C11.226 4.9675 11.4373 4.9675 11.5673 5.0975L14.234 7.76417C14.2647 7.79483 14.2893 7.83222 14.3059 7.87289C14.3399 7.95422 14.3399 8.04611 14.3059 8.12745C14.2906 8.16811 14.266 8.20551 14.2353 8.23617Z",fill:"currentColor"})})}),defaultFill:"#9B9B9B"}),[mr,To]=V({name:"Dollar",getIcon:r=>(0,e.jsx)(T,{viewBox:"0 0 24 24",fill:"none",...r,children:(0,e.jsx)(N,{d:"M17 15.63C17 13.627 15.641 11.884 13.691 11.389L10.795 10.671C10.274 10.539 9.826 10.2469 9.494 9.81995C9.175 9.41695 8.99899 8.902 8.99899 8.37C8.99899 7.06299 10.062 6 11.369 6H12.629C13.837 6 14.85 6.90806 14.985 8.11206C15.047 8.66106 15.543 9.05802 16.09 8.99402C16.639 8.93202 17.034 8.43704 16.972 7.88904C16.736 5.78404 15.035 4.18898 12.958 4.03198V3C12.958 2.45 12.508 2 11.958 2C11.408 2 10.958 2.45 10.958 3V4.04199C8.74299 4.25199 6.998 6.10097 6.998 8.37097C6.998 9.34997 7.327 10.306 7.918 11.054C8.511 11.819 9.35801 12.3711 10.307 12.6121L13.203 13.33C14.26 13.598 14.998 14.544 14.998 15.631C14.998 16.26 14.75 16.854 14.3 17.304C13.851 17.754 13.257 18.001 12.628 18.001H11.368C10.16 18.001 9.14699 17.093 9.01199 15.889C8.94999 15.34 8.451 14.945 7.907 15.007C7.358 15.069 6.963 15.5641 7.025 16.1121C7.258 18.1901 8.919 19.769 10.959 19.962V21C10.959 21.55 11.409 22 11.959 22C12.509 22 12.959 21.55 12.959 21V19.968C13.998 19.889 14.969 19.465 15.716 18.718C16.544 17.89 17 16.794 17 15.63Z",fill:"currentColor"})})}),fr="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665589 _alignItems-center ",hr=({formattedRewardApr:r})=>(0,e.jsx)(or,{width:"fit-content",badgeVariant:rr.SOFT,borderRadius:"$rounded6",py:"$spacing2",paddingLeft:"$spacing4",paddingRight:"$spacing4",marginBottom:"$spacing1",children:(0,e.jsxs)("div",{className:fr,children:[(0,e.jsxs)(d,{variant:"buttonLabel4",color:"$accent1",children:["+",r]}),(0,e.jsx)(tr,{currency:pr,size:12})]})}),ur="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665591 _alignItems-center ",gr="  _display-flex _alignItems-stretch _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _flexGrow-1--3 _flexBasis-0px  _flexBasis-_sm_auto",vr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _flexGrow-1 _height-10037 ",br="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap56 _alignItems-center ",Cr="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap1569 _alignItems-center ",jr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap52 _justifyContent-center _height-10037  _flexDirection-_md_row _justifyContent-_md_flex-start _gap-_md_t-space-gap1602 _width-_md_10037 _flexDirection-_sm_column _gap-_sm_t-space-gap52 _width-_sm_10037",Sr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column  _display-_md_none",Ir="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-center ",wr="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap52 _alignItems-center ",Lr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap1598 _flexGrow-1  _flexDirection-_sm_column",kr=" _backgroundColor-surface2",yr=" _backgroundColor-surface2Hov3121676",$r=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _gap-t-space-gap1598 _pt-t-space-spa1360334076 _pb-t-space-spa1360334076 _pr-t-space-spa1360334047 _pl-t-space-spa1360334047 _borderBottomLeftRadius-t-radius-ro291586424 _borderBottomRightRadius-t-radius-ro291586424  ",Dr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap1598 _justifyContent-space-betwe3241 _width-5037  _width-_md_10037",Br="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap52 ",Ar="  _display-flex _alignItems-stretch _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _flexGrow-1 _flexBasis-0px  _flexBasis-_sm_auto",Hr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap1569 ",$=U(d,{color:"$neutral1",variant:"body2"}),v=U(d,{color:"$neutral2",variant:"body3",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"});function Rr({children:r}){return oe().sm?(0,e.jsx)("div",{className:Hr,children:r}):(0,e.jsx)(e.Fragment,{children:r})}function W({children:r}){return(0,e.jsx)("div",{className:Ar,children:r})}function z(){return(0,e.jsxs)("div",{className:Br,children:[(0,e.jsx)(J,{variant:"body2",width:60}),(0,e.jsx)(J,{variant:"body3",width:40})]})}function Fr(){return(0,e.jsxs)("div",{className:Dr,children:[(0,e.jsx)(z,{}),(0,e.jsx)(z,{}),(0,e.jsx)(z,{})]})}function zr({formattedUsdValue:r,formattedUsdFees:i,formattedLpIncentiveEarnings:t,priceOrdering:o,tickLower:n,tickUpper:s,tickSpacing:c,version:h,apr:_,currency0Info:l,currency1Info:m,cardHovered:a,pricesInverted:x,setPricesInverted:f,lpIncentiveRewardApr:g,totalApr:b,hasRewards:C}){const{t:p}=I(),j=C?t:i??"-";return(0,e.jsxs)("div",{className:Ne(""+($r+(a?yr:kr))),children:[(0,e.jsxs)("div",{className:Lr,children:[(0,e.jsxs)(Rr,{children:[(0,e.jsxs)(W,{children:[r?(0,e.jsx)($,{children:r}):(0,e.jsx)(D,{text:(0,e.jsx)(M,{i18nKey:"position.valueUnavailable"}),placement:"top",children:(0,e.jsx)($,{children:"-"})}),(0,e.jsx)(v,{children:p("pool.position")})]}),(0,e.jsxs)(W,{children:[h===u.V2?(0,e.jsxs)("div",{className:wr,children:[(0,e.jsx)(d,{variant:"body2",color:"$neutral2",children:p("common.unavailable")}),(0,e.jsx)(D,{text:p("fee.unavailable"),placement:"auto",children:(0,e.jsx)("div",{className:Ir,children:(0,e.jsx)(ne,{color:"$neutral2",size:"$icon.16"})})})]}):(0,e.jsx)($,{children:j}),(0,e.jsx)(v,{variant:"body3",color:"$neutral2",children:p(C?"pool.earnings":"common.fees")})]})]}),g?(0,e.jsx)(Wr,{currency0Info:l,currency1Info:m,poolApr:_,lpIncentiveRewardApr:g,totalApr:b}):(0,e.jsx)(Mr,{apr:_})]}),(0,e.jsx)("div",{className:Sr,children:(0,e.jsx)(ce,{priceOrdering:o,tickLower:n,tickUpper:s,tickSpacing:c,pricesInverted:x,setPricesInverted:f})})]})}function ce({priceOrdering:r,tickLower:i,tickUpper:t,tickSpacing:o,pricesInverted:n,setPricesInverted:s}){const{t:c}=I(),{maxPrice:h,minPrice:_,tokenASymbol:l,tokenBSymbol:m,isFullRange:a}=ae({priceOrdering:r,tickSpacing:o,tickLower:i,tickUpper:t,pricesInverted:n});return(0,e.jsx)(w,{group:"item",minWidth:224,alignSelf:"flex-start",width:te,$md:{width:"100%"},height:"100%",children:r.priceLower&&r.priceUpper&&!a?(0,e.jsxs)("div",{className:jr,children:[(0,e.jsxs)("div",{className:Cr,children:[(0,e.jsx)(v,{flexShrink:0,children:(0,e.jsx)(M,{i18nKey:"common.min"})}),(0,e.jsxs)(v,{color:"$neutral1",children:[_," ",l," / ",m]})]}),(0,e.jsxs)("div",{className:br,children:[(0,e.jsx)(v,{flexShrink:0,children:(0,e.jsx)(M,{i18nKey:"common.max"})}),(0,e.jsxs)(v,{color:"$neutral1",display:"flex",alignItems:"center",gap:"$gap4",children:[(0,e.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:h}),(0,e.jsxs)("span",{children:[l," / ",m]})]}),(0,e.jsx)(w,{height:"100%",justifyContent:"center",onPress:x=>{x.preventDefault(),x.stopPropagation(),s(f=>!f)},...se,display:"none","$group-item-hover":{display:"flex"},children:(0,e.jsx)(_r,{color:"$neutral2",size:"$icon.16",rotate:"90deg"})})]})]}):(0,e.jsx)("div",{className:vr,children:(0,e.jsx)(v,{children:c("common.fullRange")})})})}function Mr({apr:r}){const{formatPercent:i}=O(),{t}=I();return(0,e.jsxs)(W,{children:[(0,e.jsx)($,{children:r?i(r):"-"}),(0,e.jsx)(v,{variant:"body3",color:"$neutral2",children:t("pool.apr")})]})}function Wr({currency0Info:r,currency1Info:i,lpIncentiveRewardApr:t,poolApr:o,totalApr:n}){const{formatPercent:s}=O(),{t:c}=I();return(0,e.jsx)("div",{className:gr,children:(0,e.jsx)(D,{padding:0,text:(0,e.jsx)(lr,{currency0Info:r,currency1Info:i,poolApr:o,lpIncentiveRewardApr:t,totalApr:n}),size:nr.Small,placement:"top",children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:ur,children:[(0,e.jsx)(d,{variant:"body2",color:"$neutral1",children:o?s(o):"-"}),(0,e.jsx)(hr,{formattedRewardApr:s(t)})]}),(0,e.jsx)(v,{variant:"body3",color:"$neutral2",children:c("pool.totalAPR")})]})})})}var S=ee(Ie());const Nr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _position-absolute _top-t-space-spa1360334076 _right-t-space-spa1360334076 ",Tr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-10px ",q="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",Vr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap1569 ",Or="  _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _display-none _width-10037  _display-_md_block",Ur="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _pt-t-space-spa1360334047 _pr-t-space-spa1360334047 _pl-t-space-spa1360334047 _alignItems-center _justifyContent-space-betwe3241 _overflowX-hidden _overflowY-hidden  _flexDirection-_md_column _alignItems-_md_flex-start _gap-_md_t-space-gap1598",Er="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241  _flexDirection-_md_column _alignItems-_md_flex-start _gap-_md_t-space-gap1598",Kr="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _pt-t-space-spa1360334047 _pr-t-space-spa1360334047 _pb-t-space-spa1360334047 _pl-t-space-spa1360334047 _gap-t-space-spa1360334047 _borderTopWidth-t-space-spa94665586 _borderRightWidth-t-space-spa94665586 _borderBottomWidth-t-space-spa94665586 _borderLeftWidth-t-space-spa94665586 _borderTopLeftRadius-t-radius-ro291586424 _borderTopRightRadius-t-radius-ro291586424 _borderBottomRightRadius-t-radius-ro291586424 _borderBottomLeftRadius-t-radius-ro291586424 _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _width-10037 _overflowX-hidden _overflowY-hidden _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid  _gap-_md_t-space-gap1598";function Vo(){return(0,e.jsx)(We,{children:(0,e.jsxs)("div",{className:Kr,children:[(0,e.jsxs)("div",{className:Er,children:[(0,e.jsx)(Xe,{}),(0,e.jsx)(Ue,{height:Oe,width:te,position:"relative"})]}),(0,e.jsx)(Fr,{})]})})}function Gr({liquidityPosition:r,showVisibilityOption:i,isVisible:t}){const{t:o}=I(),n=r.status!==Re.CLOSED,s=Qe(),c=ye(),h=ze(),_=Me();return(0,S.useMemo)(()=>{const l=De(r.chainId),m={onPress:()=>{s(F({name:R.AddLiquidity,initialState:r}))},label:o("common.addLiquidity"),Icon:Ze},a=n?{onPress:()=>{s(F({name:R.RemoveLiquidity,initialState:r}))},label:o("pool.removeLiquidity"),Icon:Ke}:void 0,x={onPress:()=>{r.poolId&&c(Be(r.poolId,r.chainId))},label:o("pool.info"),Icon:ne},f=i?{onPress:()=>{s(Ye({poolId:r.poolId,tokenId:r.tokenId,chainId:r.chainId}))},label:o(t?"common.hide.button":"common.unhide"),Icon:t?Ve:Te,showDivider:!0}:void 0;if(r.version===u.V2){const p=n?{onPress:async()=>{r.chainId!==h.chainId&&await _(r.chainId),c(`/migrate/v2/${r.liquidityToken.address}`)},label:o("pool.migrateLiquidity"),Icon:X}:void 0;return[n?m:void 0,a,p,x,f].filter(j=>j!==void 0)}const g=n?{onPress:()=>{s(F({name:R.ClaimFee,initialState:r}))},label:o("pool.collectFees"),Icon:mr}:void 0,C=n&&!cr(r.chainId)&&r.version!==u.V4?{onPress:()=>{c(`/migrate/v3/${l.urlParam}/${r.tokenId}`)},label:o("pool.migrateLiquidity"),Icon:X}:void 0;return[g,m,a,C,x,f].filter(p=>p!==void 0)},[h.chainId,s,n,t,r,c,i,_,o])}function Oo({liquidityPosition:r,isMiniVersion:i,showVisibilityOption:t,showMigrateButton:o=!1,isVisible:n=!0,disabled:s=!1}){const{value:c,setTrue:h,setFalse:_}=er(!1),{convertFiatAmountFormatted:l}=O(),m=Le(),[a,x]=(0,S.useState)(!1),f=He(Ae.LpIncentives),[g,b]=ir(),p=oe().sm,{fee0Amount:j,fee1Amount:de}=r,_e=y(j,k.Slow),xe=y(de,k.Slow),E=y(r.currency0Amount,k.Slow),K=y(r.currency1Amount,k.Slow),B=(0,S.useMemo)(()=>{if(r.version===u.V2||!r.position)return{};const L=r.position,je=L.amount0.currency,Se=L.amount1.currency;return{priceLower:L.token0PriceLower,priceUpper:L.token0PriceUpper,quote:Se,base:je}},[r]),{baseCurrency:A,quoteCurrency:me}=ar({TOKEN0:r.currency0Amount.currency,TOKEN1:r.currency1Amount.currency},a),G=E&&K?l(E.add(K).toExact(),Fe.FiatTokenPrice):void 0,{totalFormattedEarnings:fe,hasRewards:he,formattedFeesValue:Z}=dr({liquidityPosition:r,fiatFeeValue0:_e,fiatFeeValue1:xe}),ue=r.version===u.V4?Y(r.chainId,Q(r.currency0Amount.currency)):void 0,ge=r.version===u.V4?Y(r.chainId,Q(r.currency1Amount.currency)):void 0,ve=P(ue),be=P(ge),H=Gr({liquidityPosition:r,showVisibilityOption:t,isVisible:n}),Ce=(0,S.useMemo)(()=>r.version!==u.V3&&r.version!==u.V4||!r.position||!r.liquidity||!r.tickLower||!r.tickUpper?{}:{base:A,priceLower:a?r.position.token0PriceUpper.invert():r.position.token0PriceLower,priceUpper:a?r.position.token0PriceLower.invert():r.position.token0PriceUpper},[r,A,a]);return(0,e.jsx)(Je,{menuItems:H,isPlacementRight:!i,disabled:s,triggerMode:Pe.Secondary,isOpen:c,openMenu:h,closeMenu:_,children:i?(0,e.jsx)(Zr,{menuOptions:H,disabled:s,positionInfo:r,formattedUsdValue:G,formattedUsdFees:Z,priceOrdering:B,tickSpacing:r.tickSpacing,tickLower:r.tickLower,tickUpper:r.tickUpper}):(0,e.jsxs)(w,{...b,group:!0,position:"relative",gap:"$spacing16",borderWidth:"$spacing1",borderRadius:"$rounded20",borderColor:"$surface3",width:"100%",hoverStyle:s?{}:{borderColor:"$surface3Hovered",backgroundColor:"$surface1Hovered"},children:[(0,e.jsxs)("div",{className:Ur,children:[(0,e.jsx)(ie,{positionInfo:r,isMiniVersion:p,showMigrateButton:o}),(0,e.jsx)(Ee,{version:r.version,chainId:r.chainId,quoteCurrency:me,baseCurrency:A,sdkCurrencies:{TOKEN0:r.currency0Amount.currency,TOKEN1:r.currency1Amount.currency},priceInverted:a,positionStatus:r.status,poolAddressOrId:r.poolId,priceOrdering:Ce}),(0,e.jsx)("div",{className:Or,children:(0,e.jsx)(ce,{priceOrdering:B,tickLower:r.tickLower,tickUpper:r.tickUpper,tickSpacing:r.tickSpacing,pricesInverted:a,setPricesInverted:x})})]}),(0,e.jsx)(zr,{formattedUsdValue:G,formattedUsdFees:Z,formattedLpIncentiveEarnings:fe,hasRewards:he,priceOrdering:B,tickSpacing:r.tickSpacing,tickLower:r.tickLower,tickUpper:r.tickUpper,version:r.version,currency0Info:ve,currency1Info:be,apr:r.apr,cardHovered:g&&!s,pricesInverted:a,setPricesInverted:x,lpIncentiveRewardApr:f&&r.version===u.V4?r.boostedApr:void 0,totalApr:f&&r.version===u.V4?r.totalApr:void 0}),!m&&!s&&(0,e.jsx)(pe,{menuOptions:H})]})})}function Zr({positionInfo:r,menuOptions:i,formattedUsdFees:t,formattedUsdValue:o,priceOrdering:n,tickSpacing:s,tickLower:c,tickUpper:h,disabled:_}){const{t:l}=I(),[m,a]=(0,S.useState)(!1),{maxPrice:x,minPrice:f,tokenASymbol:g,tokenBSymbol:b,isFullRange:C}=ae({priceOrdering:n,tickSpacing:s,tickLower:c,tickUpper:h,pricesInverted:m});return(0,e.jsxs)(w,{gap:"$gap20",p:"$padding16",borderRadius:"$rounded20",borderColor:"$surface3",borderWidth:"$spacing1",position:"relative",group:!0,hoverStyle:_?{}:{backgroundColor:"$surface1Hovered",borderColor:"$surface3Hovered"},pressStyle:_?{}:{backgroundColor:"$surface1Pressed",borderColor:"$surface3Pressed"},children:[(0,e.jsx)(ie,{hideStatusIndicator:!0,positionInfo:r,currencyLogoSize:32,isMiniVersion:!0}),(0,e.jsxs)("div",{className:Vr,children:[(0,e.jsxs)("div",{className:q,children:[o?(0,e.jsx)(d,{variant:"body2",children:o}):(0,e.jsx)(D,{text:l("position.valueUnavailable"),placement:"top",children:(0,e.jsx)(d,{variant:"body2",children:"-"})}),(0,e.jsx)(d,{variant:"body4",color:"$neutral2",children:l("pool.position")})]}),(0,e.jsxs)("div",{className:q,children:[(0,e.jsx)(d,{variant:"body2",children:t||l("common.unavailable")}),(0,e.jsx)(d,{variant:"body4",color:"$neutral2",children:l("common.fees")})]})]}),n.priceLower&&n.priceUpper&&!C?(0,e.jsx)(re,{...se,onPress:p=>{p.preventDefault(),p.stopPropagation(),a(j=>!j)},children:(0,e.jsxs)("div",{className:Tr,children:[(0,e.jsxs)(d,{variant:"body4",children:[f," ",g," / ",b]}),(0,e.jsx)(xr,{color:"$neutral2",size:"$icon.16"}),(0,e.jsxs)(d,{variant:"body4",children:[x," ",g," / ",b]})]})}):(0,e.jsx)(d,{variant:"body4",children:l("common.fullRange")}),(0,e.jsx)(pe,{menuOptions:i})]})}const le={opacity:1,pointerEvents:"auto",backgroundColor:"$scrim"},Xr=U(w,{animation:"fast",opacity:0,borderRadius:"$rounded12",p:"$spacing8",variants:{open:{true:le}}});function pe({menuOptions:r}){const[i,t]=(0,S.useState)(!1),o=(0,e.jsx)(re,{zIndex:ke.mask,onPress:n=>{n.preventDefault(),n.stopPropagation(),t(!i)},children:(0,e.jsx)(Xr,{"$group-hover":le,open:i,onPress:()=>{},children:(0,e.jsx)(Ge,{size:"$icon.16",color:"white"})})});return(0,e.jsx)("div",{className:Nr,children:(0,e.jsx)(sr,{alignRight:!0,allowFlip:!0,positionFixed:!0,isOpen:i,toggleOpen:t,trigger:o,dropdownStyle:{p:0,backgroundColor:"transparent",borderRadius:"$rounded20",minWidth:"max-content",borderWidth:0},children:(0,e.jsx)(qe,{items:r,handleCloseMenu:()=>t(!1)})})})}export{hr as LPIncentiveRewardsBadge,Oo as LiquidityPositionCard,Vo as LiquidityPositionCardLoader};
