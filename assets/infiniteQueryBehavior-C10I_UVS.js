import{addToEnd as K,addToStart as O,ensureQueryFn as k}from"./useQuery-D_ZCw8XG.js";function T(n){return{onFetch:(e,i)=>{var a,c,P;const f=e.options,m=(a=e.fetchOptions)===null||a===void 0||(a=a.meta)===null||a===void 0||(a=a.fetchMore)===null||a===void 0?void 0:a.direction,p=((c=e.state.data)===null||c===void 0?void 0:c.pages)||[],h=((P=e.state.data)===null||P===void 0?void 0:P.pageParams)||[];let o={pages:[],pageParams:[]},u=0;const y=async()=>{let s=!1;const g=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(e.signal.aborted?s=!0:e.signal.addEventListener("abort",()=>{s=!0}),e.signal)})},q=k(e.options,e.fetchOptions),$=async(t,r,l)=>{if(s)return Promise.reject();if(r==null&&t.pages.length)return Promise.resolve(t);const d={client:e.client,queryKey:e.queryKey,pageParam:r,direction:l?"backward":"forward",meta:e.options.meta};g(d);const _=await q(d),{maxPages:F}=e.options,b=l?O:K;return{pages:b(t.pages,_,F),pageParams:b(t.pageParams,r,F)}};if(m&&p.length){const t=m==="backward",r=t?w:v,l={pages:p,pageParams:h},d=r(f,l);o=await $(l,d,t)}else{const t=n??p.length;do{const r=u===0?h[0]??f.initialPageParam:v(f,o);if(u>0&&r==null)break;o=await $(o,r),u++}while(u<t)}return o};e.options.persister?e.fetchFn=()=>{var s,g;return(s=(g=e.options).persister)===null||s===void 0?void 0:s.call(g,y,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},i)}:e.fetchFn=y}}}function v(n,{pages:e,pageParams:i}){const a=e.length-1;return e.length>0?n.getNextPageParam(e[a],e,i[a],i):void 0}function w(n,{pages:e,pageParams:i}){var a;return e.length>0?(a=n.getPreviousPageParam)===null||a===void 0?void 0:a.call(n,e[0],e,i[0],i):void 0}function j(n,e){return e?v(n,e)!=null:!1}function E(n,e){return!e||!n.getPreviousPageParam?!1:w(n,e)!=null}export{j as hasNextPage,E as hasPreviousPage,T as infiniteQueryBehavior};
