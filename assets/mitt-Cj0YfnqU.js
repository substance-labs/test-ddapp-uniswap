import{__toESM as l}from"./chunk-DgAfPHQg.js";import{require_react as p}from"./react-CNoFhWkx.js";var i=l(p()),d={303:"Multiple adapter contexts detected. This might happen in monorepos.",404:"nuqs requires an adapter to work with your framework.",409:"Multiple versions of the library are loaded. This may lead to unexpected behavior. Currently using `%s`, but `%s` (via the %s adapter) was about to load on top.",414:"Max safe URL length exceeded. Some browsers may not be able to accept this URL. Consider limiting the amount of state stored in the URL.",429:"URL update rate-limited by the browser. Consider increasing `throttleMs` for key(s) `%s`. %O",500:"Empty search params cache. Search params can't be accessed in Layouts.",501:"Search params cache already populated. Have you called `parse` twice?"};function c(r){return`[nuqs] ${d[r]}
  See https://err.47ng.com/NUQS-${r}`}function w(r){if(r.size===0)return"";const e=[];for(const[o,a]of r.entries()){const u=o.replace(/#/g,"%23").replace(/&/g,"%26").replace(/\+/g,"%2B").replace(/=/g,"%3D").replace(/\?/g,"%3F");e.push(`${u}=${g(a)}`)}const t="?"+e.join("&");return t}function g(r){return r.replace(/%/g,"%25").replace(/\+/g,"%2B").replace(/ /g,"+").replace(/#/g,"%23").replace(/&/g,"%26").replace(/"/g,"%22").replace(/'/g,"%27").replace(/`/g,"%60").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/[\x00-\x1F]/g,e=>encodeURIComponent(e))}var s=m();function b(r,...e){if(!s)return;const t=f(r,...e);performance.mark(t);try{console.log(r,...e)}catch{console.log(t)}}function v(r,...e){s&&console.warn(r,...e)}function f(r,...e){return r.replace(/%[sfdO]/g,t=>{const o=e.shift();return t==="%O"&&o?JSON.stringify(o).replace(/"([^"]+)":/g,"$1:"):String(o)})}function m(){try{if(typeof localStorage>"u")return!1;const e="nuqs-localStorage-test";localStorage.setItem(e,e);const t=localStorage.getItem(e)===e;if(localStorage.removeItem(e),!t)return!1}catch(e){return console.error("[nuqs]: debug mode is disabled (localStorage unavailable).",e),!1}return(localStorage.getItem("debug")??"").includes("nuqs")}var n=(0,i.createContext)({useAdapter(){throw new Error(c(404))}});n.displayName="NuqsAdapterContext";s&&typeof window<"u"&&(window.__NuqsAdapterContext&&window.__NuqsAdapterContext!==n&&console.error(c(303)),window.__NuqsAdapterContext=n);function S(r){return({children:e,...t})=>(0,i.createElement)(n.Provider,{...t,value:{useAdapter:r}},e)}function x(){const r=(0,i.useContext)(n);if(!("useAdapter"in r))throw new Error(c(404));return r.useAdapter()}function q(r){return{all:r=r||new Map,on:function(e,t){var o=r.get(e);o?o.push(t):r.set(e,[t])},off:function(e,t){var o=r.get(e);o&&(t?o.splice(o.indexOf(t)>>>0,1):r.set(e,[]))},emit:function(e,t){var o=r.get(e);o&&o.slice().map(function(a){a(t)}),(o=r.get("*"))&&o.slice().map(function(a){a(e,t)})}}}export{S as createAdapterProvider,b as debug,c as error,q as mitt_default,w as renderQueryString,x as useAdapter,v as warn};
