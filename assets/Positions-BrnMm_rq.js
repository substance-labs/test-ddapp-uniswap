import{__toESM as ee}from"./chunk-DgAfPHQg.js";import"./preload-helper-CaakwtpC.js";import"./i18next-DD3sT7R5.js";import{require_react as Xe}from"./react-CNoFhWkx.js";import{Button as T,CloseIconWithHover as Ke,Image as Ie,RotatableChevron as et,TouchableArea as ce,Trans as tt,useIsDarkMode as it,useShadowPropsMedium as ot,useShadowPropsShort as rt}from"./src-DOOtfpHS.js";import{useTranslation as S}from"./useTranslation-BotBuoJf.js";import{isMobileWeb as st}from"./index.web-BqgtOHN3.js";import"./constants-CrXoXfFH.js";import{useDispatch as nt}from"./es-Iwj7vF3u.js";import"./react-dom-xovCOntK.js";import"./react-is-BJXMVkew.js";import"./cache-BFZkIToX.js";import"./dist-Q7olfaoJ.js";import"./tslib.es6-Dbpxy1u8.js";import"./dist-QCpUvRkJ.js";import{Link as Ce,useNavigate as O}from"./chunk-QMGIS6GS-B91ZVkXt.js";import{require_jsx_runtime as at}from"./jsx-runtime-D7bMTQeG.js";import{useEnabledChains as te}from"./useEnabledChains-DuB86c95.js";import{logger as ie,useEvent as Be}from"./hooks-BXO4d1DJ.js";import"./dist-ceZDlR1V.js";import"./analytics.web-DLc1_wTk.js";import"./redux-toolkit.esm-BnRUBto_.js";import"./utils-CK6a47NA.js";import{Platform as lt,UniverseChainId as ye,toGraphQLChain as ct}from"./utils-BX1Fu73x.js";import"./bn-D7somgUb.js";import"./lib-DPFIyRke.js";import"./misc-BMnlqqV4.js";import"./currencyId-Ci6selsx.js";import"./config-C4KrHqHG.js";import"./time-D_OqcZ4M.js";import"./features-yACC1hVw.js";import"./interface-BdpC4qOF.js";import"./element-Wnp4RkdY.js";import{ModalName as dt}from"./modal-Dvm06CN4.js";import{InterfacePageName as pt}from"./page-zDkoCQe4.js";import{UniswapEventName as $}from"./uniswap-Bm-6KILn.js";import"./isAddress-P2vaZgmG.js";import"./chain-ghiO403o.js";import"./slice-cfC6NcyN.js";import"./node-C_BraYgX.js";import{formatUnits as At}from"./formatUnits-DkyMpOD7.js";import"./_u64-b_viZRi_.js";import"./sha2-Jt0E41S_.js";import"./sha256-BqbhXHGu.js";import"./call-CTDbaN-t.js";import"./parseAccount-CRyN5swV.js";import"./encodeFunctionData-CD63gkvM.js";import"./public-fap09Zv6.js";import"./stringify-B82RFruy.js";import"./rpc-nQR4Ijs4.js";import"./dist-CBK-d0jO.js";import"./hmac-D-QTodfL.js";import"./linking-D29RyAR8.js";import"./lib-CKG8APVv.js";import"./lib-XGdDYWzD.js";import"./V3DutchOrderTrade-Cl7yELmp.js";import"./v3-sdk.esm-CHH6GWR1.js";import"./hash-05APZTFm.js";import"./inherits_browser-Dqx8HagI.js";import"./useQuery-D_ZCw8XG.js";import"./lib-CWHZrl0T.js";import"./v2-sdk.esm-CIiDMO7F.js";import"./lib-BncBk3QF.js";import"./utils-7WDx1QGa.js";import"./lib-CgeiDO5B.js";import"./lib-Dj-AwQVD.js";import"./types-DbOmsKtk.js";import"./getCurrencyAmount-vvZpAzIm.js";import"./addresses-D56PBUHX.js";import"./currency-DIOEzjz2.js";import"./reducer-26KeQlno.js";import{require_ms as mt}from"./ms-BqmEYo6j.js";import"./configs-B4dDdw82.js";import{FeatureFlags as we,useFeatureFlag as Se}from"./hooks-Bp0VtWbX.js";import"./statsig-B7I9iQRf.js";import"./usePollingIntervalByChain-YBOfXXzb.js";import"./erc20-CdGGKIp0.js";import"./objects-DlLkJwrJ.js";import{sendAnalyticsEvent as q}from"./send.web-CrSXW2rw.js";import{fetchClaimLpIncentiveRewards as _t}from"./TradingApiClient-Cp_0ez5S.js";import"./ProtocolItems-DhZWSiXS.js";import"./selectors-BwkayGDl.js";import"./useUSDCPrice-HO7Wgroz.js";import"./balances-DV0Wvmri.js";import"./getCurrencySafetyInfo-BHD1ohD-.js";import"./mutation-CRQvRc5_.js";import"./infiniteQueryBehavior-C10I_UVS.js";import{useGetPositionsInfiniteQuery as ut}from"./getPositions-B2zd3dQ2.js";import{useMutation as xt}from"./connector-Cw8HJLtm.js";import"./queryOptions-P48mrm5X.js";import"./connect-transport-9OnIgPz5.js";import"./proto3-DkSQZto4.js";import"./embeddedWallet-BdHUTaHg.js";import{useQuery as gt}from"./use-query-8AOGtvlP.js";import"./promise-client-BYLTs0DC.js";import{uniswapUrls as V}from"./urls-kwiZbYPW.js";import"./createApiClient-BjXZMbEB.js";import"./constants-D9cStT7K.js";import{ALL_NETWORKS_ARG as ft,uniswapGetTransport as ht}from"./base-DVpWJ4NW.js";import{PositionStatus as R,ProtocolVersion as W}from"./types_pb-yZxlo4b1.js";import"./hooks-Dhx5teK4.js";import{TransactionType as bt}from"./transactionDetails-BsNW_jus.js";import"./types-JuyYLR0O.js";import{useLocalizationContext as vt}from"./LocalizationContext-B31peW1_.js";import{WarningSeverity as It}from"./getAlertColor-J5DrJWHv.js";import"./currency-xm5i4cH7.js";import"./ethers-D2SIY1xg.js";import"./useSupportedChainId-DskHoisQ.js";import"./useWallet-CL5owP9P.js";import"./TraceContext-Ddfk7zjz.js";import"./types-7DAoWLTI.js";import"./types-BSmAADNJ.js";import"./eventemitter3-DFes51ku.js";import"./eventemitter3-BHLpX1jX.js";import"./dist-BWRHWQ_J.js";import"./readContract-Cae4hIjn.js";import"./recoverAddress-oPdWABRo.js";import"./getBalance-TsPVbzB5.js";import"./localBatchGatewayRequest-CdT4Kija.js";import"./createBatchScheduler-BJBpfhFD.js";import"./createTransport-WEDNYdh5.js";import"./useEthersProvider-CBgc_azi.js";import"./http-CIklBnX8.js";import"./wagmiConfig-0BYSDqyO.js";import"./hashMessage-DdzTBpWL.js";import"./multicall-BYS6jvE9.js";import"./secp256k1-fbKD5lyl.js";import"./getAction-BBhbL9mE.js";import{useAccount as Z}from"./useAccount-C5hwiBwN.js";import"./config-CDfnfyHL.js";import"./useReadContracts-Orb8TypL.js";import"./wagmi-CsUiFCSO.js";import"./useSwitchChain-CY8eYAUF.js";import"./query-qNZtVuxH.js";import"./constants-CGJJmXwV.js";import{atom as oe,atomWithStorage as Ct,useAtom as M}from"./utils-CDaPKk14.js";import"./zIndex-CmEE31Ab.js";import"./passkey.web-DakcatU3.js";import"./hex-njd-4N-2.js";import"./slice-qANrfSbi.js";import"./noop-BDbB2pLB.js";import"./walletMeta-DaLhfhet.js";import"./signing-DH5GfhKu.js";import"./i18n-CroUvoJw.js";import"./v4-D6Rlvprs.js";import"./errors-BaezSPLl.js";import{didUserReject as Bt}from"./swapErrorToUserReadableMessage-DgHZMHU-.js";import{lpIncentivesClaimSaga as yt}from"./lpIncentivesSaga-CyYcBLmn.js";import{Flex as w,FlexLoader as wt,Skeleton as St,Text as x,concatClassName as de,iconSizes as z,useMedia as F}from"./Loader-D83W8G1W.js";import"./client-BlU1ozBP.js";import{Anchor as re}from"./Anchor-B1nkrQbP.js";import"./Checkbox-Id3GDHn8.js";import"./HeightAnimator-DF8znv78.js";import"./urls-aCnKF23w.js";import"./useNewChainIds-CIAogFpa.js";import"./encode-utf8-DiSL6KQ9.js";import"./dijkstra-6umg7ymP.js";import"./UniconSVGs-CVEtuhJW.js";import{LabeledCheckbox as pe,NetworkFilter as jt}from"./NetworkFilter-ZFjNguMa.js";import"./AlertTriangleFilled-C9tf2eUJ.js";import"./ArrowDown-B8kFPZPX.js";import{LPIncentiveRewardsBadge as Qt,LiquidityPositionCard as je,LiquidityPositionCardLoader as Dt}from"./LiquidityPositionCard-BpA_IBXB.js";import{ArrowRight as kt,PoolSortFields as Ht}from"./state-DRfrbe8S.js";import"./Blocked-BNx3Epiv.js";import"./CheckmarkCircle-Znmo2ojy.js";import"./CopyAlt-CU_LJNbN.js";import"./LpIncentivesAprDisplay-DAZ9W112.js";import"./Eye-D482ahgC.js";import"./EyeOff-BiBJTOh0.js";import"./LiquidityPositionRangeChart-CJw3rPyq.js";import{InfoCircleFilled as Qe}from"./InfoCircleFilled-CBAL5Wj0.js";import"./Minus-CNfbH3_0.js";import"./MoreHorizontal-BC-VtLFW.js";import{FixedSizeList as Lt}from"./index.esm-CLP40SHA.js";import{Plus as Et}from"./Plus-_LmEFxOC.js";import{Pools as Vt}from"./Pools-DKYxZO3F.js";import"./SplitLogo-Ct--07LT.js";import{LoadingRow as E,StatusIndicatorCircle as Rt}from"./LiquidityPositionInfo-Cs-PVI1A.js";import{Wallet as Wt}from"./Wallet-DXzkCRwI.js";import"./reducer-CcXO4HTO.js";import{useSelectChain as $t}from"./useSelectChain-CA5zoRWi.js";import"./tokens-Dxd89cHj.js";import"./prices-BzyZhpWW.js";import"./timing-DsWr56iv.js";import"./experiments-rc6XUB0U.js";import{AccountType as Pt}from"./types-NWGai6aQ.js";import"./useCurrencyInfo-Bxa3J04d.js";import"./createEthersProvider-B5AW2bpJ.js";import"./reducer-1kwGyyVS.js";import"./actions-Budqlwp-.js";import"./slice-CaJcHsUP.js";import"./usePrevious-CggM0Zir.js";import"./hooks-Muz170pO.js";import"./chainParams-DIOvplzi.js";import{OrderDirection as Mt,gqlToCurrency as Ae,supportedChainIdFromGQLChain as Tt,unwrapToken as me}from"./util-BZ6kLG7e.js";import{Arrow as zt}from"./Arrow-DIna6t35.js";import"./TokenLogo-JlSSDr3Q.js";import{usePendingLPTransactionsChangeListener as Ot,usePendingTransactions as Nt}from"./hooks-BA_A7Su9.js";import{useAccountDrawer as Gt}from"./hooks-CRfHBoLD.js";import"./use-transport-CPomNX05.js";import"./types-OmNOta2_.js";import"./useMultichainContext-BVmgxqO2.js";import"./ErrorBoundary-oYzyK_hY.js";import"./useIsMobile-Cq3RSgOi.js";import"./styled-components-DbVO3u5J.js";import"./text-CK4eXdYc.js";import"./index.esm-D6PJCa7X.js";import"./CopyHelper-DOhhKKQB.js";import"./copy-bNdbH7uS.js";import"./prop-types-BL9JsGr9.js";import{ClickableTamaguiStyle as D}from"./clickable-D5qUCIhr.js";import"./ellipsis-DjwAKJIh.js";import"./Links-Xomrvpth.js";import{Trace as _e,Trace_default as qt}from"./Trace-DgHN3Ak9.js";import"./Modal.web-DHbL39pN.js";import{InfoTooltip as Ut}from"./InfoTooltip.web-CkgGEmd3.js";import{LearnMoreLink as Zt}from"./LearnMoreLink-CrJtGK7U.js";import{InlineWarningCard as Ft}from"./InlineWarningCard-p0OrN1e9.js";import"./pools-5GjP-hMy.js";import"./ContextMenuV2.web-DtsTwCPj.js";import"./useBooleanState-QNOWYlXb.js";import"./service-ExploreStatsService_connectquery-YoP81iJ5.js";import"./useDeviceDimensions-iftoqxuy.js";import{useExploreStatsQuery as Jt}from"./explore-CL40v3_c.js";import"./Badge-vnMif72r.js";import"./bundle.esm-B4P3X753.js";import{getRewards as Yt}from"./api-PoolsService_connectquery-N1pfS4Yc.js";import"./EnvelopeHeart-DxsgNuRq.js";import"./GetHelpHeader-DB6Sgdgo.js";import{Dialog as Xt}from"./Dialog-DZrFRjU_.js";import"./tryParseCurrencyAmount-Bt3FPZDG.js";import"./CurrencyLogo-CvvmRzOI.js";import{DoubleCurrencyLogo as Kt}from"./DoubleLogo-D40dQ2P7.js";import{LoadingRows as ei}from"./styled-qLLlrMEu.js";import"./useOnClickOutside-B5O2_6zc.js";import"./Tooltip-DPNhKWF2.js";import"./useInterval-7f86mkEJ.js";import"./polished.es-BASfrnSv.js";import"./useHoverProps-BdQsOXMz.js";import{useRequestPositionsForSavedPairs as ti}from"./hooks-ViKlw47o.js";import{ExpandoRow as ii}from"./ExpandoRow-ByvAjPmx.js";import"./AdaptiveDropdown-Cv1C9ooR.js";import"./util-CfowgtYu.js";import"./currency-Brc-ymXr.js";import{getProtocolStatusLabel as oi,getProtocolVersionLabel as ue}from"./protocolVersion-Djp_Gxjw.js";import"./networkSupportsV4-CXcYAtrx.js";import"./usePools-Bz9FGvMj.js";import"./getTickToPrice-BudeFeQp.js";import"./priceRangeInfo-DbHE3vOq.js";import{LP_INCENTIVES_REWARD_TOKEN as De}from"./LPIncentiveFeeStatTooltip-CknsSvzz.js";import"./useLpIncentivesFormattedEarnings-Cp8RbAci.js";import{lpStatusConfig as ri}from"./feeTiers-D9BvLkmt.js";import{LiquidityPositionInfoBadges as si}from"./LiquidityPositionInfoBadges-DdjNrqYk.js";import{getPositionUrl as ke}from"./getPositionUrl-Cmm1Puj7.js";import{parseRestPosition as ni}from"./parseFromRest-Dp36Fdyo.js";import{usePositionVisibilityCheck as ai}from"./usePositionVisibilityCheck-Bx-HbV5v.js";import{token_logo_default as He}from"./token-logo-BbLm8XxH.js";import{DropdownSelector as X}from"./DropdownSelector-CYN_6AdC.js";import{useTopPools as li}from"./topPools-49_ZkMXb.js";let ci=(function(t){return t.MERKL="MERKL",t})({});var Le="/assets/provideLiquidity-6uM6fWZr.png",Ee="/assets/v4Hooks-DlkfWaLd.png",e=ee(at());const di="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap56 _alignItems-center ";function K({href:t,openInNewTab:i=!0,children:o}){return(0,e.jsx)(re,{textDecorationLine:"none",href:t,target:i?"_blank":void 0,...D,children:(0,e.jsxs)("div",{className:di,children:[(0,e.jsx)(x,{variant:"buttonLabel3",color:"$neutral2",children:o}),(0,e.jsx)(zt,{size:z.icon20,color:"$neutral2"})]})})}function Ve(t,i){try{const o=At(BigInt(t),i),[r,s]=o.split(".");return s?`${r}.${s.slice(0,3)}`:r}catch{return"0"}}var a=ee(Xe());function pi({tokenRewards:t,token:i}){return(0,a.useMemo)(()=>Ve(t,i.decimals),[t,i.decimals])}function Ai({isLoading:t,isPendingTransaction:i,onClaim:o}){const{t:r}=S();return(0,a.useMemo)(()=>t?{title:r("common.confirmWallet"),onClick:()=>{},isLoading:!0}:i?{title:r("common.transactionPending"),onClick:()=>{},isLoading:!0}:{title:r("pool.incentives.collect"),onClick:o,isLoading:t},[o,t,i,r])}function mi(){const t=nt(),i=$t();return(0,a.useCallback)(o=>{const r=async s=>i(s);t(yt.actions.trigger({...o,selectChain:r}))},[t,i])}function _i(){return(0,a.useCallback)(async({walletAddress:t,chainId:i,tokens:o,distributor:r})=>{try{return{data:await _t({walletAddress:t,chainId:i,tokens:o,distributor:r,simulateTransaction:!0}),error:null}}catch(s){return{data:null,error:s instanceof Error?s:new Error("Failed to fetch claim data")}}},[])}function ui({token:t,onSuccess:i,onClose:o,onError:r}){const s=Z(),{address:n,chainId:l}=s,d=mi(),u=_i();return xt({mutationFn:async()=>{if(!n||!l)throw new Error("No wallet address available");const{data:p,error:g}=await u({walletAddress:n,chainId:t.chainId,tokens:[t.address],distributor:ci.MERKL});if(g)throw q($.LpIncentiveCollectRewardsErrorThrown,{error:g.message}),g;if(!p)throw new Error("No claim data available");return new Promise((b,A)=>{d({account:{accountType:Pt.SignerMnemonic,address:n,platform:lt.EVM,walletMeta:{id:"test-id",name:"test",icon:"test"}},claimData:p,chainId:l,tokenAddress:t.address,onSuccess:()=>{b()},onFailure:c=>{A(c)},setCurrentStep:()=>{}})})},onSuccess:()=>{i==null||i(),o==null||o()},onError:p=>{r==null||r(p)}})}const xi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _mt-t-space-spa94665591 ",gi="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-center _gap-t-space-spa94665589 ",fi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665589 ";function hi({isOpen:t,onClose:i,onSuccess:o,token:r=De,tokenRewards:s,isPendingTransaction:n=!1,iconUrl:l}){const[d,u]=(0,a.useState)(null),{t:p}=S(),g=pi({tokenRewards:s,token:r}),{mutate:b,isPending:A}=ui({token:r,onSuccess:o,onClose:i,onError:I=>{Bt(I)||(ie.error(I,{tags:{file:"LpIncentiveClaimModal",function:"useLpIncentiveClaimMutation"}}),u(p("pool.incentives.collectFailed")))}}),c=Be(({skipAnalytics:I=!1}={})=>{I||q($.LpIncentiveCollectRewardsRetry),u(null),b()});(0,a.useEffect)(()=>{t&&!n&&c({skipAnalytics:!0})},[t,n,c]);const v=Ai({isLoading:A,isPendingTransaction:n,onClaim:()=>c()});return(0,e.jsx)(Xt,{isOpen:t,icon:l?(0,e.jsx)(Ie,{src:l,width:z.icon48,height:z.icon48,objectFit:"cover"}):void 0,title:p("pool.incentives.collectingRewards"),subtext:(0,e.jsxs)("div",{className:fi,children:[(0,e.jsx)("div",{className:gi,children:(0,e.jsx)(x,{variant:"body2",children:`${g} ${r.symbol}`})}),d&&(0,e.jsx)("div",{className:xi,children:(0,e.jsx)(Ft,{severity:It.Medium,description:p("pool.incentives.collectFailed"),hideCtaIcon:!0})})]}),displayHelpCTA:!0,onClose:i,primaryButtonOnClick:v.onClick,isPrimaryButtonLoading:v.isLoading,modalName:dt.LpIncentiveClaimModal,primaryButtonText:v.title})}var bi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAuQAAADACAYAAABMBnZsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATZSURBVHgB7d2hcQQwEARByUSRPHL+8Z0TEHA90JBuPAEsuJL2zJwFAAAkfhYAAJAxyAEAIGSQAwBAyCAHAIDQdZB/Pp/f9U9arVar1Wq1Wq32+3Z7ZQUAADpOVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgdB3kvjrVarVarVar1WrftHtmzgIAABJOVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgdB3kvjrVarVarVar1WrftHtmzgIAABJOVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgdB3kvjrVarVarVar1WrftHtmzgIAABJOVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgdB3kvjrVarVarVar1WrftHtmzgIAABJOVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgdB3kvjrVarVarVar1WrftHtmzgIAABJOVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgdB3kvjrVarVarVar1WrftHtmzgIAABJOVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgdB3kvjrVarVarVar1WrftHtmzgIAABJOVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgdB3kvjrVarVarVar1WrftHtmzgIAABJOVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgdB3kvjrVarVarVar1WrftHtmzgIAABJOVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgdB3kvjrVarVarVar1WrftHtmzgIAABJOVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgdB3kvjrVarVarVar1WrftHtmzgIAABJOVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgdB3kvjrVarVarVar1WrftHtmzgIAABJOVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgdB3kvjrVarVarVar1WrftHtmzgIAABJOVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgdB3kvjrVarVarVar1WrftHtmzgIAABJOVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgdB3kvjrVarVarVar1WrftHtmzgIAABJOVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgdB3kvjrVarVarVar1WrftHtmzgIAABJOVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAg9AdapOUDos0ifQAAAABJRU5ErkJggg==",vi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAuQAAADACAYAAABMBnZsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATWSURBVHgB7d2xbQQgFAXBj2P6cP81XGOmAALrAjaZkci2gBcgWDOzBwAASPwMAACQMcgBACBkkAMAQMggBwCA0HWQfz6f3/knrVar1Wq1Wq1W+327xisrAACQcWUFAABCBjkAAIQMcgAACBnkAAAQMsgBACBkkAMAQMggBwCAkEEOAAAhgxwAAELXQe6rU61Wq9VqtVqt9k27ztkDAAAkXFkBAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgZJADAEDIIAcAgNB1kPvqVKvVarVarVarfdOuc/YAAAAJV1YAACBkkAMAQMggBwCAkEEOAAAhgxwAAEIGOQAAhAxyAAAIGeQAABAyyAEAIHQd5L461Wq1Wq1Wq9Vq37TrnD0AAEDClRUAAAgZ5AAAEDLIAQAgZJADAEDIIAcAgJBBDgAAIYMcAABCBjkAAIQMcgAACF0Hua9OtVqtVqvVarXaN+06Zw8AAJBwZQUAAEIGOQAAhAxyAAAIGeQAABAyyAEAIGSQAwBAyCAHAICQQQ4AACGDHAAAQtdB7qtTrVar1Wq1Wq32TbvO2QMAACRcWQEAgJBBDgAAIYMcAABCBjkAAIQMcgAACBnkAAAQMsgBACBkkAMAQMggBwCA0HWQ++pUq9VqtVqtVqt9065z9gAAAAlXVgAAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgdB3kvjrVarVarVar1WrftOucPQAAQMKVFQAACBnkAAAQMsgBACBkkAMAQMggBwCAkEEOAAAhgxwAAEIGOQAAhAxyAAAIXQe5r061Wq1Wq9Vqtdo37TpnDwAAkHBlBQAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgZJADAEDIIAcAgJBBDgAAIYMcAABC10Huq1OtVqvVarVarfZNu87ZAwAAJFxZAQCAkEEOAAAhgxwAAEIGOQAAhAxyAAAIGeQAABAyyAEAIGSQAwBAyCAHAIDQdZD76lSr1Wq1Wq1Wq33TrnP2AAAACVdWAAAgZJADAEDIIAcAgJBBDgAAIYMcAABCBjkAAIQMcgAACBnkAAAQMsgBACB0HeS+OtVqtVqtVqvVat+065w9AABAwpUVAAAIGeQAABAyyAEAIGSQAwBAyCAHAICQQQ4AACGDHAAAQgY5AACEDHIAAAhdB7mvTrVarVar1Wq12jftOmcPAACQcGUFAABCBjkAAIQMcgAACBnkAAAQMsgBACBkkAMAQMggBwCAkEEOAAAhgxwAAELXQe6rU61Wq9VqtVqt9k27ztkDAAAkXFkBAICQQQ4AACGDHAAAQgY5AACEDHIAAAgZ5AAAEDLIAQAgZJADAEDIIAcAgNB1kPvqVKvVarVarVarfdOuc/YAAAAJV1YAACBkkAMAQMggBwCAkEEOAAAhgxwAAEIGOQAAhAxyAAAIGeQAABAyyAEAIHQd5L461Wq1Wq1Wq9Vq37TrnD0AAEDClRUAAAgZ5AAAEDLIAQAgZJADAEDIIAcAgJBBDgAAIYMcAABCBjkAAIQMcgAACF0Hua9OtVqtVqvVarXaN+06Zw8AAJBwZQUAAEIGOQAAhAxyAAAIGeQAABAyyAEAIGSQAwBAyCAHAICQQQ4AACGDHAAAQn8TgNstrEdwkQAAAABJRU5ErkJggg==";function Ii(){const[t,i]=(0,a.useState)(!1),o=Nt();return(0,a.useEffect)(()=>{const r=o.some(s=>s.typeInfo.type===bt.LPIncentivesClaimRewards);i(r)},[o]),t}function Re(t,i=!0){return gt(Yt,t,{transport:ht,enabled:i})}const We=Ct("lpIncentivesLastClaimed",null);function Ci(){const t=Ii(),[i,o]=(0,a.useState)(!1),[r,s]=(0,a.useState)("0"),[n,l]=(0,a.useState)(!1),d=Z(),[,u]=M(We),{refetch:p}=Re({walletAddress:d.address,chainIds:[ye.Mainnet],reload:!0},!1),g=(0,a.useCallback)(async()=>{if(o(!1),l(!0),d.address)try{const{data:c}=await p(),v=c==null?void 0:c.totalUnclaimedAmountUni;u(v&&v!=="0"?{timestamp:Date.now(),amount:v}:null)}catch{u(null)}},[p,d.address,u]),b=(0,a.useCallback)(()=>{o(!0)},[]),A=(0,a.useCallback)(()=>{o(!1)},[]);return{isPendingTransaction:t,isModalOpen:i,tokenRewards:r,openModal:b,closeModal:A,setTokenRewards:s,onTransactionSuccess:g,hasCollectedRewards:n}}var Bi=ee(mt());const yi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665587 ",wi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665589 ",Si="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665591 ",ji="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665593 _alignItems-center ",Qi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _width-10037 _gap-t-space-spa94665587 ",xe="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 ",ge=(0,Bi.default)("5m");function Di({onCollectRewards:t,token:i=De,walletAddress:o,chainIds:r=[ye.Mainnet],setTokenRewards:s,initialHasCollectedRewards:n}){const{t:l}=S(),d=O(),u=rt(),p=ot(),g=it(),A=F().sm,{data:c,isLoading:v,error:I}=Re({walletAddress:o,chainIds:r},!!o),[B,H]=M(We),j=(0,a.useMemo)(()=>n?!0:!B||!(c!=null&&c.totalUnclaimedAmountUni)?!1:Date.now()-B.timestamp<ge&&c.totalUnclaimedAmountUni===B.amount,[n,B,c==null?void 0:c.totalUnclaimedAmountUni]),{lpIncentiveRewards:L,userHasRewards:f,isParseRewardsError:y}=(0,a.useMemo)(()=>{if(j)return{lpIncentiveRewards:"0",userHasRewards:!1,isParseRewardsError:!1};try{const C=BigInt(10)**BigInt(i.decimals-3),G=(c==null?void 0:c.totalUnclaimedAmountUni)??"0";return{lpIncentiveRewards:Ve(G,i.decimals),userHasRewards:BigInt(G)>=C,isParseRewardsError:!1}}catch(C){return ie.error(C,{tags:{file:"LpIncentiveRewardsCard.tsx",function:"lpIncentiveRewards"}}),{lpIncentiveRewards:"-",userHasRewards:!1,isParseRewardsError:!0}}},[j,c==null?void 0:c.totalUnclaimedAmountUni,i.decimals]),N=(0,a.useMemo)(()=>!!(!f||I),[f,I]);(0,a.useEffect)(()=>{if(j){s("0");return}const C=(c==null?void 0:c.totalUnclaimedAmountUni)??"0";s(C)},[c==null?void 0:c.totalUnclaimedAmountUni,s,j]),(0,a.useEffect)(()=>{B&&Date.now()-B.timestamp>ge&&H(null)},[B,H]);const k=(0,a.useMemo)(()=>!!I||y,[I,y]),J=()=>v?(0,e.jsx)(St,{children:(0,e.jsx)(wt,{borderRadius:"$rounded4",height:A?20:36,opacity:.4,width:A?46:100,marginBottom:"$spacing4"})}):k?(0,e.jsx)(x,{variant:A?"subheading1":"heading2",color:"$neutral1",children:"-"}):(0,e.jsxs)(x,{variant:A?"subheading1":"heading2",color:f?"$accent1":"$neutral1",children:[L," ",i.symbol]});return(0,e.jsx)(w,{group:!0,cursor:"default",children:(0,e.jsxs)(w,{height:A?142:192,p:A?"$spacing16":"$spacing24",justifyContent:"space-between",backgroundColor:"$surface2",borderWidth:1,borderColor:"$surface3",borderRadius:"$rounded20",overflow:"hidden",transition:"all 0.2s ease-out","$group-hover":p["$platform-web"],...u,children:[(0,e.jsx)(w,{position:"absolute",top:0,left:0,right:0,bottom:0,background:`url(${g?vi:bi})`,backgroundPosition:"center",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",transition:"transform 0.2s ease-out","$group-hover":{transform:"scale(1.2)"}}),(0,e.jsx)("div",{className:xe,children:(0,e.jsxs)("div",{className:Qi,children:[(0,e.jsxs)("div",{className:xe,children:[(0,e.jsxs)("div",{className:ji,children:[J(),!k&&(0,e.jsx)(Ie,{src:He,width:A?24:28,height:A?24:28,objectFit:"cover"})]}),(0,e.jsx)(T,{emphasis:"primary",size:A?"xxsmall":"small",maxWidth:"fit-content",onPress:t,borderColor:N?"$neutral3":"unset",isDisabled:N,children:l("pool.incentives.collectRewards")})]}),(0,e.jsxs)("div",{className:Si,children:[(0,e.jsx)(x,{variant:A?"body4":"body3",color:"$neutral2",children:l(k?"pool.incentives.yourRewards.error":"pool.incentives.rewardsEarned")}),!st&&(0,e.jsx)(Ut,{placement:"top",trigger:(0,e.jsx)(ce,{children:(0,e.jsx)(Qe,{color:"$neutral3",size:"$icon.16"})}),text:(0,e.jsxs)("div",{className:wi,children:[(0,e.jsx)(x,{variant:"body4",color:"$neutral1",children:l(k?"pool.incentives.yourRewards.error.description":"pool.incentives.administeredRewards")}),!k&&(0,e.jsx)(_e,{logPress:!0,eventOnTrigger:$.LpIncentiveLearnMoreCtaClicked,children:(0,e.jsx)(Zt,{textVariant:"buttonLabel4",url:V.helpArticleUrls.lpIncentiveInfo})})]})})]})]})}),(0,e.jsxs)("div",{className:yi,children:[(0,e.jsx)(_e,{logPress:!0,eventOnTrigger:$.LpIncentiveLearnMoreCtaClicked,children:(0,e.jsxs)(ce,{group:"item",row:!0,gap:"$spacing6",alignItems:"center",hoverStyle:{opacity:.8},onPress:()=>d("/explore/pools"),alignSelf:"flex-start",children:[(0,e.jsx)(x,{variant:A?"body4":"body3",color:"$neutral1",children:l("pool.incentives.uni.findMore")}),(0,e.jsx)(w,{animation:"simple",enterStyle:{x:0},x:0,"$group-item-hover":{x:4},children:(0,e.jsx)(kt,{color:"$neutral1",size:A?z.icon12:z.icon16})})]})}),(0,e.jsx)(x,{variant:A?"body4":"body3",color:"$neutral2",children:l("pool.incentives.eligible")})]})]})})}var ki=Di;const Hi="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-row _alignItems-center _height-10037 _gap-t-space-gap52 ",Li="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665586  _width-_sm_10037",Ei="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap56  _flexDirection-_sm_column",Vi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-16px ",Ri="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665593 _width-10037 _justifyContent-space-betwe3241 _alignItems-center ",fe={borderRadius:"$rounded16",py:"$padding8",px:"$padding12",backgroundColor:"$surface3",borderWidth:0,hoverStyle:{...D.hoverStyle,backgroundColor:"none"}},he=[W.V4,W.V3,W.V2];function Wi({showFilters:t=!0,selectedChain:i,selectedVersions:o,selectedStatus:r,onChainChange:s,onVersionChange:n,onStatusChange:l}){const{t:d}=S(),{chains:u}=te(),p=O(),g=F(),b=(0,a.useMemo)(()=>[R.IN_RANGE,R.OUT_OF_RANGE,R.CLOSED].map(f=>{const y=ri[f];return y?(0,e.jsxs)("div",{className:Ri,children:[(0,e.jsx)(Rt,{color:y.color}),(0,e.jsx)(pe,{py:"$spacing4",size:"$icon.18",hoverStyle:{opacity:.8,backgroundColor:"unset"},containerStyle:{flex:1},checkboxPosition:"end",checked:(r==null?void 0:r.includes(f))??!1,text:oi(f,d),onCheckPressed:()=>l(f)})]},`PositionsHeader-status-${f}`):(0,e.jsx)(e.Fragment,{})}),[r,l,d]),A=(0,a.useMemo)(()=>he.map(f=>(0,e.jsx)(pe,{py:"$spacing4",hoverStyle:{opacity:.8,backgroundColor:"unset"},checkboxPosition:"end",checked:(o==null?void 0:o.includes(f))??!1,text:ue(f),onCheckPressed:()=>n(f)},`PositionsHeader-version-${f}`)),[o,n]),c=(0,a.useMemo)(()=>he.map(f=>{const y=ue(f);return(0,e.jsx)(w,{p:"$spacing8",...D,onPress:()=>{p(`/positions/create/${y}`)},children:(0,e.jsx)(x,{variant:"body2",children:d("position.new.protocol",{protocol:y})})},`PositionsHeader-create-${y}`)}),[p,d]),[v,I]=(0,a.useState)(!1),[B,H]=(0,a.useState)(!1),[j,L]=(0,a.useState)(!1);return(0,e.jsxs)("div",{className:Vi,children:[(0,e.jsx)(x,{variant:"heading3",children:d("pool.positions.title")}),(0,e.jsx)("div",{className:Ei,children:t&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:Li,children:[(0,e.jsxs)(w,{row:!0,gap:"$gap8",px:"$padding16",backgroundColor:"$neutral1",borderTopLeftRadius:"$rounded16",borderBottomLeftRadius:"$rounded16",alignItems:"center",$sm:{justifyContent:"center"},justifyContent:"flex-start",flexGrow:1,...D,onPress:()=>{p("/positions/create/v4")},children:[(0,e.jsx)(Et,{size:20,color:"$surface1"}),(0,e.jsx)(x,{color:"$surface1",variant:"buttonLabel3",children:d("common.new")})]}),(0,e.jsx)(X,{containerStyle:{width:"auto"},menuLabel:(0,e.jsx)(w,{borderTopRightRadius:"$rounded16",borderBottomRightRadius:"$rounded16",backgroundColor:"$neutral1",justifyContent:"center",alignItems:"center",p:"$padding8",...D,children:(0,e.jsx)(et,{direction:"down",height:20,width:20,color:"$surface1"})}),buttonStyle:{borderWidth:0,p:0},dropdownStyle:{width:160},hideChevron:!0,isOpen:v,toggleOpen:()=>{I(f=>!f)},alignRight:g.sm,children:c})]}),(0,e.jsxs)("div",{className:Hi,children:[(0,e.jsx)(X,{isOpen:B,toggleOpen:()=>{H(f=>!f)},menuLabel:(0,e.jsx)(x,{variant:"buttonLabel3",children:d("common.status")}),dropdownStyle:{width:240},buttonStyle:fe,alignRight:!1,children:b}),(0,e.jsx)(X,{isOpen:j,toggleOpen:()=>L(f=>!f),menuLabel:(0,e.jsx)(x,{variant:"buttonLabel3",children:d("common.protocol")}),dropdownStyle:{width:160},buttonStyle:fe,children:A}),(0,e.jsx)(w,{alignItems:"center",justifyContent:"center",backgroundColor:"$surface3",borderRadius:"$rounded16",px:"$padding12",height:"100%",...D,children:(0,e.jsx)(jt,{includeAllNetworks:!0,selectedChain:i,onPressChain:s,chainIds:u,styles:{buttonPaddingY:"$spacing8"}})})]})]})})]})}function $i({onLoadMore:t,hasNextPage:i,isFetching:o,threshold:r=.1}){const s=(0,a.useRef)(null),[n,l]=(0,a.useState)(!1),d=Be(async()=>{if(!n){l(!0);try{await t()}catch(u){ie.warn("useInfiniteScroll","Failed to load more items",u)}finally{l(!1)}}});return(0,a.useEffect)(()=>{const u=s.current;if(!u)return()=>{};const p=new IntersectionObserver(g=>{const[b]=g;b.isIntersecting&&i&&!o&&!n&&d()},{threshold:r});return p.observe(u),()=>p.disconnect()},[i,o,d,r,n]),{sentinelRef:s}}const Pi="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-flex-end _gap-t-space-gap52 ",Mi="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665587 _alignItems-center ",Ti="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap52 ",zi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap1573 ",Oi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _pt-t-space-pad1331704925 _pr-t-space-pad1331704925 _pb-t-space-pad1331704925 _pl-t-space-pad1331704925 _borderTopLeftRadius-t-radius-ro291586424 _borderTopRightRadius-t-radius-ro291586424 _borderBottomRightRadius-t-radius-ro291586424 _borderBottomLeftRadius-t-radius-ro291586424 _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _borderTopWidth-t-space-spa94665586 _borderRightWidth-t-space-spa94665586 _borderBottomWidth-t-space-spa94665586 _borderLeftWidth-t-space-spa94665586 _justifyContent-space-betwe3241 _cursor-pointer _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid _backgroundColor-0hover-surface1Hov3121676 _borderTopColor-0hover-surface3Hov3121676 _borderRightColor-0hover-surface3Hov3121676 _borderBottomColor-0hover-surface3Hov3121676 _borderLeftColor-0hover-surface3Hov3121676 ";function Ni({pool:t}){const i=O(),{defaultChainId:o}=te(),{formatPercent:r}=vt(),s=Tt(t.chain)??o,n=t.token0?Ae(me(s,t.token0)):void 0,l=t.token1?Ae(me(s,t.token1)):void 0,d=t.boostedApr?r(t.boostedApr):null;return(0,e.jsxs)("div",{onClick:()=>i(`/explore/pools/${ct(s).toLowerCase()}/${t.id}`),className:Oi,children:[(0,e.jsxs)("div",{className:zi,children:[(0,e.jsx)(Kt,{currencies:[n,l],size:44}),(0,e.jsxs)("div",{className:Ti,children:[(0,e.jsxs)(x,{variant:"subheading2",children:[n==null?void 0:n.symbol," / ",l==null?void 0:l.symbol]}),(0,e.jsx)("div",{className:Mi,children:(0,e.jsx)(si,{size:"small",version:t.protocolVersion,feeTier:t.feeTier})})]})]}),(0,e.jsxs)("div",{className:Pi,children:[(0,e.jsxs)(x,{variant:"body2",color:"$neutral2",children:[r(t.apr.toFixed(3))," ",(0,e.jsx)(tt,{i18nKey:"pool.apr"})]}),d&&(0,e.jsx)(Qt,{formattedRewardApr:d})]})]})}const Gi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1569 ",qi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1598 ";function be({pools:t,title:i,isLoading:o}){return o?(0,e.jsxs)(ei,{children:[(0,e.jsx)(E,{}),(0,e.jsx)(E,{}),(0,e.jsx)(E,{}),(0,e.jsx)(E,{}),(0,e.jsx)(E,{}),(0,e.jsx)(E,{})]}):(0,e.jsxs)("div",{className:qi,children:[(0,e.jsx)(x,{variant:"subheading1",children:i}),(0,e.jsx)("div",{className:Gi,children:t.slice(0,6).map(r=>(0,e.jsx)(Ni,{pool:r},r.id))})]})}const ve="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1598 ",Ui="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-48px ",Zi=3;function Fi({chainId:t}){const i=Z(),{t:o}=S(),r=Se(we.LpIncentives),n=!F().xl,{data:l,isLoading:d,error:u}=Jt({input:{chainId:t?t.toString():ft}}),{topPools:p,topBoostedPools:g}=li({topPoolData:{data:l,isLoading:d,isError:!!u},sortState:{sortDirection:Mt.Desc,sortBy:Ht.TVL}}),b=g&&g.length>0&&!!i.address&&r,A=p&&p.length>0;return n?(0,e.jsxs)("div",{className:Ui,children:[b&&(0,e.jsxs)("div",{className:ve,children:[(0,e.jsx)(be,{title:o("pool.top.rewards"),pools:g.slice(0,Zi),isLoading:d}),(0,e.jsx)(K,{href:"/explore/pools",openInNewTab:!1,children:o("explore.more.unichain")})]}),A&&(0,e.jsxs)("div",{className:ve,children:[(0,e.jsx)(be,{title:o("pool.top.tvl"),pools:p,isLoading:d}),(0,e.jsx)(K,{href:"/explore/pools",openInNewTab:!1,children:o("explore.more.pools")})]})]}):null}const Ji="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1569 ",Yi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1631 ",Xi="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center _mb-t-space-spa1360334047 _gap-t-space-gap52  _flexDirection-_sm_column _alignItems-_sm_flex-start",Ki="  _display-flex _alignItems-stretch _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _flexGrow-1 _flexBasis-0px ",eo="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _height-10037 ",to="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _borderTopWidth-t-space-spa94665586 _borderRightWidth-t-space-spa94665586 _borderBottomWidth-t-space-spa94665586 _borderLeftWidth-t-space-spa94665586 _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 _mb-t-space-spa1360334047 _pt-t-space-pad1331704929 _pr-t-space-pad1331704929 _pb-t-space-pad1331704929 _pl-t-space-pad1331704929 _gap-t-space-gap1569 _justifyContent-center _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid ",$e="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1573 ",io=" _opacity-1",oo=" _opacity-0--6",ro=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1573 _mb-t-space-spa1360334076  ",so=" _mt-0px",no=" _mt-t-space-spa1360334043",ao=" _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _alignItems-center  ",lo="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _flexGrow-1 _gap-t-space-spa1360334047 _maxWidth-740px  _maxWidth-_xl_10037",co="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _width-10037 _gap-20px _pt-t-space-spa1360334047 _pb-t-space-spa1360334047 _pr-t-space-spa1360333989 _pl-t-space-spa1360333989  _flexDirection-_xl_column _gap-_xl_t-space-gap1573 _pr-_lg_t-space-spa1360334051 _pl-_lg_t-space-spa1360334051",po="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _height-20px _justifyContent-center _alignItems-center ",Ao="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _flexGrow-1 ",mo="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _borderTopLeftRadius-t-radius-ro291586424 _borderTopRightRadius-t-radius-ro291586424 _borderBottomRightRadius-t-radius-ro291586424 _borderBottomLeftRadius-t-radius-ro291586424 _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _borderTopWidth-t-space-spa94665586 _borderRightWidth-t-space-spa94665586 _borderBottomWidth-t-space-spa94665586 _borderLeftWidth-t-space-spa94665586 _borderTopStyle-solid _borderRightStyle-solid _borderBottomStyle-solid _borderLeftStyle-solid _alignItems-center _gap-t-space-gap1573 _overflowX-hidden _overflowY-hidden ",_o="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap1569  _flexDirection-_sm_column",Pe="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1598 _mb-t-space-spa1360334047 ",Me="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap56 ",Te="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _pt-t-space-pad1331704929 _pr-t-space-pad1331704929 _pb-t-space-pad1331704929 _pl-t-space-pad1331704929 _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 _backgroundColor-surface3 ",uo="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _pt-t-space-spa1360334047 _pr-t-space-spa1360334047 _pb-t-space-spa1360334047 _pl-t-space-spa1360334047 _justifyContent-center _gap-t-space-gap1573 _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _borderTopWidth-t-space-spa94665586 _borderRightWidth-t-space-spa94665586 _borderBottomWidth-t-space-spa94665586 _borderLeftWidth-t-space-spa94665586 _borderTopStyle-solid _borderRightStyle-solid _borderBottomStyle-solid _borderLeftStyle-solid ",ze="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334080 ",xo=25;function go(){const{t}=S(),i=O(),o=Gt();return(0,e.jsxs)("div",{className:ze,children:[(0,e.jsxs)("div",{className:uo,children:[(0,e.jsx)("div",{className:Te,children:(0,e.jsx)(Wt,{size:"$icon.24",color:"$neutral1"})}),(0,e.jsx)(x,{variant:"subheading1",children:t("positions.welcome.connect.wallet")}),(0,e.jsx)(x,{variant:"body2",color:"$neutral2",children:t("positions.welcome.connect.description")}),(0,e.jsxs)("div",{className:Me,children:[(0,e.jsx)(T,{variant:"default",size:"small",emphasis:"secondary",onPress:()=>i("/positions/create/v4"),children:t("position.new")}),(0,e.jsx)(T,{variant:"default",size:"small",width:160,onPress:o.open,children:t("common.connectWallet.button")})]})]}),(0,e.jsx)("div",{className:Pe,children:(0,e.jsxs)("div",{className:_o,children:[(0,e.jsx)(U,{width:"100%",img:Le,text:t("liquidity.provideOnProtocols"),link:V.helpArticleUrls.providingLiquidityInfo}),(0,e.jsx)(U,{width:"100%",img:Ee,text:t("liquidity.hooks"),link:V.helpArticleUrls.v4HooksInfo})]})})]})}function fo(){const{t}=S(),i=O();return(0,e.jsx)("div",{className:ze,children:(0,e.jsxs)(w,{padding:"$spacing24",centered:!0,gap:"$gap16",borderRadius:"$rounded12",borderColor:"$surface3",borderWidth:"$spacing1",borderStyle:"solid","$platform-web":{textAlign:"center"},children:[(0,e.jsx)("div",{className:Te,children:(0,e.jsx)(Vt,{size:"$icon.24",color:"$neutral1"})}),(0,e.jsx)(x,{variant:"subheading1",children:t("positions.noPositions.title")}),(0,e.jsx)(x,{variant:"body2",color:"$neutral2",maxWidth:420,children:t("positions.noPositions.description")}),(0,e.jsxs)("div",{className:Me,children:[(0,e.jsx)(T,{variant:"default",size:"small",emphasis:"secondary",onPress:()=>i("/explore/pools"),children:t("pools.explore")}),(0,e.jsx)(T,{variant:"default",size:"small",width:160,onPress:()=>i("/positions/create/v4"),children:t("position.new")})]})]})})}function U({img:t,text:i,link:o,width:r=344}){return(0,e.jsx)(re,{href:o,textDecorationLine:"none",target:"_blank",rel:"noopener noreferrer",width:r,...D,hoverStyle:{backgroundColor:"$surface1Hovered",borderColor:"$surface3Hovered"},children:(0,e.jsxs)("div",{className:mo,children:[(0,e.jsx)("img",{src:t,style:{objectFit:"cover",width:"72px",height:"72px"}}),(0,e.jsx)(x,{variant:"subheading2",children:i})]})})}const ho=oe(null),bo=oe([W.V4,W.V3,W.V2]),vo=oe([R.IN_RANGE,R.OUT_OF_RANGE]);function Io({positions:t,onLoadMore:i,hasNextPage:o,isFetching:r}){const{t:s}=S(),n=F(),l=(0,a.useMemo)(()=>n.sm?360:n.md?290:200,[n]),d=(0,a.useMemo)(()=>t.length*l,[l,t.length]),{sentinelRef:u}=$i({onLoadMore:i,hasNextPage:o,isFetching:r});return(0,e.jsxs)("div",{className:Ao,children:[(0,e.jsx)(Lt,{height:d,width:"100%",itemCount:t.length,itemSize:l,itemData:t,itemKey:p=>`${t[p].poolId}-${t[p].tokenId}-${t[p].chainId}`,children:({index:p,style:g,data:b})=>{const A=b[p];return(0,e.jsx)(w,{style:g,children:(0,e.jsx)(Ce,{style:{textDecoration:"none"},to:ke(A),children:(0,e.jsx)(je,{showVisibilityOption:!0,liquidityPosition:A,showMigrateButton:!0})},`${A.poolId}-${A.tokenId}-${A.chainId}`)})}}),o&&(0,e.jsx)("div",{ref:u,className:po,children:r&&(0,e.jsx)(x,{variant:"body3",color:"$neutral2",children:s("liquidityPool.positions.loadingMore")})})]})}function _l(){const t=Z(),{t:i}=S(),{address:o,isConnected:r}=t,s=Se(we.LpIncentives)&&r,[n,l]=M(ho),{chains:d}=te(),[u,p]=M(bo),[g,b]=M(vo),[A,c]=(0,a.useState)(!1),v=ai(),[I,B]=(0,a.useState)(!1),{isPendingTransaction:H,isModalOpen:j,tokenRewards:L,openModal:f,closeModal:y,setTokenRewards:N,onTransactionSuccess:k,hasCollectedRewards:J}=Ci(),{data:C,isPlaceholderData:G,refetch:Oe,isLoading:Ne,fetchNextPage:Ge,hasNextPage:se,isFetching:ne}=ut({address:o,chainIds:n?[n]:d,positionStatuses:g,protocolVersions:u,pageSize:xo,pageToken:"",includeHidden:!0},!r),ae=(0,a.useMemo)(()=>(C==null?void 0:C.pages.flatMap(m=>m.positions))||[],[C]),le=ti(),qe=!!t.address&&(Ne||!C),Y=(0,a.useMemo)(()=>[...ae,...le.filter(m=>{var _,h,Q;const P=!n||((_=m.data)===null||_===void 0||(_=_.position)===null||_===void 0?void 0:_.chainId)===n,Je=((h=m.data)===null||h===void 0||(h=h.position)===null||h===void 0?void 0:h.status)&&g.includes(m.data.position.status),Ye=((Q=m.data)===null||Q===void 0||(Q=Q.position)===null||Q===void 0?void 0:Q.protocolVersion)&&u.includes(m.data.position.protocolVersion);return P&&Je&&Ye}).map(m=>{var _;return(_=m.data)===null||_===void 0?void 0:_.position})].map(ni).filter(m=>!!m).reduce((m,_)=>{const h=`${_.poolId}-${_.tokenId}-${_.chainId}`;return m.some(P=>`${P.poolId}-${P.tokenId}-${P.chainId}`===h)||m.push(_),m},[]),[ae,le,n,g,u]),{visiblePositions:Ue,hiddenPositions:Ze}=(0,a.useMemo)(()=>{const m=[],_=[];return Y.forEach(h=>{v({poolId:h.poolId,tokenId:h.tokenId,chainId:h.chainId,isFlaggedSpam:h.isHidden})?m.push(h):_.push(h)}),{visiblePositions:m,hiddenPositions:_}},[Y,v]);Ot(Oe);const Fe=()=>{se&&!ne&&Ge()};return(0,e.jsxs)(qt,{logImpression:!0,page:pt.Positions,children:[(0,e.jsxs)("div",{className:co,children:[(0,e.jsxs)("div",{className:lo,children:[s&&(0,e.jsx)(ki,{walletAddress:t.address,onCollectRewards:()=>{q($.LpIncentiveCollectRewardsButtonClicked),f()},setTokenRewards:N,initialHasCollectedRewards:J}),(0,e.jsx)("div",{className:de(""+(ao+(s?no:so))),children:(0,e.jsx)(Wi,{showFilters:t.isConnected,selectedChain:n,selectedVersions:u,selectedStatus:g,onChainChange:m=>{l(m??null)},onVersionChange:m=>{p(_=>_.includes(m)?_.filter(h=>h!==m):[..._,m])},onStatusChange:m=>{b(_=>_.includes(m)?_.filter(h=>h!==m):[..._,m])}})}),qe?(0,e.jsx)("div",{className:$e,children:Array.from({length:5},(m,_)=>(0,e.jsx)(Dt,{},_))}):Y.length>0?(0,e.jsxs)("div",{className:de(""+(ro+(G?oo:io))),children:[(0,e.jsx)(Io,{positions:Ue,onLoadMore:Fe,hasNextPage:se,isFetching:ne}),(0,e.jsx)(Co,{showHiddenPositions:I,setShowHiddenPositions:B,hiddenPositions:Ze})]}):r?(0,e.jsx)(fo,{}):(0,e.jsx)(go,{}),!g.includes(R.CLOSED)&&!A&&t.address&&(0,e.jsxs)("div",{className:to,children:[(0,e.jsx)("div",{className:eo,children:(0,e.jsx)(Qe,{color:"$neutral2",size:"$icon.20"})}),(0,e.jsxs)("div",{className:Ki,children:[(0,e.jsx)(x,{variant:"body3",color:"$neutral1",children:i("pool.closedCTA.title")}),(0,e.jsx)(x,{variant:"body3",color:"$neutral2",children:i("pool.closedCTA.description")})]}),(0,e.jsx)(Ke,{onClose:()=>c(!0),size:"$icon.20"})]}),r&&(0,e.jsxs)("div",{className:Xi,children:[(0,e.jsx)(x,{variant:"body3",color:"$neutral2",children:i("pool.import.link.description")}),(0,e.jsx)(re,{href:"/pools/v2/find",textDecorationLine:"none",children:(0,e.jsx)(x,{variant:"body3",color:"$neutral1",...D,children:i("pool.import.positions.v2")})})]})]}),(0,e.jsxs)("div",{className:Yi,children:[(0,e.jsx)(Fi,{chainId:n}),r&&(0,e.jsxs)("div",{className:Pe,children:[(0,e.jsx)(x,{variant:"subheading1",children:i("liquidity.learnMoreLabel")}),(0,e.jsxs)("div",{className:Ji,children:[(0,e.jsx)(U,{img:Le,text:i("liquidity.provideOnProtocols"),link:V.helpArticleUrls.providingLiquidityInfo}),(0,e.jsx)(U,{img:Ee,text:i("liquidity.hooks"),link:V.helpArticleUrls.v4HooksInfo})]}),(0,e.jsx)(K,{href:V.helpArticleUrls.positionsLearnMore,children:i("common.button.learn")})]})]})]}),s&&(0,e.jsx)(hi,{isOpen:j,onClose:()=>y(),onSuccess:()=>{q($.LpIncentiveCollectRewardsSuccess,{token_rewards:L}),k()},tokenRewards:L,isPendingTransaction:H,iconUrl:He})]})}function Co({showHiddenPositions:t,setShowHiddenPositions:i,hiddenPositions:o}){const{t:r}=S();return(0,e.jsx)(ii,{isExpanded:t,toggle:()=>i(!t),numItems:o.length,title:r("common.hidden"),enableOverflow:!0,children:(0,e.jsx)("div",{className:$e,children:o.map(s=>(0,e.jsx)(Ce,{style:{textDecoration:"none"},to:ke(s),children:(0,e.jsx)(je,{showVisibilityOption:!0,liquidityPosition:s,isVisible:!1})},`${s.poolId}-${s.tokenId}-${s.chainId}`))})})}export{_l as default};
