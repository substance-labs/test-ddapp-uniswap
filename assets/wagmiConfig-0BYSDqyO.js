const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dist-C56DprdP.js","assets/_u64-XHsHocZf.js","assets/chunk-DgAfPHQg.js","assets/sha2-Jt0E41S_.js","assets/_u64-b_viZRi_.js","assets/sha256-BqbhXHGu.js","assets/sha3-CgNHASLp.js","assets/hooks.module-0zcZ9wNr.js","assets/eventemitter3-DFes51ku.js","assets/eventemitter3-BHLpX1jX.js","assets/dist-ceZDlR1V.js","assets/dist-CypGHuTY.js","assets/bn-D7somgUb.js","assets/events-Bnkik2bI.js","assets/inherits_browser-Dqx8HagI.js","assets/ms-BqmEYo6j.js","assets/dist-CBK-d0jO.js","assets/tslib.es6-Dbpxy1u8.js","assets/dist-Q7olfaoJ.js","assets/dist-QCpUvRkJ.js","assets/esm-CUAkrzMz.js","assets/isAddress-P2vaZgmG.js","assets/dist-VNSs5o0D.js","assets/encodeFunctionData-CD63gkvM.js","assets/slice-cfC6NcyN.js","assets/hashMessage-DdzTBpWL.js","assets/stringify-B82RFruy.js","assets/dist-DIwRLV4H.js","assets/utils-CGDZDFkg.js","assets/dist-Bq4a3M0L.js","assets/dist-BWRHWQ_J.js","assets/hash-05APZTFm.js","assets/lib-XGdDYWzD.js","assets/lib-DPFIyRke.js","assets/lib-CKG8APVv.js","assets/react-dom-xovCOntK.js","assets/react-CNoFhWkx.js","assets/client-BlU1ozBP.js"])))=>i.map(i=>d[i]);
import{__toDynamicImportESM as bt}from"./chunk-DgAfPHQg.js";import{__vitePreload as B}from"./preload-helper-CaakwtpC.js";import{CONNECTION_PROVIDER_IDS as Et,CONNECTION_PROVIDER_NAMES as Tt}from"./useEnabledChains-DuB86c95.js";import{UNISWAP_LOGO as Ot,isPlaywrightEnv as Ct,isTestEnv as Wt,logger as D}from"./hooks-BXO4d1DJ.js";import{ORDERED_EVM_CHAINS as Nt,getChainInfo as Y,getNonEmptyArrayOrThrow as kt,isTestnetChain as Lt}from"./utils-BX1Fu73x.js";import{fromHex as ft,getAddress as _,keccak256 as Ut,numberToHex as j,stringToHex as qt}from"./isAddress-P2vaZgmG.js";import{publicActions as jt}from"./public-fap09Zv6.js";import{ResourceUnavailableRpcError as M,RpcRequestError as Z,SwitchChainError as O,UserRejectedRequestError as A}from"./rpc-nQR4Ijs4.js";import{isAddress as Mt}from"./addresses-D56PBUHX.js";import{ProviderNotFoundError as U}from"./connector-Cw8HJLtm.js";import{WC_PARAMS as Rt,createConnector as x,getEmbeddedWalletState as ot,setChainId as xt,signMessagesWithPasskey as Ft,signTransactionsWithPasskey as Bt,signTypedDataWithPasskey as Ht,walletConnect as Kt}from"./embeddedWallet-BdHUTaHg.js";import{UNISWAP_WEB_URL as zt}from"./urls-kwiZbYPW.js";import{import_eventemitter3 as Gt}from"./eventemitter3-BHLpX1jX.js";import{ey as X,rD as Jt}from"./dist-BWRHWQ_J.js";import{withRetry as Vt}from"./createTransport-WEDNYdh5.js";import{createClient as at,custom as Qt}from"./useEthersProvider-CBgc_azi.js";import{fallback as It,getHttpRpcClient as Yt,http as G,withTimeout as St}from"./http-CIklBnX8.js";import{version as $}from"./useAccount-C5hwiBwN.js";import{ChainNotConfiguredError as R,ConnectorNotConnectedError as Zt}from"./config-CDfnfyHL.js";import{PLAYWRIGHT_CONNECT_ADDRESS as Xt}from"./constants-CGJJmXwV.js";import{isValidHexString as tt}from"./hex-njd-4N-2.js";var H=(function(a){function t(r){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},t(r)}function e(r,o){if(t(r)!="object"||!r)return r;var d=r[Symbol.toPrimitive];if(d!==void 0){var s=d.call(r,o||"default");if(t(s)!="object")return s;throw TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(r)}function c(r){var o=e(r,"string");return t(o)=="symbol"?o:o+""}function n(r,o,d){return(o=c(o))in r?Object.defineProperty(r,o,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[o]=d,r}return a.defineProperty=n,a})({}),et;function $t(a,{body:t,onError:e,onResponse:c}){return a.request({body:t,onError:e,onResponse:c}),a}async function te(a,{body:t,timeout:e=1e4}){return a.requestAsync({body:t,timeout:e})}const nt={http(a,t){return Yt(a).request(t)},webSocket:$t,webSocketAsync:te};function ee(a){const{key:t="public",name:e="Public Client"}=a;return at({...a,key:t,name:e,type:"publicClient"}).extend(jt)}V.type="injected";function V(a={}){const{shimDisconnect:t=!0,unstable_shimAsyncInject:e}=a;function c(){const s=a.target;if(typeof s=="function"){const i=s();if(i)return i}return typeof s=="object"?s:typeof s=="string"?{...ne[s]??{id:s,name:`${s[0].toUpperCase()}${s.slice(1)}`,provider:`is${s[0].toUpperCase()}${s.slice(1)}`}}:{id:"injected",name:"Injected",provider(i){return i==null?void 0:i.ethereum}}}let n,r,o,d;return x(s=>({get icon(){return c().icon},get id(){return c().id},get name(){return c().name},get supportsSimulation(){return!0},type:V.type,async setup(){const i=await this.getProvider();i!=null&&i.on&&a.target&&(o||(o=this.onConnect.bind(this),i.on("connect",o)),n||(n=this.onAccountsChanged.bind(this),i.on("accountsChanged",n)))},async connect({chainId:i,isReconnecting:u}={}){const l=await this.getProvider();if(!l)throw new U;let v=[];if(u)v=await this.getAccounts().catch(()=>[]);else if(t)try{var p;v=(p=(await l.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])===null||p===void 0||(p=p.caveats)===null||p===void 0||(p=p[0])===null||p===void 0||(p=p.value)===null||p===void 0?void 0:p.map(m=>_(m)),v.length>0&&(v=await this.getAccounts())}catch(y){const m=y;if(m.code===A.code)throw new A(m);if(m.code===M.code)throw m}try{var b,w;!(v!=null&&v.length)&&!u&&(v=(await l.request({method:"eth_requestAccounts"})).map(C=>_(C))),o&&(l.removeListener("connect",o),o=void 0),n||(n=this.onAccountsChanged.bind(this),l.on("accountsChanged",n)),r||(r=this.onChainChanged.bind(this),l.on("chainChanged",r)),d||(d=this.onDisconnect.bind(this),l.on("disconnect",d));let y=await this.getChainId();if(i&&y!==i){const m=await this.switchChain({chainId:i}).catch(C=>{if(C.code===A.code)throw C;return{id:y}});y=(m==null?void 0:m.id)??y}return t&&await((b=s.storage)===null||b===void 0?void 0:b.removeItem(`${this.id}.disconnected`)),a.target||await((w=s.storage)===null||w===void 0?void 0:w.setItem("injected.connected",!0)),{accounts:v,chainId:y}}catch(y){const m=y;throw m.code===A.code?new A(m):m.code===M.code?new M(m):m}},async disconnect(){var i,u;const l=await this.getProvider();if(!l)throw new U;r&&(l.removeListener("chainChanged",r),r=void 0),d&&(l.removeListener("disconnect",d),d=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await St(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}t&&await((i=s.storage)===null||i===void 0?void 0:i.setItem(`${this.id}.disconnected`,!0)),a.target||await((u=s.storage)===null||u===void 0?void 0:u.removeItem("injected.connected"))},async getAccounts(){const i=await this.getProvider();if(!i)throw new U;return(await i.request({method:"eth_accounts"})).map(l=>_(l))},async getChainId(){const i=await this.getProvider();if(!i)throw new U;const u=await i.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let i;const u=c();return typeof u.provider=="function"?i=u.provider(window):typeof u.provider=="string"?i=J(window,u.provider):i=u.provider,i&&!i.removeListener&&("off"in i&&typeof i.off=="function"?i.removeListener=i.off:i.removeListener=()=>{}),i},async isAuthorized(){try{var i;if(t&&await((i=s.storage)===null||i===void 0?void 0:i.getItem(`${this.id}.disconnected`)))return!1;if(!a.target){var u;if(!await((u=s.storage)===null||u===void 0?void 0:u.getItem("injected.connected")))return!1}if(!await this.getProvider()){if(e!==void 0&&e!==!1){const b=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",b),!!await this.getProvider()),w=typeof e=="number"?e:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(m=>window.addEventListener("ethereum#initialized",()=>m(b()),{once:!0}))]:[],new Promise(m=>setTimeout(()=>m(b()),w))]))return!0}throw new U}return!!(await Vt(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:i,chainId:u}){const l=await this.getProvider();if(!l)throw new U;const v=s.chains.find(m=>m.id===u);if(!v)throw new O(new R);const p=new Promise(m=>{const C=P=>{"chainId"in P&&P.chainId===u&&(s.emitter.off("change",C),m())};s.emitter.on("change",C)});try{return await Promise.all([l.request({method:"wallet_switchEthereumChain",params:[{chainId:j(u)}]}).then(async()=>{await this.getChainId()===u&&s.emitter.emit("change",{chainId:u})}),p]),v}catch(m){var b;const C=m;if(C.code===4902||(C==null||(b=C.data)===null||b===void 0||(b=b.originalError)===null||b===void 0?void 0:b.code)===4902)try{var w,y;const{default:P,...E}=v.blockExplorers??{};let h;i!=null&&i.blockExplorerUrls?h=i.blockExplorerUrls:P&&(h=[P.url,...Object.values(E).map(I=>I.url)]);let g;!(i==null||(w=i.rpcUrls)===null||w===void 0)&&w.length?g=i.rpcUrls:g=[((y=v.rpcUrls.default)===null||y===void 0?void 0:y.http[0])??""];const f={blockExplorerUrls:h,chainId:j(u),chainName:(i==null?void 0:i.chainName)??v.name,iconUrls:i==null?void 0:i.iconUrls,nativeCurrency:(i==null?void 0:i.nativeCurrency)??v.nativeCurrency,rpcUrls:g};return await Promise.all([l.request({method:"wallet_addEthereumChain",params:[f]}).then(async()=>{if(await this.getChainId()===u)s.emitter.emit("change",{chainId:u});else throw new A(new Error("User rejected switch after adding network."))}),p]),v}catch(P){throw new A(P)}throw C.code===A.code?new A(C):new O(C)}},async onAccountsChanged(i){if(i.length===0)this.onDisconnect();else if(s.emitter.listenerCount("connect")){var u;const l=(await this.getChainId()).toString();this.onConnect({chainId:l}),t&&await((u=s.storage)===null||u===void 0?void 0:u.removeItem(`${this.id}.disconnected`))}else s.emitter.emit("change",{accounts:i.map(l=>_(l))})},onChainChanged(i){const u=Number(i);s.emitter.emit("change",{chainId:u})},async onConnect(i){const u=await this.getAccounts();if(u.length===0)return;const l=Number(i.chainId);s.emitter.emit("connect",{accounts:u,chainId:l});const v=await this.getProvider();v&&(o&&(v.removeListener("connect",o),o=void 0),n||(n=this.onAccountsChanged.bind(this),v.on("accountsChanged",n)),r||(r=this.onChainChanged.bind(this),v.on("chainChanged",r)),d||(d=this.onDisconnect.bind(this),v.on("disconnect",d)))},async onDisconnect(i){const u=await this.getProvider();i&&i.code===1013&&u&&(await this.getAccounts()).length||(s.emitter.emit("disconnect"),u&&(r&&(u.removeListener("chainChanged",r),r=void 0),d&&(u.removeListener("disconnect",d),d=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}}))}const ne={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(a){return a!=null&&a.coinbaseWalletExtension?a.coinbaseWalletExtension:J(a,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(a){return J(a,t=>{if(!t.isMetaMask||t.isBraveWallet&&!t._events&&!t._state)return!1;const e=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const c of e)if(t[c])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(a){var t,e;return!(a==null||(t=a.phantom)===null||t===void 0)&&t.ethereum?(e=a.phantom)===null||e===void 0?void 0:e.ethereum:J(a,"isPhantom")}}};function J(a,t){function e(n){return typeof t=="function"?t(n):typeof t=="string"?n[t]:!0}const c=a.ethereum;if(c!=null&&c.providers)return c.providers.find(n=>e(n));if(c&&e(c))return c}dt.type="mock";function dt(a){const t=new Map,e=a.features??{defaultConnected:!1};let c=e.defaultConnected,n;return x(r=>({id:"mock",name:"Mock Connector",type:dt.type,async setup(){n=r.chains[0].id},async connect({chainId:o}={}){if(e.connectError)throw typeof e.connectError=="boolean"?new A(new Error("Failed to connect.")):e.connectError;const s=await(await this.getProvider()).request({method:"eth_requestAccounts"});let i=await this.getChainId();return o&&i!==o&&(i=(await this.switchChain({chainId:o})).id),c=!0,{accounts:s.map(u=>_(u)),chainId:i}},async disconnect(){c=!1},async getAccounts(){if(!c)throw new Zt;return(await(await this.getProvider()).request({method:"eth_accounts"})).map(s=>_(s))},async getChainId(){const d=await(await this.getProvider()).request({method:"eth_chainId"});return ft(d,"number")},async isAuthorized(){return!e.reconnect||!c?!1:!!(await this.getAccounts()).length},async switchChain({chainId:o}){const d=await this.getProvider(),s=r.chains.find(i=>i.id===o);if(!s)throw new O(new R);return await d.request({method:"wallet_switchEthereumChain",params:[{chainId:j(o)}]}),s},onAccountsChanged(o){o.length===0?this.onDisconnect():r.emitter.emit("change",{accounts:o.map(d=>_(d))})},onChainChanged(o){const d=Number(o);r.emitter.emit("change",{chainId:d})},async onDisconnect(o){r.emitter.emit("disconnect"),c=!1},async getProvider({chainId:o}={}){const s=(r.chains.find(u=>u.id===o)??r.chains[0]).rpcUrls.default.http[0];return Qt({request:async({method:u,params:l})=>{if(u==="eth_chainId")return j(n);if(u==="eth_requestAccounts")return a.accounts;if(u==="eth_signTypedData_v4"&&e.signTypedDataError)throw typeof e.signTypedDataError=="boolean"?new A(new Error("Failed to sign typed data.")):e.signTypedDataError;if(u==="wallet_switchEthereumChain"){if(e.switchChainError)throw typeof e.switchChainError=="boolean"?new A(new Error("Failed to switch chain.")):e.switchChainError;n=ft(l[0].chainId,"number"),this.onChainChanged(n.toString());return}if(u==="wallet_watchAsset"){if(e.watchAssetError)throw typeof e.watchAssetError=="boolean"?new A(new Error("Failed to switch chain.")):e.watchAssetError;return c}if(u==="wallet_getCapabilities")return{"0x2105":{paymasterService:{supported:l[0]==="0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266"},sessionKeys:{supported:!0}},"0x14A34":{paymasterService:{supported:l[0]==="0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266"}}};if(u==="wallet_sendCalls"){const w=[],y=l[0].calls;for(const C of y){const{result:P,error:E}=await nt.http(s,{body:{method:"eth_sendTransaction",params:[C]}});if(E)throw new Z({body:{method:u,params:l},error:E,url:s});w.push(P)}const m=Ut(qt(JSON.stringify(y)));return t.set(m,w),{id:m}}if(u==="wallet_getCallsStatus"){const w=t.get(l[0]);if(!w)return{atomic:!1,chainId:"0x1",id:l[0],status:100,receipts:[],version:"2.0.0"};const m=(await Promise.all(w.map(async C=>{const{result:P,error:E}=await nt.http(s,{body:{method:"eth_getTransactionReceipt",params:[C],id:0}});if(E)throw new Z({body:{method:u,params:l},error:E,url:s});return P?{blockHash:P.blockHash,blockNumber:P.blockNumber,gasUsed:P.gasUsed,logs:P.logs,status:P.status,transactionHash:P.transactionHash}:null}))).filter(C=>C!==null);return m.length===0?{atomic:!1,chainId:"0x1",id:l[0],status:100,receipts:[],version:"2.0.0"}:{atomic:!1,chainId:"0x1",id:l[0],status:200,receipts:m,version:"2.0.0"}}if(u==="wallet_showCallsStatus")return;if(u==="personal_sign"){if(e.signMessageError)throw typeof e.signMessageError=="boolean"?new A(new Error("Failed to sign message.")):e.signMessageError;u="eth_sign",l=[l[1],l[0]]}const v={method:u,params:l},{error:p,result:b}=await nt.http(s,{body:v});if(p)throw new Z({body:v,error:p,url:s});return b}})({retryCount:0})}}))}function ie(a){if(typeof window>"u")return;const t=e=>a(e.detail);return window.addEventListener("eip6963:announceProvider",t),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",t)}function re(){const a=new Set;let t=[];const e=()=>ie(n=>{t.some(({info:r})=>r.uuid===n.info.uuid)||(t=[...t,n],a.forEach(r=>r(t,{added:[n]})))});let c=e();return{_listeners(){return a},clear(){a.forEach(n=>n([],{removed:[...t]})),t=[]},destroy(){this.clear(),a.clear(),c==null||c()},findProvider({rdns:n}){return t.find(r=>r.info.rdns===n)},getProviders(){return t},reset(){this.clear(),c==null||c(),c=e()},subscribe(n,{emitImmediately:r}={}){return a.add(n),r&&n(t,{added:t}),()=>a.delete(n)}}}const oe=a=>(t,e,c)=>{const n=c.subscribe;return c.subscribe=(o,d,s)=>{let i=o;if(d){const u=(s==null?void 0:s.equalityFn)||Object.is;let l=o(c.getState());i=v=>{const p=o(v);if(!u(l,p)){const b=l;d(l=p,b)}},s!=null&&s.fireImmediately&&d(l,l)}return n(i)},a(t,e,c)},se=oe;function ce(a,t){let e;try{e=a()}catch{return}return{getItem:n=>{var r;const o=s=>s===null?null:JSON.parse(s,t==null?void 0:t.reviver),d=(r=e.getItem(n))!=null?r:null;return d instanceof Promise?d.then(o):o(d)},setItem:(n,r)=>e.setItem(n,JSON.stringify(r,t==null?void 0:t.replacer)),removeItem:n=>e.removeItem(n)}}const st=a=>t=>{try{const e=a(t);return e instanceof Promise?e:{then(c){return st(c)(e)},catch(c){return this}}}catch(e){return{then(c){return this},catch(c){return st(c)(e)}}}},ae=(a,t)=>(e,c,n)=>{let r={storage:ce(()=>localStorage),partialize:w=>w,version:0,merge:(w,y)=>({...y,...w}),...t},o=!1;const d=new Set,s=new Set;let i=r.storage;if(!i)return a((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),e(...w)},c,n);const u=()=>{const w=r.partialize({...c()});return i.setItem(r.name,{state:w,version:r.version})},l=n.setState;n.setState=(w,y)=>{l(w,y),u()};const v=a((...w)=>{e(...w),u()},c,n);n.getInitialState=()=>v;let p;const b=()=>{var w,y;if(!i)return;o=!1,d.forEach(C=>{var P;return C((P=c())!=null?P:v)});const m=((y=r.onRehydrateStorage)==null?void 0:y.call(r,(w=c())!=null?w:v))||void 0;return st(i.getItem.bind(i))(r.name).then(C=>{if(C)if(typeof C.version=="number"&&C.version!==r.version){if(r.migrate)return[!0,r.migrate(C.state,C.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,C.state];return[!1,void 0]}).then(C=>{var P;const[E,h]=C;if(p=r.merge(h,(P=c())!=null?P:v),e(p,!0),E)return u()}).then(()=>{m==null||m(p,void 0),p=c(),o=!0,s.forEach(C=>C(p))}).catch(C=>{m==null||m(void 0,C)})};return n.persist={setOptions:w=>{r={...r,...w},w.storage&&(i=w.storage)},clearStorage:()=>{i==null||i.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>b(),hasHydrated:()=>o,onHydrate:w=>(d.add(w),()=>{d.delete(w)}),onFinishHydration:w=>(s.add(w),()=>{s.delete(w)})},r.skipHydration||b(),p||v},de=ae,vt=a=>{let t;const e=new Set,c=(i,u)=>{const l=typeof i=="function"?i(t):i;if(!Object.is(l,t)){const v=t;t=u??(typeof l!="object"||l===null)?l:Object.assign({},t,l),e.forEach(p=>p(t,v))}},n=()=>t,d={setState:c,getState:n,getInitialState:()=>s,subscribe:i=>(e.add(i),()=>e.delete(i))},s=t=a(c,n,d);return d},it=a=>a?vt(a):vt;var ue=class{constructor(a){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Gt.default})}on(a,t){this._emitter.on(a,t)}once(a,t){this._emitter.once(a,t)}off(a,t){this._emitter.off(a,t)}emit(a,...t){const e=t[0];this._emitter.emit(a,{uid:this.uid,...e})}listenerCount(a){return this._emitter.listenerCount(a)}};function le(a){return new ue(a)}function he(a,t){return JSON.parse(a,(e,c)=>{let n=c;return(n==null?void 0:n.__type)==="bigint"&&(n=BigInt(n.value)),(n==null?void 0:n.__type)==="Map"&&(n=new Map(n.value)),(t==null?void 0:t(e,n))??n})}function gt(a,t){return a.slice(0,t).join(".")||"."}function pt(a,t){const{length:e}=a;for(let c=0;c<e;++c)if(a[c]===t)return c+1;return 0}function fe(a,t){const e=typeof a=="function",c=typeof t=="function",n=[],r=[];return function(d,s){if(typeof s=="object")if(n.length){const i=pt(n,this);i===0?n[n.length]=this:(n.splice(i),r.splice(i)),r[r.length]=d;const u=pt(n,s);if(u!==0)return c?t.call(this,d,s,gt(r,u)):`[ref=${gt(r,u)}]`}else n[0]=s,r[0]=d;return e?a.call(this,d,s):s}}function ve(a,t,e,c){return JSON.stringify(a,fe((n,r)=>{let o=r;return typeof o=="bigint"&&(o={__type:"bigint",value:r.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(r.entries())}),(t==null?void 0:t(n,o))??o},c),e??void 0)}function ge(a){const{deserialize:t=he,key:e="wagmi",serialize:c=ve,storage:n=Pt}=a;function r(o){return o instanceof Promise?o.then(d=>d).catch(()=>null):o}return{...n,key:e,async getItem(o,d){const s=n.getItem(`${e}.${o}`),i=await r(s);return i?t(i)??null:d??null},async setItem(o,d){const s=`${e}.${o}`;d===null?await r(n.removeItem(s)):await r(n.setItem(s,c(d)))},async removeItem(o){await r(n.removeItem(`${e}.${o}`))}}}const Pt={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function pe(){const a=typeof window<"u"&&window.localStorage?window.localStorage:Pt;return{getItem(t){return a.getItem(t)},removeItem(t){a.removeItem(t)},setItem(t,e){try{a.setItem(t,e)}catch{}}}}const ct=256;let K=ct,z;function we(a=11){if(!z||K+a>ct*2){z="",K=0;for(let t=0;t<ct;t++)z+=(256+Math.random()*256|0).toString(16).substring(1)}return z.substring(K,K+++a)}function me(a){const{multiInjectedProviderDiscovery:t=!0,storage:e=ge({storage:pe()}),syncConnectedChain:c=!0,ssr:n=!1,...r}=a,o=typeof window<"u"&&t?re():void 0,d=it(()=>r.chains),s=it(()=>{const h=[],g=new Set;for(const f of r.connectors??[]){const I=i(f);if(h.push(I),!n&&I.rdns){const S=typeof I.rdns=="string"?[I.rdns]:I.rdns;for(const W of S)g.add(W)}}if(!n&&o){const f=o.getProviders();for(const I of f)g.has(I.info.rdns)||h.push(i(u(I)))}return h});function i(h){var g;const f=le(we()),I={...h({emitter:f,chains:d.getState(),storage:e,transports:r.transports}),emitter:f,uid:f.uid};return f.on("connect",P),(g=I.setup)===null||g===void 0||g.call(I),I}function u(h){const{info:g}=h,f=h.provider;return V({target:{...g,id:g.rdns,provider:f}})}const l=new Map;function v(h={}){const g=h.chainId??y.getState().chainId,f=d.getState().find(S=>S.id===g);if(h.chainId&&!f)throw new R;{const S=l.get(y.getState().chainId);if(S&&!f)return S;if(!f)throw new R}{const S=l.get(g);if(S)return S}let I;if(r.client)I=r.client({chain:f});else{const S=f.id,W=d.getState().map(T=>T.id),q={},ht=Object.entries(r);for(const[T,F]of ht)if(!(T==="chains"||T==="client"||T==="connectors"||T==="transports"))if(typeof F=="object")if(S in F)q[T]=F[S];else{if(W.some(Dt=>Dt in F))continue;q[T]=F}else q[T]=F;I=at({...q,chain:f,batch:q.batch??{multicall:!0},transport:T=>r.transports[S]({...T,connectors:s})})}return l.set(g,I),I}function p(){return{chainId:d.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let b;const w="0.0.0-canary-";$.startsWith(w)?b=Number.parseInt($.replace(w,"")):b=Number.parseInt($.split(".")[0]??"0");const y=it(se(e?de(p,{migrate(h,g){if(g===b)return h;const f=p(),I=m(h,f.chainId);return{...f,chainId:I}},name:"store",partialize(h){return{connections:{__type:"Map",value:Array.from(h.connections.entries()).map(([g,f])=>{const{id:I,name:S,type:W,uid:q}=f.connector;return[g,{...f,connector:{id:I,name:S,type:W,uid:q}}]})},chainId:h.chainId,current:h.current}},merge(h,g){typeof h=="object"&&h&&"status"in h&&delete h.status;const f=m(h,g.chainId);return{...g,...h,chainId:f}},skipHydration:n,storage:e,version:b}):p));y.setState(p());function m(h,g){return h&&typeof h=="object"&&"chainId"in h&&typeof h.chainId=="number"&&d.getState().some(f=>f.id===h.chainId)?h.chainId:g}c&&y.subscribe(({connections:h,current:g})=>{var f;return g?(f=h.get(g))===null||f===void 0?void 0:f.chainId:void 0},h=>{if(d.getState().some(f=>f.id===h))return y.setState(f=>({...f,chainId:h??f.chainId}))}),o==null||o.subscribe(h=>{const g=new Set,f=new Set;for(const S of s.getState())if(g.add(S.id),S.rdns){const W=typeof S.rdns=="string"?[S.rdns]:S.rdns;for(const q of W)f.add(q)}const I=[];for(const S of h){if(f.has(S.info.rdns))continue;const W=i(u(S));g.has(W.id)||I.push(W)}e&&!y.persist.hasHydrated()||s.setState(S=>[...S,...I],!0)});function C(h){y.setState(g=>{const f=g.connections.get(h.uid);return f?{...g,connections:new Map(g.connections).set(h.uid,{accounts:h.accounts??f.accounts,chainId:h.chainId??f.chainId,connector:f.connector})}:g})}function P(h){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(g=>{const f=s.getState().find(I=>I.uid===h.uid);return f?(f.emitter.listenerCount("connect")&&f.emitter.off("connect",C),f.emitter.listenerCount("change")||f.emitter.on("change",C),f.emitter.listenerCount("disconnect")||f.emitter.on("disconnect",E),{...g,connections:new Map(g.connections).set(h.uid,{accounts:h.accounts,chainId:h.chainId,connector:f}),current:h.uid,status:"connected"}):g})}function E(h){y.setState(g=>{const f=g.connections.get(h.uid);if(f){const S=f.connector;S.emitter.listenerCount("change")&&f.connector.emitter.off("change",C),S.emitter.listenerCount("disconnect")&&f.connector.emitter.off("disconnect",E),S.emitter.listenerCount("connect")||f.connector.emitter.on("connect",P)}if(g.connections.delete(h.uid),g.connections.size===0)return{...g,connections:new Map,current:null,status:"disconnected"};const I=g.connections.values().next().value;return{...g,connections:new Map(g.connections),current:I.connector.uid}})}return{get chains(){return d.getState()},get connectors(){return s.getState()},storage:e,getClient:v,get state(){return y.getState()},setState(h){let g;typeof h=="function"?g=h(y.getState()):g=h;const f=p();typeof g!="object"&&(g=f),Object.keys(f).some(S=>!(S in g))&&(g=f),y.setState(g,!0)},subscribe(h,g,f){return y.subscribe(h,g,f?{...f,fireImmediately:f.emitImmediately}:void 0)},_internal:{mipd:o,store:y,ssr:!!n,syncConnectedChain:c,transports:r.transports,chains:{setState(h){const g=typeof h=="function"?h(d.getState()):h;if(g.length!==0)return d.setState(g,!0)},subscribe(h){return d.subscribe(h)}},connectors:{providerDetailToConnector:u,setup:i,setState(h){return s.setState(typeof h=="function"?h(s.getState()):h,!0)},subscribe(h){return s.subscribe(h)}},events:{change:C,connect:P,disconnect:E}}}}function ye(a,t){return It(a,t)}Q.type="coinbaseWallet";function Q(a={}){return a.version==="3"||a.headlessMode?Ce(a):be(a)}function be(a){let t,e,c,n;return x(r=>({id:"coinbaseWalletSDK",name:"Coinbase Wallet",rdns:"com.coinbase.wallet",type:Q.type,async connect({chainId:o,...d}={}){try{const s=await this.getProvider(),i=(await s.request({method:"eth_requestAccounts",params:"instantOnboarding"in d&&d.instantOnboarding?[{onboarding:"instant"}]:[]})).map(l=>_(l));e||(e=this.onAccountsChanged.bind(this),s.on("accountsChanged",e)),c||(c=this.onChainChanged.bind(this),s.on("chainChanged",c)),n||(n=this.onDisconnect.bind(this),s.on("disconnect",n));let u=await this.getChainId();if(o&&u!==o){const l=await this.switchChain({chainId:o}).catch(v=>{if(v.code===A.code)throw v;return{id:u}});u=(l==null?void 0:l.id)??u}return{accounts:i,chainId:u}}catch(s){throw/(user closed modal|accounts received is empty|user denied account|request rejected)/i.test(s.message)?new A(s):s}},async disconnect(){var o;const d=await this.getProvider();e&&(d.removeListener("accountsChanged",e),e=void 0),c&&(d.removeListener("chainChanged",c),c=void 0),n&&(d.removeListener("disconnect",n),n=void 0),d.disconnect(),(o=d.close)===null||o===void 0||o.call(d)},async getAccounts(){return(await(await this.getProvider()).request({method:"eth_accounts"})).map(d=>_(d))},async getChainId(){const d=await(await this.getProvider()).request({method:"eth_chainId"});return Number(d)},async getProvider(){if(!t){const o=(()=>{var i;return typeof a.preference=="string"?{options:a.preference}:{...a.preference,options:((i=a.preference)===null||i===void 0?void 0:i.options)??"all"}})(),{createCoinbaseWalletSDK:d}=await B(async()=>{const{createCoinbaseWalletSDK:i}=await import("./dist-C56DprdP.js");return{createCoinbaseWalletSDK:i}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]));t=d({...a,appChainIds:r.chains.map(i=>i.id),preference:o}).getProvider()}return t},async isAuthorized(){try{return!!(await this.getAccounts()).length}catch{return!1}},async switchChain({addEthereumChainParameter:o,chainId:d}){const s=r.chains.find(b=>b.id===d);if(!s)throw new O(new R);const i=await this.getProvider();try{return await i.request({method:"wallet_switchEthereumChain",params:[{chainId:j(s.id)}]}),s}catch(b){if(b.code===4902)try{var u,l,v,p;let w;o!=null&&o.blockExplorerUrls?w=o.blockExplorerUrls:w=!((u=s.blockExplorers)===null||u===void 0)&&u.default.url?[(l=s.blockExplorers)===null||l===void 0?void 0:l.default.url]:[];let y;!(o==null||(v=o.rpcUrls)===null||v===void 0)&&v.length?y=o.rpcUrls:y=[((p=s.rpcUrls.default)===null||p===void 0?void 0:p.http[0])??""];const m={blockExplorerUrls:w,chainId:j(d),chainName:(o==null?void 0:o.chainName)??s.name,iconUrls:o==null?void 0:o.iconUrls,nativeCurrency:(o==null?void 0:o.nativeCurrency)??s.nativeCurrency,rpcUrls:y};return await i.request({method:"wallet_addEthereumChain",params:[m]}),s}catch(w){throw new A(w)}throw new O(b)}},onAccountsChanged(o){o.length===0?this.onDisconnect():r.emitter.emit("change",{accounts:o.map(d=>_(d))})},onChainChanged(o){const d=Number(o);r.emitter.emit("change",{chainId:d})},async onDisconnect(o){r.emitter.emit("disconnect");const d=await this.getProvider();e&&(d.removeListener("accountsChanged",e),e=void 0),c&&(d.removeListener("chainChanged",c),c=void 0),n&&(d.removeListener("disconnect",n),n=void 0)}}))}function Ce(a){let e,c,n,r,o;return x(d=>({id:"coinbaseWalletSDK",name:"Coinbase Wallet",rdns:"com.coinbase.wallet",type:Q.type,async connect({chainId:s}={}){try{const i=await this.getProvider(),u=(await i.request({method:"eth_requestAccounts"})).map(v=>_(v));n||(n=this.onAccountsChanged.bind(this),i.on("accountsChanged",n)),r||(r=this.onChainChanged.bind(this),i.on("chainChanged",r)),o||(o=this.onDisconnect.bind(this),i.on("disconnect",o));let l=await this.getChainId();if(s&&l!==s){const v=await this.switchChain({chainId:s}).catch(p=>{if(p.code===A.code)throw p;return{id:l}});l=(v==null?void 0:v.id)??l}return{accounts:u,chainId:l}}catch(i){throw/(user closed modal|accounts received is empty|user denied account)/i.test(i.message)?new A(i):i}},async disconnect(){const s=await this.getProvider();n&&(s.removeListener("accountsChanged",n),n=void 0),r&&(s.removeListener("chainChanged",r),r=void 0),o&&(s.removeListener("disconnect",o),o=void 0),s.disconnect(),s.close()},async getAccounts(){return(await(await this.getProvider()).request({method:"eth_accounts"})).map(i=>_(i))},async getChainId(){const i=await(await this.getProvider()).request({method:"eth_chainId"});return Number(i)},async getProvider(){if(!c){var s;const i=await(async()=>{const{default:b}=await B(async()=>{const{default:w}=await import("./dist-CypGHuTY.js").then(bt());return{default:w}},__vite__mapDeps([11,12,10,2,7,8,13,14,15,16,17,18,19]));return typeof b!="function"&&typeof b.default=="function"?b.default:b})();e=new i({...a,reloadOnDisconnect:!1});const u=(s=e.walletExtension)===null||s===void 0?void 0:s.getChainId(),l=d.chains.find(b=>a.chainId?b.id===a.chainId:b.id===u)||d.chains[0],v=a.chainId||(l==null?void 0:l.id),p=a.jsonRpcUrl||(l==null?void 0:l.rpcUrls.default.http[0]);c=e.makeWeb3Provider(p,v)}return c},async isAuthorized(){try{return!!(await this.getAccounts()).length}catch{return!1}},async switchChain({addEthereumChainParameter:s,chainId:i}){const u=d.chains.find(y=>y.id===i);if(!u)throw new O(new R);const l=await this.getProvider();try{return await l.request({method:"wallet_switchEthereumChain",params:[{chainId:j(u.id)}]}),u}catch(y){if(y.code===4902)try{var v,p,b,w;let m;s!=null&&s.blockExplorerUrls?m=s.blockExplorerUrls:m=!((v=u.blockExplorers)===null||v===void 0)&&v.default.url?[(p=u.blockExplorers)===null||p===void 0?void 0:p.default.url]:[];let C;!(s==null||(b=s.rpcUrls)===null||b===void 0)&&b.length?C=s.rpcUrls:C=[((w=u.rpcUrls.default)===null||w===void 0?void 0:w.http[0])??""];const P={blockExplorerUrls:m,chainId:j(i),chainName:(s==null?void 0:s.chainName)??u.name,iconUrls:s==null?void 0:s.iconUrls,nativeCurrency:(s==null?void 0:s.nativeCurrency)??u.nativeCurrency,rpcUrls:C};return await l.request({method:"wallet_addEthereumChain",params:[P]}),u}catch(m){throw new A(m)}throw new O(y)}},onAccountsChanged(s){s.length===0?this.onDisconnect():d.emitter.emit("change",{accounts:s.map(i=>_(i))})},onChainChanged(s){const i=Number(s);d.emitter.emit("change",{chainId:i})},async onDisconnect(s){d.emitter.emit("disconnect");const i=await this.getProvider();n&&(i.removeListener("accountsChanged",n),n=void 0),r&&(i.removeListener("chainChanged",r),r=void 0),o&&(i.removeListener("disconnect",o),o=void 0)}}))}ut.type="safe";function ut(a={}){const{shimDisconnect:t=!1}=a;let e,c;return x(n=>({id:"safe",name:"Safe",type:ut.type,async connect(){var r;const o=await this.getProvider();if(!o)throw new U;const d=await this.getAccounts(),s=await this.getChainId();return c||(c=this.onDisconnect.bind(this),o.on("disconnect",c)),t&&await((r=n.storage)===null||r===void 0?void 0:r.removeItem("safe.disconnected")),{accounts:d,chainId:s}},async disconnect(){var r;const o=await this.getProvider();if(!o)throw new U;c&&(o.removeListener("disconnect",c),c=void 0),t&&await((r=n.storage)===null||r===void 0?void 0:r.setItem("safe.disconnected",!0))},async getAccounts(){const r=await this.getProvider();if(!r)throw new U;return(await r.request({method:"eth_accounts"})).map(_)},async getProvider(){var r;if(typeof window<"u"&&((r=window)===null||r===void 0?void 0:r.parent)!==window){if(!e){const{default:d}=await B(async()=>{const{default:l}=await import("./esm-CUAkrzMz.js");return{default:l}},__vite__mapDeps([20,4,2,21,22,23,24,25,26])),s=new d(a),i=await St(()=>s.safe.getInfo(),{timeout:a.unstable_getInfoTimeout??10});if(!i)throw new Error("Could not load Safe information");const u=await(async()=>{const l=await B(()=>import("./dist-DIwRLV4H.js").then(bt()),__vite__mapDeps([27,28,1,2,6,22,13,18]));return typeof l.SafeAppProvider!="function"&&typeof l.default.SafeAppProvider=="function"?l.default.SafeAppProvider:l.SafeAppProvider})();e=new u(i,s)}return e}},async getChainId(){const r=await this.getProvider();if(!r)throw new U;return Number(r.chainId)},async isAuthorized(){try{var r;return t&&await((r=n.storage)===null||r===void 0?void 0:r.getItem("safe.disconnected"))?!1:!!(await this.getAccounts()).length}catch{return!1}},onAccountsChanged(){},onChainChanged(){},onDisconnect(){n.emitter.emit("disconnect")}}))}function wt(a,t,e,c,n,r,o){try{var d=a[r](o),s=d.value}catch(i){e(i);return}d.done?t(s):Promise.resolve(s).then(c,n)}function N(a){return function(){var t=this,e=arguments;return new Promise(function(c,n){var r=a.apply(t,e);function o(s){wt(r,c,n,o,d,"next",s)}function d(s){wt(r,c,n,o,d,"throw",s)}o(void 0)})}}function At(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function rt(a){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{},c=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(e).filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),c.forEach(function(n){At(a,n,e[n])})}return a}function Ie(a,t){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);t&&(c=c.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),e.push.apply(e,c)}return e}function mt(a,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Ie(Object(t)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(t,e))}),a}function Se(a){"@swc/helpers - typeof";return a&&typeof Symbol<"u"&&a.constructor===Symbol?"symbol":typeof a}function k(a,t){var e,c,n,r,o={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]};return r={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function d(i){return function(u){return s([i,u])}}function s(i){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,c&&(n=i[0]&2?c.return:i[0]?c.throw||((n=c.return)&&n.call(c),0):c.next)&&!(n=n.call(c,i[1])).done)return n;switch(c=0,n&&(i=[i[0]&2,n.value]),i[0]){case 0:case 1:n=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,c=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(n=o.trys,!(n=n.length>0&&n[n.length-1])&&(i[0]===6||i[0]===2)){o=0;continue}if(i[0]===3&&(!n||i[1]>n[0]&&i[1]<n[3])){o.label=i[1];break}if(i[0]===6&&o.label<n[1]){o.label=n[1],n=i;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(i);break}n[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(a,o)}catch(u){i=[6,u],c=0}finally{e=n=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}lt.type="binanceWallet";function lt(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t;return x(function(e){return{id:"wallet.binance.com",name:"Binance Wallet",type:lt.type,setup:function(){return N(function(){var n;return k(this,function(r){switch(r.label){case 0:return[4,this.getProvider()];case 1:return n=r.sent(),n&&n.on("connect",this.onConnect.bind(this)),[2]}})}).apply(this)},connect:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.chainId;return N(function(){var o,d,s;return k(this,function(i){switch(i.label){case 0:return r=r??56,[4,this.getProvider({chainId:r})];case 1:return o=i.sent(),o.on("accountsChanged",this.onAccountsChanged.bind(this)),o.on("chainChanged",this.onChainChanged.bind(this)),o.on("disconnect",this.onDisconnect.bind(this)),setTimeout(function(){return e.emitter.emit("message",{type:"connecting"})},0),o.setLng(a.lng||"en"),[4,o.enable()];case 2:return d=i.sent().map(function(u){return _(u)}),[4,this.getChainId()];case 3:return s=i.sent(),[2,{accounts:d,chainId:s}]}})}).apply(this)},disconnect:function(){return N(function(){var n;return k(this,function(r){switch(r.label){case 0:return[4,this.getProvider()];case 1:return n=r.sent(),n.disconnect(),n.removeListener("accountsChanged",this.onAccountsChanged),n.removeListener("chainChanged",this.onChainChanged),n.removeListener("disconnect",this.onDisconnect),[2]}})}).apply(this)},getAccounts:function(){return N(function(){return k(this,function(n){switch(n.label){case 0:return[4,this.getProvider()];case 1:return[4,n.sent().request({method:"eth_accounts"})];case 2:return[2,n.sent().map(function(r){return _(r)})]}})}).apply(this)},getChainId:function(){return N(function(){var n,r,o,d;return k(this,function(s){switch(s.label){case 0:return[4,this.getProvider()];case 1:return r=s.sent(),(n=r.chainId)!==null&&n!==void 0?(d=n,[3,4]):[3,2];case 2:return[4,r==null?void 0:r.request({method:"eth_chainId"})];case 3:d=s.sent(),s.label=4;case 4:return o=d,[2,X(o)]}})}).apply(this)},getProvider:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.chainId;return N(function(){var o,d,s,i,u;return k(this,function(l){switch(l.label){case 0:return(typeof window>"u"?"undefined":Se(window))>"u"?[2]:[4,B(()=>import("./dist-Bq4a3M0L.js"),__vite__mapDeps([29,30,9,8,2,31,14,10,19,32,33,12,18,34,35,36,37]))];case 1:return s=l.sent().default,i=r||((o=e.chains[0])===null||o===void 0?void 0:o.id),u=a.infuraId?{}:e.chains.reduce(function(v,p){return mt(rt({},v),At({},p.id,p.rpcUrls.default.http[0]))},{}),[2,(t=new s(mt(rt({},a),{chainId:i,rpc:rt({},u,(d=this.options)===null||d===void 0?void 0:d.rpc)})),t)]}})}).apply(this)},isAuthorized:function(){return N(function(){var n;return k(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getAccounts()];case 1:return[2,r.sent().length>0];case 2:return n=r.sent(),[2,!1];case 3:return[2]}})}).apply(this)},switchChain:function(n){var r=n.chainId;return N(function(){var o,d,s,i,u;return k(this,function(l){switch(l.label){case 0:if(o=e.chains.find(function(v){return v.id===r}),!o)throw new O(new R);return[4,this.getProvider()];case 1:d=l.sent(),s=j(o.id),l.label=2;case 2:return l.trys.push([2,4,,5]),[4,Promise.race([d.request({method:"wallet_switchEthereumChain",params:[{chainId:s}]}),new Promise(function(v){return e.emitter.once("change",function(p){var b=p.chainId;b===r&&v(r)})})])];case 3:return[2,(l.sent(),o)];case 4:throw i=l.sent(),u=typeof i=="string"?i:i==null?void 0:i.message,/user rejected request/i.test(u)?new A(i):new O(i);case 5:return[2]}})}).apply(this)},onAccountsChanged:function(n){n.length===0?e.emitter.emit("disconnect"):e.emitter.emit("change",{accounts:n.map(function(r){return _(r)})})},onChainChanged:function(n){var r=X(n);e.emitter.emit("change",{chainId:r})},onConnect:function(n){return N(function(){var r,o,d;return k(this,function(s){switch(s.label){case 0:return[4,this.getAccounts()];case 1:return r=s.sent(),r.length===0?[2]:(o=X(n.chainId),e.emitter.emit("connect",{accounts:r,chainId:o}),[4,this.getProvider()]);case 2:return d=s.sent(),d&&(d.removeListener("connect",this.onConnect.bind(this)),d.on("accountsChanged",this.onAccountsChanged.bind(this)),d.on("chainChanged",this.onChainChanged),d.on("disconnect",this.onDisconnect.bind(this))),[2]}})}).apply(this)},onDisconnect:function(n){return N(function(){var r;return k(this,function(o){switch(o.label){case 0:return e.emitter.emit("disconnect"),[4,this.getProvider()];case 1:return r=o.sent(),r.removeListener("accountsChanged",this.onAccountsChanged.bind(this)),r.removeListener("chainChanged",this.onChainChanged),r.removeListener("disconnect",this.onDisconnect.bind(this)),r.on("connect",this.onConnect.bind(this)),[2]}})}).apply(this)}}})}var Pe=function(){return Jt()?V:lt};const yt=a=>JSON.stringify(a,(t,e)=>typeof e=="bigint"?e.toString():e),L=new Error("Attempted embedded wallet function with no embedded wallet connected");var Ae=(et=class _t{constructor(){H.defineProperty(this,"listeners",void 0),H.defineProperty(this,"chainId",void 0),H.defineProperty(this,"publicClient",void 0),this.listeners=new Map;const{chainId:t}=ot();this.chainId=t??1,this.publicClient=void 0}static getInstance(){return this._instance||(this._instance=new _t),this._instance}getPublicClient(t){if(!this.publicClient||this.publicClient.chain!==Y(t)){var e,c;const n=Y(this.chainId),r=n.rpcUrls,o=((e=r.fallback)===null||e===void 0?void 0:e.http.map(d=>G(d)))??[];this.publicClient=ee({chain:n,transport:It([G((c=r.public)===null||c===void 0?void 0:c.http[0]),G(r.default.http[0]),...o])})}return this.publicClient}async request(t){switch(t.method){case"eth_call":return this.call(t.params);case"eth_estimateGas":return this.estimateGas(t.params);case"eth_accounts":return this.getAccounts();case"eth_sendTransaction":return this.sendTransaction(t.params);case"eth_chainId":return this.getChainId();case"eth_getTransactionByHash":var e;return this.getTransactionByHash((e=t.params)===null||e===void 0?void 0:e[0]);case"eth_getTransactionReceipt":var c;return this.getTransactionReceipt((c=t.params)===null||c===void 0?void 0:c[0]);case"wallet_switchEthereumChain":var n;return this.updateChainId((n=t.params)===null||n===void 0?void 0:n[0].chainId);case"eth_blockNumber":return this.getBlockNumber();case"personal_sign":return this.signMessage(t);case"eth_sign":return this.sign(t);case"eth_signTypedData_v4":return this.signTypedData(t);case"eth_getBlockByNumber":return this.getBlockNumber();case"eth_getCode":return this.getCode(t);default:throw D.error(L,{tags:{file:"EmbeddedWalletProvider.ts",function:"request"}}),L}}on(t,e){this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(e)}removeListener(t,e){this.listeners.has(t)&&this.listeners.get(t).delete(e)}off(t,e){this.listeners.has(t)&&this.listeners.get(t).delete(e)}emit(t,e){this.listeners.has(t)&&this.listeners.get(t).forEach(c=>c(e))}connect(t){this.chainId=t??1,xt(t??null),this.emit("connect",{chainId:this.chainId})}disconnect(t){this.emit("disconnect",t)}getAccount(){const{walletAddress:t}=ot(),e=Mt(t)||void 0;if(!e){D.debug("EmbeddedWalletProvider.ts","getAccount","No embedded wallet connected");return}return{address:e,signMessage:async({message:d})=>{try{const s=await Ft([d.toString()],e),i=s==null?void 0:s[0];if(!i||!tt(i))throw new Error(`Invalid signed message: ${i}`);return i}catch(s){throw D.error(s,{tags:{file:"EmbeddedWalletProvider.ts",function:"signMessage"}}),s}},signTransaction:async d=>{try{const s=await Bt([yt(d)],e),i=s==null?void 0:s[0];if(!i||!tt(i))throw new Error(`Invalid signed transaction: ${i}`);return i}catch(s){throw D.error(s,{tags:{file:"EmbeddedWalletProvider.ts",function:"signTransaction"}}),s}},signTypedData:async d=>{try{const s=await Ht([yt(d)],e),i=s==null?void 0:s[0];if(!i||!tt(i))throw new Error(`Invalid signature: ${i}`);return i}catch(s){throw D.error(s,{tags:{file:"EmbeddedWalletProvider.ts",function:"signTypedData"}}),s}},publicKey:e,source:"custom",type:"local"}}async estimateGas(t){const e=this.getAccount();if(!e){const r=new Error("Attempted embedded wallet function with no embedded wallet connected");throw D.error(r,{tags:{file:"EmbeddedWalletProvider.ts",function:"estimateGas"}}),r}return await this.getPublicClient(this.chainId).estimateGas({...t[0],account:e.address,value:BigInt(t[0].value??0)})}async call(t){const e=this.getPublicClient(this.chainId);let c=t[1];c==="latest"&&(c=await this.getBlockNumber());const{data:n}=await e.call({...t[0],blockNumber:c});return n}async getAccounts(){const t=this.getAccount();return[t==null?void 0:t.address]}async sendTransaction(t){try{const e=this.getAccount();if(!e)throw D.error(L,{tags:{file:"EmbeddedWalletProvider.ts",function:"sendTransaction"}}),L;const c=this.getPublicClient(this.chainId),[n,r]=await Promise.all([c.estimateFeesPerGas({chain:Y(this.chainId)}),c.getTransactionCount({address:e.address})]),o={...t[0],gas:BigInt(Number(t[0].gas??0))*BigInt(12)/BigInt(10),value:BigInt(t[0].value??0),chainId:this.chainId,maxFeePerGas:BigInt(t[0].maxFeePerGas??n.maxFeePerGas),maxPriorityFeePerGas:BigInt(t[0].maxPriorityFeePerGas??n.maxPriorityFeePerGas),nonce:t[0].nonce??r},d=await e.signTransaction(o);return await c.sendRawTransaction({serializedTransaction:d})}catch(e){D.debug("EmbeddedWalletProvider.ts","sendTransaction",e,t);return}}updateChainId(t){this.chainId=t,localStorage.setItem("embeddedUniswapWallet.chainId",`${t}`),this.emit("chainChanged",t)}getChainId(){return this.chainId}async getCode(t){var e;return await this.getPublicClient(this.chainId).getBytecode({address:(e=t.params)===null||e===void 0?void 0:e[0]})}async getBlockNumber(){return await this.getPublicClient(this.chainId).getBlockNumber()}async getTransactionByHash(t){const e=this.getPublicClient(this.chainId);try{const c=await e.getTransaction({hash:t});return{...c,type:c.typeHex}}catch(c){if(c.name==="TransactionNotFoundError")return null;throw D.error(c,{tags:{file:"EmbeddedWalletProvider.ts",function:"getTransactionByHash"}}),c}}async getTransactionReceipt(t){const e=this.getPublicClient(this.chainId);try{const{...c}=await e.getTransactionReceipt({hash:t});return c}catch(c){if(c.name==="TransactionNotFoundError")return null;throw D.error(c,{tags:{file:"EmbeddedWalletProvider.ts",function:"getTransactionReceipt"}}),c}}async signMessage(t){var e;const c=this.getAccount();if(!c)throw D.error(L,{tags:{file:"EmbeddedWalletProvider.ts",function:"signMessage"}}),L;return await c.signMessage({message:(e=t.params)===null||e===void 0?void 0:e[0]})}async sign(t){var e;const c=this.getAccount();if(!c)throw D.error(L,{tags:{file:"EmbeddedWalletProvider.ts",function:"sign"}}),L;return await c.signMessage((e=t.params)===null||e===void 0?void 0:e[0])}async signTypedData(t){const e=this.getAccount();if(!e)throw D.error(L,{tags:{file:"EmbeddedWalletProvider.ts",function:"signTypedData"}}),L;if(!t.params)throw new Error("Missing params");if(!t.params[0])throw new Error("Missing domain");return await e.signTypedData(JSON.parse(t.params[1]))}},H.defineProperty(et,"_instance",void 0),et);const _e=Ae.getInstance();function De(a={}){return x(t=>({id:Et.EMBEDDED_WALLET_CONNECTOR_ID,name:Tt.EMBEDDED_WALLET,type:"embeddedUniswapWallet",async setup(){(await this.getProvider()).on("connect",this.onConnect.bind(this))},async getProvider(){return _e},async connect({chainId:e}={}){const{walletAddress:c,isConnected:n}=ot();if(!c)throw new M(new Error("No accounts available"));if(!n)throw new M(new Error("Embedded wallet isConnected state must be updated to true before attempting connection. See useSignInWithPasskey hook."));const r=await this.getProvider();let o=[];o=await this.getAccounts().catch(()=>[]);try{var d;r.removeListener("connect",this.onConnect.bind(this)),r.on("accountsChanged",this.onAccountsChanged.bind(this)),r.on("chainChanged",this.onChainChanged),r.on("disconnect",this.onDisconnect.bind(this));let s=await this.getChainId();if(e&&s!==e&&(s=(await this.switchChain({chainId:e}).catch(u=>{if(u.code===A.code)throw u;return{id:s}})).id),await((d=t.storage)===null||d===void 0?void 0:d.removeItem("embeddedUniswapWallet.disconnected")),o.length===0)throw new M(new Error("No accounts available"));return{accounts:o,chainId:s}}catch(s){const i=s;throw i.code===A.code?new A(i):i.code===M.code?new M(i):i}},async disconnect(){var e;const c=await this.getProvider();c.removeListener("accountsChanged",this.onAccountsChanged.bind(this)),c.removeListener("chainChanged",this.onChainChanged),c.removeListener("disconnect",this.onDisconnect.bind(this)),c.on("connect",this.onConnect.bind(this)),(e=t.storage)===null||e===void 0||e.setItem("embeddedUniswapWallet.disconnected",!0)},async getAccounts(){return(await(await this.getProvider()).request({method:"eth_accounts"})).map(n=>_(n))},async getChainId(){const c=(await this.getProvider()).getChainId();return Number(c)},async isAuthorized(){try{return!!(await this.getAccounts()).length}catch{return!1}},async switchChain({chainId:e}){const c=await this.getProvider(),n=t.chains.find(r=>r.id===e);if(!n)throw new O(new R);try{return await Promise.all([c.request({method:"wallet_switchEthereumChain",params:[{chainId:e}]})]),n}catch(r){const o=r;throw o.code===A.code?new A(o):new O(o)}},async onAccountsChanged(e){if(e.length===0)this.onDisconnect();else if(t.emitter.listenerCount("connect")){var c;const n=(await this.getChainId()).toString();this.onConnect({chainId:n}),await((c=t.storage)===null||c===void 0?void 0:c.removeItem("embeddedUniswapWallet.disconnected"))}else t.emitter.emit("change",{accounts:e.map(n=>_(n))})},onChainChanged(e){const c=Number(e);t.emitter.emit("change",{chainId:c})},async onConnect(e){const c=await this.getAccounts();if(c.length===0)return;const n=Number(e.chainId);t.emitter.emit("connect",{accounts:c,chainId:n});const r=await this.getProvider();r.removeListener("connect",this.onConnect.bind(this)),r.on("accountsChanged",this.onAccountsChanged.bind(this)),r.on("chainChanged",this.onChainChanged),r.on("disconnect",this.onDisconnect.bind(this))},async onDisconnect(){const e=await this.getProvider();t.emitter.emit("disconnect"),e.removeListener("accountsChanged",this.onAccountsChanged.bind(this)),e.removeListener("chainChanged",this.onChainChanged),e.removeListener("disconnect",this.onDisconnect.bind(this)),e.on("connect",this.onConnect.bind(this))}}))}const Ee=Pe(),Te=a=>{var t,e,c,n;const r=[...((t=a.rpcUrls.interface)===null||t===void 0?void 0:t.http)??[],...((e=a.rpcUrls.default)===null||e===void 0?void 0:e.http)??[],...((c=a.rpcUrls.public)===null||c===void 0?void 0:c.http)??[],...((n=a.rpcUrls.fallback)===null||n===void 0?void 0:n.http)??[]];return Array.from(new Set(r.filter(Boolean)))};function Oe(a){const{includeMockConnector:t}=a,e=[Ee({showQrCodeModal:!0}),...Wt()&&!Ct()?[]:[Kt(Rt)],De(),Q({appName:"Uniswap",appLogoUrl:`${zt}${Ot}`,reloadOnDisconnect:!1}),ut()];return t?[...e,dt({features:{},accounts:[Xt]})]:e}function We(a){const{connectors:t,onFetchResponse:e=Ne}=a;return me({chains:kt(Nt),connectors:t,client({chain:c}){return at({chain:c,batch:{multicall:!0},pollingInterval:12e3,transport:ye(Te(c).map(n=>G(n,{onFetchResponse:r=>e(r,c,n)})))})}})}const Ne=(a,t,e)=>{if(a.status!==200){const c=`RPC provider returned non-200 status: ${a.status}`;Lt(t.id)?D.warn("wagmiConfig.ts","client",c,{extra:{chainId:t.id,url:e}}):D.error(new Error(c),{extra:{chainId:t.id,url:e},tags:{file:"wagmiConfig.ts",function:"client"}})}},ke=Oe({includeMockConnector:Ct()}),nn=We({connectors:ke});export{dt as mock,nn as wagmiConfig};
