import{__esm as Fe,__export as st,__toESM as ge}from"./chunk-DgAfPHQg.js";import{require_react as it}from"./react-CNoFhWkx.js";import{require_jsx_runtime as rt}from"./jsx-runtime-D7bMTQeG.js";import{Logger as De,arrayify as ae,init_lib$6 as at,init_lib$7 as nt}from"./lib-DPFIyRke.js";import{require_hash as lt}from"./hash-05APZTFm.js";var s=(function(e){function t(l,o,v){if(typeof l=="function"?l===o:l.has(o))return arguments.length<3?o:v;throw TypeError("Private element is not present on this object")}function i(l,o,v){return l.set(t(l,o),v),v}function r(l,o){if(o.has(l))throw TypeError("Cannot initialize the same private elements twice on an object")}function n(l,o,v){r(l,o),o.set(l,v)}function c(l,o){r(l,o),o.add(l)}function p(l,o){return l.get(t(l,o))}return e.assertClassBrand=t,e.classPrivateFieldGet2=p,e.classPrivateFieldInitSpec=n,e.classPrivateFieldSet2=i,e.classPrivateMethodInitSpec=c,e})({}),A,x,J,X,j,Y,L,Z,re,R,q,b,ue,K,I,C,d,he,G,H,ee,D,U,de,te,se,N,$,B,ie,y,fe,Ue=Fe({"../../node_modules/@ethersproject/sha2/lib.esm/types.js"(){(function(e){e.sha256="sha256",e.sha512="sha512"})(fe||(fe={}))}}),Be,ot=Fe({"../../node_modules/@ethersproject/sha2/lib.esm/_version.js"(){Be="sha2/5.7.0"}});function ct(e){return"0x"+z.ripemd160().update(ae(e)).digest("hex")}function ut(e){return"0x"+z.sha256().update(ae(e)).digest("hex")}function dt(e){return"0x"+z.sha512().update(ae(e)).digest("hex")}function ht(e,t,i){return fe[e]||Qe.throwError("unsupported algorithm "+e,De.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),"0x"+z.hmac(z.default[e],ae(t)).update(ae(i)).digest("hex")}var z,Qe,vt=Fe({"../../node_modules/@ethersproject/sha2/lib.esm/sha2.js"(){z=ge(lt()),at(),Ue(),nt(),ot(),Qe=new De(Be)}}),ft={};st(ft,{SupportedAlgorithm:()=>fe,computeHmac:()=>ht,ripemd160:()=>ct,sha256:()=>ut,sha512:()=>dt});var Jt=Fe({"../../node_modules/@ethersproject/sha2/lib.esm/index.js"(){vt(),Ue()}}),we=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Q=typeof window>"u"||"Deno"in globalThis;function V(){}function Xt(e,t){return typeof e=="function"?e(t):e}function Re(e){return typeof e=="number"&&e>=0&&e!==1/0}function We(e,t){return Math.max(e+(t||0)-Date.now(),0)}function pe(e,t){return typeof e=="function"?e(t):e}function _(e,t){return typeof e=="function"?e(t):e}function Yt(e,t){const{type:i="all",exact:r,fetchStatus:n,predicate:c,queryKey:p,stale:l}=e;if(p){if(r){if(t.queryHash!==pt(p,t.options))return!1}else if(!_e(t.queryKey,p))return!1}if(i!=="all"){const o=t.isActive();if(i==="active"&&!o||i==="inactive"&&o)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||n&&n!==t.state.fetchStatus||c&&!c(t))}function Zt(e,t){const{exact:i,status:r,predicate:n,mutationKey:c}=e;if(c){if(!t.options.mutationKey)return!1;if(i){if(Pe(t.options.mutationKey)!==Pe(c))return!1}else if(!_e(t.options.mutationKey,c))return!1}return!(r&&t.state.status!==r||n&&!n(t))}function pt(e,t){return((t==null?void 0:t.queryKeyHashFn)||Pe)(e)}function Pe(e){return JSON.stringify(e,(t,i)=>me(i)?Object.keys(i).sort().reduce((r,n)=>(r[n]=i[n],r),{}):i)}function _e(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(i=>_e(e[i],t[i])):!1}function Ae(e,t){if(e===t)return e;const i=Me(e)&&Me(t);if(i||me(e)&&me(t)){const r=i?e:Object.keys(e),n=r.length,c=i?t:Object.keys(t),p=c.length,l=i?[]:{};let o=0;for(let v=0;v<p;v++){const a=i?v:c[v];(!i&&r.includes(a)||i)&&e[a]===void 0&&t[a]===void 0?(l[a]=void 0,o++):(l[a]=Ae(e[a],t[a]),l[a]===e[a]&&e[a]!==void 0&&o++)}return n===p&&o===n?e:l}return t}function ye(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}function Me(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function me(e){if(!Ee(e))return!1;const t=e.constructor;if(t===void 0)return!0;const i=t.prototype;return!(!Ee(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Ee(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ft(e){return new Promise(t=>{setTimeout(t,e)})}function Se(e,t,i){return typeof i.structuralSharing=="function"?i.structuralSharing(e,t):i.structuralSharing!==!1?Ae(e,t):t}function es(e){return e}function ts(e,t,i=0){const r=[...e,t];return i&&r.length>i?r.slice(1):r}function ss(e,t,i=0){const r=[t,...e];return i&&r.length>i?r.slice(0,-1):r}var Le=Symbol();function Pt(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Le?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function yt(e,t){return typeof e=="function"?e(...t):!!e}var mt=(A=new WeakMap,x=new WeakMap,J=new WeakMap,class extends we{constructor(){super(),s.classPrivateFieldInitSpec(this,A,void 0),s.classPrivateFieldInitSpec(this,x,void 0),s.classPrivateFieldInitSpec(this,J,void 0),s.classPrivateFieldSet2(J,this,e=>{if(!Q&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){s.classPrivateFieldGet2(x,this)||this.setEventListener(s.classPrivateFieldGet2(J,this))}onUnsubscribe(){if(!this.hasListeners()){var e;(e=s.classPrivateFieldGet2(x,this))===null||e===void 0||e.call(this),s.classPrivateFieldSet2(x,this,void 0)}}setEventListener(e){var t;s.classPrivateFieldSet2(J,this,e),(t=s.classPrivateFieldGet2(x,this))===null||t===void 0||t.call(this),s.classPrivateFieldSet2(x,this,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){s.classPrivateFieldGet2(A,this)!==e&&(s.classPrivateFieldSet2(A,this,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof s.classPrivateFieldGet2(A,this)=="boolean"?s.classPrivateFieldGet2(A,this):((e=globalThis.document)===null||e===void 0?void 0:e.visibilityState)!=="hidden"}}),qe=new mt,St=(X=new WeakMap,j=new WeakMap,Y=new WeakMap,class extends we{constructor(){super(),s.classPrivateFieldInitSpec(this,X,!0),s.classPrivateFieldInitSpec(this,j,void 0),s.classPrivateFieldInitSpec(this,Y,void 0),s.classPrivateFieldSet2(Y,this,e=>{if(!Q&&window.addEventListener){const t=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",i)}}})}onSubscribe(){s.classPrivateFieldGet2(j,this)||this.setEventListener(s.classPrivateFieldGet2(Y,this))}onUnsubscribe(){if(!this.hasListeners()){var e;(e=s.classPrivateFieldGet2(j,this))===null||e===void 0||e.call(this),s.classPrivateFieldSet2(j,this,void 0)}}setEventListener(e){var t;s.classPrivateFieldSet2(Y,this,e),(t=s.classPrivateFieldGet2(j,this))===null||t===void 0||t.call(this),s.classPrivateFieldSet2(j,this,e(this.setOnline.bind(this)))}setOnline(e){s.classPrivateFieldGet2(X,this)!==e&&(s.classPrivateFieldSet2(X,this,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return s.classPrivateFieldGet2(X,this)}}),Ke=new St;function be(){let e,t;const i=new Promise((n,c)=>{e=n,t=c});i.status="pending",i.catch(()=>{});function r(n){Object.assign(i,n),delete i.resolve,delete i.reject}return i.resolve=n=>{r({status:"fulfilled",value:n}),e(n)},i.reject=n=>{r({status:"rejected",reason:n}),t(n)},i}function is(e){var t;let i;if((t=e.then(r=>(i=r,r)))===null||t===void 0||t.catch(V),i!==void 0)return{data:i}}function bt(e){return Math.min(1e3*2**e,3e4)}function He(e){return(e??"online")==="online"?Ke.isOnline():!0}var Ne=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Ge(e){return e instanceof Ne}function Gt(e){let t=!1,i=0,r=!1,n;const c=be(),p=h=>{if(!r){var f;u(new Ne(h)),(f=e.abort)===null||f===void 0||f.call(e)}},l=()=>{t=!0},o=()=>{t=!1},v=()=>qe.isFocused()&&(e.networkMode==="always"||Ke.isOnline())&&e.canRun(),a=()=>He(e.networkMode)&&e.canRun(),F=h=>{if(!r){var f;r=!0,(f=e.onSuccess)===null||f===void 0||f.call(e,h),n==null||n(),c.resolve(h)}},u=h=>{if(!r){var f;r=!0,(f=e.onError)===null||f===void 0||f.call(e,h),n==null||n(),c.reject(h)}},P=()=>new Promise(h=>{var f;n=S=>{(r||v())&&h(S)},(f=e.onPause)===null||f===void 0||f.call(e)}).then(()=>{var h;n=void 0,r||(h=e.onContinue)===null||h===void 0||h.call(e)}),m=()=>{if(r)return;let h;const f=i===0?e.initialPromise:void 0;try{h=f??e.fn()}catch(S){h=Promise.reject(S)}Promise.resolve(h).then(F).catch(S=>{var k;if(r)return;const M=e.retry??(Q?0:3),T=e.retryDelay??bt,ne=typeof T=="function"?T(i,S):T,le=M===!0||typeof M=="number"&&i<M||typeof M=="function"&&M(i,S);if(t||!le){u(S);return}i++,(k=e.onFail)===null||k===void 0||k.call(e,i,S),Ft(ne).then(()=>v()?void 0:P()).then(()=>{t?u(S):m()})})};return{promise:c,cancel:p,continue:()=>(n==null||n(),c),cancelRetry:l,continueRetry:o,canStart:a,start:()=>(a()?m():P().then(m),c)}}var Ct=e=>setTimeout(e,0);function gt(){let e=[],t=0,i=l=>{l()},r=l=>{l()},n=Ct;const c=l=>{t?e.push(l):n(()=>{i(l)})},p=()=>{const l=e;e=[],l.length&&n(()=>{r(()=>{l.forEach(o=>{i(o)})})})};return{batch:l=>{let o;t++;try{o=l()}finally{t--,t||p()}return o},batchCalls:l=>(...o)=>{c(()=>{l(...o)})},schedule:c,setNotifyFunction:l=>{i=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{n=l}}}var Oe=gt(),wt=(L=new WeakMap,class{constructor(){s.classPrivateFieldInitSpec(this,L,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Re(this.gcTime)&&s.classPrivateFieldSet2(L,this,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Q?1/0:300*1e3))}clearGcTimeout(){s.classPrivateFieldGet2(L,this)&&(clearTimeout(s.classPrivateFieldGet2(L,this)),s.classPrivateFieldSet2(L,this,void 0))}}),rs=(Z=new WeakMap,re=new WeakMap,R=new WeakMap,q=new WeakMap,b=new WeakMap,ue=new WeakMap,K=new WeakMap,I=new WeakSet,class extends wt{constructor(e){super(),s.classPrivateMethodInitSpec(this,I),s.classPrivateFieldInitSpec(this,Z,void 0),s.classPrivateFieldInitSpec(this,re,void 0),s.classPrivateFieldInitSpec(this,R,void 0),s.classPrivateFieldInitSpec(this,q,void 0),s.classPrivateFieldInitSpec(this,b,void 0),s.classPrivateFieldInitSpec(this,ue,void 0),s.classPrivateFieldInitSpec(this,K,void 0),s.classPrivateFieldSet2(K,this,!1),s.classPrivateFieldSet2(ue,this,e.defaultOptions),this.setOptions(e.options),this.observers=[],s.classPrivateFieldSet2(q,this,e.client),s.classPrivateFieldSet2(R,this,s.classPrivateFieldGet2(q,this).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,s.classPrivateFieldSet2(Z,this,Rt(this.options)),this.state=e.state??s.classPrivateFieldGet2(Z,this),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=s.classPrivateFieldGet2(b,this))===null||e===void 0?void 0:e.promise}setOptions(e){this.options={...s.classPrivateFieldGet2(ue,this),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&s.classPrivateFieldGet2(R,this).remove(this)}setData(e,t){const i=Se(this.state.data,e,this.options);return s.assertClassBrand(I,this,E).call(this,{data:i,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),i}setState(e,t){s.assertClassBrand(I,this,E).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,i;const r=(t=s.classPrivateFieldGet2(b,this))===null||t===void 0?void 0:t.promise;return(i=s.classPrivateFieldGet2(b,this))===null||i===void 0||i.cancel(e),r?r.then(V).catch(V):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(s.classPrivateFieldGet2(Z,this))}isActive(){return this.observers.some(e=>_(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Le||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!We(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(e=s.classPrivateFieldGet2(b,this))===null||e===void 0||e.continue()}onOnline(){var e;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(e=s.classPrivateFieldGet2(b,this))===null||e===void 0||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),s.classPrivateFieldGet2(R,this).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(s.classPrivateFieldGet2(b,this)&&(s.classPrivateFieldGet2(K,this)?s.classPrivateFieldGet2(b,this).cancel({revert:!0}):s.classPrivateFieldGet2(b,this).cancelRetry()),this.scheduleGc()),s.classPrivateFieldGet2(R,this).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||s.assertClassBrand(I,this,E).call(this,{type:"invalidate"})}fetch(e,t){var i,r,n;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(s.classPrivateFieldGet2(b,this))return s.classPrivateFieldGet2(b,this).continueRetry(),s.classPrivateFieldGet2(b,this).promise}if(e&&this.setOptions(e),!this.options.queryFn){const a=this.observers.find(F=>F.options.queryFn);a&&this.setOptions(a.options)}const c=new AbortController,p=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(s.classPrivateFieldSet2(K,this,!0),c.signal)})},l=()=>{const a=Pt(this.options,t),F={client:s.classPrivateFieldGet2(q,this),queryKey:this.queryKey,meta:this.meta};return p(F),s.classPrivateFieldSet2(K,this,!1),this.options.persister?this.options.persister(a,F,this):a(F)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:s.classPrivateFieldGet2(q,this),state:this.state,fetchFn:l};p(o),(i=this.options.behavior)===null||i===void 0||i.onFetch(o,this),s.classPrivateFieldSet2(re,this,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((r=o.fetchOptions)===null||r===void 0?void 0:r.meta))&&s.assertClassBrand(I,this,E).call(this,{type:"fetch",meta:(n=o.fetchOptions)===null||n===void 0?void 0:n.meta});const v=a=>{if(Ge(a)&&a.silent||s.assertClassBrand(I,this,E).call(this,{type:"error",error:a}),!Ge(a)){var F,u,P,m;(F=(u=s.classPrivateFieldGet2(R,this).config).onError)===null||F===void 0||F.call(u,a,this),(P=(m=s.classPrivateFieldGet2(R,this).config).onSettled)===null||P===void 0||P.call(m,this.state.data,a,this)}this.scheduleGc()};return s.classPrivateFieldSet2(b,this,Gt({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:c.abort.bind(c),onSuccess:a=>{var F,u,P,m;if(a===void 0){v(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(a)}catch(h){v(h);return}(F=(u=s.classPrivateFieldGet2(R,this).config).onSuccess)===null||F===void 0||F.call(u,a,this),(P=(m=s.classPrivateFieldGet2(R,this).config).onSettled)===null||P===void 0||P.call(m,a,this.state.error,this),this.scheduleGc()},onError:v,onFail:(a,F)=>{s.assertClassBrand(I,this,E).call(this,{type:"failed",failureCount:a,error:F})},onPause:()=>{s.assertClassBrand(I,this,E).call(this,{type:"pause"})},onContinue:()=>{s.assertClassBrand(I,this,E).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),s.classPrivateFieldGet2(b,this).start()}});function E(e){const t=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...$e(i.data,this.options),fetchMeta:e.meta??null};case"success":return{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return Ge(r)&&r.revert&&s.classPrivateFieldGet2(re,this)?{...s.classPrivateFieldGet2(re,this),fetchStatus:"idle"}:{...i,error:r,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=t(this.state),Oe.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),s.classPrivateFieldGet2(R,this).notify({query:this,type:"updated",action:e})})}function $e(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:He(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Rt(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,i=t!==void 0,r=i?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:i?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}var _t=(C=new WeakMap,d=new WeakMap,he=new WeakMap,G=new WeakMap,H=new WeakMap,ee=new WeakMap,D=new WeakMap,U=new WeakMap,de=new WeakMap,te=new WeakMap,se=new WeakMap,N=new WeakMap,$=new WeakMap,B=new WeakMap,ie=new WeakMap,y=new WeakSet,class extends we{constructor(e,t){super(),s.classPrivateMethodInitSpec(this,y),s.classPrivateFieldInitSpec(this,C,void 0),s.classPrivateFieldInitSpec(this,d,void 0),s.classPrivateFieldInitSpec(this,he,void 0),s.classPrivateFieldInitSpec(this,G,void 0),s.classPrivateFieldInitSpec(this,H,void 0),s.classPrivateFieldInitSpec(this,ee,void 0),s.classPrivateFieldInitSpec(this,D,void 0),s.classPrivateFieldInitSpec(this,U,void 0),s.classPrivateFieldInitSpec(this,de,void 0),s.classPrivateFieldInitSpec(this,te,void 0),s.classPrivateFieldInitSpec(this,se,void 0),s.classPrivateFieldInitSpec(this,N,void 0),s.classPrivateFieldInitSpec(this,$,void 0),s.classPrivateFieldInitSpec(this,B,void 0),s.classPrivateFieldInitSpec(this,ie,new Set),this.options=t,s.classPrivateFieldSet2(C,this,e),s.classPrivateFieldSet2(U,this,null),s.classPrivateFieldSet2(D,this,be()),this.options.experimental_prefetchInRender||s.classPrivateFieldGet2(D,this).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(s.classPrivateFieldGet2(d,this).addObserver(this),Te(s.classPrivateFieldGet2(d,this),this.options)?s.assertClassBrand(y,this,ve).call(this):this.updateResult(),s.assertClassBrand(y,this,ke).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ce(s.classPrivateFieldGet2(d,this),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ce(s.classPrivateFieldGet2(d,this),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,s.assertClassBrand(y,this,Xe).call(this),s.assertClassBrand(y,this,Ye).call(this),s.classPrivateFieldGet2(d,this).removeObserver(this)}setOptions(e){const t=this.options,i=s.classPrivateFieldGet2(d,this);if(this.options=s.classPrivateFieldGet2(C,this).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof _(this.options.enabled,s.classPrivateFieldGet2(d,this))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");s.assertClassBrand(y,this,Ze).call(this),s.classPrivateFieldGet2(d,this).setOptions(this.options),t._defaulted&&!ye(this.options,t)&&s.classPrivateFieldGet2(C,this).getQueryCache().notify({type:"observerOptionsUpdated",query:s.classPrivateFieldGet2(d,this),observer:this});const r=this.hasListeners();r&&xe(s.classPrivateFieldGet2(d,this),i,this.options,t)&&s.assertClassBrand(y,this,ve).call(this),this.updateResult(),r&&(s.classPrivateFieldGet2(d,this)!==i||_(this.options.enabled,s.classPrivateFieldGet2(d,this))!==_(t.enabled,s.classPrivateFieldGet2(d,this))||pe(this.options.staleTime,s.classPrivateFieldGet2(d,this))!==pe(t.staleTime,s.classPrivateFieldGet2(d,this)))&&s.assertClassBrand(y,this,ze).call(this);const n=s.assertClassBrand(y,this,Ve).call(this);r&&(s.classPrivateFieldGet2(d,this)!==i||_(this.options.enabled,s.classPrivateFieldGet2(d,this))!==_(t.enabled,s.classPrivateFieldGet2(d,this))||n!==s.classPrivateFieldGet2(B,this))&&s.assertClassBrand(y,this,Je).call(this,n)}getOptimisticResult(e){const t=s.classPrivateFieldGet2(C,this).getQueryCache().build(s.classPrivateFieldGet2(C,this),e),i=this.createResult(t,e);return Mt(this,i)&&(s.classPrivateFieldSet2(G,this,i),s.classPrivateFieldSet2(ee,this,this.options),s.classPrivateFieldSet2(H,this,s.classPrivateFieldGet2(d,this).state)),i}getCurrentResult(){return s.classPrivateFieldGet2(G,this)}trackResult(e,t){return new Proxy(e,{get:(i,r)=>(this.trackProp(r),t==null||t(r),Reflect.get(i,r))})}trackProp(e){s.classPrivateFieldGet2(ie,this).add(e)}getCurrentQuery(){return s.classPrivateFieldGet2(d,this)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=s.classPrivateFieldGet2(C,this).defaultQueryOptions(e),i=s.classPrivateFieldGet2(C,this).getQueryCache().build(s.classPrivateFieldGet2(C,this),t);return i.fetch().then(()=>this.createResult(i,t))}fetch(e){return s.assertClassBrand(y,this,ve).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),s.classPrivateFieldGet2(G,this)))}createResult(e,t){const i=s.classPrivateFieldGet2(d,this),r=this.options,n=s.classPrivateFieldGet2(G,this),c=s.classPrivateFieldGet2(H,this),p=s.classPrivateFieldGet2(ee,this),o=e!==i?e.state:s.classPrivateFieldGet2(he,this),{state:v}=e;let a={...v},F=!1,u;if(t._optimisticResults){const g=this.hasListeners(),oe=!g&&Te(e,t),W=g&&xe(e,i,t,r);(oe||W)&&(a={...a,...$e(v.data,e.options)}),t._optimisticResults==="isRestoring"&&(a.fetchStatus="idle")}let{error:P,errorUpdatedAt:m,status:h}=a;u=a.data;let f=!1;if(t.placeholderData!==void 0&&u===void 0&&h==="pending"){var S;let g;n!=null&&n.isPlaceholderData&&t.placeholderData===(p==null?void 0:p.placeholderData)?(g=n.data,f=!0):g=typeof t.placeholderData=="function"?t.placeholderData((S=s.classPrivateFieldGet2(se,this))===null||S===void 0?void 0:S.state.data,s.classPrivateFieldGet2(se,this)):t.placeholderData,g!==void 0&&(h="success",u=Se(n==null?void 0:n.data,g,t),F=!0)}if(t.select&&u!==void 0&&!f)if(n&&u===(c==null?void 0:c.data)&&t.select===s.classPrivateFieldGet2(de,this))u=s.classPrivateFieldGet2(te,this);else try{s.classPrivateFieldSet2(de,this,t.select),u=t.select(u),u=Se(n==null?void 0:n.data,u,t),s.classPrivateFieldSet2(te,this,u),s.classPrivateFieldSet2(U,this,null)}catch(g){s.classPrivateFieldSet2(U,this,g)}s.classPrivateFieldGet2(U,this)&&(P=s.classPrivateFieldGet2(U,this),u=s.classPrivateFieldGet2(te,this),m=Date.now(),h="error");const k=a.fetchStatus==="fetching",M=h==="pending",T=h==="error",ne=M&&k,le=u!==void 0,O={status:h,fetchStatus:a.fetchStatus,isPending:M,isSuccess:h==="success",isError:T,isInitialLoading:ne,isLoading:ne,data:u,dataUpdatedAt:a.dataUpdatedAt,error:P,errorUpdatedAt:m,failureCount:a.fetchFailureCount,failureReason:a.fetchFailureReason,errorUpdateCount:a.errorUpdateCount,isFetched:a.dataUpdateCount>0||a.errorUpdateCount>0,isFetchedAfterMount:a.dataUpdateCount>o.dataUpdateCount||a.errorUpdateCount>o.errorUpdateCount,isFetching:k,isRefetching:k&&!M,isLoadingError:T&&!le,isPaused:a.fetchStatus==="paused",isPlaceholderData:F,isRefetchError:T&&le,isStale:Ie(e,t),refetch:this.refetch,promise:s.classPrivateFieldGet2(D,this)};if(this.options.experimental_prefetchInRender){const g=ce=>{O.status==="error"?ce.reject(O.error):O.data!==void 0&&ce.resolve(O.data)},oe=()=>{const ce=s.classPrivateFieldSet2(D,this,O.promise=be());g(ce)},W=s.classPrivateFieldGet2(D,this);switch(W.status){case"pending":e.queryHash===i.queryHash&&g(W);break;case"fulfilled":(O.status==="error"||O.data!==W.value)&&oe();break;case"rejected":(O.status!=="error"||O.error!==W.reason)&&oe();break}}return O}updateResult(){const e=s.classPrivateFieldGet2(G,this),t=this.createResult(s.classPrivateFieldGet2(d,this),this.options);if(s.classPrivateFieldSet2(H,this,s.classPrivateFieldGet2(d,this).state),s.classPrivateFieldSet2(ee,this,this.options),s.classPrivateFieldGet2(H,this).data!==void 0&&s.classPrivateFieldSet2(se,this,s.classPrivateFieldGet2(d,this)),ye(t,e))return;s.classPrivateFieldSet2(G,this,t);const i=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,n=typeof r=="function"?r():r;if(n==="all"||!n&&!s.classPrivateFieldGet2(ie,this).size)return!0;const c=new Set(n??s.classPrivateFieldGet2(ie,this));return this.options.throwOnError&&c.add("error"),Object.keys(s.classPrivateFieldGet2(G,this)).some(p=>{const l=p;return s.classPrivateFieldGet2(G,this)[l]!==e[l]&&c.has(l)})};s.assertClassBrand(y,this,Ot).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&s.assertClassBrand(y,this,ke).call(this)}});function ve(e){s.assertClassBrand(y,this,Ze).call(this);let t=s.classPrivateFieldGet2(d,this).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(V)),t}function ze(){s.assertClassBrand(y,this,Xe).call(this);const e=pe(this.options.staleTime,s.classPrivateFieldGet2(d,this));if(Q||s.classPrivateFieldGet2(G,this).isStale||!Re(e))return;const i=We(s.classPrivateFieldGet2(G,this).dataUpdatedAt,e)+1;s.classPrivateFieldSet2(N,this,setTimeout(()=>{s.classPrivateFieldGet2(G,this).isStale||this.updateResult()},i))}function Ve(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(s.classPrivateFieldGet2(d,this)):this.options.refetchInterval)??!1}function Je(e){s.assertClassBrand(y,this,Ye).call(this),s.classPrivateFieldSet2(B,this,e),!(Q||_(this.options.enabled,s.classPrivateFieldGet2(d,this))===!1||!Re(s.classPrivateFieldGet2(B,this))||s.classPrivateFieldGet2(B,this)===0)&&s.classPrivateFieldSet2($,this,setInterval(()=>{(this.options.refetchIntervalInBackground||qe.isFocused())&&s.assertClassBrand(y,this,ve).call(this)},s.classPrivateFieldGet2(B,this)))}function ke(){s.assertClassBrand(y,this,ze).call(this),s.assertClassBrand(y,this,Je).call(this,s.assertClassBrand(y,this,Ve).call(this))}function Xe(){s.classPrivateFieldGet2(N,this)&&(clearTimeout(s.classPrivateFieldGet2(N,this)),s.classPrivateFieldSet2(N,this,void 0))}function Ye(){s.classPrivateFieldGet2($,this)&&(clearInterval(s.classPrivateFieldGet2($,this)),s.classPrivateFieldSet2($,this,void 0))}function Ze(){const e=s.classPrivateFieldGet2(C,this).getQueryCache().build(s.classPrivateFieldGet2(C,this),this.options);if(e===s.classPrivateFieldGet2(d,this))return;const t=s.classPrivateFieldGet2(d,this);s.classPrivateFieldSet2(d,this,e),s.classPrivateFieldSet2(he,this,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))}function Ot(e){Oe.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(s.classPrivateFieldGet2(G,this))}),s.classPrivateFieldGet2(C,this).getQueryCache().notify({query:s.classPrivateFieldGet2(d,this),type:"observerResultsUpdated"})})}function It(e,t){return _(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Te(e,t){return It(e,t)||e.state.data!==void 0&&Ce(e,t,t.refetchOnMount)}function Ce(e,t,i){if(_(t.enabled,e)!==!1){const r=typeof i=="function"?i(e):i;return r==="always"||r!==!1&&Ie(e,t)}return!1}function xe(e,t,i,r){return(e!==t||_(r.enabled,e)===!1)&&(!i.suspense||e.state.status!=="error")&&Ie(e,i)}function Ie(e,t){return _(t.enabled,e)!==!1&&e.isStaleByTime(pe(t.staleTime,e))}function Mt(e,t){return!ye(e.getCurrentResult(),t)}var w=ge(it()),Et=ge(rt()),et=w.createContext(void 0),kt=e=>{const t=w.useContext(et);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},as=({client:e,children:t})=>(w.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),(0,Et.jsx)(et.Provider,{value:e,children:t})),tt=w.createContext(!1),Tt=()=>w.useContext(tt),ns=tt.Provider;function xt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var jt=w.createContext(xt()),Dt=()=>w.useContext(jt),Ut=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Bt=e=>{w.useEffect(()=>{e.clearReset()},[e])},Qt=({result:e,errorResetBoundary:t,throwOnError:i,query:r,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(n&&e.data===void 0||yt(i,[e.error,r])),Wt=e=>{const t=e.staleTime;e.suspense&&(e.staleTime=typeof t=="function"?(...i)=>Math.max(t(...i),1e3):Math.max(t??1e3,1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},At=(e,t)=>e.isLoading&&e.isFetching&&!t,Lt=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,je=(e,t,i)=>t.fetchOptimistic(e).catch(()=>{i.clearReset()});function qt(e,t,i){var r,n,c,p;const l=kt(i),o=Tt(),v=Dt(),a=l.defaultQueryOptions(e);(r=l.getDefaultOptions().queries)===null||r===void 0||(n=r._experimental_beforeQuery)===null||n===void 0||n.call(r,a),a._optimisticResults=o?"isRestoring":"optimistic",Wt(a),Ut(a,v),Bt(v);const F=!l.getQueryCache().get(a.queryHash),[u]=w.useState(()=>new t(l,a)),P=u.getOptimisticResult(a),m=!o&&e.subscribed!==!1;if(w.useSyncExternalStore(w.useCallback(f=>{const S=m?u.subscribe(Oe.batchCalls(f)):V;return u.updateResult(),S},[u,m]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),w.useEffect(()=>{u.setOptions(a)},[a,u]),Lt(a,P))throw je(a,u,v);if(Qt({result:P,errorResetBoundary:v,throwOnError:a.throwOnError,query:l.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw P.error;if((c=l.getDefaultOptions().queries)===null||c===void 0||(p=c._experimental_afterQuery)===null||p===void 0||p.call(c,a,P),a.experimental_prefetchInRender&&!Q&&At(P,o)){var h;const f=F?je(a,u,v):(h=l.getQueryCache().get(a.queryHash))===null||h===void 0?void 0:h.promise;f==null||f.catch(V).finally(()=>{u.updateResult()})}return a.notifyOnChangeProps?P:u.trackResult(P)}function ls(e,t){return qt(e,_t,t)}export{ns as IsRestoringProvider,rs as Query,as as QueryClientProvider,_t as QueryObserver,wt as Removable,we as Subscribable,fe as SupportedAlgorithm,ts as addToEnd,ss as addToStart,ht as computeHmac,Gt as createRetryer,Ut as ensurePreventErrorBoundaryRetry,Pt as ensureQueryFn,Wt as ensureSuspenseTimers,je as fetchOptimistic,qe as focusManager,Xt as functionalUpdate,Qt as getHasError,Pe as hashKey,pt as hashQueryKeyByOptions,Jt as init_lib,es as keepPreviousData,ft as lib_exports,Zt as matchMutation,Yt as matchQuery,V as noop,Oe as notifyManager,Ke as onlineManager,_e as partialMatchKey,Ae as replaceEqualDeep,pe as resolveStaleTime,ct as ripemd160,ut as sha256,dt as sha512,ye as shallowEqualObjects,Lt as shouldSuspend,yt as shouldThrowError,Le as skipToken,is as tryResolveSync,qt as useBaseQuery,Bt as useClearResetErrorBoundary,Tt as useIsRestoring,ls as useQuery,kt as useQueryClient,Dt as useQueryErrorResetBoundary,At as willFetch};
