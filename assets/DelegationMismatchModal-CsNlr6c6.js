import{__toESM as C}from"./chunk-DgAfPHQg.js";import{require_react as $}from"./react-CNoFhWkx.js";import{AdaptiveWebPopoverContent as k,Button as R,Unitag as O,X as b,useShadowPropsShort as A}from"./src-DOOtfpHS.js";import{useTranslation as D}from"./useTranslation-BotBuoJf.js";import{require_jsx_runtime as L}from"./jsx-runtime-D7bMTQeG.js";import{CONNECTION_PROVIDER_IDS as U}from"./useEnabledChains-DuB86c95.js";import{trimToLength as y,useEvent as f,useOnClickOutside as z}from"./hooks-BXO4d1DJ.js";import{SharedEventName as S}from"./analytics.web-DLc1_wTk.js";import{Platform as F}from"./utils-BX1Fu73x.js";import{getValidAddress as P,sanitizeAddressText as H}from"./currencyId-Ci6selsx.js";import{UNITAG_SUFFIX as V}from"./constants-CZ9iND_H.js";import{ElementName as v}from"./element-Wnp4RkdY.js";import{ModalName as u}from"./modal-Dvm06CN4.js";import{shortenAddress as g}from"./addresses-D56PBUHX.js";import{FeatureFlags as X,useFeatureFlag as q}from"./hooks-Bp0VtWbX.js";import{sendAnalyticsEvent as E}from"./send.web-CrSXW2rw.js";import{useEmbeddedWalletState as G}from"./embeddedWallet-BdHUTaHg.js";import{uniswapUrls as K}from"./urls-kwiZbYPW.js";import{useAccount as N}from"./useAccount-C5hwiBwN.js";import{useDisconnect as Q}from"./useDisconnect-GQ6byqBk.js";import{useRecentConnectorId as Y}from"./constants-CGJJmXwV.js";import{Flex as J,Text as _}from"./Loader-D83W8G1W.js";import{Blocked as Z}from"./Blocked-BNx3Epiv.js";import{WalletAlertBadge as ee}from"./WalletAlertBadge-ChtBPtO6.js";import{DisplayNameType as m}from"./types-NWGai6aQ.js";import{useModalState as te}from"./useModalState-BcPI2EiQ.js";import{useUnitagsAddressQuery as oe}from"./Identicon-SnsLMqUD.js";import{useENSName as ie}from"./api-u3dxy1Uz.js";import{useIsMobile as ne}from"./useIsMobile-Cq3RSgOi.js";import{Xe as re}from"./styled-components-DbVO3u5J.js";import{Trace as se}from"./Trace-DgHN3Ak9.js";import{useSignInWithPasskey as ae}from"./useSignInWithPasskey-m9q4-FpM.js";import{StatusIcon as le}from"./StatusIcon-D9U7YL55.js";import{Dialog as ce}from"./Dialog-DZrFRjU_.js";const M=8;function de(o,t){const i={...{showShortenedEns:!1,includeUnitagSuffix:!1},...t},{showShortenedEns:n,includeUnitagSuffix:d,overrideDisplayName:l}=i,a=P({address:o,platform:F.EVM}),c=ie(a??void 0),{data:s}=oe({params:a?{address:a}:void 0});if(o)return l?{name:n?y(l,M):l,type:m.ENS}:s!=null&&s.username?{name:d?s.username+V:s.username,type:m.Unitag}:c.data?{name:n?y(c.data,M):c.data,type:m.ENS}:{name:`${H(g(o))}`,type:m.Address}}var x=C($()),e=C(L());const me="  _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _pr-t-space-spa1360334080 _pl-t-space-spa1360334080 _pt-t-space-spa94665593 _pb-t-space-spa94665593 _alignItems-center _justifyContent-center _borderTopWidth-1px _borderRightWidth-1px _borderBottomWidth-1px _borderLeftWidth-1px _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 _display-none _cursor-pointer _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid _opacity-0hover-0--8  _display-_md_flex",pe="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignSelf-stretch  _ml-_md_auto _alignSelf-_md_center",ue="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexDirection-column _flexShrink-0 ",_e="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665589 _alignItems-center ",fe="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665589 _width-7537 _justifyContent-center  _gap-_md_0px",xe="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa1360334080 _overflowX-hidden _overflowY-hidden ";function w(o){const t=de(o,{showShortenedEns:!0,includeUnitagSuffix:!0});return{displayName:(t==null?void 0:t.name)??g(o),showUnitagIcon:(t==null?void 0:t.type)===m.Unitag,showShortAddress:(t==null?void 0:t.type)===m.Unitag||(t==null?void 0:t.type)===m.ENS,shortAddress:g(o)}}function he({isOpen:o,walletAddress:t,displayName:r,showUnitagIcon:i,showShortAddress:n,shortAddress:d,onSignIn:l,onClose:a}){const{t:c}=D(),s=A(),p=(0,x.useRef)(null);z({node:p,handler:a});const h=ne();return(0,e.jsx)(k,{isOpen:o,id:"recently-connected-modal",backgroundColor:"transparent",children:(0,e.jsxs)(J,{ref:p,backgroundColor:"$surface1",p:"$spacing16",gap:"$spacing16",width:304,enterStyle:{x:24,opacity:0},exitStyle:{x:24,opacity:0},animation:["quick",{opacity:{overshootClamping:!0}}],borderWidth:1,borderColor:"$surface3",borderRadius:"$rounded20",$md:{borderWidth:0,flexDirection:"row",alignItems:"center",width:"100%"},...s,children:[(0,e.jsxs)("div",{className:xe,children:[(0,e.jsx)(le,{address:t,size:h?40:48}),(0,e.jsxs)("div",{className:fe,children:[(0,e.jsxs)("div",{className:_e,children:[(0,e.jsx)(_,{variant:"body1",numberOfLines:1,textOverflow:"ellipsis",whiteSpace:"nowrap",children:r}),i&&(0,e.jsx)("div",{className:ue,children:(0,e.jsx)(O,{size:16})}),(0,e.jsx)(b,{onPress:a,size:20,color:"$neutral3",ml:"auto",cursor:"pointer",hoverStyle:{opacity:.8},alignSelf:"flex-start",display:"flex",flexShrink:0,$md:{display:"none"}})]}),n&&(0,e.jsx)(_,{variant:"body3",color:"$neutral2",children:d})]})]}),(0,e.jsx)("div",{className:pe,children:(0,e.jsx)(R,{variant:"default",py:"$spacing8",emphasis:"primary",onPress:l,children:(0,e.jsx)(_,{variant:"buttonLabel3",color:"$surface1",lineHeight:"20px",children:c("nav.logIn.button")})})}),(0,e.jsx)("div",{className:me,children:(0,e.jsx)(b,{onPress:a,size:20,color:"$neutral3"})})]})})}function ge({walletAddress:o,account:t,isEmbeddedWalletEnabled:r,isOpenRef:i,recentConnectorId:n}){return!!o&&!(t.isConnected||t.isConnecting)&&r&&!i.current&&n===U.EMBEDDED_WALLET_CONNECTOR_ID}function ot(){const o=N(),{walletAddress:t}=G(),r=t??void 0,{isOpen:i,closeModal:n,openModal:d}=te(u.RecentlyConnectedModal),l=(0,x.useRef)(i),{signInWithPasskey:a}=ae({onSuccess:n}),c=q(X.EmbeddedWallet),s=Y(),p=w(r);return(0,x.useEffect)(()=>{ge({walletAddress:r,account:o,isEmbeddedWalletEnabled:c,isOpenRef:l,recentConnectorId:s})&&(d(),l.current=!0)},[r,o,c,d,s]),(0,x.useEffect)(()=>{o.isConnected&&i&&n()},[o.isConnected,o.isConnecting,i,n]),(0,e.jsx)(he,{isOpen:i,walletAddress:r,...p,onSignIn:()=>a(),onClose:n})}const be="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa94665589 ",ye="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-flex-start _width-10037 _mt-t-space-spa1360334080 _gap-t-space-spa94665593 ";function Se({onClose:o}){var t,r;const{t:i}=D(),n=N(),{displayName:d}=w(n.address),l=Q(),a=re(),c=((t=n.connector)===null||t===void 0?void 0:t.name)??i("common.your.connected.wallet"),s=(r=n.connector)===null||r===void 0?void 0:r.icon,p=[i("smartWallets.delegationMismatchModal.features.1ClickSwaps"),(0,e.jsxs)(e.Fragment,{children:[i("smartWallets.delegationMismatchModal.features.gasFreeSwaps"),(0,e.jsx)("span",{style:{color:a.neutral2},children:` (${i("uniswapx.label")})`})]}),i("smartWallets.delegationMismatchModal.features.limitOrders")],h=f(()=>{E(S.ELEMENT_CLICKED,{element:v.Continue,modal:u.DelegationMismatch})}),j=f(()=>{E(S.ELEMENT_CLICKED,{element:v.Disconnect,modal:u.DelegationMismatch})}),I=f(()=>{o(),l(),j()}),W=f(()=>{o(),h()});return(0,e.jsx)(se,{logImpression:!0,modal:u.DelegationMismatch,children:(0,e.jsx)(ce,{isOpen:!0,modalName:u.DelegationMismatch,title:i("smartWallets.delegationMismatchModal.title"),subtext:(0,e.jsx)(_,{variant:"body3",color:"$neutral2",textAlign:"left",pr:"$spacing4",children:i("smartWallets.delegationMismatchModal.description",{walletName:c,displayName:d})}),icon:(0,e.jsx)(ee,{walletIcon:s}),primaryButtonText:i("common.button.disconnect"),primaryButtonOnClick:I,primaryButtonVariant:"default",primaryButtonEmphasis:"secondary",secondaryButtonText:i("common.button.continue"),secondaryButtonOnClick:W,secondaryButtonVariant:"default",secondaryButtonEmphasis:"primary",learnMoreUrl:K.helpArticleUrls.mismatchedImports,learnMoreTextColor:"$accent1",learnMoreTextVariant:"buttonLabel3",onClose:o,buttonContainerProps:{flexDirection:"row",gap:"$spacing12"},textAlign:"left",children:(0,e.jsx)("div",{className:ye,children:p.map((B,T)=>(0,e.jsxs)("div",{className:be,children:[(0,e.jsx)(Z,{color:"$neutral3",size:16}),(0,e.jsx)(_,{variant:"body3",color:"$neutral1",children:B})]},T))})})})}var it=Se;export{it as DelegationMismatchModal_default,ot as RecentlyConnectedModal,de as useOnchainDisplayName};
