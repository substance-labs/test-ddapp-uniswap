import{__toESM as Be}from"./chunk-DgAfPHQg.js";import{require_react as ct}from"./react-CNoFhWkx.js";import{AdaptiveWebPopoverContent as lt,Button as Oe,Check as pt,Easing as Me,Path as G,PlusMinusButtonType as We,Popover as Pe,Rect as ut,RotatableChevron as ze,SpinningLoader as dt,Svg as ee,Tooltip as V,TouchableArea as J,X as gt,createIcon as te,init_module as He,spacing as xt,useAnimatedStyle as mt,useExtractedTokenColor as _t,useSharedValue as ft,useSporeColors as ne,withRepeat as ht,withTiming as St}from"./src-DOOtfpHS.js";import{useTranslation as w}from"./useTranslation-BotBuoJf.js";import{isExtension as Ce,isInterface as U,isInterfaceDesktop as Ct,isMobileApp as L,isMobileWeb as pe,isWeb as R}from"./index.web-BqgtOHN3.js";import{require_jsx_runtime as vt}from"./jsx-runtime-D7bMTQeG.js";import{datadogRum as bt,isDevEnv as ve,useEvent as Q}from"./hooks-BXO4d1DJ.js";import{currencyId as xe}from"./currencyId-Ci6selsx.js";import{ModalName as be}from"./modal-Dvm06CN4.js";import{useFeatureFlag as Tt}from"./hooks-Bp0VtWbX.js";import{DEFAULT_CUSTOM_DEADLINE as me,DEFAULT_PROTOCOL_OPTIONS as yt,MAX_AUTO_SLIPPAGE_TOLERANCE as wt,MAX_CUSTOM_DEADLINE as re,MAX_CUSTOM_SLIPPAGE_TOLERANCE as se,SLIPPAGE_CRITICAL_TOLERANCE as X,WARNING_DEADLINE_TOLERANCE as jt}from"./TradingApiClient-Cp_0ez5S.js";import{uniswapUrls as E}from"./urls-kwiZbYPW.js";import{useLocalizationContext as It}from"./LocalizationContext-B31peW1_.js";import{WarningSeverity as $t}from"./getAlertColor-J5DrJWHv.js";import{useWallet as Mt}from"./useWallet-CL5owP9P.js";import{TransactionStepType as T}from"./types-7DAoWLTI.js";import{noop as ke}from"./noop-BDbB2pLB.js";import{Flex as $,Text as y,concatClassName as N,fonts as Wt,iconSizes as Z,useMedia as Pt}from"./Loader-D83W8G1W.js";import{Anchor as kt}from"./Anchor-B1nkrQbP.js";import{Input as Fe}from"./Input-ClKbNpxm.js";import{AnimatedPager as Dt}from"./AnimatePresencePager-Dk43KD9E.js";import{AlertTriangleFilled as Ve}from"./AlertTriangleFilled-C9tf2eUJ.js";import{Eye as Ue}from"./Eye-D482ahgC.js";import{InfoCircleFilled as At}from"./InfoCircleFilled-CBAL5Wj0.js";import{SplitLogo as Lt}from"./SplitLogo-Ct--07LT.js";import{SwapFormStoreContext as Rt}from"./SwapFormStoreContext-3NrPQE3L.js";import{create as Te,useShallow as B,useStore as O,useSwapFormStoreBase as Et}from"./useSwapFormStore-D1oVGbBf.js";import{AccountType as Nt}from"./types-NWGai6aQ.js";import{useCurrencyInfo as _e}from"./useCurrencyInfo-Bxa3J04d.js";import{CurrencyLogo as Bt}from"./TokenLogo-JlSSDr3Q.js";import{TestID as Ze}from"./testIDs-CxYpwoP6.js";import{Modal as Ge}from"./Modal.web-DHbL39pN.js";import{WarningModal as Ot}from"./WarningModal-f8Gfhd_G.js";import{InfoTooltip as zt}from"./InfoTooltip.web-CkgGEmd3.js";import{dismissNativeKeyboard as Ht}from"./dismissNativeKeyboard.web-99F1bxCR.js";import{StepStatus as x}from"./types-Ctc23WnH.js";He();function Ft(e){return ht(St(5,{duration:50,easing:Me.inOut(Me.ease)}),3,!0,()=>{e.value=0})}var n=Be(vt());const[Vt,xi]=te({name:"Contract",getIcon:e=>(0,n.jsxs)(ee,{viewBox:"0 0 24 24",fill:"none",...e,children:[(0,n.jsx)(ut,{width:"24",height:"24",rx:"12",fill:"currentColor"}),(0,n.jsx)(G,{d:"M8 7.33333C7.63181 7.33333 7.33333 7.63181 7.33333 8C7.33333 8.36819 7.63181 8.66667 8 8.66667C8.36819 8.66667 8.66667 8.36819 8.66667 8C8.66667 7.63181 8.36819 7.33333 8 7.33333ZM6 8C6 6.89543 6.89543 6 8 6C8.87081 6 9.61164 6.55654 9.8862 7.33333H14.6667C16.1394 7.33333 17.3333 8.52724 17.3333 10C17.3333 11.4728 16.1394 12.6667 14.6667 12.6667H9.33333C8.59695 12.6667 8 13.2636 8 14C8 14.7364 8.59695 15.3333 9.33333 15.3333H14.1138C14.3884 14.5565 15.1292 14 16 14C17.1046 14 18 14.8954 18 16C18 17.1046 17.1046 18 16 18C15.1292 18 14.3884 17.4435 14.1138 16.6667H9.33333C7.86057 16.6667 6.66667 15.4728 6.66667 14C6.66667 12.5272 7.86057 11.3333 9.33333 11.3333H14.6667C15.403 11.3333 16 10.7364 16 10C16 9.26362 15.403 8.66667 14.6667 8.66667H9.8862C9.61164 9.44346 8.87081 10 8 10C6.89543 10 6 9.10457 6 8ZM16 15.3333C15.6318 15.3333 15.3333 15.6318 15.3333 16C15.3333 16.3682 15.6318 16.6667 16 16.6667C16.3682 16.6667 16.6667 16.3682 16.6667 16C16.6667 15.6318 16.3682 15.3333 16 15.3333Z",fill:"white",fillRule:"evenodd",clipRule:"evenodd"})]}),defaultFill:"#00C3A0"}),[ye,mi]=te({name:"Settings",getIcon:e=>(0,n.jsx)(ee,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...e,children:(0,n.jsx)(G,{d:"M22.7922 15.1778C21.6555 14.5178 20.9589 13.3078 20.9589 12C20.9589 10.6922 21.6555 9.48221 22.7922 8.82221C22.9878 8.69999 23.0611 8.45556 22.9389 8.26L20.8978 4.74C20.8244 4.60555 20.69 4.53224 20.5556 4.53224C20.4822 4.53224 20.4089 4.55667 20.3478 4.59334C19.7855 4.91111 19.15 5.08222 18.5144 5.08222C17.8667 5.08222 17.2311 4.9111 16.6567 4.5811C15.52 3.9211 14.8233 2.72333 14.8233 1.41555C14.8233 1.18333 14.64 1 14.42 1H9.57999C9.35999 1 9.17667 1.18333 9.17667 1.41555C9.17667 2.72333 8.48 3.9211 7.34334 4.5811C6.76889 4.9111 6.13335 5.08222 5.48557 5.08222C4.85002 5.08222 4.21446 4.91111 3.65224 4.59334C3.45668 4.47111 3.21222 4.54444 3.10222 4.74L1.0489 8.26C1.01223 8.32111 1 8.39445 1 8.45556C1 8.60223 1.07335 8.73666 1.20779 8.82221C2.34446 9.48221 3.04113 10.68 3.04113 11.9878C3.04113 13.3078 2.34444 14.5178 1.21999 15.1778H1.20779C1.01224 15.3 0.938874 15.5444 1.0611 15.74L3.10222 19.26C3.17556 19.3944 3.31 19.4678 3.44444 19.4678C3.51778 19.4678 3.59113 19.4433 3.65224 19.4067C4.80113 18.7589 6.20667 18.7589 7.34334 19.4189C8.46778 20.0789 9.16444 21.2767 9.16444 22.5844C9.16444 22.8167 9.34776 23 9.57999 23H14.42C14.64 23 14.8233 22.8167 14.8233 22.5844C14.8233 21.2767 15.52 20.0789 16.6567 19.4189C17.2311 19.0889 17.8667 18.9178 18.5144 18.9178C19.15 18.9178 19.7855 19.0889 20.3478 19.4067C20.5433 19.5289 20.7878 19.4556 20.8978 19.26L22.9511 15.74C22.9878 15.6789 23 15.6055 23 15.5444C23 15.3978 22.9267 15.2633 22.7922 15.1778ZM12 15.6667C9.97111 15.6667 8.33333 14.0289 8.33333 12C8.33333 9.97111 9.97111 8.33333 12 8.33333C14.0289 8.33333 15.6667 9.97111 15.6667 12C15.6667 14.0289 14.0289 15.6667 12 15.6667Z",fill:"currentColor"})})}),[Ut,_i]=te({name:"SettingsWarning",getIcon:e=>(0,n.jsxs)(ee,{viewBox:"0 0 22 20",fill:"none",...e,children:[(0,n.jsx)(G,{d:"M11.7498 15.6063C11.2588 16.5249 11.3226 17.5326 11.7604 18.3337H8.16796C7.99203 18.3337 7.85315 18.1948 7.85315 18.0188C7.85315 17.0281 7.32538 16.1207 6.47353 15.6207C5.61242 15.1207 4.54761 15.1207 3.67724 15.6114C3.63094 15.6392 3.57538 15.6577 3.51982 15.6577C3.41797 15.6577 3.31612 15.6022 3.26056 15.5003L1.71425 12.8337C1.62166 12.6855 1.67724 12.5003 1.82539 12.4077H1.83463C2.68648 11.9077 3.21428 10.9911 3.21428 9.99106C3.21428 9.00032 2.6865 8.09291 1.82539 7.59291C1.72354 7.5281 1.66797 7.42626 1.66797 7.31515C1.66797 7.26885 1.67724 7.21329 1.70501 7.16699L3.26056 4.50032C3.3439 4.35218 3.52909 4.29662 3.67724 4.38922C4.10317 4.62996 4.58465 4.75958 5.06613 4.75958C5.55687 4.75958 6.03834 4.62995 6.47353 4.37995C7.33464 3.87995 7.86242 2.97254 7.86242 1.9818C7.86242 1.80588 8.00129 1.66699 8.16796 1.66699H11.8346C12.0013 1.66699 12.1402 1.80588 12.1402 1.9818C12.1402 2.97254 12.668 3.87995 13.5291 4.37995C13.9643 4.62995 14.4457 4.75958 14.9365 4.75958C15.418 4.75958 15.8994 4.62996 16.3254 4.38922C16.3717 4.36144 16.4272 4.34293 16.4828 4.34293C16.5846 4.34293 16.6865 4.39847 16.742 4.50032L18.2884 7.16699C18.3809 7.31514 18.3254 7.50032 18.1772 7.59291C17.6446 7.90216 17.2395 8.37079 17.008 8.91776C16.0191 8.94024 15.0401 9.45359 14.503 10.4574L11.7498 15.6063ZM7.22352 10.0003C7.22352 11.5374 8.46427 12.7781 10.0013 12.7781C11.5383 12.7781 12.7791 11.5374 12.7791 10.0003C12.7791 8.46329 11.5383 7.22255 10.0013 7.22255C8.46427 7.22255 7.22352 8.46329 7.22352 10.0003Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}),(0,n.jsx)(G,{d:"M21.0779 16.3135L18.325 11.1651C17.7917 10.1676 16.3588 10.1676 15.825 11.1651L13.0722 16.3135C12.583 17.2285 13.2472 18.3335 14.2868 18.3335H19.8633C20.9025 18.3335 21.5671 17.2281 21.0779 16.3135ZM17.075 13.021C16.9025 13.021 16.7625 13.161 16.7625 13.3335V15.0002C16.7625 15.1727 16.9025 15.3127 17.075 15.3127C17.2475 15.3127 17.3875 15.1727 17.3875 15.0002V13.3335C17.3875 13.161 17.2475 13.021 17.075 13.021ZM16.6646 16.2502C16.6646 16.4802 16.8534 16.6668 17.0834 16.6668C17.3134 16.6668 17.5001 16.4802 17.5001 16.2502C17.5001 16.0202 17.3138 15.8335 17.0834 15.8335H17.0792C16.8492 15.8335 16.6646 16.0202 16.6646 16.2502Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]}),defaultFill:"#FF0000"}),[Zt,fi]=te({name:"Sign",getIcon:e=>(0,n.jsx)(ee,{viewBox:"0 0 10 10",fill:"none",...e,children:(0,n.jsx)(G,{d:"M6.62967 9.1964C6.45767 9.2784 6.2567 9.33942 6.0292 9.38042L2.74417 9.95543C1.64917 10.1504 1.00411 9.70043 0.814114 8.60542L0.0442166 4.23042C-0.150783 3.13542 0.299192 2.49043 1.39419 2.29543L2.29312 2.13741C2.39562 2.11941 2.4852 2.20892 2.4667 2.31142L1.87869 5.64043C1.61369 7.15543 2.32865 8.17542 3.83865 8.44042C3.83865 8.44042 6.44817 8.89891 6.58267 8.92491C6.74867 8.95491 6.77517 9.1319 6.62967 9.1964ZM9.9562 2.55342L9.18411 6.93041C8.99811 7.98441 8.3902 8.43491 7.3677 8.29491C7.3287 8.28941 7.2937 8.28943 7.2532 8.28243L3.97061 7.70342C2.87611 7.51042 2.42568 6.86692 2.61868 5.77242L3.29019 1.9644L3.39065 1.3954C3.58365 0.300902 4.22718 -0.149587 5.32168 0.0434127L8.60464 0.622423C9.69864 0.815423 10.1492 1.45942 9.9562 2.55342ZM6.77664 5.94841C6.81264 5.74441 6.67668 5.5499 6.47268 5.5139L4.42068 5.1519C4.21768 5.1154 4.02222 5.25242 3.98672 5.45592C3.95072 5.65992 4.08668 5.85443 4.29068 5.89043L6.34268 6.25243C6.36468 6.25643 6.38661 6.25792 6.40811 6.25792C6.58661 6.25842 6.74464 6.13041 6.77664 5.94841ZM8.29812 4.5179C8.33412 4.3139 8.19817 4.11942 7.99417 4.08342L4.7117 3.50441C4.5097 3.46891 4.31312 3.60493 4.27762 3.80843C4.24162 4.01243 4.37769 4.20691 4.58169 4.24291L7.86416 4.82192C7.88616 4.82592 7.90821 4.82741 7.92971 4.82741C8.10821 4.82741 8.26612 4.6994 8.29812 4.5179ZM8.64822 2.88692C8.68422 2.68292 8.54814 2.48841 8.34414 2.45241L5.06167 1.8734C4.85967 1.8374 4.66321 1.97392 4.62771 2.17742C4.59171 2.38142 4.72767 2.57592 4.93167 2.61192L8.21414 3.1909C8.23614 3.1949 8.25819 3.19643 8.27969 3.19643C8.45819 3.19693 8.61622 3.06892 8.64822 2.88692Z",fill:"currentColor"})}),defaultFill:"#F5F6FC"}),[Xe,hi]=te({name:"Swap",getIcon:e=>(0,n.jsx)(ee,{viewBox:"0 0 12 16",fill:"none",...e,children:(0,n.jsx)(G,{d:"M4.66732 4.33301L7.66732 1.33301M7.66732 1.33301L10.6673 4.33301M7.66732 1.33301V7.99967M7.33398 11.6663L4.33398 14.6663M4.33398 14.6663L1.33398 11.6663M4.33398 14.6663L4.33398 8.66634",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"})})});var u=Be(ct());const oe=(0,u.createContext)(null);function Gt(){const e=(0,u.useContext)(oe);if(!e)throw new Error("useGetTransactionSettingsContextValue must be used within TransactionSettingsStoreContextProvider");return e}const Je=()=>{const e=(0,u.useContext)(oe);if(!e)throw new Error("useTransactionSettingsStore must be used within TransactionSettingsStoreContextProvider");return e.transactionSettingsStore};function z(e){return O(Je(),B(e))}function we(){return O(Je(),B(e=>e.actions))}const qe=()=>{const e=(0,u.useContext)(oe);if(!e)throw new Error("useAutoSlippageToleranceStore must be used within TransactionSettingsStoreContextProvider");return e.autoSlippageStore};function je(e){return O(qe(),B(e))}function Si(){const e=Q(t=>t.actions.setAutoSlippageTolerance);return O(qe(),B(e))}const Ci=()=>{const e=z(o=>({customSlippageTolerance:o.customSlippageTolerance,customDeadline:o.customDeadline,selectedProtocols:o.selectedProtocols,slippageWarningModalSeen:o.slippageWarningModalSeen,isV4HookPoolsEnabled:o.isV4HookPoolsEnabled})),t=je(o=>o.autoSlippageTolerance);return(0,u.useMemo)(()=>({...e,autoSlippageTolerance:t}),[e,t])};function Xt(){const{customDeadline:e}=z(_=>({customDeadline:_.customDeadline})),{setCustomDeadline:t}=we(),[o,i]=(0,u.useState)(!1),[s,r]=(0,u.useState)((e==null?void 0:e.toString())||me.toString()),a=parseFloat(s),l=isNaN(a)?me:a,p=a>re,h=(0,u.useCallback)(async _=>{if(_=_.replace(",","."),_===""||_==="."){r(_);return}const d=Number(_),C=d>re;if(d===0){r("0"),t(me);return}if(isNaN(d)){r("");return}if(C){r(re.toString()),t(re);return}r(_),t(d)},[t]),c=(0,u.useCallback)(()=>{i(!0)},[]),f=(0,u.useCallback)(()=>{if(i(!1),isNaN(a)){t(void 0);return}},[a,t]);return{isEditingDeadline:o,showDeadlineWarning:p,inputDeadline:s,currentDeadline:l,onChangeDeadlineInput:h,onFocusDeadlineInput:c,onBlurDeadlineInput:f}}const Jt="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _pr-t-space-spa94665593 _gap-t-space-spa94665589 ",De=44;function qt(){const[e]=(0,u.useState)(De),{isEditingDeadline:t,inputDeadline:o,onChangeDeadlineInput:i,onFocusDeadlineInput:s,onBlurDeadlineInput:r}=Xt(),a=(0,u.useRef)(null),l=t?"$surface2":"$surface1",p=o;return(0,u.useEffect)(()=>{var h;t&&((h=a.current)===null||h===void 0||h.focus())},[t]),(0,n.jsx)($,{row:!0,group:!0,alignItems:"center",justifyContent:"space-between",style:{containerType:"normal"},children:(0,n.jsx)($,{row:!0,backgroundColor:l,borderColor:t?"$DEP_accentSoft":"$surface3",borderRadius:"$rounded16","$group-hover":{borderColor:"$surface3Hovered",backgroundColor:"$surface1Hovered"},borderWidth:"$spacing1",gap:"$spacing8",p:"$spacing4",onPress:s,children:(0,n.jsxs)("div",{className:Jt,children:[(0,n.jsxs)($,{style:{position:"relative"},children:[(0,n.jsx)(Fe,{ref:a,backgroundColor:l,"$group-hover":{backgroundColor:"$surface1Hovered"},color:"$neutral1",editable:!0,fontFamily:"$subHeading",fontWeight:"normal",fontSize:"$small",height:"100%",keyboardType:"numeric",outlineColor:"$transparent",p:"$none",textAlign:"right",value:p,width:e,onBlur:r,onChangeText:i,onFocus:s}),(0,n.jsx)(y,{minWidth:De,opacity:0,px:"$spacing4",style:{position:"absolute"},variant:"subheading2",zIndex:-1,children:p})]}),(0,n.jsx)(y,{color:"$neutral2",variant:"subheading2",children:"minutes"})]})})})}const Kt="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-gap52 ";function Ke({warningMessage:e,color:t,tooltipText:o}){const i=(0,n.jsxs)("div",{className:Kt,children:[(0,n.jsx)(Ve,{color:t,size:"$icon.16"}),(0,n.jsx)(y,{variant:"body3",color:t,children:e})]});return o?(0,n.jsxs)(V,{children:[(0,n.jsx)(V.Trigger,{children:i}),(0,n.jsx)(V.Content,{children:(0,n.jsx)(y,{variant:"body4",children:o})})]}):i}function Qt(){const{t:e}=w(),t=z(o=>o.customDeadline);return t&&t>=jt?(0,n.jsx)(Ke,{warningMessage:e("swap.settings.deadline.warning"),color:"$statusWarning"}):null}let Qe=(function(e){return e.SLIPPAGE="slippage",e.DEADLINE="deadline",e})({});const vi={settingId:Qe.DEADLINE,renderTitle:e=>e("swap.deadline.settings.title.short"),renderTooltip:e=>e("swap.settings.deadline.tooltip"),Control(){return(0,n.jsx)(qt,{})},Warning(){return(0,n.jsx)(Qt,{})}},Ae={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Y=new Map,ae=e=>{const t=Y.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([o,i])=>[o,i.getState()])):{}},Yt=(e,t,o)=>{if(e===void 0)return{type:"untracked",connection:t.connect(o)};const i=Y.get(o.name);if(i)return{type:"tracked",store:e,...i};const s={connection:t.connect(o),stores:{}};return Y.set(o.name,s),{type:"tracked",store:e,...s}},en=(e,t)=>{if(t===void 0)return;const o=Y.get(e);o&&(delete o.stores[t],Object.keys(o.stores).length===0&&Y.delete(e))},tn=e=>{var t,o;if(!e)return;const i=e.split(`
`),s=i.findIndex(a=>a.includes("api.setState"));if(s<0)return;const r=((t=i[s+1])==null?void 0:t.trim())||"";return(o=/.+ (.+) .+/.exec(r))==null?void 0:o[1]},nn=(e,t={})=>(o,i,s)=>{const{enabled:r,anonymousActionType:a,store:l,...p}=t;let h;try{h=(r??(Ae?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!h)return e(o,i,s);const{connection:c,...f}=Yt(l,h,p);let _=!0;s.setState=(g,S,m)=>{const b=o(g,S);if(!_)return b;const M=m===void 0?{type:a||tn(new Error().stack)||"anonymous"}:typeof m=="string"?{type:m}:m;return l===void 0?(c==null||c.send(M,i()),b):(c==null||c.send({...M,type:`${l}/${M.type}`},{...ae(p.name),[l]:s.getState()}),b)},s.devtools={cleanup:()=>{c&&typeof c.unsubscribe=="function"&&c.unsubscribe(),en(p.name,l)}};const d=(...g)=>{const S=_;_=!1,o(...g),_=S},C=e(s.setState,i,s);if(f.type==="untracked"?c==null||c.init(C):(f.stores[f.store]=s,c==null||c.init(Object.fromEntries(Object.entries(f.stores).map(([g,S])=>[g,g===f.store?C:S.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let g=!1;const S=s.dispatch;s.dispatch=(...m)=>{(Ae?"production":void 0)!=="production"&&m[0].type==="__setState"&&!g&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),g=!0),S(...m)}}return c.subscribe(g=>{var S;switch(g.type){case"ACTION":if(typeof g.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return fe(g.payload,m=>{if(m.type==="__setState"){if(l===void 0){d(m.state);return}Object.keys(m.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const b=m.state[l];if(b==null)return;JSON.stringify(s.getState())!==JSON.stringify(b)&&d(b);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(m)});case"DISPATCH":switch(g.payload.type){case"RESET":return d(C),l===void 0?c==null?void 0:c.init(s.getState()):c==null?void 0:c.init(ae(p.name));case"COMMIT":if(l===void 0){c==null||c.init(s.getState());return}return c==null?void 0:c.init(ae(p.name));case"ROLLBACK":return fe(g.state,m=>{if(l===void 0){d(m),c==null||c.init(s.getState());return}d(m[l]),c==null||c.init(ae(p.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return fe(g.state,m=>{if(l===void 0){d(m);return}JSON.stringify(s.getState())!==JSON.stringify(m[l])&&d(m[l])});case"IMPORT_STATE":{const{nextLiftedState:m}=g.payload,b=(S=m.computedStates.slice(-1)[0])==null?void 0:S.state;if(!b)return;d(l===void 0?b:b[l]),c==null||c.send(null,m);return}case"PAUSE_RECORDING":return _=!_}return}}),C},Ie=nn,fe=(e,t)=>{let o;try{o=JSON.parse(e)}catch(i){console.error("[zustand devtools middleware] Could not parse the received json",i)}o!==void 0&&t(o)},on=e=>(t,o,i)=>{const s=i.subscribe;return i.subscribe=(a,l,p)=>{let h=a;if(l){const c=(p==null?void 0:p.equalityFn)||Object.is;let f=a(i.getState());h=_=>{const d=a(_);if(!c(f,d)){const C=f;l(f=d,C)}},p!=null&&p.fireImmediately&&l(f,f)}return s(h)},e(t,o,i)},Ye=on;let j=(function(e){return e.TransactionSettings="transactionSettings",e.ViewOnly="viewOnly",e.SlippageWarning="slippageWarning",e})({});const Le=(e,t)=>({isVisible:!1,show:()=>{t(o=>({modals:{...o.modals,[e]:{...o.modals[e],isVisible:!0}}}))},hide:()=>{t(o=>({modals:{...o.modals,[e]:{...o.modals[e],isVisible:!1}}}))}}),rn=e=>Te()(Ie(t=>({modals:[j.TransactionSettings,j.ViewOnly,...e].reduce((s,r)=>(s[r]=Le(r,t),s),{}),registerModal:s=>{t(r=>({modals:{...r.modals,[s]:Le(s,t)}}),!1,"registerModal")}}),{name:"useTransactionSettingsModalStore",enabled:ve(),trace:!0,traceLimit:25})),ue=(0,u.createContext)(null);function ce(e){const t=(0,u.useContext)(ue);if(!t)throw new Error("useModalVisibility must be used within TransactionSettingsModalStoreContextProvider");return O(t,B(o=>o.modals[e].isVisible))}function Se(e){const t=(0,u.useContext)(ue);if(!t)throw new Error("useModalShow must be used within TransactionSettingsModalStoreContextProvider");return O(t,B(o=>o.modals[e].show))}function le(e){const t=(0,u.useContext)(ue);if(!t)throw new Error("useModalHide must be used within TransactionSettingsModalStoreContextProvider");return O(t,B(o=>o.modals[e].hide))}He();const Re=.1;function et(e){const{saveOnBlur:t,isZeroSlippage:o}=e??{},{t:i}=w(),{customSlippageTolerance:s}=z(v=>({customSlippageTolerance:v.customSlippageTolerance})),{setCustomSlippageTolerance:r}=we(),a=je(v=>v.autoSlippageTolerance),l=o?0:a,[p,h]=(0,u.useState)(!1),[c,f]=(0,u.useState)(!s),[_,d]=(0,u.useState)((s==null?void 0:s.toFixed(2).toString())??""),[C,g]=(0,u.useState)(),S=l??wt,m=parseFloat(_),b=e!=null&&e.isZeroSlippage?0:isNaN(m)?S:m,M=m>S,I=ft(0),k=mt(()=>({transform:[{translateX:I.value}]}),[I]),F=()=>{f(!0),g(void 0),d(""),r(void 0)},D=(0,u.useCallback)(v=>{const W=v>se,A=v>S,K=v>=X;return g(v===0?i("swap.settings.slippage.warning.min"):W?i("swap.settings.slippage.warning.max",{maxSlippageTolerance:se}):K?i("swap.settings.slippage.warning"):A?i("swap.settings.slippage.alert"):void 0)},[S,i]),q=(0,u.useCallback)(async v=>{if(f(!1),g(void 0),v=v.replace(",","."),v===""||v==="."){d(v);return}const W=parseFloat(v),A=isNaN(W),K=W>se,ie=v.split("."),rt=ie.length>2,st=ie[1]&&ie[1].length>2,at=W===0;if(D(W),A||K||rt||st){I.value=Ft(I);return}d(v),!t&&!at&&r(W)},[D,t,I,r]),P=(0,u.useCallback)(()=>{h(!0),c&&(f(!1),d(""))},[c]),de=(0,u.useCallback)(()=>{if(h(!1),isNaN(m)){f(!0),r(void 0);return}d(m.toFixed(2)),t&&r(m)},[m,r,t]),ge=(0,u.useCallback)(v=>{c&&f(!1);const W=b+(v===We.Plus?Re:-Re),A=v===We.Plus?Math.min(W,se):Math.max(W,0),K=A===0;D(A),d(A.toFixed(2).toString()),K||r(A)},[c,b,D,r]);return{isEditingSlippage:p,autoSlippageEnabled:c,showSlippageWarning:M,showSlippageCritical:m>=X,inputSlippageTolerance:c?b.toFixed(2).toString():_,inputWarning:C,autoSlippageTolerance:S,currentSlippageTolerance:b,inputAnimatedStyle:k,onPressAutoSlippage:F,onChangeSlippageInput:q,onFocusSlippageInput:P,onBlurSlippageInput:de,onPressPlusMinusButton:ge}}function tt({customSlippageValue:e,autoSlippageTolerance:t,fallbackColorValue:o}){return e>=X?"$statusCritical":e>t?"$statusWarning":o??"$neutral2"}const sn="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _paddingEnd-t-space-spa1360334080 _paddingStart-t-space-spa94665589 ",an=" _backgroundColor-surface3",cn=" _backgroundColor-accent2",ln=" _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-center _borderTopLeftRadius-t-radius-ro1041013639 _borderTopRightRadius-t-radius-ro1041013639 _borderBottomRightRadius-t-radius-ro1041013639 _borderBottomLeftRadius-t-radius-ro1041013639 _pr-t-space-spa94665593 _pl-t-space-spa94665593  ",pn=44;function un(e){const{t}=w(),o=(0,u.useRef)(null),[i,s]=(0,u.useState)(0),[r,a]=(0,u.useState)(!1),{isEditingSlippage:l,autoSlippageEnabled:p,inputSlippageTolerance:h,autoSlippageTolerance:c,inputAnimatedStyle:f,onPressAutoSlippage:_,onChangeSlippageInput:d,onFocusSlippageInput:C,onBlurSlippageInput:g,showSlippageWarning:S,showSlippageCritical:m}=et({saveOnBlur:e.saveOnBlur,isZeroSlippage:e.isZeroSlippage});(0,u.useEffect)(()=>{var P;(P=o.current)===null||P===void 0||P.blur()},[r]);function b(P){s(P.nativeEvent.layout.width),a(!0)}const M=l?"$surface2":"$surface1",I=p?c.toFixed(2).toString():h,k=parseFloat(I),F=(0,u.useMemo)(()=>tt({customSlippageValue:k,autoSlippageTolerance:c,fallbackColorValue:p?"$neutral2":"$neutral1"}),[k,p,c]),D=l?m?"$statusCritical":S?"$statusWarning":"$accent1":m?"$statusCritical":S?"$statusWarning":"$surface3",q=m?"$statusCriticalHovered":S?"$statusWarningHovered":"$surface3Hovered";return(0,n.jsx)($,{row:!0,group:!0,alignItems:"center",justifyContent:"space-between",style:{containerType:"normal"},children:(0,n.jsxs)($,{row:!0,backgroundColor:M,borderColor:D,borderRadius:"$rounded16",borderWidth:"$spacing1",gap:"$spacing8",p:"$spacing4",pr:"$spacing8",style:f,"$group-hover":{borderColor:q,backgroundColor:"$surface1Hovered"},children:[(0,n.jsx)("div",{onClick:_,className:N(""+(ln+(p?cn:an))),children:(0,n.jsx)(y,{color:p?"$accent1":"$neutral2",variant:"buttonLabel3",children:t("swap.settings.slippage.control.auto")})}),(0,n.jsxs)("div",{className:sn,children:[(0,n.jsxs)($,{style:{position:"relative"},children:[(0,n.jsx)(Fe,{ref:o,keyboardType:"decimal-pad",backgroundColor:M,"$group-hover":{backgroundColor:"$surface1Hovered"},color:F,editable:!0,fontFamily:"$subHeading",fontWeight:"normal",fontSize:"$small",height:"100%",outlineColor:"$transparent",p:"$none",paddingEnd:"$spacing4",textAlign:"right",value:I,width:i,onBlur:g,onChangeText:d,onPressIn:C}),(0,n.jsx)(y,{minWidth:pn,opacity:0,px:"$spacing4",style:{position:"absolute"},variant:"subheading2",zIndex:-1,onLayout:b,children:I})]}),(0,n.jsx)(y,{color:F,variant:"subheading2",children:"%"})]})]})})}function dn(){const{t:e}=w(),t=z(a=>a.customSlippageTolerance),o=je(a=>a.autoSlippageTolerance),{autoSlippageTolerance:i}=et(),s=o??i,r=!!(t&&t>=X);return!t||t<=s?null:(0,n.jsx)(Ke,{warningMessage:e(r?"swap.settings.slippage.warning":"swap.settings.slippage.alert"),tooltipText:R&&!pe?e("swap.settings.slippage.warning.hover"):void 0,color:r?"$statusCritical":"$statusWarning"})}const bi={renderTitle:e=>e("swap.slippage.settings.title"),renderTooltip:e=>e("swap.settings.slippage.description"),settingId:Qe.SLIPPAGE,Control(){return(0,n.jsx)(un,{saveOnBlur:!1})},Warning(){return(0,n.jsx)(dn,{})}},gn=e=>Te()(Ie(Ye(o=>({autoSlippageTolerance:e,actions:{setAutoSlippageTolerance:i=>o({autoSlippageTolerance:i})}})),{name:"useTransactionSettingsAutoSlippageToleranceStore",enabled:ve(),trace:!0,traceLimit:25}));function xn(e,t){bt.addAction(e,{data:{newState:t}})}const mn={customSlippageTolerance:void 0,customDeadline:void 0,selectedProtocols:yt,slippageWarningModalSeen:!1,isV4HookPoolsEnabled:!0},_n=()=>{const e=Te()(Ie(Ye((i,s)=>({...mn,actions:{setCustomSlippageTolerance:r=>i({customSlippageTolerance:r}),setCustomDeadline:r=>i({customDeadline:r}),setSelectedProtocols:r=>i({selectedProtocols:r}),setSlippageWarningModalSeen:r=>i({slippageWarningModalSeen:r}),setIsV4HookPoolsEnabled:r=>i({isV4HookPoolsEnabled:r}),toggleProtocol:r=>{const{selectedProtocols:a}=s();a.includes(r)?i({selectedProtocols:a.filter(l=>l!==r)}):i({selectedProtocols:[...a,r]})}}})),{name:"useTransactionSettingsStore",enabled:ve(),trace:!0,traceLimit:25})),t=e.subscribe(i=>i,i=>{xn("TransactionSettings",i)});return{store:e,cleanup:()=>{t()}}};function Ti({children:e,store:t,autoSlippageTolerance:o}){const[{store:i,cleanup:s}]=(0,u.useState)(()=>t||_n()),[r]=(0,u.useState)(()=>gn(o));(0,u.useEffect)(()=>()=>{s()},[s]),(0,u.useEffect)(()=>{const{setAutoSlippageTolerance:l}=r.getState().actions;l(o)},[o,r]);const a=(0,u.useMemo)(()=>({transactionSettingsStore:i,autoSlippageStore:r}),[i,r]);return(0,n.jsx)(oe.Provider,{value:a,children:e})}const $e=(0,u.memo)(({iconSize:e,contentColor:t,backgroundColor:o,CustomIconComponent:i,IconLabel:s})=>{const r=i??ye,a=e??(R?"$icon.20":"$icon.24");return(0,n.jsxs)($,{centered:!0,row:!0,backgroundColor:o,borderRadius:"$roundedFull",gap:"$spacing4",px:s?"$spacing8":"$spacing4",py:"$spacing4",height:U?"$spacing32":"auto",children:[s,(0,n.jsx)(r,{color:t,size:a})]})}),fn=(0,u.memo)(({Tooltip:e,iconSize:t,IconLabel:o,contentColor:i,backgroundColor:s,CustomIconComponent:r})=>{const a=t??(R?"$icon.20":"$icon.24"),l=ce(j.TransactionSettings),p=(0,n.jsx)($e,{iconSize:a,contentColor:i,backgroundColor:s,CustomIconComponent:r,IconLabel:o});return e&&!l?(0,n.jsxs)(V,{children:[(0,n.jsx)(V.Trigger,{children:p}),(0,n.jsx)(V.Content,{children:e})]}):p});$e.displayName="TransactionSettingsButton";const hn="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa94665589 ",Sn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665587 _justifyContent-center _minHeight-48px ",Cn="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _columnGap-t-space-spa1360334076 ",vn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ";function bn({setting:e,setSelectedSetting:t}){const{renderTitle:o,renderTooltip:i,Control:s,Description:r,Screen:a,InfoModal:l,featureFlag:p,Warning:h}=e,{t:c}=w(),[f,_]=(0,u.useState)(!1),d=(0,u.useCallback)(()=>{a&&t(e)},[a,e,t]),C=(0,n.jsx)(At,{color:"$neutral3",size:"$icon.16"}),g=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:vn,children:[(0,n.jsxs)("div",{className:Cn,children:[(0,n.jsx)(yn,{isTouchable:!!l,onPress:()=>_(!0),children:(0,n.jsxs)("div",{className:Sn,children:[(0,n.jsxs)("div",{className:hn,children:[(0,n.jsx)(y,{color:"$neutral1",variant:"subheading2",children:o(c)}),l&&C,!!i&&(0,n.jsx)(zt,{trigger:C,text:i(c)})]}),r&&(0,n.jsx)(y,{color:"$neutral2",variant:"body3",children:(0,n.jsx)(r,{})}),h&&(0,n.jsx)(h,{})]})}),(0,n.jsxs)(J,{group:!0,flexDirection:"row",alignItems:"center",gap:"$spacing4",justifyContent:"flex-end",flexShrink:1,onPress:d,children:[(0,n.jsx)(s,{}),a&&(0,n.jsx)(ze,{color:"$neutral3",direction:"right",height:Z.icon24})]})]}),l&&(0,n.jsx)(l,{isOpen:f,onClose:()=>_(!1)})]})});return p?(0,n.jsx)(Tn,{featureFlag:p,children:g}):g}function Tn({featureFlag:e,children:t}){return Tt(e)?(0,n.jsx)(n.Fragment,{children:t}):null}function yn({isTouchable:e,onPress:t,children:o}){return e?(0,n.jsx)(J,{onPress:t,children:o}):o}const wn=" _pr-t-space-spa1360334047 _pl-t-space-spa1360334047 _pt-t-space-spa1360334080 _pb-t-space-spa1360334080",jn=" _pr-t-space-spa94665589 _pl-t-space-spa94665589 _pt-t-space-spa94665589 _pb-t-space-spa94665589",In=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334076 _width-10037  ",$n=" _pb-t-space-spa94665593",Mn=" _pb-t-space-spa1360334047",Wn=" _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center  ",Pn=" _pt-0px",kn=" _pt-t-space-spa94665593",Dn=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241  ",An="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334076 ",Ln=" _gap-t-space-spa94665593 _pt-t-space-spa1360334080 _pb-t-space-spa1360334080",Rn=" _gap-t-space-spa94665589 _pt-t-space-spa94665593 _pb-t-space-spa94665593",En=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column  ",Ee=({settings:e,setSelectedSetting:t})=>(0,n.jsx)("div",{className:N(""+(En+(R?Rn:Ln))),children:e.map((o,i)=>(0,n.jsx)(bn,{setSelectedSetting:t,setting:o},`swap-setting-${i}`))}),he=({children:e,SelectedSetting:t,setSelectedSetting:o,initialSelectedSetting:i,defaultTitle:s,onClose:r})=>{const{t:a}=w(),l=Pt(),p=t?t.renderTitle(a):s??a("swap.settings.title"),h=l.sm&&R,c=t?!t.hideTitle:L||h&&!Ce,f=!Ct&&r;return(0,n.jsxs)("div",{className:An,children:[c&&(0,n.jsxs)("div",{className:N(""+(Dn+(R?kn:Pn))),children:[(0,n.jsx)(J,{onPress:()=>o(void 0),children:(0,n.jsx)(ze,{color:t===void 0||t===i?"$transparent":"$neutral3",height:Z.icon24,width:Z.icon24})}),(0,n.jsx)(y,{textAlign:"center",variant:"body1",children:p}),(0,n.jsx)($,{width:Z.icon24})]}),e,f&&(0,n.jsx)("div",{className:N(""+(Wn+(h?Mn:$n))),children:(0,n.jsx)(Oe,{testID:"swap-settings-close",emphasis:"secondary",onPress:r,children:a("common.button.save")})})]})},nt=({settings:e,defaultTitle:t,initialSelectedSetting:o,onClose:i})=>{const[s,r]=(0,u.useState)(o),a=(0,u.useMemo)(()=>({defaultTitle:t,SelectedSetting:s,setSelectedSetting:r,initialSelectedSetting:o,onClose:i}),[t,s,r,o,i]),l=(0,u.useCallback)(()=>s!=null&&s.Screen?(0,n.jsx)(s.Screen,{}):(0,n.jsx)(Ee,{settings:e,setSelectedSetting:r}),[s,e,r]);return(0,n.jsx)("div",{className:N(""+(In+(R?jn:wn))),children:L||pe?(0,n.jsx)(he,{...a,children:l()}):(0,n.jsxs)(Dt,{currentIndex:s!=null&&s.Screen?1:0,animation:"fast",children:[(0,n.jsx)(he,{...a,children:(0,n.jsx)(Ee,{settings:e,setSelectedSetting:r})}),(0,n.jsx)(he,{...a,children:(s==null?void 0:s.Screen)&&(0,n.jsx)(s.Screen,{})})]})})},Nn=320;function Bn({settings:e,defaultTitle:t,initialSelectedSetting:o,onClose:i,isOpen:s}){return(0,n.jsx)(lt,{animation:["quick",{opacity:{overshootClamping:!0}}],borderColor:"$surface3",borderRadius:"$rounded24",borderWidth:"$spacing1",enterStyle:{y:-10,opacity:0},exitStyle:{y:-10,opacity:0},px:"$spacing12",py:"$spacing4",shadowColor:"$shadowColor",shadowOpacity:.06,shadowRadius:6,width:Nn,isOpen:s,webBottomSheetProps:{px:"$padding16",testID:Ze.MobileWebSettingsMenu},children:(0,n.jsx)(nt,{defaultTitle:t,initialSelectedSetting:o,settings:e,onClose:i})})}function On({settings:e,initialSelectedSetting:t,onClose:o,isOpen:i}){const s=Gt(),r=ne(),a=Et();return(0,n.jsx)(Ge,{alignment:Ce?"top":void 0,backgroundColor:r.surface1.val,isModalOpen:i,name:be.SwapSettings,onClose:o,children:(0,n.jsx)(oe.Provider,{value:s,children:(0,n.jsx)(Rt.Provider,{value:a,children:(0,n.jsx)(nt,{initialSelectedSetting:t,settings:e,onClose:o})})})})}function zn(e){return U?(0,n.jsx)(Bn,{...e}):(0,n.jsx)(On,{...e})}const Hn="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa94665589 ",Fn=({onPress:e})=>{const{t}=w();return(0,n.jsx)(J,{backgroundColor:"$surface2",borderRadius:"$rounded12",justifyContent:"center",px:"$spacing8",py:"$spacing4",onPress:e,children:(0,n.jsxs)("div",{className:Hn,children:[(0,n.jsx)(Ue,{color:"$neutral2",size:"$icon.16"}),(0,n.jsx)(y,{color:"$neutral2",variant:"buttonLabel2",children:t("swap.header.viewOnly")})]})})};function Vn({isOpen:e,onDismiss:t}){const{t:o}=w();return(0,n.jsx)(Ot,{caption:o("swap.warning.viewOnly.message"),acknowledgeText:o("common.button.dismiss"),icon:(0,n.jsx)(Ue,{color:"$neutral2",size:"$icon.24"}),isOpen:e,modalName:be.SwapWarning,severity:$t.Low,title:o("account.wallet.viewOnly.title"),onClose:t,onAcknowledge:t})}const Un="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ";function yi({settings:e,adjustTopAlignment:t=!0,adjustRightAlignment:o=!0,position:i="absolute",defaultTitle:s,CustomSettingsButton:r,testID:a,CustomIconComponent:l,iconColor:p="$neutral2",backgroundColor:h,iconSize:c,IconLabel:f,onClose:_}){const d=Mt().evmAccount,C=l??ye,g=ce(j.TransactionSettings),S=Se(j.TransactionSettings),m=le(j.TransactionSettings),b=ce(j.ViewOnly),M=Se(j.ViewOnly),I=le(j.ViewOnly),k=Q(()=>{_?_():m()}),F=Q(v=>{!v&&U&&k()}),D=Q(()=>{g?k():S(),Ht()}),q=(d==null?void 0:d.accountType)===Nt.Readonly,P=t?U?-38:6:0,de=o?L?24:4:0,ge=U?{crossAxis:o?0:8,mainAxis:t?0:8}:void 0;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Vn,{isOpen:b,onDismiss:I}),(0,n.jsx)($,{row:!0,gap:"$spacing4",position:i,top:P,right:de,zIndex:"$default",children:q?(0,n.jsx)(Fn,{onPress:M}):(0,n.jsx)(Pe,{offset:ge,placement:"bottom-end",open:g,onOpenChange:F,children:(0,n.jsxs)("div",{className:Un,children:[(0,n.jsx)(Pe.Trigger,{children:(0,n.jsx)(J,{testID:a??Ze.TransactionSettings,onPress:D,children:r??(0,n.jsx)($e,{contentColor:p,backgroundColor:h,CustomIconComponent:C,iconSize:c,IconLabel:f})})}),(0,n.jsx)(zn,{settings:e,defaultTitle:s,isOpen:g,onClose:k})]})})})]})}const Zn=(e,t)=>t?t>=X?"$statusCritical2":t>e?"$statusWarning2":"$surface3":"$transparent";function wi({iconColor:e="$neutral2",iconSize:t,autoSlippageTolerance:o,isZeroSlippage:i}){const{t:s}=w(),{formatPercent:r}=It(),a=z(C=>C.customSlippageTolerance),l=a&&!i,p=(U||Ce)&&!pe,h=!!a&&a>o,c=p&&h,{backgroundColor:f,contentColor:_,IconComponent:d}=(0,u.useMemo)(()=>{const C=Zn(o,a),g=tt({customSlippageValue:a??0,autoSlippageTolerance:o,fallbackColorValue:e}),S=a&&a>X?Ut:ye;return{backgroundColor:C,contentColor:g,IconComponent:S}},[a,e,o]);return(0,n.jsx)(fn,{iconSize:t,contentColor:_,backgroundColor:f,CustomIconComponent:d,Tooltip:c&&(0,n.jsx)(y,{variant:"body4",children:s("swap.settings.slippage.warning.hover")}),IconLabel:l&&(0,n.jsx)(y,{color:_,variant:"buttonLabel3",children:r(a)})})}function ji(){const{customSlippageTolerance:e,slippageWarningModalSeen:t}=z(p=>({customSlippageTolerance:p.customSlippageTolerance,slippageWarningModalSeen:p.slippageWarningModalSeen})),{setSlippageWarningModalSeen:o}=we(),i=le(j.TransactionSettings),s=ce(j.SlippageWarning),r=Se(j.SlippageWarning),a=le(j.SlippageWarning),l=Q(()=>{!t&&e&&e>=20?(o(!0),setTimeout(()=>{r()},80),L||i()):i()});return{isSlippageWarningModalVisible:s,handleShowSlippageWarningModal:r,handleHideSlippageWarningModalWithSeen:a,onCloseSettingsModal:l}}function Ii({children:e,modalIds:t}){const[o]=(0,u.useState)(()=>rn(t));return(0,n.jsx)(ue.Provider,{value:o,children:e})}const Gn=" _pr-t-space-spa94665591 _pl-t-space-spa94665591",Xn=" _pr-t-space-spa1360334047 _pl-t-space-spa1360334047",Jn=" _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center _width-10037  ",qn="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-center _rowGap-t-space-spa94665593 ",Kn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1573 _backgroundColor-statusCriti3045924 _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 _pt-t-space-spa1360334080 _pr-t-space-spa1360334080 _pb-t-space-spa1360334080 _pl-t-space-spa1360334080 ",Qn="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-center _gap-t-space-gap1602 ";function $i({isOpen:e,onClose:t}){const{t:o}=w();return(0,n.jsxs)(Ge,{isDismissible:!0,name:be.SlippageWarningModal,gap:"$gap16",padding:L?"$spacing24":"$spacing16",height:"max-content",isModalOpen:e,maxWidth:420,onClose:t,children:[!L&&!pe&&(0,n.jsx)(J,{alignSelf:"flex-end",onPress:t,children:(0,n.jsx)(gt,{color:"$neutral2",size:"$icon.24"})}),(0,n.jsxs)("div",{className:Qn,children:[(0,n.jsx)("div",{className:Kn,children:(0,n.jsx)(Ve,{color:"$statusCritical",size:"$icon.24"})}),(0,n.jsxs)("div",{className:qn,children:[(0,n.jsx)(y,{variant:"subheading1",children:o("swap.settings.slippage.warning")}),(0,n.jsx)(y,{variant:"body2",color:"$neutral2",px:"$spacing8",textAlign:"center",children:o("swap.settings.slippage.warning.description")})]}),(0,n.jsx)("div",{className:N(""+(Jn+(L?Xn:Gn))),children:(0,n.jsx)(Oe,{emphasis:"secondary",onPress:t,children:o("common.close")})})]})]})}const Yn="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",eo=`
  @keyframes pulse {
    0% {
      transform: scale(1);
      opacity: 1;
    }
    100% {
      transform: scale(1.5);
      opacity: 0;
    }
  }
`;function to({rippleColor:e}){return e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("style",{children:eo}),(0,n.jsx)("div",{"data-testid":"icon-ripple-animation",className:Yn,children:(0,n.jsx)($,{borderRadius:12,borderWidth:"$spacing1",height:24,position:"absolute",style:{borderColor:e,animation:"pulse 1s linear infinite"},width:24})})]}):null}const no=" _opacity-0--5",oo=" _opacity-1",io=" _filter-grayscale11281",ro=" _filter-grayscale01281",so=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _height-t-size-spac100347300 _width-t-size-spac100347300  ",ao="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _mr-3px ",ot="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",co="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-gap1569 _height-t-size-spac100347358 _justifyContent-space-betwe3241 _pt-8px _pb-8px ",lo="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241 ";function H(e){const{currency:t,icon:o,secondsRemaining:i,title:s,learnMore:r,status:a,rippleColor:l,pair:p}=e,h=ne(),c=_e(t?xe(t):void 0),f=p!=null&&p[0]?xe(p[0]):void 0,_=p!=null&&p[1]?xe(p[1]):void 0,d=_e(f),C=_e(_),{tokenColor:g}=_t({imageUrl:d?d.logoUrl:c==null?void 0:c.logoUrl,tokenName:d?d.currency.symbol:t==null?void 0:t.symbol,backgroundColor:h.surface1.val,defaultColor:h.neutral3.val}),S=a===x.Active||a===x.InProgress?"$neutral1":"$neutral2";return(0,n.jsxs)("div",{className:lo,children:[(0,n.jsxs)("div",{className:co,children:[(0,n.jsx)(po,{rippleColor:l??g??void 0,stepStatus:a,children:d&&C?(0,n.jsx)(Lt,{size:Z.icon24,chainId:d.currency.chainId,inputCurrencyInfo:d,outputCurrencyInfo:C}):o??(0,n.jsx)(Bt,{currencyInfo:c,size:Z.icon24})}),(0,n.jsxs)("div",{className:ot,children:[(0,n.jsx)(y,{color:S,variant:"body3",children:s}),a===x.Active&&r&&(0,n.jsx)(kt,{color:"$accent1",fontSize:Wt.body4.fontSize,href:r.url,lineHeight:xt.spacing16,target:"_blank",textDecorationLine:"none",children:r.text})]})]}),!!i&&(0,n.jsx)(uo,{secondsRemaining:i}),a===x.Complete&&(0,n.jsx)(pt,{color:"$statusSuccess",size:"$icon.16"})]})}function po({children:e,rippleColor:t,stepStatus:o}){return o===x.InProgress?(0,n.jsx)("div",{className:ao,children:(0,n.jsx)(dt,{color:t,size:21})}):(0,n.jsxs)("div",{className:ot,children:[o===x.Active&&(0,n.jsx)(to,{rippleColor:t}),(0,n.jsx)("div",{"data-testid":"step-icon",className:N(so+(o===x.Active?ro:io)+(" "+(o===x.Active?oo:no))),children:e})]})}function uo({secondsRemaining:e}){const t=(0,u.useMemo)(()=>{const o=Math.floor(e/60),i=e%60,s=o<10?`0${o}`:o,r=i<10?`0${i}`:i;return`${s}:${r}`},[e]);return(0,n.jsx)(y,{"data-testid":"step-timer",fontSize:14,fontWeight:"500",pr:8,children:t})}function go({step:e,status:t}){const{t:o}=w(),{token:i,pair:s}=e,r=i.symbol??"",a={[x.Preview]:o("common.approveSpend",{symbol:r}),[x.Active]:o("common.wallet.approve"),[x.InProgress]:o("common.approvePending"),[x.Complete]:o("common.approveSpend",{symbol:r})}[t];return(0,n.jsx)(H,{title:a,currency:i,pair:s,learnMore:{url:E.helpArticleUrls.approvalsExplainer,text:o("common.whyApprove")},status:t})}function xo(e){const{step:t,status:o}=e,{t:i}=w(),{token:s}=t,r=s.symbol??"",a={[x.Preview]:i("common.resetLimit",{symbol:r}),[x.Active]:i("common.resetLimitWallet",{symbol:r}),[x.InProgress]:i("common.resettingLimit",{symbol:r}),[x.Complete]:i("common.resetLimit",{symbol:r})}[o];return(0,n.jsx)(H,{title:a,currency:s,status:o})}const mo="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-center _width-t-size-spac100347300 _height-t-size-spac100347300 _borderTopLeftRadius-t-radius-ro1041013639 _borderTopRightRadius-t-radius-ro1041013639 _borderBottomRightRadius-t-radius-ro1041013639 _borderBottomLeftRadius-t-radius-ro1041013639 _backgroundColor-DEP_blue400 ",_o=()=>(0,n.jsx)("div",{className:mo,children:(0,n.jsx)(Xe,{color:"$neutral1",size:"$icon.12"})});function Ne({status:e}){const{t}=w(),o=ne(),i={[x.Preview]:t("common.confirmWallet"),[x.Active]:t("common.confirmWallet"),[x.InProgress]:t("common.transactionPending"),[x.Complete]:t("common.confirmWallet")}[e];return(0,n.jsx)(H,{title:i,icon:(0,n.jsx)(_o,{}),learnMore:{url:E.helpArticleUrls.howToSwapTokens,text:t("common.learnMoreSwap")},rippleColor:o.DEP_blue400.val,status:e})}const it="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-center _width-t-size-spac100347300 _height-t-size-spac100347300 _borderTopLeftRadius-t-radius-ro1041013639 _borderTopRightRadius-t-radius-ro1041013639 _borderBottomRightRadius-t-radius-ro1041013639 _borderBottomLeftRadius-t-radius-ro1041013639 _backgroundColor-accent1 ",fo=()=>(0,n.jsx)("div",{className:it,children:(0,n.jsx)(Zt,{size:"$icon.12"})});function ho({status:e}){const{t}=w(),o=ne(),i=e===x.Active?t("common.signMessageWallet"):t("common.signMessage");return(0,n.jsx)(H,{title:i,icon:(0,n.jsx)(fo,{}),learnMore:{url:E.helpArticleUrls.approvalsExplainer,text:t("common.whySign")},rippleColor:o.accent1.val,status:e})}const So=()=>(0,n.jsx)("div",{className:it,children:(0,n.jsx)(Vt,{size:"$icon.24"})}),Co="#00C3A0";function vo({status:e,index:t,count:o}){const{t:i}=w(),s=o&&o>1?` (${t+1}/${o})`:"",r={[x.Preview]:i("common.approvePermitTx",{indexText:s}),[x.Active]:i("common.approvePermitTx.active",{indexText:s}),[x.InProgress]:i("common.approvePermitTx.pending",{indexText:s}),[x.Complete]:i("common.approvePermitTx",{indexText:s})}[e];return(0,n.jsx)(H,{title:r,icon:(0,n.jsx)(So,{}),rippleColor:Co,learnMore:{url:E.helpArticleUrls.mismatchedImports,text:i("common.approvePermitTx.explainer")},status:e})}const bo="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-center _width-t-size-spac100347300 _height-t-size-spac100347300 _borderTopLeftRadius-t-radius-ro1041013639 _borderTopRightRadius-t-radius-ro1041013639 _borderBottomRightRadius-t-radius-ro1041013639 _borderBottomLeftRadius-t-radius-ro1041013639 _backgroundColor-DEP_blue400 ",To=()=>(0,n.jsx)("div",{className:bo,children:(0,n.jsx)(Xe,{color:"$white",size:"$icon.12"})});function yo({step:e,status:t}){const{t:o}=w(),i=ne(),s=e.type===T.UniswapXSignature?e.deadline:void 0,r=wo(s,t),p=(t===x.Active&&s&&!r?o("common.confirmTimedOut"):void 0)??{[x.Preview]:o("swap.confirmSwap"),[x.Active]:o("common.confirmSwap"),[x.InProgress]:o("common.swapPending"),[x.Complete]:o("swap.confirmSwap")}[t];return(0,n.jsx)(H,{title:p,icon:(0,n.jsx)(To,{}),learnMore:{url:e.type===T.SwapTransactionBatched?E.helpArticleUrls.batchedSwaps:E.helpArticleUrls.howToSwapTokens,text:o("common.learnMoreSwap")},rippleColor:i.DEP_blue400.val,status:t,secondsRemaining:r})}function wo(e,t){const[o,i]=(0,u.useState)();return(0,u.useEffect)(()=>{if(!e||t!==x.Active)return i(void 0),ke;const s=e-Math.floor(Date.now()/1e3);if(s<=0)return ke;i(s);const r=setInterval(()=>{i(a=>a?a-1:(clearInterval(r),a))},1e3);return()=>clearInterval(r)},[e,t]),o}function jo({step:e,status:t}){const{t:o}=w(),{amount:i}=e,{currency:s}=i,r=s.symbol??"",a={[x.Active]:o("common.wrapIn",{symbol:r}),[x.InProgress]:o("common.wrappingToken",{symbol:r}),[x.Preview]:o("common.wrap",{symbol:r}),[x.Complete]:o("common.wrap",{symbol:r})}[t];return(0,n.jsx)(H,{title:a,currency:s,learnMore:{url:E.helpArticleUrls.wethExplainer,text:o("common.whyWrap",{symbol:r})},status:t})}const Io="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _backgroundColor-neutral3 _height-10px _mt-1px _mr-11px _ml-11px _width-2px ",$o="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",Mo="  is_Separator _display-flex _alignItems-stretch _flexDirection-column _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _flexShrink-1 _borderTopWidth-0px _borderRightWidth-0px _borderBottomWidth-1px _borderLeftWidth-0px _flexGrow-1 _height-0px _maxHeight-0px _mt-t-space-spa1360334080 _mb-t-space-spa1360334080 _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid ";function Wo(e){return t=>t.type!==(e==null?void 0:e.type)?!1:e.type===T.TokenApprovalTransaction?t.type===T.TokenApprovalTransaction&&t.token===e.token:!0}function Mi({currentStep:e,steps:t}){function o(r){const a=t.findIndex(Wo(e==null?void 0:e.step)),l=t.indexOf(r);return a<l?x.Preview:a===l?e!=null&&e.accepted?x.InProgress:x.Active:x.Complete}const i=(0,u.useMemo)(()=>t.reduce((r,a)=>(r[a.type]=(r[a.type]||0)+1,r),{}),[t]),s=(0,u.useMemo)(()=>{const r={};return t.map(a=>{r[a.type]=r[a.type]||0;const l=r[a.type];return r[a.type]++,l})},[t]);return t.length===0?null:(0,n.jsxs)($,{px:"$spacing12",enterStyle:{opacity:0},animation:"quicker",children:[(0,n.jsx)("div",{className:Mo}),t.map((r,a)=>(0,n.jsxs)("div",{className:$o,children:[(0,n.jsx)(Po,{step:r,status:o(r),index:s[a],count:i[r.type]}),a!==t.length-1&&(0,n.jsx)("div",{className:Io})]},`progress-indicator-step-${a}`))]})}function Po({step:e,status:t,index:o,count:i}){switch(e.type){case T.WrapTransaction:return(0,n.jsx)(jo,{step:e,status:t});case T.TokenApprovalTransaction:return(0,n.jsx)(go,{step:e,status:t});case T.TokenRevocationTransaction:return(0,n.jsx)(xo,{step:e,status:t});case T.Permit2Signature:return(0,n.jsx)(ho,{step:e,status:t});case T.Permit2Transaction:return(0,n.jsx)(vo,{step:e,status:t,index:o,count:i});case T.SwapTransaction:case T.SwapTransactionAsync:case T.UniswapXSignature:return(0,n.jsx)(yo,{step:e,status:t});case T.IncreasePositionTransaction:case T.IncreasePositionTransactionAsync:case T.DecreasePositionTransaction:return(0,n.jsx)(Ne,{step:e,status:t});case T.MigratePositionTransaction:case T.MigratePositionTransactionAsync:case T.CollectFeesTransactionStep:return(0,n.jsx)(Ne,{step:e,status:t});default:return(0,n.jsx)(n.Fragment,{})}}const Wi=e=>{const t=(e??0)*60;return e?Math.floor(Date.now()/1e3)+t:void 0};export{vi as Deadline,Mi as ProgressIndicator,ye as Settings,bi as Slippage,un as SlippageControl,$i as SlippageWarningModal,yi as TransactionSettings,wi as TransactionSettingsButtonWithSlippage,zn as TransactionSettingsModal,j as TransactionSettingsModalId,Ii as TransactionSettingsModalStoreContextProvider,oe as TransactionSettingsStoreContext,Ti as TransactionSettingsStoreContextProvider,Vn as ViewOnlyModal,_n as createTransactionSettingsStore,Ie as devtools,Ft as errorShakeAnimation,Wi as getTradeSettingsDeadline,xn as logContextUpdate,Ye as subscribeWithSelector,Ci as useAllTransactionSettings,Gt as useGetTransactionSettingsContextValue,le as useModalHide,Si as useSetTransactionSettingsAutoSlippageTolerance,et as useSlippageSettings,we as useTransactionSettingsActions,je as useTransactionSettingsAutoSlippageToleranceStore,z as useTransactionSettingsStore,ji as useTransactionSettingsWithSlippage};
