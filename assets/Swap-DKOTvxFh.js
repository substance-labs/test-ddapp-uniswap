const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LimitForm-SR40RLg0.js","assets/preload-helper-CaakwtpC.js","assets/src-DOOtfpHS.js","assets/Loader-D83W8G1W.js","assets/react-dom-xovCOntK.js","assets/react-CNoFhWkx.js","assets/chunk-DgAfPHQg.js","assets/client-BlU1ozBP.js","assets/jsx-runtime-D7bMTQeG.js","assets/dist-Q7olfaoJ.js","assets/index.web-BqgtOHN3.js","assets/Loader-BrDvHGOz.css","assets/hooks-BXO4d1DJ.js","assets/utils-7WDx1QGa.js","assets/lib-XGdDYWzD.js","assets/lib-DPFIyRke.js","assets/bn-D7somgUb.js","assets/dist-ceZDlR1V.js","assets/dist-QCpUvRkJ.js","assets/lib-CKG8APVv.js","assets/lib-BncBk3QF.js","assets/hash-05APZTFm.js","assets/inherits_browser-Dqx8HagI.js","assets/useQuery-D_ZCw8XG.js","assets/lib-CWHZrl0T.js","assets/cache-BFZkIToX.js","assets/tslib.es6-Dbpxy1u8.js","assets/dijkstra-6umg7ymP.js","assets/encode-utf8-DiSL6KQ9.js","assets/UniconSVGs-CVEtuhJW.js","assets/addresses-D56PBUHX.js","assets/urls-aCnKF23w.js","assets/src-4jDltaEf.css","assets/NetworkFilter-ZFjNguMa.js","assets/useNewChainIds-CIAogFpa.js","assets/utils-BX1Fu73x.js","assets/sha2-Jt0E41S_.js","assets/_u64-b_viZRi_.js","assets/hmac-D-QTodfL.js","assets/sha256-BqbhXHGu.js","assets/isAddress-P2vaZgmG.js","assets/time-D_OqcZ4M.js","assets/config-C4KrHqHG.js","assets/dist-CBK-d0jO.js","assets/chain-ghiO403o.js","assets/node-C_BraYgX.js","assets/formatUnits-DkyMpOD7.js","assets/slice-cfC6NcyN.js","assets/element-Wnp4RkdY.js","assets/useTranslation-BotBuoJf.js","assets/configs-B4dDdw82.js","assets/hooks-Bp0VtWbX.js","assets/statsig-B7I9iQRf.js","assets/useNewChainIds-Do-Plpll.css","assets/Checkbox-Id3GDHn8.js","assets/v4-D6Rlvprs.js","assets/timing-DsWr56iv.js","assets/AlertTriangleFilled-C9tf2eUJ.js","assets/CheckmarkCircle-Znmo2ojy.js","assets/TokenLogo-JlSSDr3Q.js","assets/useEnabledChains-DuB86c95.js","assets/es-Iwj7vF3u.js","assets/react-is-BJXMVkew.js","assets/hooks-Dhx5teK4.js","assets/NetworkFilter-BtA0Zcwk.css","assets/TokenSelector-CNVK2itZ.js","assets/ContextMenuV2.web-DtsTwCPj.js","assets/ContextMenuV2-DzlU48M9.css","assets/WarningModal-f8Gfhd_G.js","assets/Trace-DgHN3Ak9.js","assets/analytics.web-DLc1_wTk.js","assets/TraceContext-Ddfk7zjz.js","assets/Modal.web-DHbL39pN.js","assets/getAlertColor-J5DrJWHv.js","assets/SwapFormStoreContext-3NrPQE3L.js","assets/testIDs-CxYpwoP6.js","assets/WarningModal-Ccwf_bHG.css","assets/slice-DimuiOR8.js","assets/currencyId-Ci6selsx.js","assets/redux-toolkit.esm-BnRUBto_.js","assets/objects-DlLkJwrJ.js","assets/constants-vVZBLDwL.js","assets/constants-CZ9iND_H.js","assets/tokens-Dxd89cHj.js","assets/Tokens-HEKZ8edJ.js","assets/useAccount-C5hwiBwN.js","assets/useCurrencyInfo-Bxa3J04d.js","assets/getCurrencySafetyInfo-BHD1ohD-.js","assets/proto3-DkSQZto4.js","assets/useSupportedChainId-DskHoisQ.js","assets/useMultichainContext-BVmgxqO2.js","assets/types-OmNOta2_.js","assets/types-DbOmsKtk.js","assets/misc-BMnlqqV4.js","assets/V3DutchOrderTrade-Cl7yELmp.js","assets/lib-CgeiDO5B.js","assets/lib-Dj-AwQVD.js","assets/v3-sdk.esm-CHH6GWR1.js","assets/v2-sdk.esm-CIiDMO7F.js","assets/chainParams-DIOvplzi.js","assets/chunk-QMGIS6GS-B91ZVkXt.js","assets/currency-xm5i4cH7.js","assets/connect-transport-9OnIgPz5.js","assets/use-query-8AOGtvlP.js","assets/use-transport-CPomNX05.js","assets/Input-ClKbNpxm.js","assets/useUSDCPrice-HO7Wgroz.js","assets/infiniteQueryBehavior-C10I_UVS.js","assets/mutation-CRQvRc5_.js","assets/queryOptions-P48mrm5X.js","assets/balances-DV0Wvmri.js","assets/promise-client-BYLTs0DC.js","assets/types_pb-yZxlo4b1.js","assets/base-DVpWJ4NW.js","assets/urls-kwiZbYPW.js","assets/createApiClient-BjXZMbEB.js","assets/constants-D9cStT7K.js","assets/selectors-BwkayGDl.js","assets/transactionDetails-BsNW_jus.js","assets/ethers-D2SIY1xg.js","assets/erc20-CdGGKIp0.js","assets/TradingApiClient-Cp_0ez5S.js","assets/ProtocolItems-DhZWSiXS.js","assets/getCurrencyAmount-vvZpAzIm.js","assets/LocalizationContext-B31peW1_.js","assets/constants-CrXoXfFH.js","assets/types-JuyYLR0O.js","assets/createEthersProvider-B5AW2bpJ.js","assets/experiments-rc6XUB0U.js","assets/features-yACC1hVw.js","assets/send.web-CrSXW2rw.js","assets/usePollingIntervalByChain-YBOfXXzb.js","assets/useWallet-CL5owP9P.js","assets/hex-njd-4N-2.js","assets/service-ExploreStatsService_connectquery-YoP81iJ5.js","assets/linking-D29RyAR8.js","assets/useCommonTokensOptionsWithFallback-7qZUIHia.js","assets/index.esm-CLP40SHA.js","assets/Blocked-BNx3Epiv.js","assets/InfoCircleFilled-CBAL5Wj0.js","assets/react-virtualized-auto-sizer.esm-5JBVmqYi.js","assets/slice-CI92BTuM.js","assets/currency-DIOEzjz2.js","assets/AnimatePresencePager-Dk43KD9E.js","assets/CoinConvert-D8dLJ8GW.js","assets/CopyAlt-CU_LJNbN.js","assets/Person-B27R6hM-.js","assets/Pools-DKYxZO3F.js","assets/ReceiveAlt-nuO9D5GJ.js","assets/clipboard.web-CNSIHgMi.js","assets/SplitLogo-Ct--07LT.js","assets/LearnMoreLink-CrJtGK7U.js","assets/slice-DoLbOto3.js","assets/slice-Crjw990S.js","assets/types-Ds0gKmju.js","assets/wallet-gHLp87c6.js","assets/uniswap-Bm-6KILn.js","assets/interface-BdpC4qOF.js","assets/modal-Dvm06CN4.js","assets/dismissNativeKeyboard.web-99F1bxCR.js","assets/noop-BDbB2pLB.js","assets/useBooleanState-QNOWYlXb.js","assets/TokenSelector-Bp2SgUzj.css","assets/PasskeysHelpModal-DejPGCoN.js","assets/Passkey-Bey7xD4Z.js","assets/PasskeysHelpModal-DMyx1ODg.css","assets/OffchainActivityModal-B5RlXTeb.js","assets/state-BVuwBOpM.js","assets/types-BSmAADNJ.js","assets/defaultOptions-ENwqzwHj.js","assets/wagmiConfig-0BYSDqyO.js","assets/constants-CGJJmXwV.js","assets/utils-CDaPKk14.js","assets/embeddedWallet-BdHUTaHg.js","assets/zIndex-CmEE31Ab.js","assets/passkey.web-DakcatU3.js","assets/connector-Cw8HJLtm.js","assets/config-CDfnfyHL.js","assets/rpc-nQR4Ijs4.js","assets/stringify-B82RFruy.js","assets/useEthersProvider-CBgc_azi.js","assets/query-qNZtVuxH.js","assets/parseAccount-CRyN5swV.js","assets/createTransport-WEDNYdh5.js","assets/dist-BWRHWQ_J.js","assets/eventemitter3-BHLpX1jX.js","assets/eventemitter3-DFes51ku.js","assets/public-fap09Zv6.js","assets/call-CTDbaN-t.js","assets/encodeFunctionData-CD63gkvM.js","assets/createBatchScheduler-BJBpfhFD.js","assets/recoverAddress-oPdWABRo.js","assets/getBalance-TsPVbzB5.js","assets/multicall-BYS6jvE9.js","assets/readContract-Cae4hIjn.js","assets/hashMessage-DdzTBpWL.js","assets/localBatchGatewayRequest-CdT4Kija.js","assets/secp256k1-fbKD5lyl.js","assets/http-CIklBnX8.js","assets/useWallet-CpLwPvrh.js","assets/actions-BvAnf7JG.js","assets/useSelectChain-CA5zoRWi.js","assets/useSwitchChain-CY8eYAUF.js","assets/reducer-CcXO4HTO.js","assets/analytics-Ccvj1WVk.js","assets/providers-BELGpWsr.js","assets/prices-BzyZhpWW.js","assets/getContract-CMwwszTa.js","assets/slice-qANrfSbi.js","assets/reducer-1kwGyyVS.js","assets/constants-BNEwFtLH.js","assets/slice-CGCdMmTE.js","assets/actions-Budqlwp-.js","assets/queryOptions-Dj3qRbwo.js","assets/api-BsCrUy1C.js","assets/ms-BqmEYo6j.js","assets/AccountDetails-pkaz6EG4.js","assets/analytics-UE3_EENu.js","assets/types-7DAoWLTI.js","assets/utils-CK6a47NA.js","assets/signing-DH5GfhKu.js","assets/walletMeta-DaLhfhet.js","assets/swapErrorToUserReadableMessage-DgHZMHU-.js","assets/errors-BaezSPLl.js","assets/i18n-CroUvoJw.js","assets/i18next-DD3sT7R5.js","assets/getAction-BBhbL9mE.js","assets/types-NWGai6aQ.js","assets/lpIncentivesSaga-CyYcBLmn.js","assets/useIsUnichainFlashblocksEnabled-BbPYkimv.js","assets/reducer-26KeQlno.js","assets/uniswapx-DgS0k47c.js","assets/useSwapFormStore-D1oVGbBf.js","assets/slice-CYdI68Yo.js","assets/swapTxAndGasInfo-DxVAGFqc.js","assets/slice-CaJcHsUP.js","assets/LimitDisclaimer-C4dN_xEH.js","assets/util-BZ6kLG7e.js","assets/Links-Xomrvpth.js","assets/styled-components-DbVO3u5J.js","assets/clickable-D5qUCIhr.js","assets/PortfolioLogo-C-reBpb6.js","assets/Identicon-SnsLMqUD.js","assets/UnitagsApiClient-CvShPRCK.js","assets/api-u3dxy1Uz.js","assets/CurrencyLogo-CvvmRzOI.js","assets/DoubleLogo-D40dQ2P7.js","assets/PortfolioLogo-DhNKc28U.css","assets/constants-CqzaOqD-.js","assets/Dividers-D5mIbKhU.js","assets/useIsWindowVisible-CtuFA8fK.js","assets/tryParseCurrencyAmount-Bt3FPZDG.js","assets/text-CK4eXdYc.js","assets/index.esm-D6PJCa7X.js","assets/useAccountEffect-CHrs5vTR.js","assets/Dialog-DZrFRjU_.js","assets/GetHelpHeader-DB6Sgdgo.js","assets/EnvelopeHeart-DxsgNuRq.js","assets/GetHelpHeader-DnCuMDfH.css","assets/Dialog-DeRnxDVu.css","assets/Tooltip-DPNhKWF2.js","assets/useInterval-7f86mkEJ.js","assets/polished.es-BASfrnSv.js","assets/Column-ekA0cfjc.js","assets/Row-D0lmZ56K.js","assets/DetailLineItem-d-0mcMrN.js","assets/styled-qLLlrMEu.js","assets/useIsMobile-Cq3RSgOi.js","assets/useHoverProps-BdQsOXMz.js","assets/DetailLineItem-I79qlUKE.css","assets/useContract-CKZ4cOLX.js","assets/UniswapInterfaceMulticall-DLE8QJ-2.js","assets/usePrevious-CggM0Zir.js","assets/types-00FZ6Wno.js","assets/hooks-Muz170pO.js","assets/utils-CjNzOxi9.js","assets/hooks-DB50ZKAa.js","assets/hooks-BA_A7Su9.js","assets/arrow-down-DCHNWUQ6.js","assets/prop-types-BL9JsGr9.js","assets/slash-ayZ3is1Y.js","assets/Arrow-DIna6t35.js","assets/ArrowDown-B8kFPZPX.js","assets/breakpoints-B-pYqY7D.js","assets/OffchainActivityModal-BJeDMKD7.css","assets/SwapDetails-CgubqLa5.js","assets/SwapLineItem-CkeBjgN3.js","assets/SwapLineItem-CNJ9cZnj.css","assets/styled-Cb09-IEr.js","assets/hooks-ViKlw47o.js","assets/getPositions-B2zd3dQ2.js","assets/api-PoolsService_connectquery-N1pfS4Yc.js","assets/useEthersSigner-kdo6Ipah.js","assets/useTokenAllowance-B1d-BbCj.js","assets/wagmi-CsUiFCSO.js","assets/useReadContract-DodDFlY8.js","assets/pools-5GjP-hMy.js","assets/SwapDetails-DbfZkw4o.css","assets/StatusIcon-D9U7YL55.js","assets/useCurrencyBalance-BuHM_Z2M.js","assets/currencyKey-B-LQIyOE.js","assets/useReadContracts-Orb8TypL.js","assets/styles-nntGSkOP.js","assets/OpenLimitOrdersButton-Dx0HFPxC.js","assets/arrow-right-pRMus0t-.js","assets/hooks-CRfHBoLD.js","assets/constants-Cf8nqJuy.js","assets/WalletAlertBadge-ChtBPtO6.js","assets/WalletAlertBadge-BheiGNlV.css","assets/NumericalInput-wkthWxek.js","assets/CurrencySearchModal-CHoQ3krb.js","assets/showSwitchNetworkNotification-C9hFtpTD.js","assets/CurrencySearchModal---Iji430.css","assets/loading-C4pQN7jn.js","assets/useSignInWithPasskey-m9q4-FpM.js","assets/useConnect-DQZiZ0j4.js","assets/urlRoutes-Bn-NftBz.js","assets/page-zDkoCQe4.js","assets/types-DhBONJgE.js","assets/usePasskeyAuthWithHelpModal-DfgGEzej.js","assets/useModalState-BcPI2EiQ.js","assets/isIFramed-Ir4iCEzS.js","assets/DelegationMismatchModal-CsNlr6c6.js","assets/useDisconnect-GQ6byqBk.js","assets/DelegationMismatchModal-wMRultx0.css","assets/web3reactShim-CQtxnXhb.js","assets/useColor-DAHloagH.js","assets/useCurrentBlockTimestamp-Bm-OUlbk.js","assets/useTransactionDeadline-CTg1dE5v.js","assets/useBlockNumber-BeCJLIMW.js","assets/useNativeCurrency-BDMzySGC.js","assets/iconExports-DR2SoqU0.js","assets/hooks-BCKOZK7U.js","assets/colors-DAHeqJj_.js","assets/ThemeToggle-BcuKj11V.js","assets/ThemeToggle-DJ8L1CpN.css","assets/theme-BHMiWygR.js","assets/calculateGasMargin-D8W-u5un.js","assets/maxAmountSpend-DXxbESLb.js","assets/dist-BxQUC-sk.js","assets/alert-triangle-DFSqv9bh.js","assets/x-CjDIEWOj.js","assets/Anchor-B1nkrQbP.js","assets/useDeviceDimensions-iftoqxuy.js","assets/types-Ctc23WnH.js","assets/wrap-ClUP-Vuk.js","assets/LimitForm-BvkHmgjp.css","assets/BuyForm-BjJf3FBD.js","assets/NetworkFee-D_F4jDwh.js","assets/InfoTooltip.web-CkgGEmd3.js","assets/InfoTooltip-BpvgYbJH.css","assets/ExternalLink-DO2F__JQ.js","assets/UniswapX-CtuHCpO-.js","assets/assets-D-uPpcBZ.js","assets/NetworkFee-B2iFK94P.css","assets/ProviderConnectionError-DkCYDieb.js","assets/shared-D1rwQsrh.js","assets/arrow-left-64Zt5ugC.js","assets/shared-DqlkjPmR.css","assets/ProviderConnectionError-CiAVrTtD.css","assets/search-Buiy5VA5.js","assets/AlternateCurrencyDisplay-BcahpX0q.js","assets/PredefinedAmount-D_ex-B61.js","assets/Pill-Bbfdbo1q.js","assets/shared-EXoQIK7V.js","assets/bundle.esm-B4P3X753.js","assets/useDynamicFontSizing-DOxjEhTh.js","assets/BuyForm-BTR9Y0EU.css"])))=>i.map(i=>d[i]);
import{__commonJS as Qt,__toESM as Ge}from"./chunk-DgAfPHQg.js";import{__vitePreload as Zo}from"./preload-helper-CaakwtpC.js";import{require_react as Ia}from"./react-CNoFhWkx.js";import{ADAPTIVE_MODAL_ANIMATION_DURATION as Aa,AnimatePresence as At,BackArrow as Fa,Button as de,Check as ka,Circle as Qo,ClipPath as ja,Defs as Ra,Easing as Gn,G as Qi,H1 as Pa,IconButton as Yi,Image as Wa,Line as Ba,ModalCloseIcon as Ji,PRESS_SCALE as Da,Path as Ce,Popover as Yo,Rect as Na,ResetPresence as Ea,RotatableChevron as $a,SegmentedControl as Ua,SpinningLoader as Ma,Svg as we,Switch as Oa,Tooltip as et,TouchableArea as J,Trans as We,X as ao,YStack as La,colors as Ha,createCollection as Va,createIcon as be,init_module as er,interpolate as yt,module_default as Ht,opacify as co,require__isIterateeCall as za,spacing as Ct,useAnimatedStyle as Vt,useColorsFromTokenColor as qa,useControllableState as lo,useDirection as Ga,useEvent as Xa,useExtractedTokenColor as Ka,useHasValueChanged as Yt,useIsShortMobileDevice as Wt,usePreviousWithLayoutEffect as tr,useSharedValue as ln,useSporeColors as He,validColor as Ft,withRepeat as Ln,withTiming as un,zIndexes as Ne}from"./src-DOOtfpHS.js";import{useTranslation as I}from"./useTranslation-BotBuoJf.js";import{isExtension as zt,isInterface as q,isInterfaceDesktop as Xn,isMobileApp as Be,isMobileWeb as yn,isWeb as D}from"./index.web-BqgtOHN3.js";import{FiatCurrency as Za}from"./constants-CrXoXfFH.js";import{useDispatch as ht,useSelector as Jt}from"./es-Iwj7vF3u.js";import{ReactQueryCacheKey as en}from"./cache-BFZkIToX.js";import{useLocation as nr,useNavigate as or}from"./chunk-QMGIS6GS-B91ZVkXt.js";import{require_jsx_runtime as Qa}from"./jsx-runtime-D7bMTQeG.js";import{CONNECTION_PROVIDER_NAMES as Ya,useEnabledChains as Xe,useIsModeMismatch as Ja,useSigner as ir,useUniswapContext as ot,useUniswapContextSelector as lt}from"./useEnabledChains-DuB86c95.js";import{UNICHAIN_LOGO as ec,assert as tc,isDevEnv as Ke,logger as ge,tryCatch as nc,useEvent as U,useMemoCompare as oc,usePrevious as ut}from"./hooks-BXO4d1DJ.js";import{createSelector as ic}from"./redux-toolkit.esm-BnRUBto_.js";import{RampDirection as Jo,useFiatOnRampAggregatorGetCountryQuery as rc,useFiatOnRampAggregatorSupportedFiatCurrenciesQuery as sc,useFiatOnRampAggregatorSupportedTokensQuery as ac}from"./api-BsCrUy1C.js";import{OneClickSwap as cc,updateFilteredChainIds as lc,useResetOverrideOneClickSwapFlag as uc,useSwapCallback as dc,useTotalBalancesUsdForAnalytics as pc,useWrapCallback as mc}from"./state-BVuwBOpM.js";import{TransactionStepFailedError as fc,getErrorContent as xc,interruptTransactionFlow as rr}from"./utils-CK6a47NA.js";import{CurrencyAmount as gc,Percent as ct,RPCType as sr,Token as hc,TradeType as dt,UniverseChainId as O,getChainInfo as Bt,getChainLabel as kt,getPrimaryStablecoin as vc,init_sdk_core_esm as it,toSupportedChainId as qt}from"./utils-BX1Fu73x.js";import{BigNumber as ve,init_lib$5 as Tn}from"./lib-DPFIyRke.js";import{areCurrenciesEqual as Hn,areCurrencyIdsEqual as ei,buildCurrencyId as jt,buildNativeCurrencyId as ar,buildWrappedNativeCurrencyId as _c,currencyAddress as Kn,currencyId as Oe,currencyIdToAddress as cr,currencyIdToChain as Sc,ensureLeading0x as wc,getNativeAddress as bc}from"./currencyId-Ci6selsx.js";import{PrefetchBalancesWrapper as yc,useTokenBalancesQuery as Tc}from"./slice-DimuiOR8.js";import{ONE_MINUTE_MS as Lt,ONE_SECOND_MS as Dt}from"./time-D_OqcZ4M.js";import{SwapEventName as uo}from"./features-yACC1hVw.js";import{InterfaceEventName as Cc}from"./interface-BdpC4qOF.js";import{SectionName as pn,SwapAndLimitContext as Ic,SwapTab as Y,TokenSelectorFlow as Ac,TokenSelectorModal as Fc,TokenSelectorVariation as ti,TokenWarningModal as po,WarningModalInfoContainer as kc,selectFilteredChainIds as jc,useBlockaidFeeComparisonAnalytics as Rc,useBridgingTokenWithHighestBalance as Pc,useInitialCurrencyState as Wc}from"./TokenSelector-CNVK2itZ.js";import{ElementName as je}from"./element-Wnp4RkdY.js";import{ModalName as ee}from"./modal-Dvm06CN4.js";import{InterfacePageName as Bc}from"./page-zDkoCQe4.js";import{UniswapEventName as Zn}from"./uniswap-Bm-6KILn.js";import{openUri as Nt}from"./linking-D29RyAR8.js";import{require_dist$1 as lr}from"./V3DutchOrderTrade-Cl7yELmp.js";import{Pool as Dc,init_v3_sdk_esm as Nc}from"./v3-sdk.esm-CHH6GWR1.js";import{skipToken as ur,useQuery as mo}from"./useQuery-D_ZCw8XG.js";import{Pair as ni,init_v2_sdk_esm as Ec}from"./v2-sdk.esm-CIiDMO7F.js";import{JsonRpcProvider as dr,init_lib as pr}from"./lib-Dj-AwQVD.js";import{selectIsAtomicBatchingSupported as $c}from"./defaultOptions-ENwqzwHj.js";import{ValueType as pt,getCurrencyAmount as mt}from"./getCurrencyAmount-vvZpAzIm.js";import{getFormattedCurrencyAmount as mr,getSymbolDisplayText as Cn}from"./currency-DIOEzjz2.js";import{DynamicConfigs as fr,SwapConfigKey as xr}from"./configs-B4dDdw82.js";import{FeatureFlags as vt,useDynamicConfigValue as gr,useFeatureFlag as _t}from"./hooks-Bp0VtWbX.js";import{nativeOnChain as hr}from"./objects-DlLkJwrJ.js";import{FALLBACK_SWAP_REQUEST_POLL_INTERVAL_MS as vr,UNKNOWN_SIM_ERROR as fo}from"./analytics-Ccvj1WVk.js";import{sendAnalyticsEvent as Rt}from"./send.web-CrSXW2rw.js";import{ApprovalAction as me,BridgeTrade as In,ChainId as Uc,DEFAULT_PROTOCOL_OPTIONS as _r,NATIVE_ADDRESS_FOR_TRADING_API as Mc,SWAP_GAS_URGENCY_OVERRIDE as Oc,fetchCheckApproval as Lc,fetchSwap as Sr,fetchSwap5792 as wr,fetchSwap7702 as br,getTokenAddressForApi as oi,toTradingApiSupportedChainId as Qn,tradingApiToUniverseChainId as yr,useV4SwapEnabled as An}from"./TradingApiClient-Cp_0ez5S.js";import{ProtocolItems as le}from"./ProtocolItems-DhZWSiXS.js";import{Routing as Z,getEVMTxRequest as Hc,isBridge as ft,isClassic as _e,isInterfaceTransaction as Vc,isJupiter as zc,isUniswapX as xe,isWalletTransaction as qc,isWrap as Tr,makeSelectTransaction as Gc}from"./selectors-BwkayGDl.js";import{TokenProtectionWarning as Gt,convertGasFeeToDisplayValue as mn,getBaseTradeAnalyticsPropertiesFromSwapInfo as ii,getFeeColor as Xc,getFeeWarning as Kc,getIsFeeRelatedWarning as Zc,getSeverityFromTokenProtectionWarning as xo,getSwapFeeUsdFromDerivedSwapInfo as Fn,getTokenProtectionFeeOnTransfer as Cr,getTokenProtectionWarning as Ir,getTokenWarningSeverity as Xt,useActiveGasStrategy as kn,useCardHeaderText as Qc,useCardSubtitleText as Yc,useFormattedUniswapXGasFeeInfo as Jc,useGasFeeFormattedDisplayAmounts as el,useGasFeeHighRelativeToValue as tl,useModalHeaderText as nl,useModalSubtitleText as ol,useOnChainCurrencyBalance as ri,useQueryWithImmediateGarbageCollection as Ar,useSwapAnalytics as il,useTokenWarningCardText as rl,useTrade as sl,useTransactionGasWarning as al,useUSDCPrice as cl,useUSDCValue as Ve,useUSDValueOfGasFee as ll}from"./useUSDCPrice-HO7Wgroz.js";import{require_isEqual as ul}from"./balances-DV0Wvmri.js";import{TokenList as si}from"./getCurrencySafetyInfo-BHD1ohD-.js";import{queryOptions as dl}from"./queryOptions-P48mrm5X.js";import{uniswapUrls as ne}from"./urls-kwiZbYPW.js";import{FetchError as pl,isRateLimitFetchError as ml}from"./createApiClient-BjXZMbEB.js";import{TransactionStatus as fl,TransactionType as go}from"./transactionDetails-BsNW_jus.js";import{NumberType as te}from"./types-JuyYLR0O.js";import{formatCurrencyAmount as Kt,useAppFiatCurrencyInfo as xl,useFiatCurrencyInfo as gl,useLocalizationContext as oe}from"./LocalizationContext-B31peW1_.js";import{WarningAction as Pe,WarningLabel as z,WarningSeverity as M,getAlertColor as jn}from"./getAlertColor-J5DrJWHv.js";import{CurrencyField as v}from"./currency-xm5i4cH7.js";import{useIsSupportedChainId as hl}from"./useSupportedChainId-DskHoisQ.js";import{useWallet as ce}from"./useWallet-CL5owP9P.js";import{useTrace as ho}from"./TraceContext-Ddfk7zjz.js";import{queryWithoutCache as vl}from"./queryOptions-Dj3qRbwo.js";import{TransactionStepType as _l}from"./types-7DAoWLTI.js";import{useAccount as Fr}from"./useAccount-C5hwiBwN.js";import{updateTransaction as Sl}from"./slice-qANrfSbi.js";import{noop as wl}from"./noop-BDbB2pLB.js";import{v4_default as bl}from"./v4-D6Rlvprs.js";import{calculateRateLine as yl,getRateToDisplay as Tl,isSignerMnemonicAccountDetails as ai,requireAcceptNewTrade as Cl,validatePermit as kr,validateTransactionRequest as Yn,validateTransactionRequests as Rn}from"./AccountDetails-pkaz6EG4.js";import{Flex as L,Loader as Il,Stack$1 as vo,Text as y,View$1 as Vn,composeEventHandlers as jr,concatClassName as $e,createStyledContext as tn,iconSizes as Ae,isWeb as Al,styled as rt,useComposedRefs as Fl,useMedia as kl,withStaticProperties as Rr}from"./Loader-D83W8G1W.js";import{Checkbox as Pr}from"./Checkbox-Id3GDHn8.js";import{Gas as jl,IndicativeLoadingWrapper as Wr,InfoCircle as fn,NetworkFee as Rl,NetworkFeeWarning as Pl,TransactionDetailsTooltip as B,UniswapXFee as Wl,UniswapXText as Et,WarningInfo as De}from"./NetworkFee-D_F4jDwh.js";import{HeightAnimator as _o}from"./HeightAnimator-DF8znv78.js";import{Deadline as Bl,ProgressIndicator as Dl,Settings as Nl,Slippage as El,SlippageControl as $l,SlippageWarningModal as Ul,TransactionSettings as Ml,TransactionSettingsButtonWithSlippage as Ol,TransactionSettingsModal as Br,TransactionSettingsModalId as Dr,TransactionSettingsModalStoreContextProvider as Ll,TransactionSettingsStoreContext as Hl,TransactionSettingsStoreContextProvider as Vl,ViewOnlyModal as zl,devtools as Ze,getTradeSettingsDeadline as ql,logContextUpdate as So,subscribeWithSelector as Gl,useAllTransactionSettings as Nr,useGetTransactionSettingsContextValue as Xl,useModalHide as Kl,useSetTransactionSettingsAutoSlippageTolerance as Zl,useSlippageSettings as Er,useTransactionSettingsActions as $r,useTransactionSettingsAutoSlippageToleranceStore as Ur,useTransactionSettingsStore as st,useTransactionSettingsWithSlippage as Ql}from"./getTradeSettingsDeadline-B3uZN4NF.js";import{CurrencyInputPanel as Mr,TransactionModalContextProvider as Yl,TransactionScreen as Se,getCountry as Jl,isMaxPercentage as eu,maybeLogFirstSwapAction as zn,useMaxAmountSpend as tu,useOnSelectCurrency as nu,useTransactionModalContext as re,useValueAsRef as ou}from"./CurrencyInputPanel-CJ-UCFJ3.js";import{extractBaseUrl as iu}from"./urls-aCnKF23w.js";import{ElementAfterText as ru,NewTag as su}from"./useNewChainIds-CIAogFpa.js";import{AlertTriangleFilled as Le}from"./AlertTriangleFilled-C9tf2eUJ.js";import{ArrowDown as au}from"./ArrowDown-B8kFPZPX.js";import{InfoCircleFilled as Pn}from"./InfoCircleFilled-CBAL5Wj0.js";import{Lightning as cu}from"./Lightning-BPcc3_Cc.js";import{useIsDarkMode as lu}from"./ThemeToggle-BcuKj11V.js";import{Passkey as uu}from"./Passkey-Bey7xD4Z.js";import{Shuffle as du,SplitLogo as pu}from"./SplitLogo-Ct--07LT.js";import{UniswapLogo as wo}from"./UniswapLogo-D1ayVSkF.js";import{AnimatedUniswapX as mu,UniswapX as xt}from"./UniswapX-CtuHCpO-.js";import{AnimatedFlex as fu}from"./AnimatedFlex-BgzbJK30.js";import{useDebounceWithStatus as ci}from"./timing-DsWr56iv.js";import{FLASHBLOCKS_INSTANT_BALANCE_TIMEOUT as bo,FLASHBLOCKS_UI_SKIP_ROUTES as xu,NON_FLASHBLOCKS_INSTANT_BALANCE_BUTTON_DURATION as gu,useIsUnichainFlashblocksEnabled as St}from"./useIsUnichainFlashblocksEnabled-BbPYkimv.js";import{SwapFormStoreContext as Or}from"./SwapFormStoreContext-3NrPQE3L.js";import{create as Qe,shallow as hu,useShallow as Ue,useStore as Fe,useSwapFormStore as N,useSwapFormStoreBase as vu,useSwapFormStoreDerivedSwapInfo as ie}from"./useSwapFormStore-D1oVGbBf.js";import{PermitMethod as xn,isValidSwapTxContext as gn}from"./swapTxAndGasInfo-DxVAGFqc.js";import{AccountType as Lr}from"./types-NWGai6aQ.js";import{useCurrencyInfo as nt,useNativeCurrencyInfo as _u}from"./useCurrencyInfo-Bxa3J04d.js";import{setHasDismissedBridgingWarning as Su,setHasDismissedLowNetworkTokenWarning as wu}from"./slice-DoLbOto3.js";import{clearNotificationQueue as bu}from"./slice-Crjw990S.js";import{usePrevious as rn}from"./usePrevious-CggM0Zir.js";import{useAppSelector as yu}from"./hooks-Muz170pO.js";import{CONVERSION_EVENTS as li,useConversionTracking as Tu}from"./useConversionTracking-9d_tCytj.js";import{Arrow as Hr}from"./Arrow-DIna6t35.js";import{CurrencyLogo as tt,NetworkLogo as hn,TokenLogo as ui}from"./TokenLogo-JlSSDr3Q.js";import{useAccountDrawer as Cu}from"./hooks-CRfHBoLD.js";import{useModalState as Iu}from"./useModalState-BcPI2EiQ.js";import{useMultichainContext as Vr}from"./useMultichainContext-BVmgxqO2.js";import{require_prop_types as Au}from"./prop-types-BL9JsGr9.js";import{ExternalLink as Fu}from"./Links-Xomrvpth.js";import{require_tsafe as ku}from"./tsafe-BS8OsPXq.js";import{PageType as Jn,useIsPage as eo}from"./useIsPage-CCVcHkKr.js";import{TestID as ze}from"./testIDs-CxYpwoP6.js";import{useCurrencies as ju,usePrefetchSwappableTokens as di,useTradingApiSwappableTokensQuery as Ru}from"./useCommonTokensOptionsWithFallback-7qZUIHia.js";import{SwitchLocaleLink as Pu}from"./SwitchLocaleLink-BUGvLhIf.js";import{PageWrapper as Wu}from"./styled-Cb09-IEr.js";import{Trace as yo,Trace_default as qe}from"./Trace-DgHN3Ak9.js";import{Modal as zr}from"./Modal.web-DHbL39pN.js";import{WarningModal as $t,WarningModalContent as Bu}from"./WarningModal-f8Gfhd_G.js";import{InfoTooltip as Wn}from"./InfoTooltip.web-CkgGEmd3.js";import{AssetType as qr,usePriceUXEnabled as ue}from"./assets-D-uPpcBZ.js";import{LearnMoreLink as wt}from"./LearnMoreLink-CrJtGK7U.js";import{WarningIcon as Gr,useDismissedTokenWarnings as pi}from"./react-virtualized-auto-sizer.esm-5JBVmqYi.js";import{MultichainContextProvider as Du}from"./MultichainContext-CEAgN3e0.js";import{useGetPasskeyAuthStatus as Nu}from"./useGetPasskeyAuthStatus-QVLoUPch.js";import{AppNotificationType as mi}from"./types-Ds0gKmju.js";import{dismissNativeKeyboard as Eu}from"./dismissNativeKeyboard.web-99F1bxCR.js";import{WrapType as Te}from"./wrap-ClUP-Vuk.js";import{useIsBlocked as To}from"./hooks-XT5i__xU.js";import{require_toNumber as $u}from"./toNumber-iK_F5vx6.js";import{getOutputAmountUsingOutputTransferLog as Uu,shouldShowFlashblocksUI as Co}from"./utils-LZMRiXFW.js";import{InlineWarningCard as Xr}from"./InlineWarningCard-p0OrN1e9.js";import{DYNAMIC_FEE_AMOUNT as Mu,V2_DEFAULT_FEE_TIER as Ou}from"./pools-5GjP-hMy.js";import{useBooleanState as Kr}from"./useBooleanState-QNOWYlXb.js";import{isIFramed as Lu}from"./isIFramed-Ir4iCEzS.js";let vn;(function(e){let t=(function(n){return n.RESOURCE_NOT_FOUND="ResourceNotFound",n.QUOTE_AMOUNT_TOO_LOW_ERROR="QuoteAmountTooLowError",n.TOKEN_BALANCE_NOT_AVAILABLE="TokenBalanceNotAvailable",n.INSUFFICIENT_BALANCE="InsufficientBalance",n})({});e.errorCode=t})(vn||(vn={}));let It=(function(e){return e.SIMULATION_ERROR="SIMULATION_ERROR",e.UNSUPPORTED_SIMULATION="UNSUPPORTED_SIMULATION",e.SIMULATION_UNAVAILABLE="SIMULATION_UNAVAILABLE",e.SLIPPAGE_TOO_LOW="SLIPPAGE_TOO_LOW",e.TRANSFER_FROM_FAILED="TRANSFER_FROM_FAILED",e})({});var m=Ge(Ia(),1),o=Ge(Qa(),1);const Hu="Collapsible",{Provider:Vu,useStyledContext:Zr}=tn(),Qr=m.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:i,defaultOpen:r,disabled:s,onOpenChange:a,...c}=e,[l=!1,u]=lo({prop:i,defaultProp:r,onChange:a});return(0,o.jsx)(Vu,{scope:n,disabled:s,contentId:m.useId(),open:l,onOpenToggle:m.useCallback(()=>u(d=>!d),[u]),children:(0,o.jsx)(vo,{"data-state":ns(l),"data-disabled":s?"":void 0,...c,ref:t})})});Qr.displayName=Hu;const Yr="CollapsibleTrigger",fi=rt(vo,{name:Yr,tag:"button"}),Jr=fi.styleable((e,t)=>{const{__scopeCollapsible:n,children:i,...r}=e,s=Zr(n);return(0,o.jsx)(fi,{"aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":ns(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:t,onPress:jr(e.onPress,s.onOpenToggle),children:typeof i=="function"?i({open:s.open}):i})});Jr.displayName=Yr;const es="CollapsibleContent",xi=rt(vo,{name:es}),ts=xi.styleable((e,t)=>{const{forceMount:n,children:i,__scopeCollapsible:r,...s}=e,a=Zr(r);return(0,o.jsx)(At,{...s,children:n||a.open?(0,o.jsx)(xi,{ref:t,...s,children:(0,o.jsx)(Ea,{children:i})}):null})});ts.displayName=es;function ns(e){return e?"open":"closed"}const Io=Rr(Qr,{Trigger:Jr,Content:ts}),os="Accordion",zu=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Ao,qu]=Va(os),gt="Accordion",Fo=m.forwardRef((e,t)=>{const{type:n,...i}=e,r=i,s=i;return(0,o.jsx)(Ao.Provider,{__scopeCollection:e.__scopeAccordion||gt,children:n==="multiple"?(0,o.jsx)(Zu,{...s,ref:t}):(0,o.jsx)(Ku,{...r,ref:t})})});Fo.displayName=os;Fo.propTypes={type(e){const t=e.value||e.defaultValue;return e.type&&!["single","multiple"].includes(e.type)?new Error("Invalid prop `type` supplied to `Accordion`. Expected one of `single | multiple`."):e.type==="multiple"&&typeof t=="string"?new Error("Invalid prop `type` supplied to `Accordion`. Expected `single` when `defaultValue` or `value` is type `string`."):e.type==="single"&&Array.isArray(t)?new Error("Invalid prop `type` supplied to `Accordion`. Expected `multiple` when `defaultValue` or `value` is type `string[]`."):null}};const{Provider:is,useStyledContext:Gu}=tn(),{Provider:rs,useStyledContext:Xu}=tn(),Ku=m.forwardRef((e,t)=>{const{value:n,defaultValue:i,control:r,onValueChange:s=()=>{},collapsible:a=!1,...c}=e,[l,u]=lo({prop:n,defaultProp:i||"",onChange:s});return(0,o.jsx)(is,{scope:e.__scopeAccordion,value:l?[l]:[],onItemOpen:u,onItemClose:m.useCallback(()=>a&&u(""),[u,a]),children:(0,o.jsx)(rs,{scope:e.__scopeAccordion,collapsible:a,children:(0,o.jsx)(ss,{...c,ref:t})})})}),Zu=m.forwardRef((e,t)=>{const{value:n,defaultValue:i,onValueChange:r=()=>{},...s}=e,[a,c]=lo({prop:n,defaultProp:i||[],onChange:r}),l=m.useCallback(d=>c((p=[])=>[...p,d]),[c]),u=m.useCallback(d=>c((p=[])=>p.filter(f=>f!==d)),[c]);return(0,o.jsx)(is,{scope:e.__scopeAccordion,value:a||[],onItemOpen:l,onItemClose:u,children:(0,o.jsx)(rs,{scope:e.__scopeAccordion,collapsible:!0,children:(0,o.jsx)(ss,{...s,ref:t})})})}),{Provider:Qu,useStyledContext:Bn}=tn(),ss=m.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:i,dir:r,orientation:s="vertical",...a}=e,c=m.useRef(null),l=Fl(c,t),u=qu(n||gt),d=Ga(r)==="ltr",p=jr(e.onKeyDown,f=>{var x;if(!zu.includes(f.key))return;const g=f.target,h=u().filter(F=>{var W;return!(!((W=F.ref.current)===null||W===void 0)&&W.disabled)}),S=h.findIndex(F=>F.ref.current===g),_=h.length;if(S===-1)return;f.preventDefault();let w=S;const C=0,b=_-1,j=()=>{w=S+1,w>b&&(w=C)},A=()=>{w=S-1,w<C&&(w=b)};switch(f.key){case"Home":w=C;break;case"End":w=b;break;case"ArrowRight":s==="horizontal"&&(d?j():A());break;case"ArrowDown":s==="vertical"&&j();break;case"ArrowLeft":s==="horizontal"&&(d?A():j());break;case"ArrowUp":s==="vertical"&&A();break}const P=w%_;(x=h[P].ref.current)===null||x===void 0||x.focus()});return(0,o.jsx)(Qu,{scope:n,disabled:i,direction:r,orientation:s,children:(0,o.jsx)(Ao.Slot,{__scopeCollection:n||gt,children:(0,o.jsx)(La,{"data-orientation":s,ref:l,...a,...Al&&{onKeyDown:p}})})})}),Yu="AccordionItem",{Provider:Ju,useStyledContext:Dn}=tn(),as=m.forwardRef((e,t)=>{const{__scopeAccordion:n,value:i,...r}=e,s=Bn(n),a=Gu(n),c=m.useId(),l=i&&a.value.includes(i)||!1,u=s.disabled||e.disabled;return(0,o.jsx)(Ju,{scope:n,open:l,disabled:u,triggerId:c,children:(0,o.jsx)(Io,{"data-orientation":s.orientation,"data-state":l?"open":"closed",__scopeCollapsible:n||gt,...r,ref:t,disabled:u,open:l,onOpenChange:d=>{d?a.onItemOpen(i):a.onItemClose(i)}})})});as.displayName=Yu;const ed="AccordionHeader",cs=m.forwardRef((e,t)=>{const{__scopeAccordion:n,...i}=e,r=Bn(n),s=Dn(n);return(0,o.jsx)(Pa,{"data-orientation":r.orientation,"data-state":id(s.open),"data-disabled":s.disabled?"":void 0,...i,ref:t})});cs.displayName=ed;const gi=rt(Io.Trigger,{variants:{unstyled:{false:{cursor:"pointer",backgroundColor:"$background",borderColor:"$borderColor",borderWidth:1,padding:"$true",hoverStyle:{backgroundColor:"$backgroundHover"},focusStyle:{backgroundColor:"$backgroundFocus"},pressStyle:{backgroundColor:"$backgroundPress"}}}},defaultVariants:{unstyled:{}.TAMAGUI_HEADLESS==="1"}}),td=gi.styleable(function(e,t){const{__scopeAccordion:n,...i}=e,r=Bn(n),s=Dn(n),a=Xu(n);return(0,o.jsx)(Ao.ItemSlot,{__scopeCollection:n||gt,children:(0,o.jsx)(gi,{__scopeCollapsible:n||gt,"aria-disabled":s.open&&!a.collapsible||void 0,"data-orientation":r.orientation,id:s.triggerId,...i,ref:t})})}),hi=rt(Io.Content,{variants:{unstyled:{false:{padding:"$true",backgroundColor:"$background"}}},defaultVariants:{unstyled:{}.TAMAGUI_HEADLESS==="1"}}),nd=hi.styleable(function(e,t){const{__scopeAccordion:n,...i}=e,r=Bn(n),s=Dn(n);return(0,o.jsx)(hi,{role:"region","aria-labelledby":s.triggerId,"data-orientation":r.orientation,__scopeCollapsible:n||gt,...i,ref:t})}),od=Vn.styleable((e,t)=>{const n=Dn(),{children:i,...r}=e,[s,a]=m.useState(0),c=Xa(({nativeEvent:l})=>{l.layout.height&&a(l.layout.height)});return(0,o.jsx)(Vn,{ref:t,height:n.open?s:0,...r,children:(0,o.jsx)(Vn,{position:"absolute",width:"100%",onLayout:c,children:i})})});function id(e){return e?"open":"closed"}const Zt=Rr(Fo,{Trigger:td,Header:cs,Content:nd,Item:as,HeightAnimator:od}),[rd,T1]=be({name:"AlertCircleFilled",getIcon:e=>(0,o.jsx)(we,{viewBox:"0 0 24 24",fill:"none",...e,children:(0,o.jsx)(Ce,{d:"M12 17C12.2833 17 12.5208 16.9042 12.7125 16.7125C12.9042 16.5208 13 16.2833 13 16C13 15.7167 12.9042 15.4792 12.7125 15.2875C12.5208 15.0958 12.2833 15 12 15C11.7167 15 11.4792 15.0958 11.2875 15.2875C11.0958 15.4792 11 15.7167 11 16C11 16.2833 11.0958 16.5208 11.2875 16.7125C11.4792 16.9042 11.7167 17 12 17ZM11 13H13V7H11V13ZM12 22C10.6167 22 9.31667 21.7375 8.1 21.2125C6.88333 20.6875 5.825 19.975 4.925 19.075C4.025 18.175 3.3125 17.1167 2.7875 15.9C2.2625 14.6833 2 13.3833 2 12C2 10.6167 2.2625 9.31667 2.7875 8.1C3.3125 6.88333 4.025 5.825 4.925 4.925C5.825 4.025 6.88333 3.3125 8.1 2.7875C9.31667 2.2625 10.6167 2 12 2C13.3833 2 14.6833 2.2625 15.9 2.7875C17.1167 3.3125 18.175 4.025 19.075 4.925C19.975 5.825 20.6875 6.88333 21.2125 8.1C21.7375 9.31667 22 10.6167 22 12C22 13.3833 21.7375 14.6833 21.2125 15.9C20.6875 17.1167 19.975 18.175 19.075 19.075C18.175 19.975 17.1167 20.6875 15.9 21.2125C14.6833 21.7375 13.3833 22 12 22Z",fill:"currentColor"})}),defaultFill:"#7D7D7D"}),[sd,C1]=be({name:"AnglesDownUp",getIcon:e=>(0,o.jsx)(we,{viewBox:"0 0 17 16",fill:"none",...e,children:(0,o.jsx)(Ce,{d:"M11.5201 11.6467C11.7154 11.842 11.7154 12.1587 11.5201 12.354C11.4227 12.4514 11.2947 12.5007 11.1667 12.5007C11.0387 12.5007 10.9107 12.452 10.8134 12.354L8.50004 10.0407L6.18672 12.354C5.99139 12.5494 5.6747 12.5494 5.47937 12.354C5.28403 12.1587 5.28403 11.842 5.47937 11.6467L8.14603 8.98C8.34137 8.78466 8.65806 8.78466 8.85339 8.98L11.5201 11.6467ZM8.14668 7.02003C8.24402 7.11737 8.37204 7.16668 8.50004 7.16668C8.62804 7.16668 8.75606 7.11803 8.85339 7.02003L11.5201 4.35337C11.7154 4.15804 11.7154 3.84135 11.5201 3.64601C11.3247 3.45068 11.008 3.45068 10.8127 3.64601L8.49939 5.95933L6.18607 3.64601C5.99074 3.45068 5.67405 3.45068 5.47871 3.64601C5.28338 3.84135 5.28338 4.15804 5.47871 4.35337L8.14668 7.02003Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.4"})}),defaultFill:"#CECECE"}),[ad,I1]=be({name:"AnglesMaximize",getIcon:e=>(0,o.jsx)(we,{viewBox:"0 0 18 18",fill:"none",...e,children:(0,o.jsx)(Ce,{d:"M12.2805 10.2199C12.5738 10.5132 12.5738 10.9872 12.2805 11.2805L9.28049 14.2805C9.13424 14.4268 8.94221 14.5002 8.75021 14.5002C8.55821 14.5002 8.36619 14.4268 8.21994 14.2805L5.21994 11.2805C4.92669 10.9872 4.92669 10.5132 5.21994 10.2199C5.51319 9.92669 5.98724 9.92669 6.28049 10.2199L8.75021 12.6897L11.2199 10.2199C11.5132 9.92669 11.9872 9.92669 12.2805 10.2199ZM6.28049 8.28049L8.75021 5.81076L11.2199 8.28049C11.3662 8.42674 11.5582 8.50021 11.7502 8.50021C11.9422 8.50021 12.1342 8.42674 12.2805 8.28049C12.5738 7.98724 12.5738 7.51319 12.2805 7.21994L9.28049 4.21994C8.98724 3.92669 8.51319 3.92669 8.21994 4.21994L5.21994 7.21994C4.92669 7.51319 4.92669 7.98724 5.21994 8.28049C5.51319 8.57374 5.98724 8.57374 6.28049 8.28049Z",fill:"currentColor"})})}),[cd,A1]=be({name:"AnglesMinimize",getIcon:e=>(0,o.jsx)(we,{viewBox:"0 0 18 18",fill:"none",...e,children:(0,o.jsx)(Ce,{d:"M12.5302 12.9698C12.8235 13.263 12.8235 13.7371 12.5302 14.0303C12.384 14.1766 12.192 14.25 12 14.25C11.808 14.25 11.6159 14.1766 11.4697 14.0303L8.99997 11.5606L6.53024 14.0303C6.23699 14.3236 5.76294 14.3236 5.46969 14.0303C5.17644 13.7371 5.17644 13.263 5.46969 12.9698L8.46969 9.96975C8.76294 9.6765 9.23699 9.6765 9.53024 9.96975L12.5302 12.9698ZM8.46969 8.0303C8.61594 8.17655 8.80797 8.25003 8.99997 8.25003C9.19197 8.25003 9.38399 8.17655 9.53024 8.0303L12.5302 5.0303C12.8235 4.73705 12.8235 4.263 12.5302 3.96975C12.237 3.6765 11.7629 3.6765 11.4697 3.96975L8.99997 6.43948L6.53024 3.96975C6.23699 3.6765 5.76294 3.6765 5.46969 3.96975C5.17644 4.263 5.17644 4.73705 5.46969 5.0303L8.46969 8.0303Z",fill:"currentColor"})})}),[ld,F1]=be({name:"ChartBar",getIcon:e=>(0,o.jsx)(we,{viewBox:"0 0 12 12",fill:"currentColor",...e,children:(0,o.jsx)(Ce,{d:"M6.33333 12H5.66667C5 12 4.66667 11.6667 4.66667 11V1C4.66667 0.333333 5 0 5.66667 0H6.33333C7 0 7.33333 0.333333 7.33333 1V11C7.33333 11.6667 7 12 6.33333 12ZM12 11V4.33333C12 3.66667 11.6667 3.33333 11 3.33333H10.3333C9.66667 3.33333 9.33333 3.66667 9.33333 4.33333V11C9.33333 11.6667 9.66667 12 10.3333 12H11C11.6667 12 12 11.6667 12 11ZM2.66667 11V7C2.66667 6.33333 2.33333 6 1.66667 6H1C0.333333 6 0 6.33333 0 7V11C0 11.6667 0.333333 12 1 12H1.66667C2.33333 12 2.66667 11.6667 2.66667 11Z",fill:"currentColor"})})}),[vi,k1]=be({name:"Dot",getIcon:e=>(0,o.jsx)(we,{viewBox:"0 0 16 16",fill:"none",...e,children:(0,o.jsxs)(Qi,{id:"Dot",children:[(0,o.jsx)(Qo,{id:"Ellipse 4",cx:"8",cy:"8",r:"6",fill:"currentColor",fillOpacity:"0.08"}),(0,o.jsx)(Qo,{id:"Ellipse 5",cx:"8",cy:"8",r:"2",fill:"currentColor",fillOpacity:"0.63"})]})}),defaultFill:"#131313"}),[ud,j1]=be({name:"DotLine",getIcon:e=>(0,o.jsx)(we,{width:"100%",viewBox:"850 0 300 200",...e,children:(0,o.jsx)(Ba,{x1:"0",x2:"3000",y1:"100",y2:"100",stroke:"currentColor",strokeWidth:"20",strokeLinecap:"round",strokeDasharray:"1, 45"})})}),[dd,R1]=be({name:"HelpCenter",getIcon:e=>(0,o.jsx)(we,{viewBox:"0 0 24 24",fill:"none",...e,children:(0,o.jsx)(Ce,{d:"M18 3H6C4 3 3 4 3 6V21L6 18H18C20 18 21 17 21 15V6C21 4 20 3 18 3ZM12.02 15C11.468 15 11.0149 14.552 11.0149 14C11.0149 13.448 11.458 13 12.01 13H12.02C12.573 13 13.02 13.448 13.02 14C13.02 14.552 12.572 15 12.02 15ZM13.345 11.051C12.789 11.421 12.713 11.608 12.71 11.616C12.597 11.918 12.3051 12.1121 11.9971 12.1121C11.9151 12.1121 11.833 12.098 11.752 12.069C11.367 11.932 11.1581 11.523 11.2891 11.135C11.4921 10.535 12.0849 10.087 12.5149 9.802C13.1509 9.379 13.1579 8.95004 13.1079 8.66504C13.0299 8.22404 12.6529 7.84604 12.2109 7.76904C11.8749 7.70804 11.5381 7.79494 11.2781 8.01294C11.0221 8.22794 10.876 8.542 10.876 8.875C10.876 9.289 10.54 9.625 10.126 9.625C9.71198 9.625 9.37598 9.289 9.37598 8.875C9.37598 8.097 9.71796 7.36401 10.314 6.86401C10.91 6.36401 11.6939 6.15402 12.4709 6.29102C13.5299 6.47702 14.399 7.34603 14.585 8.40503C14.769 9.45803 14.329 10.397 13.345 11.051Z",fill:"currentColor"})})}),[ls,P1]=be({name:"OrderRouting",getIcon:e=>(0,o.jsx)(we,{viewBox:"0 0 25 24",fill:"none",...e,children:(0,o.jsx)(Ce,{d:"M6.5 5C5.94772 5 5.5 5.44772 5.5 6C5.5 6.55228 5.94772 7 6.5 7C7.05228 7 7.5 6.55228 7.5 6C7.5 5.44772 7.05228 5 6.5 5ZM3.5 6C3.5 4.34315 4.84315 3 6.5 3C7.80622 3 8.91746 3.83481 9.32929 5H16.5C18.7091 5 20.5 6.79086 20.5 9C20.5 11.2091 18.7091 13 16.5 13H8.5C7.39543 13 6.5 13.8954 6.5 15C6.5 16.1046 7.39543 17 8.5 17H15.6707C16.0825 15.8348 17.1938 15 18.5 15C20.1569 15 21.5 16.3431 21.5 18C21.5 19.6569 20.1569 21 18.5 21C17.1938 21 16.0825 20.1652 15.6707 19H8.5C6.29086 19 4.5 17.2091 4.5 15C4.5 12.7909 6.29086 11 8.5 11H16.5C17.6046 11 18.5 10.1046 18.5 9C18.5 7.89543 17.6046 7 16.5 7H9.32929C8.91746 8.16519 7.80622 9 6.5 9C4.84315 9 3.5 7.65685 3.5 6ZM18.5 17C17.9477 17 17.5 17.4477 17.5 18C17.5 18.5523 17.9477 19 18.5 19C19.0523 19 19.5 18.5523 19.5 18C19.5 17.4477 19.0523 17 18.5 17Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}),defaultFill:"#9B9B9B"}),[to,W1]=be({name:"ShieldCheck",getIcon:e=>(0,o.jsx)(we,{viewBox:"0 0 19 20",fill:"none",...e,children:(0,o.jsx)(Ce,{d:"M9.51807 0C7.27807 1.111 5.5 2 0.5 3C0.5 4.137 0.5 7.70192 0.5 8.88892C0.5 15.5559 6.167 18.889 9.5 20C12.833 18.889 18.5 15.5559 18.5 8.88892C18.5 7.66392 18.5 4.194 18.5 3C13.5 2 11.7221 1.111 9.51807 0ZM13.042 8.53003L9.04199 12.53C8.89599 12.676 8.70396 12.75 8.51196 12.75C8.31996 12.75 8.12793 12.677 7.98193 12.53L5.98193 10.53C5.68893 10.237 5.68893 9.76199 5.98193 9.46899C6.27493 9.17599 6.74997 9.17599 7.04297 9.46899L8.51294 10.939L11.9829 7.46899C12.2759 7.17599 12.7509 7.17599 13.0439 7.46899C13.3369 7.76199 13.335 8.23703 13.042 8.53003Z",fill:"currentColor"})})}),[pd,B1]=be({name:"SortVertical",getIcon:e=>(0,o.jsx)(we,{viewBox:"0 0 17 16",fill:"none",...e,children:(0,o.jsx)(Ce,{d:"M11.638 8.86209C11.8987 9.12275 11.8987 9.54413 11.638 9.80479L8.97138 12.4715C8.84138 12.6015 8.67069 12.6668 8.50002 12.6668C8.32936 12.6668 8.15867 12.6015 8.02867 12.4715L5.362 9.80479C5.10134 9.54413 5.10134 9.12275 5.362 8.86209C5.62267 8.60142 6.04405 8.60142 6.30471 8.86209L8.50002 11.0574L10.6953 8.86209C10.956 8.60142 11.3774 8.60142 11.638 8.86209ZM6.30471 7.13813L8.50002 4.94281L10.6953 7.13813C10.8253 7.26813 10.996 7.33344 11.1667 7.33344C11.3374 7.33344 11.508 7.26813 11.638 7.13813C11.8987 6.87746 11.8987 6.45609 11.638 6.19542L8.97138 3.52875C8.71071 3.26809 8.28934 3.26809 8.02867 3.52875L5.362 6.19542C5.10134 6.45609 5.10134 6.87746 5.362 7.13813C5.62267 7.39879 6.04405 7.39879 6.30471 7.13813Z",fill:"currentColor"})}),defaultFill:"#CECECE"}),[md,D1]=be({name:"Stopwatch",getIcon:e=>(0,o.jsx)(we,{viewBox:"0 0 16 16",fill:"none",...e,children:(0,o.jsx)(Ce,{d:"M5.50001 2C5.50001 1.724 5.72401 1.5 6.00001 1.5H9.33334C9.60934 1.5 9.83334 1.724 9.83334 2C9.83334 2.276 9.60934 2.5 9.33334 2.5H6.00001C5.72401 2.5 5.50001 2.276 5.50001 2ZM12.6667 9C12.6667 11.7613 10.428 14 7.66667 14C4.90534 14 2.66667 11.7613 2.66667 9C2.66667 6.23867 4.90534 4 7.66667 4C8.78201 4 9.80798 4.36932 10.64 4.98665L11.6467 3.97998C11.84 3.78665 12.16 3.78665 12.3534 3.97998C12.5467 4.17331 12.5467 4.49335 12.3534 4.68669L11.3801 5.65999C12.1774 6.54599 12.6667 7.71467 12.6667 9ZM9.29997 9.60002L8.16667 8.75V6.66667C8.16667 6.39067 7.94267 6.16667 7.66667 6.16667C7.39067 6.16667 7.16667 6.39067 7.16667 6.66667V9C7.16667 9.15733 7.2407 9.30532 7.3667 9.39998L8.70004 10.4C8.79004 10.4673 8.89535 10.5 8.99935 10.5C9.15202 10.5 9.30207 10.4306 9.40007 10.3C9.56607 10.0793 9.52064 9.76535 9.29997 9.60002Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}),defaultFill:"#FF37C7"}),[_i,N1]=be({name:"VerticalDotLine",getIcon:e=>(0,o.jsx)(we,{viewBox:"0 0 2 13",fill:"none",...e,children:(0,o.jsx)(Ce,{d:"M1 1L1 12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"2 2"})})}),[fd,E1]=be({name:"Wifi",getIcon:e=>(0,o.jsx)(we,{viewBox:"0 0 20 20",fill:"none",...e,children:(0,o.jsx)(Ce,{d:"M12.4993 14.1825C12.3234 14.1825 12.1468 14.1275 11.9959 14.0125C10.8518 13.1442 9.1476 13.1442 8.00343 14.0125C7.63593 14.2917 7.11416 14.2183 6.83583 13.8525C6.55749 13.4858 6.62928 12.9633 6.99594 12.685C8.72428 11.3725 11.2751 11.3725 13.0034 12.685C13.3701 12.9633 13.4417 13.4858 13.1633 13.8525C13 14.0683 12.7518 14.1825 12.4993 14.1825ZM15.6318 11.5675C15.9318 11.2183 15.8918 10.6925 15.5443 10.3925C14.0052 9.07001 12.0367 8.34167 10.0009 8.34167C7.96507 8.34167 5.99603 9.07001 4.45769 10.3925C4.10936 10.6925 4.06917 11.2183 4.37001 11.5675C4.66917 11.9175 5.19597 11.9558 5.54514 11.6558C6.78014 10.5933 8.36339 10.0075 10.0017 10.0075C11.6401 10.0075 13.2227 10.5925 14.4585 11.6558C14.616 11.7908 14.8092 11.8575 15.0017 11.8575C15.2342 11.8575 15.4676 11.76 15.6318 11.5675ZM18.121 9.25832C18.4277 8.91582 18.3984 8.38833 18.0559 8.08166C15.8376 6.095 12.9768 5 10.0001 5C7.02343 5 4.1626 6.09416 1.94427 8.08166C1.60177 8.38833 1.5725 8.91582 1.87916 9.25832C2.18666 9.60165 2.71425 9.62916 3.05592 9.32332C4.96842 7.61082 7.43426 6.66751 10.0001 6.66751C12.5659 6.66751 15.0318 7.61082 16.9443 9.32332C17.1026 9.46582 17.3018 9.53583 17.5001 9.53583C17.7284 9.53499 17.9569 9.44165 18.121 9.25832ZM10.0001 14.7917C9.42509 14.7917 8.95843 15.2583 8.95843 15.8333C8.95843 16.4083 9.42509 16.875 10.0001 16.875C10.5751 16.875 11.0418 16.4083 11.0418 15.8333C11.0418 15.2583 10.5751 14.7917 10.0001 14.7917Z",fill:"currentColor"})}),defaultFill:"#7D7D7D"}),xd=e=>e.uniswapBehaviorHistory.hasDismissedBridgingWarning===!0,gd=e=>e.uniswapBehaviorHistory.hasDismissedLowNetworkTokenWarning===!0,$1=e=>e.uniswapBehaviorHistory.hasShownMismatchToast===!0;function Si(e){const[t,n]=(0,m.useState)(null);return(0,m.useEffect)(()=>{"requestIdleCallback"in window?requestIdleCallback(async()=>{try{const i=await e();n(()=>i.default)}catch(i){ge.error(i,{tags:{file:"useDeferredComponent.tsx",function:"requestIdleCallback"}})}},{timeout:100}):setTimeout(async()=>{try{const i=await e();n(()=>i.default)}catch(i){ge.error(i,{tags:{file:"useDeferredComponent.tsx",function:"setTimeout"}})}},1)},[]),t}var sn=Ge(Au());function no(){return no=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},no.apply(this,arguments)}function hd(e,t){if(e==null)return{};var n=vd(e,t),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)i=s[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function vd(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,s;for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}var ko=(0,m.forwardRef)(function(e,t){var n=e.color,i=n===void 0?"currentColor":n,r=e.size,s=r===void 0?24:r,a=hd(e,["color","size"]);return m.createElement("svg",no({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),m.createElement("line",{x1:"7",y1:"17",x2:"17",y2:"7"}),m.createElement("polyline",{points:"7 7 17 7 17 17"}))});ko.propTypes={color:sn.default.string,size:sn.default.oneOfType([sn.default.string,sn.default.number])};ko.displayName="ArrowUpRight";var _d=ko;function Sd(e){const{data:t}=Ru({params:{tokenIn:Mc,tokenInChainId:Uc._1}}),n=(0,m.useMemo)(()=>new Set(t==null?void 0:t.tokens.map(r=>r.chainId)),[t]),i=Qn(e);return i!==void 0&&n.has(i)}const wd="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column  _display-_md_none",bd="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _flexGrow-1 _alignContent-center ",yd=" _pl-t-space-spa1360334080",Td=" _pl-t-space-spa1360333981",Cd=" _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-row _flexGrow-1 _alignItems-center _pt-t-space-spa1360334080 _pr-t-space-spa1360334080 _pb-t-space-spa1360334080 _pl-t-space-spa1360334080  ";function Id(){const{chainId:e}=Vr(),{swapInputChainId:t}=ot(),n=t??e,i=hl(n),r=Sd(n??O.Mainnet),s=eo(Jn.SWAP),a=eo(Jn.SEND),c=!i||!(s||a),l=(0,m.useMemo)(()=>c||r?null:(0,o.jsx)(kd,{chainId:n}),[n,c,r]);return(0,o.jsx)(o.Fragment,{children:l})}const us={[O.Mainnet]:{bgColor:"#6B8AFF33",textColor:"#6B8AFF"},[O.ArbitrumOne]:{bgColor:"#00A3FF33",textColor:"#00A3FF"},[O.Avalanche]:{bgColor:"#E8414233",textColor:"#E84142"},[O.Base]:{bgColor:"#0052FF33",textColor:"#0052FF"},[O.Blast]:{bgColor:"rgba(252, 252, 3, 0.16)",textColor:"rgba(17, 20, 12, 1)"},[O.Bnb]:{bgColor:"#EAB20033",textColor:"#EAB200"},[O.Celo]:{bgColor:"#FCFF5233",textColor:"#FCFF52"},[O.MonadTestnet]:{bgColor:"#200052",textColor:"#836EF9"},[O.Optimism]:{bgColor:"#FF042033",textColor:"#FF0420"},[O.Polygon]:{bgColor:"#9558FF33",textColor:"#9558FF"},[O.Sepolia]:{bgColor:"#6B8AFF33",textColor:"#6B8AFF"},[O.Solana]:{bgColor:"#9945FF33",textColor:"#000000"},[O.Soneium]:{bgColor:"#FFFFFF",textColor:"#000000"},[O.Unichain]:{bgColor:"#F50DB433",textColor:"#F50DB4"},[O.UnichainSepolia]:{bgColor:"#F50DB433",textColor:"#F50DB4"},[O.WorldChain]:{bgColor:"rgba(0, 0, 0, 0.12)",textColor:"#000000"},[O.Zksync]:{bgColor:"rgba(54, 103, 246, 0.12)",textColor:"#3667F6"},[O.Zora]:{bgColor:"rgba(0, 0, 0, 0.12)",textColor:"#000000"}},Ad={...us,[O.Blast]:{bgColor:"rgba(252, 252, 3, 0.12)",textColor:"rgba(252, 252, 3, 1) "},[O.Celo]:{bgColor:"#FCFF5299",textColor:"#655947"},[O.Soneium]:{bgColor:"#000000",textColor:"#FFFFFF"},[O.WorldChain]:{bgColor:"rgba(255, 255, 255, 0.12)",textColor:"#FFFFFF"},[O.Zksync]:{bgColor:"rgba(97, 137, 255, 0.12)",textColor:"#6189FF"},[O.Zora]:{bgColor:"rgba(255, 255, 255, 0.12)",textColor:"#FFFFFF"}};function Fd(e){return lu()?us[e]:Ad[e]}function kd({chainId:e}){const{t}=I(),{bgColor:n,textColor:i}=Fd(e),r=Bt(e),s=r.logo;return r.bridge?(0,o.jsx)(Fu,{href:r.bridge,children:(0,o.jsx)(jd,{image:(0,o.jsx)("img",{width:"40px",height:"40px",style:{borderRadius:"12px"},src:s}),title:t("token.bridge",{label:r.label}),subtitle:t("common.deposit.toNetwork",{label:r.label}),textColor:i,backgroundColor:n})}):null}const oo=20,wi=`${oo}px`;function jd({image:e,isAbsoluteImage:t=!1,backgroundColor:n,textColor:i,title:r,subtitle:s,onDismiss:a,isNew:c=!1}){const l=He();return(0,o.jsxs)(L,{row:!0,grow:!0,overflow:"hidden",borderWidth:"$spacing1",borderColor:n??co(.05,l.surface3.val),backgroundColor:n??"$surface1",alignItems:"center",pl:t?"$none":"$spacing12",borderRadius:"$rounded20",justifyContent:"space-between",width:"100%",children:[e,(0,o.jsxs)("div",{className:$e(""+(Cd+(t?Td:yd))),children:[(0,o.jsxs)("div",{className:bd,children:[(0,o.jsx)(ru,{text:r,textProps:{color:i??"$neutral1",variant:"subheading2"},element:c?(0,o.jsx)(su,{}):void 0}),(0,o.jsx)("div",{className:wd,children:(0,o.jsx)(y,{variant:"body4",color:i??"$neutral2",children:s})})]}),a?(0,o.jsx)(J,{alignSelf:"flex-start",$md:{alignSelf:"center"},hitSlop:oo,onPress:u=>{u.stopPropagation(),a()},children:(0,o.jsx)(ao,{color:"$neutral3",size:oo})}):(0,o.jsx)(J,{alignSelf:"flex-start",$md:{alignSelf:"center"},children:(0,o.jsx)(_d,{width:wi,height:wi,color:i})})]})]})}const Rd={...Bl,renderTitle:e=>e("swap.deadline.settings.title")};function ds({selectedProtocols:e,isV4HookPoolsEnabled:t}){return new Set(e).size===new Set([...e,..._r]).size&&t}function Pd(){const{t:e}=I(),{selectedProtocols:t,isV4HookPoolsEnabled:n}=st(r=>({selectedProtocols:r.selectedProtocols,isV4HookPoolsEnabled:r.isV4HookPoolsEnabled})),i=(0,m.useMemo)(()=>ds({selectedProtocols:t,isV4HookPoolsEnabled:n})?e("common.default"):e("common.custom"),[t,n,e]);return(0,o.jsx)(y,{color:"$neutral2",flexWrap:"wrap",variant:"subheading2","$group-hover":{color:"$neutral2Hovered"},children:i})}function ps({children:e,tooltipTrigger:t,placement:n="top"}){const{t:i}=I();return(0,o.jsx)(De,{infoButton:(0,o.jsx)(wt,{textVariant:D?"body4":void 0,url:ne.helpArticleUrls.uniswapXInfo}),modalProps:{backgroundIconColor:co(16,Ha.uniswapXPurple),caption:i("uniswapx.description"),rejectText:i("common.button.close"),icon:(0,o.jsx)(xt,{size:"$icon.24"}),modalName:ee.UniswapXInfo,severity:M.None,titleComponent:(0,o.jsx)(Et,{variant:D?"subheading2":"body1",children:i("uniswapx.label")}),zIndex:Ne.popover},tooltipProps:{text:i("uniswapx.description"),placement:n,icon:(0,o.jsx)(xt,{size:"$icon.24"})},trigger:t,analyticsTitle:"UniswapX info",children:e})}const Wd="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center ";function Bd(){const{t:e}=I();return(0,o.jsx)(De,{infoButton:(0,o.jsx)(wt,{textVariant:D?"body4":void 0,url:ne.helpArticleUrls.v4HooksInfo}),modalProps:{caption:e("swap.settings.routingPreference.option.v4.hooks.tooltip"),rejectText:e("common.button.close"),severity:M.None,modalName:ee.V4HooksInfo,icon:(0,o.jsx)(wo,{size:"$icon.24"})},trigger:(0,o.jsxs)("div",{className:Wd,children:[(0,o.jsx)(y,{color:"$neutral1",variant:"subheading2",mr:"$spacing4",children:e("swap.settings.routingPreference.option.v4.hooks.title")}),(0,o.jsx)(Pn,{color:"$neutral3",size:"$icon.16"})]}),tooltipProps:{text:e("swap.settings.routingPreference.option.v4.hooks.tooltip"),placement:"bottom"}})}const Dd="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665589 _alignItems-center ",Nd="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665589 ",Ed="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _cursor-default _gap-t-space-spa94665589 _alignItems-flex-start _flexDirection-row ",$d="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _gap-t-space-spa94665589 ",Ud="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334080 ",Md="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334076 _mt-t-space-spa1360334076 _mb-t-space-spa1360334076 ";function Od(){const{t:e}=I(),t=lt(A=>A.getIsUniswapXSupported),{selectedProtocols:n,isV4HookPoolsEnabled:i}=st(A=>({selectedProtocols:A.selectedProtocols,isV4HookPoolsEnabled:A.isV4HookPoolsEnabled})),{setSelectedProtocols:r,setIsV4HookPoolsEnabled:s,toggleProtocol:a}=$r(),[c,l]=(0,m.useState)(ds({selectedProtocols:n,isV4HookPoolsEnabled:i})),u=_t(vt.UniswapX),d=ie(A=>A.chainId),p=t==null?void 0:t(d),f=u&&d!==O.MonadTestnet,x=An(d),g=Bt(d).name,h=e("swap.settings.protection.subtitle.unavailable",{chainName:g}),S=n.length===1&&!i,_=n.filter(A=>!x&&A===le.V4?!1:A!==le.UNISWAPX_V2).length,w=_===1&&!i||_===0&&i,C=(0,m.useCallback)(()=>{s(!i)},[s,i]),b=(0,m.useCallback)(()=>{l(!c),c||(r(_r),s(!0))},[r,s,c]),j=Ld({isUniswapXSupported:p,t:e});return(0,o.jsxs)("div",{className:Md,children:[(0,o.jsx)(Tt,{alignItems:"flex-start",active:c,description:(0,o.jsx)(Vd,{v4SwapEnabled:x}),elementName:je.SwapRoutingPreferenceDefault,title:(0,o.jsx)(Gd,{v4SwapEnabled:x}),cantDisable:!1,footerContent:(0,o.jsx)(zd,{isUniswapXSupported:p,isUniswapXEnabled:f,isDefault:c}),onSelect:b}),(0,o.jsxs)(_o,{open:!c,animationDisabled:Be||yn,children:[u&&(0,o.jsx)(Tt,{active:p===!1?!1:f&&n.includes(le.UNISWAPX_V2),elementName:je.SwapRoutingPreferenceUniswapX,title:j(le.UNISWAPX_V2),cantDisable:S,disabled:p===!1||!f,description:f?void 0:h,onSelect:()=>a(le.UNISWAPX_V2)}),(0,o.jsx)(Tt,{active:x&&n.includes(le.V4),elementName:je.SwapRoutingPreferenceV4,title:j(le.V4),cantDisable:w,disabled:!x,description:x?void 0:h,onSelect:()=>a(le.V4)}),(0,o.jsx)(Tt,{active:i,elementName:je.SwapRoutingPreferenceV4Hooks,title:(0,o.jsx)(Bd,{}),cantDisable:w,disabled:!x,onSelect:C}),(0,o.jsx)(Tt,{active:n.includes(le.V3),elementName:je.SwapRoutingPreferenceV3,title:j(le.V3),cantDisable:w,onSelect:()=>a(le.V3)}),(0,o.jsx)(Tt,{active:n.includes(le.V2),elementName:je.SwapRoutingPreferenceV2,title:j(le.V2),cantDisable:w,onSelect:()=>a(le.V2)})]})]})}function Ld(e){const{isUniswapXSupported:t,t:n}=e;return i=>{switch(i){case le.UNISWAPX_V2:return t===!1?(0,o.jsx)(Hd,{}):(0,o.jsx)(ps,{tooltipTrigger:(0,o.jsx)(io,{})});case le.V2:return n("swap.settings.routingPreference.option.v2.title");case le.V3:return n("swap.settings.routingPreference.option.v3.title");case le.V4:return n("swap.settings.routingPreference.option.v4.title");default:return(0,o.jsx)(o.Fragment,{})}}}function Hd(){const[e,t]=(0,m.useState)(void 0),[n,i]=(0,m.useState)(!1);return D?(0,o.jsx)(Wn,{text:(0,o.jsx)(ms,{onPress:()=>t(!0)}),trigger:(0,o.jsx)(io,{}),placement:"top",open:e===void 0?void 0:!e}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(J,{onPress:()=>i(!0),children:(0,o.jsx)(io,{})}),(0,o.jsx)(fs,{isOpen:n,onClose:()=>i(!1)})]})}function io(){return(0,o.jsx)(y,{alignItems:"center",color:"$neutral2",variant:"subheading2",flexDirection:"row",flexShrink:0,display:"inline-flex",gap:"$gap4",left:-Ct.spacing2,children:(0,o.jsx)(We,{components:{icon:(0,o.jsx)(xt,{size:"$icon.16"}),gradient:(0,o.jsx)(Et,{height:18,variant:"subheading2"}),info:(0,o.jsx)(Pn,{color:"$neutral3",size:"$icon.16"})},i18nKey:"uniswapx.item"})})}function Tt({title:e,description:t,active:n,elementName:i,cantDisable:r,onSelect:s,disabled:a,alignItems:c="center",footerContent:l}){return(0,o.jsxs)("div",{className:Ud,children:[(0,o.jsxs)(L,{row:!0,py:"$spacing2",alignItems:c,gap:"$spacing16",justifyContent:"space-between",children:[(0,o.jsxs)("div",{className:$d,children:[typeof e=="string"?(0,o.jsx)(y,{color:"$neutral1",variant:"subheading2",children:e}):e,typeof t=="string"?(0,o.jsx)(y,{color:"$neutral2",variant:"body3",children:t}):t]}),(0,o.jsx)(qe,{element:i,logPress:!n,children:(0,o.jsx)(Oa,{disabled:n&&r||a,checked:n,variant:"branded",onCheckedChange:s})})]}),l]})}function Vd({v4SwapEnabled:e}){const{t}=I(),n=t("swap.settings.routingPreference.option.default.description.preV4"),i=t("swap.settings.routingPreference.option.default.description");return(0,o.jsx)(y,{color:"$neutral2",variant:"body3",textWrap:"pretty",children:e?i:n})}function zd(e){const{isUniswapXSupported:t,isUniswapXEnabled:n,isDefault:i}=e,r=n&&t&&i,s=t===!1&&n&&i;return r?(0,o.jsx)(ps,{tooltipTrigger:(0,o.jsx)(y,{alignItems:"center",color:"$neutral2",variant:"body3",flexDirection:"row",gap:"$gap4",display:"inline-flex",children:(0,o.jsx)(We,{components:{icon:(0,o.jsx)(xt,{size:"$icon.16"}),gradient:(0,o.jsx)(Et,{height:18,variant:"body3"})},i18nKey:"uniswapx.included"})})}):s?(0,o.jsx)(qd,{}):null}const qd=()=>{const{t:e}=I(),[t,n]=(0,m.useState)(void 0),[i,r]=(0,m.useState)(!1),s=(0,o.jsxs)("div",{className:Ed,children:[(0,o.jsx)(Gr,{color:"$neutral2",size:"$icon.16"}),(0,o.jsx)(y,{color:"$neutral2",variant:"body3",children:e("swap.settings.routingPreference.option.default.description.uniswapXUnavailable")})]});return D?(0,o.jsx)(Wn,{open:t===void 0?void 0:!t,text:(0,o.jsx)(ms,{onPress:()=>{n(!0)}}),placement:"top",trigger:s}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(J,{onPress:()=>r(!0),children:s}),(0,o.jsx)(fs,{isOpen:i,onClose:()=>r(!1)})]})};function ms(e){const{t}=I(),n=lt(a=>a.handleOnPressUniswapXUnsupported),i=Kl(Dr.TransactionSettings),r=U(()=>{var a;zt?Nt({uri:ne.helpArticleUrls.multichainDelegation}).catch(()=>{}):(n==null||n(),i()),e==null||(a=e.onPress)===null||a===void 0||a.call(e)}),s=t(zt?"uniswapx.description.unsupported":"wallet.mismatch.popup.description");return(0,o.jsx)(J,{onPress:r,children:(0,o.jsxs)("div",{className:Nd,children:[(0,o.jsx)(y,{color:"$neutral2",variant:"body3",children:s}),(0,o.jsx)(y,{color:"$accent1",variant:"body3",children:t(q?"common.button.viewDetails":"common.button.learn")})]})})}function Gd({v4SwapEnabled:e}){const{t}=I();return e?(0,o.jsxs)("div",{className:Dd,children:[(0,o.jsx)(y,{color:"$neutral1",variant:"subheading2",children:t("common.default")}),(0,o.jsx)(De,{modalProps:{caption:t("swap.settings.routingPreference.option.default.tooltip"),rejectText:t("common.button.close"),modalName:ee.SwapSettingsDefaultRoutingInfo},tooltipProps:{text:t("swap.settings.routingPreference.option.default.tooltip"),placement:"bottom"}})]}):(0,o.jsx)(y,{color:"$neutral1",variant:"subheading2",children:t("common.default")})}function fs({isOpen:e,onClose:t}){const{t:n}=I(),i=He();return(0,o.jsx)($t,{isOpen:e,onClose:t,caption:n("uniswapx.description.unsupported"),rejectText:n("common.button.close"),icon:(0,o.jsx)(cu,{size:"$icon.24",fill:i.neutral1.val}),modalName:ee.UniswapXInfo,severity:M.None,title:n("uniswapx.unavailable.title"),zIndex:Ne.popover,children:(0,o.jsx)(wt,{textVariant:D?"body4":"buttonLabel3",url:ne.helpArticleUrls.multichainDelegation})})}const xs={renderTitle:e=>e("swap.settings.routingPreference.title"),Control(){return(0,o.jsx)(Pd,{})},Screen(){return(0,o.jsx)(Od,{})}};function gs(e){const n=ie(i=>i.trade).trade instanceof In;return(0,o.jsx)($l,{saveOnBlur:e.saveOnBlur,isZeroSlippage:n})}const jo={...El,Control(){return(0,o.jsx)(gs,{saveOnBlur:!1})}},bi=[jo,Rd,xs];function Xd(){const e=_t(vt.BatchedSwaps),t=yu($c);return(0,m.useMemo)(()=>e&&t?[...bi,cc]:bi,[e,t])}function Kd(e){var t;const[n,i]=(0,m.useState)(void 0),{gqlChains:r}=Xe();return(0,m.useEffect)(()=>{(async()=>{var a;if(!(!((a=e.data)===null||a===void 0||(a=a.portfolios)===null||a===void 0||(a=a[0])===null||a===void 0)&&a.tokenBalances))return;const c=r.reduce((l,u)=>{var d;return l[u]=((d=e.data)===null||d===void 0||(d=d.portfolios)===null||d===void 0||(d=d[0])===null||d===void 0||(d=d.tokenBalances)===null||d===void 0?void 0:d.reduce((p,f)=>{var x,g;return(f==null||(x=f.token)===null||x===void 0?void 0:x.chain)===u&&!f.isHidden?p+(((g=f.denominatedValue)===null||g===void 0?void 0:g.value)||0):p},0))||0,l},{});i(c)})().catch(a=>ge.error("useTotalBalancesUsdPerChain",a))},[(t=e.data)===null||t===void 0?void 0:t.portfolios,r]),n}function Zd({balances:e,totalBalancesUsd:t,totalBalancesUsdPerChain:n,wallet:i,wallets:r,isViewOnly:s=!1}){t===void 0||n===void 0||!r.length||!i||(Rt(Zn.BalancesReport,{total_balances_usd:t,wallets:r,balances:e}),Rt(Zn.BalancesReportPerChain,{total_balances_usd_per_chain:n,wallet:i,view_only:s}))}function Qd(){var e;const t=Fr(),n=pc(),i=Kd(Tc({cacheOnly:!0})),{trackConversions:r}=Tu(t.address),s=(0,m.useCallback)(async()=>{var a;Zd({balances:n?[n]:[],totalBalancesUsd:n,totalBalancesUsdPerChain:i,wallet:t.address,wallets:t.address?[t.address]:[]}),((a=t.connector)===null||a===void 0?void 0:a.name)===Ya.UNISWAP_EXTENSION&&r(li.Extension.WalletFunded),r(li.Web.WalletFunded)},[n,i,t.address,(e=t.connector)===null||e===void 0?void 0:e.name,r]);(0,m.useEffect)(()=>{n!==void 0&&i!==void 0&&s()},[n,i,s])}function Yd({children:e,initialInputCurrency:t,initialOutputCurrency:n}){const{initialChainId:i,isUserSelectedToken:r,setSelectedChainId:s}=Vr(),[a,c]=(0,m.useState)(Y.Swap),[l,u]=(0,m.useState)({inputCurrency:t,outputCurrency:n}),d=(0,m.useMemo)(()=>({inputCurrency:t,outputCurrency:n}),[t,n]),p=rn(t),f=rn(n),x=rn(i),{isTestnetModeEnabled:g}=Xe(),h=rn(g);(0,m.useEffect)(()=>{(!Hn(p,t)||!Hn(f,n)||h!==g)&&u(d)},[t,n,d,p,f,g,h]),(0,m.useEffect)(()=>{!r&&p&&Hn(p,t)&&u(d)},[t,r,d,p]),(0,m.useEffect)(()=>{!r&&i&&x!==i&&s(i)},[i,r,d,x,s]);const S=(0,m.useMemo)(()=>({currencyState:l,setCurrencyState:u,currentTab:a,setCurrentTab:c,isSwapAndLimitContext:!0}),[l,a]);return Qd(),(0,o.jsx)(Ic.Provider,{value:S,children:e})}function Jd({children:e}){return(0,o.jsx)(Vl,{children:e})}function ep({modalName:e}){const{screen:t}=re();return(0,m.useEffect)(()=>{e===ee.Swap&&So("TransactionModal",{screen:t,modalName:e})},[e,t]),null}const tp="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _flexGrow-1 _justifyContent-flex-end ";function np({children:e,onClose:t,onCurrencyChange:n,openWalletRestoreModal:i,walletNeedsRestore:r,swapRedirectCallback:s,passkeyAuthStatus:a,modalName:c}){const[l,u]=(0,m.useState)(Se.Form);return(0,o.jsx)("div",{className:tp,children:(0,o.jsxs)(Yl,{bottomSheetViewStyles:{},openWalletRestoreModal:i,walletNeedsRestore:r,screen:l,passkeyAuthStatus:a,setScreen:u,swapRedirectCallback:s,onClose:t,onCurrencyChange:n,children:[e,(0,o.jsx)(ep,{modalName:c})]})})}function Nn({fullscreen:e,children:t}){return(0,o.jsx)(L,{fill:e,children:t})}function op({children:e}){return(0,o.jsx)(L,{animation:"fast",animateEnter:"fadeInDown",position:"relative",pt:"$spacing24",children:e})}const ip="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center _gap-t-space-spa94665591 _pt-t-space-spa94665589 _pb-t-space-spa94665589 _mb-t-space-spa94665589 ",yi=14,rp=4.2,sp=.95;function hs({swappedInTime:e}){const{t}=I();return(0,o.jsxs)("div",{className:ip,children:[(0,o.jsx)(Wa,{source:ec,width:yi,height:yi,borderRadius:rp}),(0,o.jsx)(y,{color:"$accent1",variant:"body4",textAlign:"center",children:e&&e<sp?t("swap.details.swappedIn.unichain",{time:e}):t("swap.details.fasterUnichainSwaps")})]})}er();function ap({size:e,inputCurrencyInfo:t,outputCurrencyInfo:n}){const[i,r]=(0,m.useState)("processing"),s=ln(0);(0,m.useEffect)(()=>{const u=setTimeout(()=>{r("complete")},250);return()=>clearTimeout(u)},[]),(0,m.useEffect)(()=>{s.value=un(i==="complete"?1:0,{duration:600,easing:Gn.bezier(.68,-.3,.265,1.3)})},[i,s]);const a=()=>{r(u=>u==="complete"?"processing":"complete")},c=Vt(()=>{const u=yt(s.value,[0,1],[0,540]),d=yt(s.value,[0,1],[.75,1]),p=yt(s.value,[0,.5,1],[1,0,0]);return{transform:[{rotateY:`${u}deg`},{scale:d}],opacity:p}},[s]),l=Vt(()=>{const u=yt(s.value,[0,1],[180,720]),d=yt(s.value,[0,1],[.75,1]),p=yt(s.value,[0,.5,1],[0,0,1]);return{transform:[{rotateY:`${u}deg`},{scale:d}],opacity:p}},[s]);return(0,o.jsx)(L,{width:e,height:e,alignItems:"center",justifyContent:"center",mb:"$spacing24",children:(0,o.jsx)(L,{animation:"300ms",width:e,height:e,scale:1,opacity:1,enterStyle:{x:140,y:-80,scale:.5,opacity:0},children:(0,o.jsxs)(L,{position:"relative",width:e,height:e,onPress:a,children:[(0,o.jsx)(Ht.View,{style:[{position:"absolute",width:e,height:e,alignItems:"center",justifyContent:"center"},c],children:(0,o.jsx)(ui,{chainId:t.currency.chainId,name:t.currency.name,symbol:t.currency.symbol,url:t.logoUrl,webFontSize:e/4,lineHeight:"unset",size:e})}),(0,o.jsx)(Ht.View,{style:[{position:"absolute",width:e,height:e,alignItems:"center",justifyContent:"center"},l],children:(0,o.jsx)(ui,{chainId:n.currency.chainId,name:n.currency.name,symbol:n.currency.symbol,url:n.logoUrl,webFontSize:e/4,lineHeight:"unset",size:e})})]})})})}function vs(){const{surface1:{val:e}}=He();return e}er();const cp="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _position-absolute _top-0px _right-0px _bottom-0px _left-0px _overflowX-hidden _overflowY-hidden ";function lp({toTokenColor:e,children:t}){const n=vs(),i=(0,m.useMemo)(()=>({position:"absolute",backgroundColor:e,filter:"blur(65px)",shadowColor:e,shadowOpacity:1,shadowOffset:{width:0,height:0}}),[e]),r=ln(0),s=ln(0),a=ln(0);(0,m.useEffect)(()=>{const d={duration:2e4,easing:Gn.inOut(Gn.ease)};r.value=Ln(un(1,d),-1,!0),s.value=Ln(un(1,{...d,duration:16e3}),-1,!0),a.value=Ln(un(1,{...d,duration:7e3}),-1,!0)},[r,s,a]);const c=Vt(()=>{const d=r.value*Math.PI*2,p=40*Math.sin(d)+-20*Math.sin(2*d),f=-30*Math.cos(d)+20*Math.cos(1.5*d),x=1+.1*Math.sin(d)-.15*Math.sin(2*d),g=12*Math.sin(d);return{transform:[{translateX:p},{translateY:f},{scale:x},{rotate:`${g}deg`}]}},[r]),l=Vt(()=>{const d=s.value*Math.PI*2,p=-35*Math.sin(d)+15*Math.cos(1.2*d)+45*Math.sin(.8*d),f=20*Math.cos(d)-40*Math.sin(1.1*d)+10*Math.cos(.7*d),x=1+.12*Math.sin(1.3*d)-.1*Math.cos(.9*d),g=-16*Math.cos(d)+20*Math.sin(1.1*d);return{transform:[{translateX:p},{translateY:f},{scale:x},{rotate:`${g}deg`}]}},[s]),u=Vt(()=>{const d=a.value*Math.PI*2,p=30*Math.sin(d)-40*Math.sin(1.4*d),f=45*Math.cos(d)-15*Math.cos(1.2*d)-35*Math.sin(.9*d),x=1+.25*Math.sin(1.1*d)-.2*Math.cos(.7*d),g=24*Math.sin(d)-18*Math.cos(1.2*d);return{transform:[{translateX:p},{translateY:f},{scale:x},{rotate:`${g}deg`}]}},[a]);return(0,o.jsxs)(L,{background:n,borderRadius:"$rounded16",overflow:"hidden",position:"relative",children:[(0,o.jsxs)("div",{className:cp,children:[(0,o.jsx)(Ht.View,{style:[i,{width:96,height:96,borderRadius:48,left:"15%",top:"10%"},c]}),(0,o.jsx)(Ht.View,{style:[i,{width:80,height:80,borderRadius:40,right:"20%",top:"25%",shadowRadius:25},l]}),(0,o.jsx)(Ht.View,{style:[i,{width:72,height:72,borderRadius:36,left:"35%",bottom:"15%",shadowRadius:20},u]})]}),t]})}function Ti({address:e,chainId:t,txId:n}){const i=(0,m.useMemo)(Gc,[]);return Jt(r=>i(r,{address:e,chainId:t,txId:n}))}const Ro=(0,m.createContext)(null),_s=()=>{const e=(0,m.useContext)(Ro);if(!e)throw new Error("useSwapDependenciesStore must be used within SwapDependenciesStoreContextProvider");return e};function pe(e){const t=_s();return Fe(t,Ue(e))}function Po(){var e;const t=(e=ce().evmAccount)===null||e===void 0?void 0:e.address,i=pe(l=>l.derivedSwapInfo).chainId,{txHash:r,txId:s}=N(l=>({isConfirmed:l.isConfirmed,txHash:l.txHash,txId:l.txId})),a=Ti({address:t,chainId:i,txId:r}),c=Ti({address:t,chainId:i,txId:s});return a||c}function up(){const e=N(r=>r.instantReceiptFetchTime),t=N(r=>r.txHashReceivedTime),n=Po();return(0,m.useMemo)(()=>{var r;if(!n)return;const s="options"in n?n.addedTime+(n.options.rpcSubmissionDelayMs||0):t||n.addedTime;if(!s)return;let a;if(Vc(n)?a=n.confirmedTime:qc(n)&&(a=(r=n.receipt)===null||r===void 0?void 0:r.confirmedTime),(!a||e&&e<a)&&(a=e),!a)return;const c=(a-s)/1e3;return Math.round(c*10)/10},[n,e,t])}function dp(){const{t:e}=I(),{formatCurrencyAmount:t}=oe(),n=N(d=>d.instantReceiptFetchTime),{derivedSwapInfo:i}=pe(d=>({derivedSwapInfo:d.derivedSwapInfo})),r=N(d=>d.instantOutputAmountRaw),s=!!N(d=>d.instantReceiptFetchTime),a=pe(d=>{var p;return(p=d.derivedSwapInfo.currencyAmounts.output)===null||p===void 0?void 0:p.quotient.toString()}),c=i.currencies.output??void 0,l=(0,m.useMemo)(()=>{if(!(!c||!r)&&n&&Number(r)>0)return t({value:mt({value:r,valueType:pt.Raw,currency:c.currency}),type:te.TokenTx})},[c,r,n,t]);return{outputCurrencyInfo:c,lastSwapOutputBalance:c&&s&&!l?e("common.approximatelyValue",{value:t({value:mt({value:a,valueType:pt.Raw,currency:c.currency})})}):l}}const pp=e=>e.notifications.notificationQueue,mp=()=>ic(pp,(e,t)=>t,(e,t)=>{if(t)return e.filter(n=>!n.address||n.address===t)});function fp(e){const t=(0,m.useMemo)(mp,[]);return Jt(n=>t(n,e))}function Ss(e){var t;const n=ht(),i=(t=ce().evmAccount)===null||t===void 0?void 0:t.address,r=fp(i??null),s=(0,m.useMemo)(()=>!e||!r||r.length===0?!1:r.every(a=>a.type===mi.SwapPending?!0:a.type===mi.Transaction&&"txType"in a?a.txType===go.Swap&&("chainId"in a?a.chainId===O.Unichain||a.chainId===O.UnichainSepolia:!1):!1),[e,r]);(0,m.useEffect)(()=>{s&&n(bu())},[s,n])}const xp=" _pr-t-space-gap1573 _pl-t-space-gap1573 _mb-t-space-gap1573",gp=" _pr-t-space-non101 _pl-t-space-non101 _mb-t-space-non101",hp=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _width-10037  ",vp="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _width-10037 _pt-t-space-spa1360334047 _pr-t-space-spa1360334047 _pb-t-space-spa1360334047 _pl-t-space-spa1360334047 _content-center _alignItems-center ",_p=" _pt-t-space-non101",Sp=" _pt-t-space-pad1331704900",wp=" _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _alignItems-center _width-10037 _height-t-size-spac100347329 _flexDirection-row-reverse _pr-t-space-pad1331704929 _pl-t-space-pad1331704929  ",bp="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-center _pt-t-space-pad1331704929 _pr-t-space-pad95589114 _pb-t-space-pad95589114 _pl-t-space-pad95589114 ";function yp(){const{t:e}=I(),{outputCurrencyInfo:t,lastSwapOutputBalance:n}=dp(),i=pe(x=>x.derivedSwapInfo.currencies.input),r=vs(),{tokenColor:s}=Ka({imageUrl:t==null?void 0:t.logoUrl,tokenName:t==null?void 0:t.currency.name,backgroundColor:r,defaultColor:r}),{setScreen:a,onClose:c,screen:l}=re();Ss(l===Se.UnichainInstantBalance);const u=up(),d=N(x=>x.updateSwapForm),p=(0,m.useCallback)(()=>{d({exactAmountFiat:void 0,exactAmountToken:"",isSubmitting:!1,showPendingUI:!1,isConfirmed:!1,instantOutputAmountRaw:void 0,instantReceiptFetchTime:void 0,txHash:void 0,txHashReceivedTime:void 0}),D&&a(Se.Form),c()},[c,d,a]),f=!!(i&&t&&n&&u&&l===Se.UnichainInstantBalance);return!i||!t?null:(0,o.jsx)(zr,{hideHandlebar:!0,forceRoundedCorners:!0,renderBehindTopInset:!0,renderBehindBottomInset:!0,isModalOpen:f,name:ee.UnichainInstantBalanceModal,alignment:q?"center":"top",padding:"$none",zIndex:Ne.popover,onClose:p,children:(0,o.jsx)(lp,{toTokenColor:s??r,children:(0,o.jsxs)("div",{className:bp,children:[D&&(0,o.jsx)("div",{className:$e(""+(wp+(Xn?Sp:_p))),children:(0,o.jsx)(Ji,{onClose:p})}),(0,o.jsxs)("div",{className:vp,children:[(0,o.jsx)(ap,{size:80,inputCurrencyInfo:i,outputCurrencyInfo:t}),(0,o.jsxs)(L,{gap:"$gap8",alignItems:"center",animation:"200msDelayed200ms",enterStyle:{opacity:0,y:20},children:[(0,o.jsx)(y,{variant:"subheading1",color:"$neutral1",children:e("swap.details.completed")}),(0,o.jsx)(y,{variant:Xn?"heading2":"heading3",color:"$neutral1",children:`${n} ${t.currency.symbol}`}),(0,o.jsx)(hs,{swappedInTime:u})]})]}),(0,o.jsx)("div",{className:$e(""+(hp+(D?gp:xp))),children:(0,o.jsx)(de,{emphasis:"tertiary",size:"large",borderColor:"$surface3",onPress:p,children:e("common.button.close")})})]})})})}const Tp=[Dr.SlippageWarning];function Cp(e){const t=Zl(),n=ie(i=>{var r,s;return i.trade.trade instanceof In?0:((r=i.trade.trade)===null||r===void 0?void 0:r.slippageTolerance)??((s=i.trade.indicativeTrade)===null||s===void 0?void 0:s.slippageTolerance)});return(0,m.useEffect)(()=>{t(n)},[n,t]),(0,o.jsx)(Ll,{modalIds:Tp,children:(0,o.jsx)(Ip,{...e})})}function Ip({settings:e,adjustTopAlignment:t=!0,adjustRightAlignment:n=!0,position:i="absolute",iconColor:r="$neutral2",iconSize:s,defaultTitle:a,isBridgeTrade:c}){const{isSlippageWarningModalVisible:l,handleHideSlippageWarningModalWithSeen:u,onCloseSettingsModal:d}=Ql(),{autoSlippageTolerance:p}=Er();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ul,{isOpen:l,onClose:u}),(0,o.jsx)(Ml,{settings:e,adjustTopAlignment:t,adjustRightAlignment:n,position:i,iconColor:r,iconSize:s,defaultTitle:a,testID:ze.SwapSettings,CustomSettingsButton:(0,o.jsx)(Ol,{autoSlippageTolerance:p,isZeroSlippage:c,iconColor:r,iconSize:s}),onClose:d})]})}function ws(e){return{borderColor:e?"$surface3":"$transparent",backgroundColor:e?"$surface1":"$surface2",hoverStyle:{borderColor:e?"$surface3Hovered":"$transparent",backgroundColor:e?"$surface1":"$surface2Hovered"}}}const Ap=ws(!0),Fp=ws(!1);function bs(e){return e?Ap:Fp}const ys=(0,m.createContext)(null),kp=()=>{const e=(0,m.useContext)(ys);if(!e)throw new Error("useSwapFormScreenStore must be used within SwapFormScreenStoreContextProvider");return e};function Ut(e){const t=kp();return Fe(t,Ue(e))}it();function Ci(e,t){if(e)return mt({value:e.toString().slice(0,t.decimals),valueType:pt.Exact,currency:t})}function jp({derivedSwapInfo:e}){const t=e.trade.trade,{input:n,output:i}=e.currencyAmountsUSDValue;if(!t||!xe(t)||!t.quote.quote.classicGasUseEstimateUSD||!n||!i)return;const r=Ci(t.quote.quote.classicGasUseEstimateUSD,n.currency),s=Fn(e),a=Ci(s,n.currency)??gc.fromRawAmount(n.currency,"0");if(!r)return;const c=i.add(r).add(a).divide(n).asFraction.subtract(1).multiply(-1);return new ct(c.numerator,c.denominator)}function Wo(e){const t=e.trade.trade;if(t)return xe(t)?jp({derivedSwapInfo:e}):_e(t)?t.priceImpact:void 0}const Rp=5,Pp=10;function Bo(e){var t,n;const i=e==null||(t=e.currencyAmountsUSDValue[v.INPUT])===null||t===void 0?void 0:t.toFixed(),r=e==null||(n=e.currencyAmountsUSDValue[v.OUTPUT])===null||n===void 0?void 0:n.toFixed();return(0,m.useMemo)(()=>{var s;if(!e)return{showPriceDifferenceWarning:!1};const a=r!==void 0&&i!==void 0?(+r-+i)/+i*100:+(((s=Wo(e))===null||s===void 0?void 0:s.toFixed())||0);if(isNaN(a))return{showPriceDifferenceWarning:!1};const c=!!a&&a*-1>Rp;return c?{priceDifferencePercentage:a,showPriceDifferenceWarning:c,priceDifferenceColor:a*-1>Pp?"$statusCritical":"$statusWarning"}:{priceDifferencePercentage:a,showPriceDifferenceWarning:c}},[e,i,r])}function Wp(){const{t:e}=I(),t=N(F=>F.derivedSwapInfo),{priceDifferencePercentage:n}=Bo(t),{inputRef:i,focusOnCurrencyField:r,currencies:s,currencyAmounts:a,currencyBalances:c,selectingCurrencyField:l,isFiatMode:u,exactFieldIsInput:d,resetSelection:p,currencyAmountsUSDValue:f,exactValue:x,formattedDerivedValue:g,tokenColor:h,trade:S,onFocusInput:_,onInputSelectionChange:w,onSetExactAmountInput:C,onSetPresetValue:b,onShowTokenSelectorInput:j,onToggleIsFiatMode:A}=Ut(F=>({inputRef:F.inputRef,focusOnCurrencyField:F.focusOnCurrencyField,currencies:F.currencies,currencyAmounts:F.currencyAmounts,currencyBalances:F.currencyBalances,selectingCurrencyField:F.selectingCurrencyField,isFiatMode:F.isFiatMode,exactFieldIsInput:F.exactFieldIsInput,resetSelection:F.resetSelection,currencyAmountsUSDValue:F.currencyAmountsUSDValue,exactValue:F.exactValue,formattedDerivedValue:F.formattedDerivedValue,tokenColor:F.tokenColor,trade:F.trade,onFocusInput:F.onFocusInput,onInputSelectionChange:F.onInputSelectionChange,onSetExactAmountInput:F.onSetExactAmountInput,onSetPresetValue:F.onSetPresetValue,onShowTokenSelectorInput:F.onShowTokenSelectorInput,onToggleIsFiatMode:F.onToggleIsFiatMode})),P=bs(r===v.INPUT);return(0,o.jsx)(yo,{section:pn.CurrencyInputPanel,children:(0,o.jsx)(L,{animation:"simple",borderRadius:"$rounded20",borderWidth:"$spacing1",overflow:"hidden",pb:s[v.INPUT]?"$spacing4":"$none",...P,children:(0,o.jsx)(Mr,{ref:i,headerLabel:D?e("common.button.sell"):void 0,currencyAmount:a[v.INPUT],currencyBalance:c[v.INPUT],currencyField:v.INPUT,currencyInfo:s[v.INPUT],focus:l?void 0:r===v.INPUT,isFiatMode:u&&d,isIndicativeLoading:S.isIndicativeLoading,isLoading:!d&&S.isFetching,priceDifferencePercentage:n,resetSelection:p,showSoftInputOnFocus:!1,usdValue:f[v.INPUT],value:d?x:g,valueIsIndicative:!d&&S.indicativeTrade&&!S.trade,tokenColor:h,onPressIn:_,onSelectionChange:w,onSetExactAmount:C,onSetPresetValue:b,onShowTokenSelector:j,onToggleIsFiatMode:A})})})}const Bp="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _flexGrow-1 _alignItems-center _alignSelf-stretch _backgroundColor-surface2 _borderBottomLeftRadius-t-radius-ro291586449 _borderBottomRightRadius-t-radius-ro291586449 _borderTopColor-surface1 _borderTopWidth-1px _gap-t-space-spa94665593 _pr-t-space-spa1360334080 _pl-t-space-spa1360334080 _pt-t-space-spa1360334080 _pb-t-space-spa1360334080 _borderTopStyle-solid ",Dp=()=>{const{t:e}=I(),{openWalletRestoreModal:t}=re(),n=U(()=>{if(!t)throw new Error("Invalid call to `onRestorePress` with missing `openWalletRestoreModal`");t()});return(0,o.jsx)(J,{onPress:n,children:(0,o.jsxs)("div",{className:Bp,children:[(0,o.jsx)(Pn,{color:"$statusWarning",size:"$icon.20"}),(0,o.jsx)(y,{color:"$statusWarning",variant:"subheading2",children:e("swap.form.warning.restore")})]})})};function Np(){const{t:e}=I(),t=N(R=>R.derivedSwapInfo),{priceDifferencePercentage:n}=Bo(t),{outputRef:i,focusOnCurrencyField:r,currencies:s,currencyAmounts:a,currencyBalances:c,selectingCurrencyField:l,isFiatMode:u,exactFieldIsOutput:d,exactOutputDisabled:p,resetSelection:f,currencyAmountsUSDValue:x,exactValue:g,formattedDerivedValue:h,tokenColor:S,walletNeedsRestore:_,isBridge:w,trade:C,onSetPresetValue:b,onToggleIsFiatMode:j,onFocusOutput:A,onOutputSelectionChange:P,onSetExactAmountOutput:F,onShowTokenSelectorOutput:W,showTemporaryFoTWarning:k}=Ut(R=>({outputRef:R.outputRef,focusOnCurrencyField:R.focusOnCurrencyField,currencies:R.currencies,currencyAmounts:R.currencyAmounts,currencyBalances:R.currencyBalances,selectingCurrencyField:R.selectingCurrencyField,isFiatMode:R.isFiatMode,exactFieldIsOutput:R.exactFieldIsOutput,exactOutputDisabled:R.exactOutputDisabled,resetSelection:R.resetSelection,currencyAmountsUSDValue:R.currencyAmountsUSDValue,exactValue:R.exactValue,formattedDerivedValue:R.formattedDerivedValue,tokenColor:R.tokenColor,walletNeedsRestore:R.walletNeedsRestore,isBridge:R.isBridge,trade:R.trade,onSetPresetValue:R.onSetPresetValue,onToggleIsFiatMode:R.onToggleIsFiatMode,onFocusOutput:R.onFocusOutput,onOutputSelectionChange:R.onOutputSelectionChange,onSetExactAmountOutput:R.onSetExactAmountOutput,onShowTokenSelectorOutput:R.onShowTokenSelectorOutput,showTemporaryFoTWarning:R.showTemporaryFoTWarning})),$=bs(r===v.OUTPUT);return(0,o.jsx)(qe,{section:pn.CurrencyOutputPanel,children:(0,o.jsxs)(L,{borderRadius:"$rounded20",borderWidth:"$spacing1",...$,children:[(0,o.jsx)(Mr,{ref:i,headerLabel:D?e("common.button.buy"):void 0,currencyAmount:a[v.OUTPUT],currencyBalance:c[v.OUTPUT],currencyField:v.OUTPUT,currencyInfo:s[v.OUTPUT],disabled:p,focus:l?void 0:r===v.OUTPUT,isFiatMode:u&&d,isLoading:!d&&C.isFetching,priceDifferencePercentage:n,resetSelection:f,showSoftInputOnFocus:!1,usdValue:x[v.OUTPUT],value:d?g:h,valueIsIndicative:!d&&C.indicativeTrade&&!C.trade,tokenColor:S,onPressDisabled:w?void 0:k,onPressIn:A,onSelectionChange:P,onSetExactAmount:F,onSetPresetValue:b,onShowTokenSelector:W,onToggleIsFiatMode:j}),_&&(0,o.jsx)(Dp,{})]})})}const Ep=()=>null,$p="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _position-absolute _left-5037 _transform-translateX-38567079 ",Up="  _backgroundColor-surface2",Mp=" _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center _borderTopLeftRadius-t-radius-ro1041013639 _borderTopRightRadius-t-radius-ro1041013639 _borderBottomRightRadius-t-radius-ro1041013639 _borderBottomLeftRadius-t-radius-ro1041013639 _pr-t-space-spa94665589 _pl-t-space-spa94665589 _pt-t-space-spa94665589 _pb-t-space-spa94665589  ",Op=()=>{const{t:e}=I(),{onClose:t}=re();return(0,o.jsxs)(L,{row:!0,alignItems:"center",justifyContent:"flex-start",mb:"$spacing16",mt:"$spacing4",testID:ze.SwapFormHeader,children:[(0,o.jsx)(J,{testID:ze.SwapSettings,onPress:t,children:(0,o.jsx)("div",{className:$e(""+(Mp+(D?" ":Up))),children:(0,o.jsx)(ao,{color:"$neutral2",size:"$icon.24"})})}),(0,o.jsx)("div",{className:$p,children:(0,o.jsx)(y,{variant:"subheading1",children:e("swap.form.header")})})]})},Lp=()=>{const{exactAmountToken:e,exactAmountFiat:t}=N(i=>({exactAmountToken:i.exactAmountToken,exactAmountFiat:i.exactAmountFiat})),n=ie(i=>i.chainId);return(0,m.useMemo)(()=>({chainId:n,tokenAmount:e,fiatAmount:t}),[n,e,t])},Hp=({children:e})=>{const t=Lp();return(0,o.jsx)(yo,{logPress:!0,properties:t,element:je.SwapReview,children:e})},Do=(0,m.createContext)(void 0),Vp=()=>{const e=(0,m.useContext)(Do);if(!e)throw new Error("SwapTxStoreContext not found");return e},Ie=e=>{const t=Vp();return Fe(t,Ue(e))};function No(){const e=pe(d=>d.wrapCallback),t=ce().evmAccount,n=N(d=>d.updateSwapForm),{currencyAmounts:i,txId:r,wrapType:s}=ie(d=>({currencyAmounts:d.currencyAmounts,txId:d.txId,wrapType:d.wrapType})),{txRequest:a,gasFeeEstimation:c}=Ie(d=>{var p;return xe(d)||zc(d)?{txRequest:void 0,gasFeeEstimation:d.gasFeeEstimation}:{txRequest:(p=d.txRequests)===null||p===void 0?void 0:p[0],gasFeeEstimation:d.gasFeeEstimation}}),l=q&&s!==Te.NotApplicable,u=(0,m.useMemo)(()=>{const d=i[v.INPUT];if(!a||!l||!t||!d)return;const p=()=>n({exactAmountFiat:void 0,exactAmountToken:"",isSubmitting:!1}),f=()=>n({isSubmitting:!1});return()=>{n({isSubmitting:!0}),e({account:t,inputCurrencyAmount:d,onSuccess:p,onFailure:f,txRequest:a,txId:r,wrapType:s,gasEstimate:c.wrapEstimate})}},[i,a,l,t,n,e,r,s,c.wrapEstimate]);return{isInterfaceWrap:l,onInterfaceWrap:u}}function zp(e){return e.type===z.PriceImpactMedium||e.type===z.PriceImpactHigh}const qp=e=>({type:z.NetworkError,severity:M.Low,action:Pe.DisableReview,title:e("swap.warning.offline.title"),icon:fd,message:e("swap.warning.offline.message")});function Gp(e){return(0,m.useMemo)(()=>{const t=e.find(s=>s.action===Pe.DisableReview||s.action===Pe.DisableSubmit),n=e.find(s=>s.type===z.InsufficientFunds),i=e.find(s=>s.type===z.InsufficientGasFunds),r=e.find(s=>zp(s));return{blockingWarning:t,formScreenWarning:Kp(e),insufficientBalanceWarning:n,insufficientGasFundsWarning:i,priceImpactWarning:r,reviewScreenWarning:Xp(e),warnings:e}},[e])}function Xp(e){const t=e.find(n=>n.severity>=M.Medium);if(t)return Ts({warning:t,displayedInline:!0})}function Kp(e){const t=e.find(r=>r.type===z.InsufficientFunds);if(t)return{warning:t,color:jn(M.Medium),Icon:null,displayedInline:!1};const n=e.find(r=>r.severity>=M.Low);if(!n)return;const i=n.type!==z.InsufficientGasFunds;return Ts({warning:n,displayedInline:i})}function Ts({warning:e,displayedInline:t}){return{warning:e,displayedInline:t,color:jn(e.severity),Icon:e.icon??null}}function Zp({t:e,currencyBalances:t,currencyAmounts:n}){const i=t[v.INPUT],r=n[v.INPUT],s=r&&(i==null?void 0:i.lessThan(r)),a=(r==null?void 0:r.currency.symbol)??"";if(s)return{type:z.InsufficientFunds,severity:M.None,action:Pe.DisableReview,title:e("swap.warning.insufficientBalance.title",{currencySymbol:a}),buttonText:D?e("common.insufficientTokenBalance.error.simple",{tokenSymbol:a}):void 0,currency:r.currency}}function Qp(e){const{currencyAmounts:t,currencies:n,exactCurrencyField:i}=e;return!n[v.INPUT]||!n[v.OUTPUT]||i===v.INPUT&&!t[v.INPUT]||i===v.OUTPUT&&!t[v.OUTPUT]}function Yp(e){if(Qp(e))return{type:z.FormIncomplete,severity:M.None,action:Pe.DisableReview}}function Cs(e,t){return`${e.lessThan(0)?"+":""}${t(e.multiply(-1).toFixed(3))}`}it();const Jp=new ct(3,100),e0=new ct(5,100);function t0({t:e,priceImpact:t,formatPercent:n,currencies:i}){var r,s;if(!(t!=null&&t.greaterThan(Jp)))return;const a=Cs(t,n)??"",c=!t.lessThan(e0);return{type:c?z.PriceImpactHigh:z.PriceImpactMedium,severity:c?M.High:M.Medium,action:Pe.WarnBeforeSubmit,title:c?e("swap.warning.priceImpact.title.veryHigh",{priceImpactValue:a}):e("swap.warning.priceImpact.title",{priceImpactValue:a}),message:c?e("swap.warning.priceImpact.message.veryHigh",{priceImpactValue:a}):e("swap.warning.priceImpact.message",{outputCurrencySymbol:((r=i[v.OUTPUT])===null||r===void 0?void 0:r.currency.symbol)??"",inputCurrencySymbol:((s=i[v.INPUT])===null||s===void 0?void 0:s.currency.symbol)??""}),link:ne.helpArticleUrls.priceImpact}}function n0({error:e,t,derivedSwapInfo:n}){var i,r;const s=((i=n.currencies.input)===null||i===void 0?void 0:i.currency.chainId)!==((r=n.currencies.output)===null||r===void 0?void 0:r.currency.chainId);if(e instanceof pl){var a;if(ml(e))return{type:z.RateLimit,severity:M.Medium,action:Pe.DisableReview,title:t("swap.warning.rateLimit.title"),message:t("swap.warning.rateLimit.message")};switch((a=e.data)===null||a===void 0?void 0:a.errorCode){case vn.errorCode.QUOTE_AMOUNT_TOO_LOW_ERROR:return{type:z.EnterLargerAmount,severity:M.Low,action:Pe.DisableReview,title:t("swap.warning.enterLargerAmount.title"),message:void 0};case vn.errorCode.RESOURCE_NOT_FOUND:return s?{type:z.NoQuotesFound,severity:M.Low,action:Pe.DisableReview,title:t("swap.warning.noQuotesFound.title"),message:t("swap.warning.noQuotesFound.bridging.message")}:{type:z.NoRoutesError,severity:M.Low,action:Pe.DisableReview,title:t("swap.warning.noRoutesFound.title"),message:t("swap.warning.noRoutesFound.message")}}}return{type:z.SwapRouterError,severity:M.Low,action:Pe.DisableReview,title:t("swap.warning.router.title"),message:t("swap.warning.router.message")}}function o0(e,t){var n,i,r,s;const a=((n=t[v.INPUT])===null||n===void 0||(n=n.safetyInfo)===null||n===void 0?void 0:n.tokenList)===si.Blocked,c=((i=t[v.OUTPUT])===null||i===void 0||(i=i.safetyInfo)===null||i===void 0?void 0:i.tokenList)===si.Blocked,l=(r=t[v.INPUT])===null||r===void 0?void 0:r.currency.symbol,u=(s=t[v.OUTPUT])===null||s===void 0?void 0:s.currency.symbol;if(!a&&!c)return;const d=e("swap.warning.tokenBlocked.button",{tokenSymbol:(a?l:u)??""});return{type:z.BlockedToken,severity:M.Blocked,action:Pe.DisableReview,buttonText:a&&!l||c&&!u?e("swap.warning.tokenBlockedFallback.button"):d}}function i0(){const[e,t]=(0,m.useState)(navigator.onLine),n=(0,m.useRef)(e),i=()=>{const r=navigator.onLine;n.current=r,t(r)};return(0,m.useEffect)(()=>(window.addEventListener("online",i),window.addEventListener("offline",i),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",i)}),[]),!e}var r0=Ge(ul());function s0({t:e,formatPercent:t,derivedSwapInfo:n,offline:i}){const r=[];i&&r.push(qp(e));const{trade:s}=n,a=o0(e,n.currencies);a&&r.push(a);const c=Zp({t:e,currencyBalances:n.currencyBalances,currencyAmounts:n.currencyAmounts});c&&r.push(c),s.error&&r.push(n0({error:s.error,t:e,derivedSwapInfo:n}));const l=Yp(n);l&&r.push(l);const u=Wo(n),d=t0({t:e,priceImpact:u,formatPercent:t,currencies:n.currencies});return d&&r.push(d),r}function a0(e){const{t}=I(),{formatPercent:n}=oe(),i=i0();return oc(()=>s0({t,formatPercent:n,derivedSwapInfo:e,offline:i}),r0.default)}function Ye(){const e=ce().evmAccount,t=N(a=>a.derivedSwapInfo),n=Ie(a=>a.gasFee),i=a0(t),r=al({account:e,derivedInfo:t,gasFee:n.value}),s=(0,m.useMemo)(()=>r?[...i,r]:i,[r,i]);return Gp(s)}const c0=()=>{const e=N(d=>d.isSubmitting),t=ie(d=>!d.trade.trade),n=ce().evmAccount,{blockingWarning:i}=Ye(),{isBlocked:r,isBlockedLoading:s}=To(n==null?void 0:n.address),{walletNeedsRestore:a}=re(),{isInterfaceWrap:c,onInterfaceWrap:l}=No();return!!i||r||s||a||e||t||c&&!l},Is=()=>{const e=c0(),{swapRedirectCallback:t}=re(),n=ce().evmAccount,i=(n==null?void 0:n.accountType)===Lr.Readonly;return!!n&&e&&!i&&!t},l0=e=>!e.trade&&!!(e.indicativeTrade||e.isIndicativeLoading),Eo=()=>{const e=ie(t=>t.trade);return l0(e)},As=(0,m.createContext)(null),Fs=()=>{const e=(0,m.useContext)(As);if(!e)throw new Error("SwapFormWarningStoreContext not found");return e},En=e=>{const t=Fs();return Fe(t,Ue(e))},Mt=()=>{const e=Fs();return Fe(e,t=>t.actions)};function u0(e){const t=e.trade.trade!==null&&ft(e.trade.trade),n=Jt(xd);return t&&!n}function d0({derivedSwapInfo:e,isMax:t}){var n;const i=t&&((n=e.currencyAmounts[v.INPUT])===null||n===void 0?void 0:n.currency.isNative),r=Jt(gd);return!!i&&!r}function ks(e,t){const n=e.currencies.input,i=e.currencies.output,{tokenWarningDismissed:r}=pi(n==null?void 0:n.currency),{tokenWarningDismissed:s}=pi(i==null?void 0:i.currency),a=(0,m.useMemo)(()=>{const c=[],l=n&&Oe(n.currency),u=i&&Oe(i.currency),d=l&&(t==null?void 0:t.some(f=>Oe(f).toLowerCase()===l.toLowerCase())),p=u&&(t==null?void 0:t.some(f=>Oe(f).toLowerCase()===u.toLowerCase()));return n&&!r&&d&&Xt(n)!==M.None&&c.push(n),i&&!s&&p&&Xt(i)!==M.None&&c.push(i),c},[n,i,t,r,s]);return q?{needsTokenProtectionWarning:a.length>=1,currenciesWithProtectionWarnings:a}:{needsTokenProtectionWarning:!1,currenciesWithProtectionWarnings:[]}}function js(){return bl()}function p0(e){function t(){try{const i=m0(e),r=f0(e),s=i({skipBridgingWarning:e.warningService.getSkipBridgingWarning(),skipMaxTransferWarning:e.warningService.getSkipMaxTransferWarning(),skipTokenProtectionWarning:e.warningService.getSkipTokenProtectionWarning()});r(s)}catch(i){var n;(n=e.logger)===null||n===void 0||n.error(i,{tags:{file:"useOnReviewPress",function:"prepareSwap"}})}e.warningService.reset()}return t}const fe={REDIRECT:"REDIRECT",CONNECT_WALLET:"CONNECT_WALLET",SHOW_VIEW_ONLY:"SHOW_VIEW_ONLY",INTERFACE_WRAP:"INTERFACE_WRAP",SHOW_TOKEN_WARNING:"SHOW_TOKEN_WARNING",SHOW_BRIDGING_WARNING:"SHOW_BRIDGING_WARNING",SHOW_LOW_BALANCE:"SHOW_LOW_BALANCE",PROCEED_TO_REVIEW:"PROCEED_TO_REVIEW"};function m0(e){const{swapRedirectCallback:t,activeAccount:n,onConnectWallet:i,isViewOnlyWallet:r,isInterfaceWrap:s,currencies:a,exactAmountToken:c,exactCurrencyField:l,chainId:u,needsTokenProtectionWarning:d,needsBridgingWarning:p,needsLowNativeBalanceWarning:f}=e;function x(g){if(t){var h,S;const _={inputCurrency:(h=a[v.INPUT])===null||h===void 0?void 0:h.currency,outputCurrency:(S=a[v.OUTPUT])===null||S===void 0?void 0:S.currency,typedValue:c,independentField:l,chainId:u};return{type:fe.REDIRECT,payload:_}}else{if(!n&&i)return{type:fe.CONNECT_WALLET};if(r)return{type:fe.SHOW_VIEW_ONLY};if(s)return{type:fe.INTERFACE_WRAP};if(d&&!g.skipTokenProtectionWarning)return{type:fe.SHOW_TOKEN_WARNING};if(p&&!g.skipBridgingWarning)return{type:fe.SHOW_BRIDGING_WARNING};if(f&&!g.skipMaxTransferWarning){const _={location:"swap"};return{type:fe.SHOW_LOW_BALANCE,payload:_}}}return{type:fe.PROCEED_TO_REVIEW}}return x}function f0(e){const{handleShowViewOnlyModal:t,handleShowTokenWarningModal:n,handleShowBridgingWarningModal:i,handleShowMaxNativeTransferModal:r,swapRedirectCallback:s,onConnectWallet:a,onInterfaceWrap:c,updateSwapForm:l,setScreen:u}=e;function d(p){switch(p.type){case fe.REDIRECT:s==null||s(p.payload);break;case fe.CONNECT_WALLET:a==null||a();break;case fe.SHOW_VIEW_ONLY:t();break;case fe.INTERFACE_WRAP:c==null||c();break;case fe.SHOW_TOKEN_WARNING:n();break;case fe.SHOW_BRIDGING_WARNING:i();break;case fe.SHOW_LOW_BALANCE:r(),Rt(Zn.LowNetworkTokenInfoModalOpened,p.payload);break;case fe.PROCEED_TO_REVIEW:l({txId:js()}),u(Se.Review);break}}return d}const x0=e=>(e==null?void 0:e.accountType)===Lr.Readonly;function g0(e){const{handleShowTokenWarningModal:t,handleShowBridgingWarningModal:n,handleShowMaxNativeTransferModal:i,handleShowViewOnlyModal:r}=Mt(),{isInterfaceWrap:s,onInterfaceWrap:a}=No(),{derivedSwapInfo:c,updateSwapForm:l,exactAmountToken:u,prefilledCurrencies:d,isMax:p}=N(P=>({derivedSwapInfo:P.derivedSwapInfo,updateSwapForm:P.updateSwapForm,exactAmountToken:P.exactAmountToken,prefilledCurrencies:P.prefilledCurrencies,isMax:P.isMax})),{currencies:f,exactCurrencyField:x,chainId:g}=c,{swapRedirectCallback:h,setScreen:S}=re(),_=ce().evmAccount,{onConnectWallet:w}=ot(),{needsTokenProtectionWarning:C}=ks(c,d),b=d0({derivedSwapInfo:c,isMax:p}),j=u0(c),A=x0(_);return U(p0({activeAccount:_,isViewOnlyWallet:A,isInterfaceWrap:s,currencies:f,exactAmountToken:u,exactCurrencyField:x,chainId:g,needsTokenProtectionWarning:C,needsBridgingWarning:j,needsLowNativeBalanceWarning:b,handleShowViewOnlyModal:r,handleShowTokenWarningModal:t,handleShowBridgingWarningModal:n,handleShowMaxNativeTransferModal:i,onInterfaceWrap:a,updateSwapForm:l,setScreen:S,swapRedirectCallback:h,onConnectWallet:w,warningService:e.warningService,logger:ge}))}function h0(){const e=(0,m.useRef)(!1),t=(0,m.useRef)(!1),n=(0,m.useRef)(!1),i=U(()=>{e.current=!1,t.current=!1,n.current=!1}),r=U(()=>e.current),s=U(()=>t.current),a=U(()=>n.current),c=U(d=>{e.current=d}),l=U(d=>{t.current=d}),u=U(d=>{n.current=d});return{getSkipBridgingWarning:r,getSkipMaxTransferWarning:s,getSkipTokenProtectionWarning:a,setSkipBridgingWarning:c,setSkipMaxTransferWarning:l,setSkipTokenProtectionWarning:u,reset:i}}const $n=()=>{const{handleHideTokenWarningModal:e,handleHideMaxNativeTransferModal:t}=Mt(),n=h0(),i=g0({warningService:n}),r=U(({skipBridgingWarning:l,skipTokenProtectionWarning:u,skipMaxTransferWarning:d})=>{n.setSkipBridgingWarning(l),n.setSkipMaxTransferWarning(d),n.setSkipTokenProtectionWarning(u),i()}),s=U(()=>{r({skipBridgingWarning:!1,skipMaxTransferWarning:!1,skipTokenProtectionWarning:!1})}),a=U(()=>{e(),r({skipBridgingWarning:!1,skipMaxTransferWarning:!1,skipTokenProtectionWarning:!0})}),c=U(()=>{t(),r({skipBridgingWarning:!0,skipMaxTransferWarning:!0,skipTokenProtectionWarning:!0})});return{onReviewPress:r,handleOnReviewPress:s,handleOnAcknowledgeTokenWarningPress:a,handleOnAcknowledgeLowNativeBalancePress:c}},Rs=()=>{const{exactAmountToken:e,exactAmountFiat:t}=N(n=>({exactAmountToken:n.exactAmountToken,exactAmountFiat:n.exactAmountFiat}));return!Number(t)&&!Number(e)},Ps=()=>{const e=ie(t=>t.currencies);return(0,m.useMemo)(()=>Object.values(e).some(t=>!t),[e])},v0=()=>{const e=Ps(),t=Rs(),{insufficientBalanceWarning:n,insufficientGasFundsWarning:i}=Ye(),r=Eo();return!!(e||t||n||i||r)},_0=e=>{const t=Is(),n=v0(),i=ce().evmAccount,r=N(g=>g.isSubmitting),{validTokenColor:s,lightTokenColor:a}=qa(e),{swapRedirectCallback:c}=re(),l=(n||t)&&!c,u=!i||r;return{backgroundColor:t?void 0:u?a:s,variant:i&&l?"default":"branded",emphasis:u||l?"secondary":"primary",buttonTextColor:i?void 0:s}};var S0=Qt({"../../node_modules/lodash/noop.js"(e,t){function n(){}t.exports=n}});const Ws="No output amount found in receipt logs";function an({outputAmount:e,updateSwapForm:t,setScreen:n}){t({instantOutputAmountRaw:e.toString()}),n(Se.UnichainInstantBalance)}function w0({updateSwapForm:e,setScreen:t}){e({exactAmountFiat:void 0,exactAmountToken:"",isSubmitting:!1,showPendingUI:!1,isConfirmed:!1,instantOutputAmountRaw:void 0,instantReceiptFetchTime:void 0,txHash:void 0,txHashReceivedTime:void 0}),t(Se.Form)}function b0(){const{setScreen:e}=re(),t=pe(r=>r.derivedSwapInfo.chainId),n=N(r=>r.updateSwapForm);return(0,m.useCallback)(({error:r,fetcherIdAndStartTime:s,retryFunction:a})=>{ge.error(r,{tags:{file:"useReceiptFailureHandler",function:"handleReceiptFailure"}});const c=r instanceof Error&&r.message===Ws;if(Date.now()-s<bo&&!c){const u=(Bt(t).subblockTimeMs||Dt)/(Be?2:4);setTimeout(a,u);return}c?e(Se.UnichainInstantBalance):w0({updateSwapForm:n,setScreen:e})},[t,e,n])}var y0=Qt({"../../node_modules/lodash/_baseRange.js"(e,t){var n=Math.ceil,i=Math.max;function r(s,a,c,l){for(var u=-1,d=i(n((a-s)/(c||1)),0),p=Array(d);d--;)p[l?d:++u]=s,s+=c;return p}t.exports=r}}),T0=Qt({"../../node_modules/lodash/toFinite.js"(e,t){var n=$u(),i=1/0,r=17976931348623157e292;function s(a){if(!a)return a===0?a:0;if(a=n(a),a===i||a===-i){var c=a<0?-1:1;return c*r}return a===a?a:0}t.exports=s}}),C0=Qt({"../../node_modules/lodash/_createRange.js"(e,t){var n=y0(),i=za(),r=T0();function s(a){return function(c,l,u){return u&&typeof u!="number"&&i(c,l,u)&&(l=u=void 0),c=r(c),l===void 0?(l=c,c=0):l=r(l),u=u===void 0?c<l?1:-1:r(u),n(c,l,u,a)}}t.exports=s}}),I0=Qt({"../../node_modules/lodash/range.js"(e,t){var n=C0(),i=n();t.exports=i}});const A0=130,_n=4,$o=256,F0=$o/4;Tn();function k0({logData:e,inputAmount:t}){const n=t.toHexString().slice(2),i=Ii({target:n,logData:e});if(i)return{inputStartIndex:i.startIndex,inputEndIndex:i.endIndex,isInputPositive:!0};const s=ve.from(`-${t.toString()}`).toTwos($o).toHexString().slice(2).replace(/^f+/,""),a=Ii({target:s,logData:e});if(a)return{inputStartIndex:a.startIndex,inputEndIndex:a.endIndex,isInputPositive:!1}}function Ii({target:e,logData:t}){const n=t.indexOf(e);if(n!==-1)return{startIndex:n,endIndex:n+e.length-1}}const j0=/(0{4,}|f{4,})([0-9a-f]+?)(?=0{4,}|f{4,}|$)/gi;function R0(e){const t=[];for(const[i,r,s]of e.slice(2).matchAll(j0)){if(!(r!=null&&r[0])||!s)continue;const a=r[0]==="0",c=t[t.length-1];c&&(c.isNextBlobPositive=a),t.push({isFirst:!c,blobData:s,isBlobPositive:r[0]==="0"})}const n=t[t.length-1];return n&&(n.isLast=!0),t}function P0({blob:e,outputLowBound:t,outputHighBound:n,possibleLengths:i}){const{blobData:r,isBlobPositive:s,isNextBlobPositive:a,isFirst:c,isLast:l}=e,u=!l,d=!c,p=s?"0":"f",f=a?"0":"f",x=`${d?p.repeat(_n):""}${r}${u?f.repeat(_n):""}`,g=[],h=S=>{let _;try{_=s?ve.from(`0x${S}`):ve.from(`0x${S.padStart(F0,"f")}`).fromTwos($o).abs()}catch{return}_.lt(t)||_.gt(n)||g.push(_)};for(const S of i)for(let _=0;_<=x.length-S;_++){const w=x.slice(_,_+S);h(w)}if(g.length>1)throw new Error("multiple possible instant balance entries detected");return g[0]}Tn();var W0=Ge(I0());function B0({inputAmountFromForm:e,outputAmountFromForm:t,slippageFromForm:n,logs:i}){if(!e||!t||!n)return;const r=i.filter(({data:u})=>u.length>=A0);if(!r.length)return;const s=t.mul(Math.floor(1e4-n*100)).div(1e4),a=t.mul(Math.ceil(1e4+n*100)).div(1e4),c=ve.from(s).toHexString().length-2,l=ve.from(a).toHexString().length-2;for(const{data:u}of r){const d=k0({logData:u,inputAmount:e});if(!d)continue;const{inputStartIndex:p,inputEndIndex:f,isInputPositive:x}=d,g=`${u.slice(0,p)}${"1".repeat(l+1)}${u.slice(f+1)}`;try{const h=R0(g).map(S=>{const{blobData:_,isBlobPositive:w}=S;if(!(!x&&!w)&&!(_.length<c-_n||_.length>l+_n))return P0({blob:S,outputHighBound:a,outputLowBound:s,possibleLengths:(0,W0.default)(c,l+1,1)})}).filter(Boolean);if(h.length===1)return h[0]}catch(h){ge.error(h,{tags:{file:"getOutputAmountUsingSwapLogAndFormData.ts",function:"getOutputAmountUsingSwapLogAndFormData"}});return}}}Tn();function D0(){var e,t;const{setScreen:n}=re(),i=ht(),r=(e=ce().evmAccount)===null||e===void 0?void 0:e.address,s=N(g=>g.updateSwapForm),a=pe(g=>g.derivedSwapInfo),c=pe(g=>{var h;return(h=g.derivedSwapInfo.currencyAmounts.input)===null||h===void 0?void 0:h.quotient.toString()}),l=pe(g=>{var h;return(h=g.derivedSwapInfo.currencyAmounts.output)===null||h===void 0?void 0:h.quotient.toString()}),u=pe(g=>g.derivedSwapInfo.currencyBalances.output),d=(t=a.trade.trade)===null||t===void 0?void 0:t.slippageTolerance,p=a.exactCurrencyField,f=a.currencies.output;return(0,m.useCallback)(async({receipt:g,transaction:h,methodFetchTime:S,methodRoundtripTime:_,isFlashblockTxWithinThreshold:w,provider:C})=>{if(!f||!r)throw new Error("Missing required data for receipt processing");if(g.status===0)throw new Error("Transaction reverted");if(!g.logs.length)throw new Error("No logs found");s({instantReceiptFetchTime:S-_}),i(Sl({...h,confirmedTime:S,status:fl.Success,...q&&{isFlashblockTxWithinThreshold:w}}));const b=Uu({outputCurrencyInfo:f,receipt:g,accountAddress:r});if(b.gt(0)){an({outputAmount:b,updateSwapForm:s,setScreen:n});return}const j=p===v.INPUT;if(h.typeInfo.type===go.Swap&&j){const A=B0({inputAmountFromForm:c?ve.from(c):void 0,outputAmountFromForm:l?ve.from(l):void 0,slippageFromForm:d??void 0,logs:g.logs});if(A!=null&&A.gt(0)){an({outputAmount:A,updateSwapForm:s,setScreen:n});return}}if(f.currency.isNative){const A=H=>{if(!d)return!1;const T=ve.from(l||0).mul(Math.floor(1e4-d*100)).div(1e4),E=ve.from(l||0).mul(Math.ceil(1e4+d*100)).div(1e4);return H.gte(T)&&H.lte(E)},P=await C.send("eth_getBalance",[r,"pending"]),F=ve.from(P),W=ve.from(g.gasUsed),k=ve.from(g.effectiveGasPrice),$=W.mul(k),R=F.sub((u==null?void 0:u.numerator.toString())??0).add($);if(A(R)){an({outputAmount:R,updateSwapForm:s,setScreen:n});return}const X=g.blockNumber-1,K=await C.send("eth_getBalance",[r,`0x${X.toString(16)}`]),G=ve.from(K),Q=F.sub(G).add($);if(A(Q)){an({outputAmount:Q,updateSwapForm:s,setScreen:n});return}}throw new Error(Ws)},[u,f,r,s,i,n,p,c,l,d])}pr();function N0(){var e;const t=(e=ce().evmAccount)===null||e===void 0?void 0:e.address,n=pe(l=>l.derivedSwapInfo.chainId),i=Po(),r=(0,m.useMemo)(()=>{var l;const u=(l=Bt(n).rpcUrls[sr.Public])===null||l===void 0?void 0:l.http[0];if(u)return new dr(u)},[n]),s=b0(),a=D0(),c=(0,m.useCallback)(async(l,u)=>{if(!r||!(i!=null&&i.hash)||!t)throw new Error("Missing required dependencies for receipt fetch");const d=Date.now(),p=("options"in i?i.options.rpcSubmissionTimestampMs||0:i.addedTime||0)-d<=bo;try{const f=await r.send("eth_getTransactionReceipt",[i.hash]);if(u.current!==l)return;const x=Date.now(),g=x-d;if(!f)throw new Error("No receipt found");await a({receipt:f,transaction:i,methodFetchTime:x,methodRoundtripTime:g,isFlashblockTxWithinThreshold:p,provider:r})}catch(f){s({error:f,fetcherIdAndStartTime:l,retryFunction:()=>c(l,u).catch(()=>{})})}},[r,i,t,s,a]);return c}pr();function E0(){var e,t;const n=pe(g=>g.derivedSwapInfo),i=n.chainId,r=n.currencies.output,s=Co((e=n.trade.trade)===null||e===void 0?void 0:e.routing),{isConfirmed:a,instantReceiptFetchTime:c}=N(g=>({isConfirmed:g.isConfirmed,instantReceiptFetchTime:g.instantReceiptFetchTime})),l=(t=ce().evmAccount)===null||t===void 0?void 0:t.address,u=Po(),d=u==null?void 0:u.hash,p=(0,m.useMemo)(()=>{var g;const h=(g=Bt(i).rpcUrls[sr.Public])===null||g===void 0?void 0:g.http[0];if(h)return new dr(h)},[i]),f=N0(),x=(0,m.useRef)(void 0);(0,m.useEffect)(()=>{x.current=void 0},[u==null?void 0:u.hash]),(0,m.useEffect)(()=>{if(!a||!r||!d||!p||!l||x.current||!s||c)return;const g=Date.now();x.current=g,f(g,x).catch(h=>{ge.error(h,{tags:{file:"useInstantReceiptOutput",function:"fetchReceipt"}})})},[a,c,d,p,r,l,s,f])}var Ai=Ge(S0());function $0({size:e}){const{t}=I(),{setScreen:n,screen:i,onClose:r}=re(),s=He(),a=N(f=>f.updateSwapForm),c=N(f=>f.isConfirmed),l=ie(f=>f.chainId),u=St(l),d=pe(f=>{var x;return(x=f.derivedSwapInfo.trade.trade)===null||x===void 0?void 0:x.routing}),p=Co(d);return E0(),(0,m.useEffect)(()=>{if(!c||!u||i===Se.UnichainInstantBalance)return Ai.default;const f=setTimeout(()=>{n(Se.Form),a({exactAmountFiat:void 0,exactAmountToken:"",isSubmitting:!1,showPendingUI:!1,instantReceiptFetchTime:void 0,instantOutputAmountRaw:void 0,txHash:void 0,txHashReceivedTime:void 0}),setTimeout(()=>{a({isConfirmed:!1})},1e3),r()},p?bo:gu);return()=>clearTimeout(f)},[c,u,i,n,a,p,r]),(0,o.jsx)(de,{isDisabled:!0,backgroundColor:"$statusSuccess2",variant:"branded",emphasis:"primary",size:e,hoverStyle:{backgroundColor:"$statusSuccess2",filter:"none"},pressStyle:{backgroundColor:"$statusSuccess2",filter:"none"},animation:"200ms",children:(0,o.jsxs)(L,{row:!0,alignItems:"center",enterStyle:{y:10,opacity:0},animation:"200msDelayed160ms",children:[(0,o.jsx)(ka,{strokeWidth:4,size:"$icon.24",color:s.statusSuccess.val,position:"absolute",top:"50%",transform:[{translateY:-12}]}),(0,o.jsx)(y,{variant:"buttonLabel1",color:"$statusSuccess",ml:"$gap32",children:t("common.confirmed")})]})})}const U0=3*Dt;function M0({disabled:e,onSubmit:t,showPendingUI:n,warning:i}){const{t:r}=I(),{renderBiometricsIcon:s,passkeyAuthStatus:a}=re(),c=N(b=>b.isSubmitting),l=N(b=>b.isConfirmed),u=ie(b=>b.chainId),d=St(u),{wrapType:p,trade:{trade:f,indicativeTrade:x}}=ie(b=>({wrapType:b.wrapType,trade:b.trade})),g=!!(!f&&x),h=Ie(b=>b),S=Bs({t:r,wrapType:p,swapTxContext:h,warning:i,isAuthenticated:!!(a!=null&&a.isSessionAuthenticated)}),w=Wt()?"medium":"large",C=(0,m.useMemo)(()=>{if(s)return s({});if(a!=null&&a.isSignedInWithPasskey&&!a.isSessionAuthenticated)return(0,o.jsx)(uu,{size:"$icon.24"})},[s,a==null?void 0:a.isSignedInWithPasskey,a==null?void 0:a.isSessionAuthenticated]);switch(!0){case g:return(0,o.jsx)(de,{loading:!0,variant:"default",emphasis:"secondary",size:w,children:r("swap.finalizingQuote")});case n:return(0,o.jsx)(de,{loading:!0,variant:"branded",emphasis:"primary",size:w,children:(0,o.jsx)(O0,{})});case(l&&d):return(0,o.jsx)($0,{size:w});case(q&&c):return(0,o.jsx)(de,{loading:!0,shouldAnimateBetweenLoadingStates:!1,size:w,children:(0,o.jsx)(L0,{passkeyAuthStatus:a})});case(i==null?void 0:i.severity)===M.High:return(0,o.jsx)(de,{variant:"critical",emphasis:"primary",isDisabled:e,icon:C,size:w,testID:ze.Swap,onPress:t,children:S});default:return(0,o.jsx)(de,{variant:e?"default":"branded",emphasis:e?"secondary":"primary",isDisabled:e,icon:C,size:w,testID:ze.Swap,onPress:t,children:S})}}let Re=(function(e){return e.Wrap="WRAP",e.Unwrap="UNWRAP",e.Swap="SWAP",e.SwapAnyway="SWAP_ANYWAY",e.ApproveAndSwap="APPROVE_AND_SWAP",e.SignAndSwap="SIGN_AND_SWAP",e})({});const Bs=({t:e,wrapType:t,swapTxContext:n,warning:i,isAuthenticated:r})=>{const s=H0({wrapType:t,swapTxContext:n,warning:i}),a={[Re.Wrap]:{default:e("swap.button.wrap"),authenticated:e("swap.confirmWrap")},[Re.Unwrap]:{default:e("swap.button.unwrap"),authenticated:e("swap.button.confirmUnwrap")},[Re.ApproveAndSwap]:{default:e("swap.approveAndSwap"),authenticated:e("swap.confirmApproveAndSwap")},[Re.SignAndSwap]:{default:e("swap.signAndSwap"),authenticated:e("swap.button.confirmSignAndSwap")},[Re.SwapAnyway]:{default:e("swap.button.swapAnyways"),authenticated:e("swap.button.confirmSwapAnyways")},[Re.Swap]:{default:e("swap.button.swap"),authenticated:e("swap.confirmSwap")}};return r?a[s].authenticated:a[s].default};function O0(){const{t:e}=I(),[t,n]=(0,m.useState)(!1);(0,m.useEffect)(()=>{const r=setTimeout(()=>n(!0),U0);return()=>clearTimeout(r)},[]);const i=t?"submitting-text-msg1":"submitting-text-msg2";return(0,o.jsx)(At,{children:(0,o.jsx)(L,{animateEnterExit:"fadeInDownOutDown",animation:"quicker",children:(0,o.jsx)(de.Text,{children:e(t?"swap.button.submitting.keep.open":"swap.button.submitting")})})},i)}function L0({passkeyAuthStatus:e}){const{t}=I();let n=t("common.confirmWallet");return e!=null&&e.isSessionAuthenticated?n=t("swap.button.submitting"):e!=null&&e.isSignedInWithPasskey&&(n=t("swap.button.submitting.passkey")),(0,o.jsx)(At,{children:(0,o.jsx)(L,{animateEnterExit:"fadeInDownOutDown",animation:"quicker",children:(0,o.jsx)(de.Text,{children:n})})})}const H0=({wrapType:e,swapTxContext:t,warning:n})=>{var i;if(e===Te.Wrap)return Re.Wrap;if(e===Te.Unwrap)return Re.Unwrap;const r=t&&_e(t)?((i=t.permit)===null||i===void 0?void 0:i.method)===xn.Transaction:!1,s=!!(t!=null&&t.approveTxRequest);return q&&(r||s)?Re.ApproveAndSwap:q&&t&&_e(t)&&t.unsigned?Re.SignAndSwap:(n==null?void 0:n.severity)===M.High?Re.SwapAnyway:Re.Swap},V0=()=>{var e;const{isInterfaceWrap:t}=No(),{t:n}=I(),{swapRedirectCallback:i}=re(),{currencies:r,wrapType:s,chainId:a}=ie(_=>({currencies:_.currencies,wrapType:_.wrapType,chainId:_.chainId})),c=Ps(),l=Rs(),u=_t(vt.EmbeddedWallet),{insufficientBalanceWarning:d,blockingWarning:p,insufficientGasFundsWarning:f}=Ye(),x=u,g=hr(a),h=Eo(),S=ce().evmAccount;return i?n("common.getStarted"):h?n("swap.finalizingQuote"):S?p!=null&&p.buttonText?p.buttonText:c?n("common.selectToken.label"):l?n("common.noAmount.error"):d?n("common.insufficientTokenBalance.error.simple",{tokenSymbol:((e=r[v.INPUT])===null||e===void 0?void 0:e.currency.symbol)??""}):f?n("common.insufficientTokenBalance.error.simple",{tokenSymbol:g.symbol??""}):t?Bs({t:n,wrapType:s}):n("swap.button.review"):n(x?"nav.logIn.button":"common.connectWallet.button")},z0="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignSelf-stretch ",q0=" _gap-t-space-spa1360334076",G0=" _gap-t-space-spa94665593",X0=" _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-center  ";function K0({tokenColor:e}){const t=Wt(),n=Eo(),{handleOnReviewPress:i}=$n(),r=Is(),s=V0(),{backgroundColor:a,variant:c,emphasis:l,buttonTextColor:u}=_0(e);return(0,o.jsx)("div",{className:$e(""+(X0+(t?G0:q0))),children:(0,o.jsx)(Hp,{children:(0,o.jsx)("div",{className:z0,children:(0,o.jsx)(de,{variant:c,emphasis:l,loading:!!n,isDisabled:r,backgroundColor:a,size:t?"small":"large",testID:ze.ReviewSwap,animation:"simple",onPress:i,children:u?(0,o.jsx)(de.Text,{color:u,children:s}):s})})})})}const Sn={...jo,hideTitle:!0,Control(){return(0,o.jsx)(gs,{saveOnBlur:!0})}};function Z0({onWalletSlippageEditPress:e}){const{t}=I(),[n,i]=(0,m.useState)(!1),r=(0,o.jsx)(de,{size:"xxsmall",emphasis:"secondary",fill:!1,onPress:()=>q?i(!0):e==null?void 0:e(),children:t("common.button.edit")});return q?(0,o.jsxs)(Yo,{placement:"bottom-end",open:n,onOpenChange:s=>{!s&&q&&i(!1)},children:[(0,o.jsx)(Yo.Trigger,{asChild:!0,children:r}),(0,o.jsx)(Br,{settings:[Sn],initialSelectedSetting:Sn,isOpen:n,onClose:()=>i(!1)})]}):r}const Q0="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665589 ",Y0="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-flex-start _gap-t-space-spa1360334080 _alignItems-center ",J0="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _alignItems-center _borderTopLeftRadius-t-radius-ro291586449 _borderTopRightRadius-t-radius-ro291586449 _borderBottomRightRadius-t-radius-ro291586449 _borderBottomLeftRadius-t-radius-ro291586449 _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _borderTopWidth-t-space-spa94665586 _borderRightWidth-t-space-spa94665586 _borderBottomWidth-t-space-spa94665586 _borderLeftWidth-t-space-spa94665586 _gap-t-space-spa1360334080 _pt-t-space-spa1360334080 _pr-t-space-spa1360334080 _pb-t-space-spa1360334080 _pl-t-space-spa1360334080 _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid ";function em({txFailureReasons:e,onSlippageEditPress:t}){const{t:n}=I(),i=e==null?void 0:e.includes(It.SLIPPAGE_TOO_LOW);return(0,o.jsxs)("div",{className:J0,children:[(0,o.jsxs)("div",{className:Y0,children:[(0,o.jsx)(Le,{color:"$statusWarning",size:"$icon.20"}),(0,o.jsxs)("div",{className:Q0,children:[(0,o.jsx)(y,{color:"$statusWarning",variant:"buttonLabel3",children:n("swap.warning.expectedFailure.titleMay")}),i&&(0,o.jsx)(y,{color:"$neutral2",variant:"body4",children:n("swap.warning.expectedFailure.increaseSlippage")})]})]}),i&&(0,o.jsx)(Z0,{onWalletSlippageEditPress:t})]})}const tm="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa94665587 ",nm="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241 ";function Ds({showIcon:e=!1,contentText:t}){const{t:n}=I(),i=He();return(0,o.jsxs)("div",{className:nm,children:[(0,o.jsx)(y,{color:"$neutral2",variant:"body3",children:n("swap.details.estimatedTime")}),(0,o.jsxs)("div",{className:tm,children:[e&&(0,o.jsx)(md,{size:"$icon.16",color:i.accent1.val}),(0,o.jsx)(y,{adjustsFontSizeToFit:!0,color:"$neutral1",numberOfLines:1,variant:"body3",children:t})]})]})}function om({chainId:e}){const{t}=I();return St(e)?(0,o.jsx)(Ds,{contentText:t("swap.details.instant"),showIcon:!0}):null}function Uo(e){const t=Kc(parseFloat(e.toFixed()));return{severity:xo(t),tokenProtectionWarning:t}}function im(e){if(!e)return{severity:M.None,tokenProtectionWarning:Gt.None};const{inputTokenInfo:t,outputTokenInfo:n}=e;if(!t.fee.greaterThan(0)&&!n.fee.greaterThan(0))return{severity:M.None,tokenProtectionWarning:Gt.None};const i=t.fee.greaterThan(n.fee),r=i?"sell":"buy",s=i?t:n;return{feeType:r,highestFeeTokenInfo:s,...Uo(s.fee)}}var Fi=Ge(ku());const rm="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _width-10037 _justifyContent-space-betwe3241 _gap-t-space-spa94665589 ",sm="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-row _alignItems-center _gap-t-space-spa94665589 ";function am({children:e,feeInfo:t,feeType:n}){const[i,r]=(0,m.useState)(!1),{fee:s,tokenSymbol:a}=t,c=parseFloat(s.toFixed()),{tokenProtectionWarning:l}=Uo(t.fee),u=nl({tokenProtectionWarning:l,tokenSymbol0:a})??"",d=ol({tokenProtectionWarning:l,tokenSymbol:a,buyFeePercent:n==="buy"?c:void 0,sellFeePercent:n==="sell"?c:void 0})??"";if(q)return(0,o.jsx)(Wn,{text:d,title:u,placement:"top",button:(0,o.jsx)(kc,{children:(0,o.jsx)(cm,{feePercent:c,feeType:n})}),trigger:(0,o.jsx)(fn,{color:"$neutral3",size:"$icon.12"}),triggerPlacement:"end",children:e});const p=()=>{r(!0)},f=()=>{r(!1)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(J,{flexShrink:1,onPress:p,children:(0,o.jsxs)("div",{className:sm,children:[e,(0,o.jsx)(fn,{color:"$neutral3",size:"$icon.16"})]})}),t.currencyInfo&&(0,o.jsx)(po,{isInfoOnlyWarning:!0,isVisible:i,currencyInfo0:t.currencyInfo,feeOnTransferOverride:{buyFeePercent:n==="buy"?c:void 0,sellFeePercent:n==="sell"?c:void 0},closeModalOnly:f,onAcknowledge:f})]})}function cm({feeType:e,feePercent:t=0}){const{t:n}=I(),{formatPercent:i}=oe(),r=Xc(t);return(0,o.jsxs)("div",{className:rm,children:[(0,o.jsx)(y,{variant:"body3",color:"$neutral2",children:e==="buy"?(0,Fi.capitalize)(n("token.fee.buy.label")):(0,Fi.capitalize)(n("token.fee.sell.label"))}),(0,o.jsx)(y,{variant:"body3",color:r,children:i(t)})]})}const lm="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa94665589 ",um="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241 ",dm="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665593 ";function pm({inputTokenInfo:e,outputTokenInfo:t}){return!e.fee.greaterThan(0)&&!t.fee.greaterThan(0)?null:(0,o.jsxs)("div",{className:dm,children:[e.fee.greaterThan(0)&&(0,o.jsx)(ki,{feeType:"sell",feeInfo:e}),t.fee.greaterThan(0)&&(0,o.jsx)(ki,{feeType:"buy",feeInfo:t})]})}function ki({feeType:e,feeInfo:t}){const{t:n}=I(),{severity:i}=Uo(t.fee),r=t.formattedUsdAmount==="-";return(0,o.jsxs)("div",{className:um,children:[(0,o.jsx)(am,{feeInfo:t,feeType:e,children:(0,o.jsx)(y,{color:"$neutral2",variant:"body3",children:n("swap.details.feeOnTransfer",{tokenSymbol:t.tokenSymbol})})}),(0,o.jsxs)("div",{className:lm,children:[(0,o.jsx)(Gr,{severity:i,size:"$icon.16"}),(0,o.jsx)(y,{flex:0,variant:"body3",children:r?`${t.formattedAmount} ${t.tokenSymbol}`:t.formattedUsdAmount})]})]})}const ji="  is_Separator _display-flex _alignItems-stretch _flexDirection-column _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _flexShrink-1 _borderTopWidth-0px _borderRightWidth-0px _borderBottomWidth-1px _borderLeftWidth-0px _flexGrow-1 _height-0px _maxHeight-0px _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid ";function mm({onPress:e,isOpen:t,openText:n,closedText:i}){return(0,o.jsxs)(L,{group:!0,centered:!0,row:!0,gap:"$spacing16",mb:"$spacing16",px:"$spacing12",testID:ze.ListSeparatorToggle,children:[(0,o.jsx)("div",{className:ji}),(0,o.jsxs)(J,{flexGrow:1,alignItems:"center",flexDirection:"row",justifyContent:"center",pb:"$spacing4",pt:"$spacing8",onPress:e,children:[(0,o.jsx)(y,{"$group-hover":{color:"$neutral2Hovered"},color:"$neutral2",variant:"body3",children:t?n:i}),t?(0,o.jsx)(cd,{color:"$neutral2",size:"$icon.20"}):(0,o.jsx)(ad,{color:"$neutral2",size:"$icon.20"})]}),(0,o.jsx)("div",{className:ji})]})}function fm({noFee:e,children:t}){const n=ue(),i=He(),{t:r}=I(),s=async()=>{await Nt({uri:ne.helpArticleUrls.swapFeeInfo})},a=r(n?"fee.uniswap.description":e?"swap.warning.uniswapFee.message.default":"swap.warning.uniswapFee.message.included");return(0,o.jsx)(De,{infoButton:(0,o.jsx)(J,{onPress:s,children:(0,o.jsx)(y,{color:"$accent1",variant:D?n?"buttonLabel4":"body4":"buttonLabel2",children:r("common.button.learn")})}),modalProps:{icon:(0,o.jsx)(rd,{color:"$neutral1",size:"$icon.20"}),backgroundIconColor:i.surface2.get(),captionComponent:(0,o.jsx)(y,{color:"$neutral2",textAlign:D?"left":"center",variant:D?"body4":"body2",children:a}),rejectText:r("common.button.close"),modalName:ee.NetworkFeeInfo,severity:M.None,title:r("swap.warning.uniswapFee.title"),zIndex:Ne.popover},tooltipProps:{text:a,placement:"top"},analyticsTitle:"Swap fee",children:t})}const xm="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa94665593 ",gm="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center _gap-t-space-spa94665589 ",Ri="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241 ";function hm({currency:e,swapFee:t,swapFeeUsd:n,loading:i}){const{t:r}=I(),s=oe(),{convertFiatAmountFormatted:a,formatPercent:c,formatNumberOrString:l}=s,u=(0,m.useRef)(void 0);i||(u.current=t);const d=n&&!isNaN(n)?a(n,te.FiatGasPrice):void 0,p=t?{noFeeCharged:t.percent.equalTo(0),formattedPercent:c(t.percent.toFixed()),formattedAmount:mr({currency:e,amount:t.amount,formatter:s})+Cn(e.symbol),formattedAmountFiat:d}:void 0;if(i&&!u.current||!p&&!i)return null;const f=(p==null?void 0:p.formattedPercent)&&!p.noFeeCharged;return(0,o.jsxs)("div",{className:Ri,children:[(0,o.jsx)(fm,{noFee:!!(p!=null&&p.noFeeCharged),children:(0,o.jsx)("div",{className:gm,children:(0,o.jsxs)(y,{color:"$neutral2",variant:"body3",children:[r("swap.details.uniswapFee"),f&&` (${p.formattedPercent})`]})})}),(0,o.jsx)(Wr,{loading:i,children:p&&(0,o.jsx)("div",{className:xm,children:(0,o.jsx)("div",{className:Ri,children:(0,o.jsx)(y,{color:"$neutral1",variant:"body3",children:p.formattedAmountFiat??(p.noFeeCharged?l({value:0,type:te.FiatGasPrice}):p.formattedAmount)})})})})]})}function vm({currencyInfo:e,tokenProtectionWarningOverride:t,feeOnTransferOverride:n}){const{heading:i,description:r}=rl(e),{buyFeePercent:s,sellFeePercent:a}=Cr(e),c=t?xo(t):Xt(e),l=Qc({tokenProtectionWarning:t??Gt.None}),u=(n==null?void 0:n.buyFeePercent)??s,d=(n==null?void 0:n.sellFeePercent)??a,p=Yc({tokenProtectionWarning:t??Gt.None,tokenSymbol:e==null?void 0:e.currency.symbol,buyFeePercent:u,sellFeePercent:d});return{severity:c,heading:t?l:i,description:t?p:r}}function _m({currencyInfo:e,tokenProtectionWarningOverride:t,feeOnTransferOverride:n,headingTestId:i,descriptionTestId:r,hideCtaIcon:s,checked:a,setChecked:c,onPress:l}){const{t:u}=I(),{severity:d,heading:p,description:f}=vm({currencyInfo:e,tokenProtectionWarningOverride:t,feeOnTransferOverride:n});if(Rc(e),!e||!d||!f)return null;const{buyFeePercent:x,sellFeePercent:g}=Cr(e),h={tokenSymbol:e.currency.symbol,chainId:e.currency.chainId,tokenAddress:cr(e.currencyId),warningSeverity:M[d],tokenProtectionWarning:Gt[t??Ir(e)],buyFeePercent:(n==null?void 0:n.buyFeePercent)??x,sellFeePercent:(n==null?void 0:n.sellFeePercent)??g,safetyInfo:e.safetyInfo};return(0,o.jsx)(qe,{logPress:!!l,element:je.TokenWarningCard,properties:h,children:(0,o.jsx)(J,{onPress:l,children:(0,o.jsx)(Xr,{hideCtaIcon:s,severity:d,checkboxLabel:c?u("common.button.understand"):void 0,heading:p??void 0,description:f,headingTestId:i,descriptionTestId:r,checked:a,setChecked:c,analyticsProperties:h,onPressCtaButton:l})})})}function Ns({feeOnTransferProps:e,tokenWarningProps:t}){const{tokenProtectionWarning:n,severity:i,currencyInfo:r}=t,{severity:s,tokenProtectionWarning:a,highestFeeTokenInfo:c,feeType:l}=im(e),u=c?parseFloat(c.fee.toFixed()):void 0,d=a>n,f=Zc(n)&&(s===i||i<M.Medium&&!c),x=d||f,g=x?s:i,h=x?a:n,S=x?c==null?void 0:c.currencyInfo:r;return{shouldDisplayTokenWarningCard:g===M.High,tokenProtectionWarningToDisplay:h,feePercent:u,feeType:l,tokenFeeInfo:c,currencyInfoToDisplay:S,showFeeSeverityWarning:x}}function Sm({feeOnTransferProps:e,tokenWarningProps:t,checked:n,setChecked:i}){const[r,s]=(0,m.useState)(!1),{showFeeSeverityWarning:a,shouldDisplayTokenWarningCard:c,tokenProtectionWarningToDisplay:l,feePercent:u,feeType:d,currencyInfoToDisplay:p,tokenFeeInfo:f}=Ns({tokenWarningProps:t,feeOnTransferProps:e});if(!c||!p)return null;const x=a&&f&&d?{buyFeePercent:d==="buy"?u:void 0,sellFeePercent:d==="sell"?u:void 0}:void 0,g=()=>{s(!0)},h=()=>{s(!1)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_m,{hideCtaIcon:!0,currencyInfo:p,tokenProtectionWarningOverride:l,feeOnTransferOverride:x,checked:n,setChecked:i,onPress:g}),(0,o.jsx)(po,{isInfoOnlyWarning:!0,isVisible:r,currencyInfo0:p,feeOnTransferOverride:x,closeModalOnly:h,onAcknowledge:h})]})}const wm=({warning:e,onShowWarning:t})=>{const{title:n,severity:i,message:r,link:s}=e;return(0,o.jsx)(J,{onPress:t,children:(0,o.jsx)(Xr,{hideCtaIcon:!0,severity:i,heading:n,description:r,learnMoreUrl:s})})},bm="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241 ";function ym({amountUserWillReceive:e,outputCurrency:t}){const{t:n}=I(),i=Kt({amount:e,locale:"en-US",type:te.TokenTx,placeholder:""}),r=t?`${i} ${t.symbol}`:"-";return(0,o.jsxs)("div",{className:bm,children:[(0,o.jsx)(y,{color:"$neutral2",variant:"body3",children:n("common.youReceive")}),(0,o.jsx)(y,{variant:"body3",children:r})]})}function Es({timeMs:e,visibleIfLong:t}){const{t:n}=I(),i=(0,m.useMemo)(()=>{if(!e)return null;const r=Math.floor(e/Lt),s=Math.floor(e%Lt/Dt);return s===0?n("bridging.estimatedTime.minutesOnly",{minutes:r}):r===0?n("bridging.estimatedTime.secondsOnly",{seconds:s}):n("bridging.estimatedTime.minutesAndSeconds",{minutes:r,seconds:s})},[e,n]);return!e||!i||t&&e<Lt||!t&&e>=Lt?null:(0,o.jsx)(Ds,{contentText:i})}const Tm="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665593 _pr-t-space-spa94665593 _pl-t-space-spa94665593 ",Cm="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334076 ",Im="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _pt-t-space-spa1360334076 _pb-t-space-spa1360334076 ",Am="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ";function Mo({banner:e,children:t,showExpandedChildren:n,chainId:i,gasFee:r,outputCurrency:s,uniswapXGasBreakdown:a,swapFee:c,swapFeeUsd:l,showGasFeeError:u=!0,showNetworkLogo:d=!0,showSeparatorToggle:p=!0,showWarning:f,warning:x,feeOnTransferProps:g,tokenWarningProps:h,tokenWarningChecked:S,setTokenWarningChecked:_,onShowWarning:w,indicative:C=!1,isSwap:b,transactionUSDValue:j,txSimulationErrors:A,isBridgeTrade:P,AccountDetails:F,estimatedBridgingTime:W,RoutingInfo:k,RateInfo:$,amountUserWillReceive:R,includesDelegation:X}){const{t:K}=I(),[G,Q]=(0,m.useState)(n),H=ue(),T=()=>{G||Rt(uo.SwapDetailsExpanded),Q(!G)},[E,V]=(0,m.useState)(!1),se=b&&(u&&r.error||(A==null?void 0:A.includes(It.SIMULATION_ERROR))||(A==null?void 0:A.includes(It.SLIPPAGE_TOO_LOW)));return(0,o.jsxs)("div",{className:Am,children:[se&&(0,o.jsx)(em,{txFailureReasons:A,onSlippageEditPress:()=>V(!0)}),!f&&e&&(0,o.jsx)("div",{className:Im,children:e}),t&&p?(0,o.jsx)(mm,{closedText:K("common.button.showMore"),isOpen:G,openText:K("common.button.showLess"),onPress:T}):null,(0,o.jsxs)("div",{className:Cm,children:[(0,o.jsxs)("div",{className:Tm,children:[G&&H?(0,o.jsx)(At,{children:(0,o.jsx)(L,{animation:"fast",exitStyle:{opacity:0},enterStyle:{opacity:0},gap:"$spacing8",children:t})}):null,$,g&&(0,o.jsx)(pm,{...g}),b&&P&&(0,o.jsx)(Es,{visibleIfLong:!0,timeMs:W}),b&&s&&(0,o.jsx)(hm,{currency:s,loading:C,swapFee:c,swapFeeUsd:l}),(0,o.jsx)(Rl,{chainId:i,gasFee:r,indicative:C,transactionUSDValue:j,uniswapXGasBreakdown:a,includesDelegation:X,showNetworkLogo:d}),b&&k,F,(0,o.jsx)(om,{chainId:i}),G&&!H?(0,o.jsx)(At,{children:(0,o.jsx)(L,{animation:"fast",exitStyle:{opacity:0},enterStyle:{opacity:0},gap:"$spacing8",children:t})}):null,R&&s&&H&&(0,o.jsx)(ym,{amountUserWillReceive:R,outputCurrency:s})]}),_&&h&&(0,o.jsx)(Sm,{checked:!!S,setChecked:_,feeOnTransferProps:g,tokenWarningProps:h})]}),f&&x&&w&&(0,o.jsx)(wm,{warning:x,onShowWarning:w}),!q&&b&&(0,o.jsx)(Br,{settings:[Sn],initialSelectedSetting:Sn,isOpen:E,onClose:()=>V(!1)})]})}var Fm="/assets/across-logo-full-DP_qBc2L.svg";const[$s,U1]=be({name:"AcrossLogo",getIcon:e=>(0,o.jsxs)(we,{viewBox:"0 0 16 16",fill:"none",...e,children:[(0,o.jsxs)(Qi,{clipPath:"url(#clip0_3093_68949)",children:[(0,o.jsx)(Ce,{d:"M16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16C12.4183 16 16 12.4183 16 8Z",fill:"currentColor"}),(0,o.jsx)(Ce,{d:"M11.5936 3.5L12.5 4.40642L9.47085 7.43558C9.31117 7.01975 8.98025 6.68883 8.56443 6.52915L11.5936 3.5ZM7.43558 6.52915L4.40642 3.5L3.5 4.40642L6.52915 7.43558C6.68883 7.01975 7.01975 6.68883 7.43558 6.52915ZM6.52915 8.56443L3.5 11.5936L4.40642 12.5L7.43558 9.47085C7.01975 9.31117 6.68883 8.98025 6.52915 8.56443ZM8.56443 9.47085L11.5936 12.5L12.5 11.5936L9.47085 8.56443C9.31117 8.98025 8.98025 9.31117 8.56443 9.47085Z",fill:"#2D2E33",fillRule:"evenodd",clipRule:"evenodd"})]}),(0,o.jsx)(Ra,{children:(0,o.jsx)(ja,{id:"clip0_3093_68949",children:(0,o.jsx)(Na,{width:"16",height:"16",fill:"white"})})})]}),defaultFill:"#6CF9D8"}),km="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-row _justifyContent-flex-end _gap-t-space-spa94665591 _alignItems-center ",jm="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241 _width-10037 ",Rm="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",Pm="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa94665591 _justifyContent-center ",Wm="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-center _gap-t-space-spa1360334076 ";function Us(){const{t:e}=I(),t=(0,m.useMemo)(()=>({caption:e("swap.details.orderRoutingInfo"),rejectText:e("common.button.close"),modalName:ee.AcrossRoutingInfo,severity:M.None,title:e("swap.details.orderRouting"),icon:(0,o.jsx)(ls,{color:"$neutral2",size:"$icon.24"}),zIndex:Ne.popover}),[e]),n=(0,m.useMemo)(()=>({text:(0,o.jsx)(y,{variant:"body4",color:"$neutral2",children:e("swap.details.orderRoutingInfo")}),placement:"top"}),[e]),i=(0,m.useMemo)(()=>Be?(0,o.jsxs)("div",{className:Wm,children:[(0,o.jsx)(wt,{textVariant:"buttonLabel3",url:ne.helpArticleUrls.acrossRoutingInfo}),(0,o.jsxs)("div",{className:Pm,children:[(0,o.jsx)(y,{color:"$neutral3",variant:"buttonLabel4",children:e("swap.details.poweredBy")}),(0,o.jsx)("div",{className:Rm,children:(0,o.jsx)(Fm,{color:"$neutral3"})})]})]}):void 0,[e]);return(0,o.jsxs)("div",{className:jm,children:[(0,o.jsx)(De,{infoButton:i,modalProps:t,tooltipProps:n,triggerPlacement:"end",analyticsTitle:"Across order routing",children:(0,o.jsx)(y,{color:"$neutral2",variant:"body3",children:e("swap.details.orderRouting")})}),(0,o.jsx)(De,{infoButton:i,modalProps:t,tooltipProps:n,trigger:(0,o.jsxs)("div",{className:km,children:[(0,o.jsx)($s,{size:"$icon.16"}),(0,o.jsx)(y,{color:"$neutral1",variant:"body3",children:"Across API"})]}),analyticsTitle:"Across order routing (API)"})]})}it();function Bm(e){const{formatCurrencyAmount:t}=oe();return(0,m.useMemo)(()=>{const i=t({value:[dt.EXACT_INPUT,"EXACT_INPUT"].includes(e.tradeType)?e.minAmountOut:e.maxAmountIn,type:te.TokenTx}),r=[dt.EXACT_INPUT,"EXACT_INPUT"].includes(e.tradeType)?e.outputAmount.currency.symbol:e.inputAmount.currency.symbol;return`${i} ${r}`},[e,t])}it();const Dm=" _gap-t-space-spa1360334080",Nm=" _gap-t-space-spa94665593",Em=" _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241  ",$m=" _pr-t-space-spa1360334076 _pl-t-space-spa1360334076 _pt-t-space-spa1360334080 _pb-t-space-spa1360334080",Um=" _pr-t-space-spa94665593 _pl-t-space-spa94665593 _pt-t-space-spa94665593 _pb-t-space-spa94665593",Mm=" _borderTopLeftRadius-t-radius-ro291586424 _borderTopRightRadius-t-radius-ro291586424 _borderBottomRightRadius-t-radius-ro291586424 _borderBottomLeftRadius-t-radius-ro291586424",Om=" _borderTopLeftRadius-t-radius-ro840690002 _borderTopRightRadius-t-radius-ro840690002 _borderBottomRightRadius-t-radius-ro840690002 _borderBottomLeftRadius-t-radius-ro840690002",Lm=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _backgroundColor-surface2 _gap-t-space-spa94665593 _width-10037  ",Hm="  _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _display-inline-flex ",Vm="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334080 _width-10037 ",zm="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-center _backgroundColor-accent2 _borderTopLeftRadius-t-radius-ro1041013639 _borderTopRightRadius-t-radius-ro1041013639 _borderBottomRightRadius-t-radius-ro1041013639 _borderBottomLeftRadius-t-radius-ro1041013639 _pr-t-space-spa94665593 _pl-t-space-spa94665593 ",qm="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665593 ",Gm="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa1360334080 _justifyContent-space-betwe3241 ",Xm="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center _gap-t-space-spa94665593 ";function Pi(){const{t:e}=I();return(0,o.jsxs)("div",{className:Xm,children:[(0,o.jsx)(Le,{color:"$statusWarning",size:"$icon.16"}),(0,o.jsx)(y,{color:"$statusWarning",variant:D?"body4":"body2",children:e("swap.settings.slippage.warning.message")})]})}function Km({isCustomSlippage:e,showSlippageWarning:t,slippageTolerance:n}){const{t:i}=I(),{formatPercent:r}=oe();return(0,o.jsxs)("div",{className:Gm,children:[(0,o.jsx)(y,{color:"$neutral2",flexShrink:1,numberOfLines:3,variant:"body2",children:i("swap.slippage.settings.title")}),(0,o.jsxs)("div",{className:qm,children:[e?null:(0,o.jsx)("div",{className:zm,children:(0,o.jsx)(y,{color:"$accent1",variant:"buttonLabel3",children:i("swap.settings.slippage.control.auto")})}),(0,o.jsx)(y,{color:t?"$statusWarning":"$neutral1",variant:"subheading2",children:r(n)})]})]})}function Zm({trade:e,isCustomSlippage:t,autoSlippageTolerance:n}){const{t:i}=I(),{slippageTolerance:r,tradeType:s}=e,a=!!(n&&r>n),c=Bm(e);return(0,o.jsxs)("div",{className:Vm,children:[(0,o.jsxs)(y,{color:"$neutral2",textAlign:D?"left":"center",variant:D?"body4":"body2",children:[[dt.EXACT_INPUT,"EXACT_INPUT"].includes(s)?i("swap.settings.slippage.input.message"):i("swap.settings.slippage.output.message")," ",D&&(0,o.jsx)("div",{className:Hm,children:(0,o.jsx)(wt,{url:ne.helpArticleUrls.swapSlippage,textVariant:"body4",textColor:"white"})})]}),a&&D&&(0,o.jsx)(Pi,{}),(0,o.jsxs)("div",{className:$e(Lm+(D?Om:Mm)+(" "+(D?Um:$m))),children:[Be&&(0,o.jsx)(Km,{isCustomSlippage:t,showSlippageWarning:a,slippageTolerance:r}),(0,o.jsxs)("div",{className:$e(""+(Em+(D?Nm:Dm))),children:[(0,o.jsx)(y,{color:"$neutral2",flexShrink:1,numberOfLines:3,variant:D?"body4":"body2",children:[dt.EXACT_INPUT,"EXACT_INPUT"].includes(s)?i("swap.settings.slippage.input.receive.title"):i("swap.settings.slippage.output.spend.title")}),(0,o.jsx)(y,{color:"$neutral1",textAlign:"center",variant:D?"body4":"subheading2",children:c})]})]}),a&&Be&&(0,o.jsx)(Pi,{})]})}const Qm="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _position-absolute _left-4px _top-50px ",Ym="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _width-t-size-spac100347271 ",Jm="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665589 _position-relative ",ef="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _position-absolute _left-4px _top-19px ",Wi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665589 ",tf="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _borderTopLeftRadius-t-radius-ro840690004 _borderTopRightRadius-t-radius-ro840690004 _borderBottomRightRadius-t-radius-ro840690004 _borderBottomLeftRadius-t-radius-ro840690004 _pt-t-space-spa94665587 _pb-t-space-spa94665587 _pr-t-space-spa94665591 _pl-t-space-spa94665591 _backgroundColor-surface3 ";function Oo(){const{t:e}=I();return(0,o.jsx)("div",{className:tf,children:(0,o.jsx)(y,{variant:"buttonLabel4",color:"$neutral1",children:e("common.automatic")})})}const nf=`
  @keyframes shield-pulse {
    0% {
      box-shadow: 0 0 0 0 rgba(150, 70, 250, 0.2);
    }
    70% {
      box-shadow: 0 0 0 6px rgba(150, 70, 250, 0);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(150, 70, 250, 0);
    }
  }
`,of=`
  @keyframes shield-icon-pulse {
    0% {
      opacity: 0.6;
    }
    50% {
      opacity: 1;
    }
    100% {
      opacity: 0.6;
    }
  }
`;function Ms({receivedAmount:e,minimumAmount:t,autoSlippageEnabled:n,currentSlippageTolerance:i}){const{t:r}=I(),a=ie(c=>c.currencies)[v.OUTPUT];return Be?null:(0,o.jsxs)(B.Outer,{children:[(0,o.jsx)(B.Header,{title:{title:r("swap.details.slippage.uniswap")},Icon:to,iconColor:"$uniswapXPurple"}),(0,o.jsxs)(B.Content,{children:[(0,o.jsxs)(B.Row,{children:[(0,o.jsxs)("div",{className:Wi,children:[(0,o.jsx)(vi,{size:"$icon.16",color:"$neutral1"}),(0,o.jsx)(y,{variant:"body4",color:"$neutral1",children:r("swap.expected.price")})]}),(0,o.jsx)(B.LineItemValue,{value:e,logo:(0,o.jsx)(tt,{currencyInfo:a,size:16})})]}),(0,o.jsx)("div",{className:ef,children:(0,o.jsx)(_i,{minHeight:12,color:"$uniswapXPurple"})}),(0,o.jsx)(B.Row,{children:(0,o.jsxs)("div",{className:Jm,children:[(0,o.jsx)("style",{children:nf}),(0,o.jsx)("style",{children:of}),(0,o.jsx)("div",{className:Ym}),(0,o.jsx)(L,{row:!0,left:-3,top:-3,position:"absolute",alignItems:"center",justifyContent:"center",borderWidth:"$spacing1",borderColor:"$surface3",borderRadius:"$roundedFull",p:"$spacing4",style:{animation:"shield-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:(0,o.jsx)(L,{opacity:.6,style:{animation:"shield-icon-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:(0,o.jsx)(to,{size:"$icon.12",color:"$uniswapXPurple"})})}),(0,o.jsx)(B.LineItemLabel,{label:r("settings.maxSlippage.percent",{percent:i})}),n&&(0,o.jsx)(Oo,{})]})}),(0,o.jsx)("div",{className:Qm,children:(0,o.jsx)(_i,{minHeight:12,color:"$uniswapXPurple"})}),(0,o.jsxs)(B.Row,{children:[(0,o.jsxs)("div",{className:Wi,children:[(0,o.jsx)(vi,{size:"$icon.16",color:"$neutral1"}),(0,o.jsx)(B.LineItemLabel,{label:r("swap.min.price")})]}),(0,o.jsx)(B.LineItemValue,{value:t,logo:(0,o.jsx)(tt,{currencyInfo:a,size:16})})]})]}),(0,o.jsx)(B.Separator,{}),(0,o.jsx)(B.Description,{text:r("swap.slippage.description"),learnMoreUrl:ne.helpArticleUrls.swapSlippage})]})}function rf({children:e,trade:t,isCustomSlippage:n,autoSlippageTolerance:i}){const{t:r}=I(),s=He(),a=ue();if(t.indicative)return(0,o.jsx)(o.Fragment,{children:e});const c=`${Kt({amount:t.minAmountOut,locale:"en-US",type:te.TokenTx,placeholder:"-"})} ${t.outputAmount.currency.symbol}`,l=(0,o.jsx)(Zm,{trade:t,isCustomSlippage:n,autoSlippageTolerance:i});return(0,o.jsx)(De,{infoButton:Be?(0,o.jsx)(wt,{url:ne.helpArticleUrls.swapSlippage}):null,modalProps:{backgroundIconColor:s.surface2.get(),captionComponent:l,rejectText:r("common.button.close"),icon:(0,o.jsx)(Nl,{color:"$neutral2",size:"$icon.28"}),modalName:ee.SlippageInfo,severity:M.None,title:r("swap.slippage.settings.title"),zIndex:Ne.popover},tooltipProps:{text:a?(0,o.jsx)(Ms,{receivedAmount:c,minimumAmount:c,autoSlippageEnabled:!n,currentSlippageTolerance:c}):l,maxWidth:a?300:272,placement:"top"},analyticsTitle:"Max Slippage",children:e})}const sf="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-center _backgroundColor-surface3 _borderTopLeftRadius-t-radius-ro1041013639 _borderTopRightRadius-t-radius-ro1041013639 _borderBottomRightRadius-t-radius-ro1041013639 _borderBottomLeftRadius-t-radius-ro1041013639 _pr-t-space-spa94665589 _pl-t-space-spa94665589 _pt-t-space-spa94665587 _pb-t-space-spa94665587 ",af="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center _gap-t-space-spa94665593 ",cf="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-row _alignItems-center _gap-t-space-spa94665589 ",lf="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa1360334080 _justifyContent-space-betwe3241 ";function Os({acceptedDerivedSwapInfo:e,autoSlippageTolerance:t,customSlippageTolerance:n}){const i=ue(),{t:r}=I(),s=oe(),{formatPercent:a}=s,c=e.trade.trade??e.trade.indicativeTrade;if(!c)throw new Error("Invalid render of `MaxSlippageInfo` with no `trade`");if(c instanceof In)throw new Error("Invalid render of `MaxSlippageInfo` for bridge trade");const l=c.indicative&&!c.slippageTolerance,u=c.slippageTolerance&&t?c.slippageTolerance>t:!1;return(0,o.jsxs)("div",{className:lf,children:[(0,o.jsx)(rf,{autoSlippageTolerance:t,isCustomSlippage:!!n,trade:c,children:(0,o.jsx)("div",{className:cf,children:(0,o.jsx)(y,{color:"$neutral2",numberOfLines:3,variant:"body3",children:r(i?"settings.maxSlippage":"swap.details.slippage")})})}),(0,o.jsx)(Wr,{loading:l,children:(0,o.jsxs)("div",{className:af,children:[n?null:i?(0,o.jsx)(Oo,{}):(0,o.jsx)("div",{className:sf,children:(0,o.jsx)(y,{color:"$neutral2",variant:"buttonLabel3",children:r("swap.settings.slippage.control.auto")})}),(0,o.jsx)(y,{color:u?"$statusWarning":"$neutral1",variant:"body3",children:a(c.slippageTolerance)})]})})]})}function uf({t:e,routing:t,missing:n}){return xe({routing:t})?n?{caption:e("swap.impactOfTrade.uniswapx.missing"),link:ne.helpArticleUrls.uniswapXInfo}:{caption:e("swap.impactOfTrade.uniswapx"),link:ne.helpArticleUrls.uniswapXInfo}:{caption:e("swap.impactOfTrade"),link:ne.helpArticleUrls.priceImpact}}function df({children:e,routing:t,missing:n}){const i=He(),{t:r}=I(),{caption:s,link:a}=uf({t:r,routing:t,missing:n});return(0,o.jsx)(De,{infoButton:(0,o.jsx)(J,{onPress:async()=>await Nt({uri:a}),children:(0,o.jsx)(y,{color:"$accent1",variant:D?"body4":"buttonLabel2",children:r("common.button.learn")})}),modalProps:{hideIcon:D,icon:(0,o.jsx)(ld,{color:"$neutral1",size:"$icon.18"}),backgroundIconColor:i.surface2.get(),captionComponent:(0,o.jsx)(y,{color:"$neutral2",textAlign:D?"left":"center",variant:D?"body4":"body2",children:s}),rejectText:r("common.button.close"),modalName:ee.NetworkFeeInfo,severity:M.None,title:r("swap.priceImpact"),zIndex:Ne.popover},tooltipProps:{text:s,placement:"top"},analyticsTitle:"Price Impact",children:e})}function pf({derivedSwapInfo:e}){const{formatPercent:t}=oe();return(0,m.useMemo)(()=>{const n=Wo(e);if(!n)return{priceImpact:void 0,formattedPriceImpact:void 0};const i=Cs(n,t);return{priceImpact:n,formattedPriceImpact:i}},[e,t])}const mf="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-row _justifyContent-flex-end ",ff="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center _gap-t-space-spa94665589 ",xf="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241 ";function Ls({hide:e,derivedSwapInfo:t}){const{t:n}=I(),{formattedPriceImpact:i}=pf({derivedSwapInfo:t}),{priceImpactWarning:r}=Ye(),{text:s}=jn(r==null?void 0:r.severity),a=t.trade.trade;return e||!a||ft(a)?null:(0,o.jsxs)("div",{className:xf,children:[(0,o.jsx)(df,{routing:a.routing,missing:!i,children:(0,o.jsx)("div",{className:ff,children:(0,o.jsx)(y,{color:"$neutral2",variant:"body3",children:n("swap.priceImpact")})})}),(0,o.jsx)("div",{className:mf,children:(0,o.jsx)(y,{adjustsFontSizeToFit:!0,color:s,variant:"body3",children:i??"N/A"})})]})}const gf="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center ";function hf(){const e=Ie(n=>n.trade),{t}=I();return e?xe(e)?(0,o.jsxs)("div",{className:gf,children:[(0,o.jsx)(xt,{size:"$icon.16",mr:"$spacing2"}),(0,o.jsx)(Et,{variant:"body3",children:t("uniswapx.label")})]}):_e(e)?(0,o.jsx)(o.Fragment,{children:"Uniswap API"}):null:null}var vf=Ge(lr());const _f="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-row _gap-t-space-spa94665589 _width-auto _zIndex-2 _flexGrow-1 _justifyContent-space-evenl121 _alignItems-center ",Sf="  _display-flex _flexBasis-auto _boxSizing-border-box _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-center _position-absolute _width-10037 _height-10037 _left-0px _top-0px _zIndex-1 _opacity-0--5 ",wf="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-row _justifyContent-space-evenl121 _flexGrow-1 _position-relative _width-auto _pt-t-space-spa94665589 _pb-t-space-spa94665589 ",bf="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _mr-t-space-spa94665589 ",yf="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _ml-t-space-spa94665589 _flexGrow-1 ",Tf="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _flexGrow-1 ",Cf="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _ml-t-space-spa94665589 ",Bi="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _width-10037 _gap-t-space-spa94665589 ",If="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _width-10037 _gap-t-space-spa94665589 ",Af="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa94665589 ",Ff="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",kf="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _ml-2px ",jf=rt(L,{row:!0,centered:!0,p:"$spacing8"}),Hs=rt(jf,{backgroundColor:"$surface2",borderRadius:"$rounded8",justifyContent:"flex-start",p:"$spacing4",zIndex:Ne.sticky,"$platform-web":{display:"grid",gridGap:"$spacing4",gridAutoFlow:"column"}}),wn=rt(y,{variant:"body4","$platform-web":{wordBreak:"normal"}}),bn=e=>"address"in e?jt(e.chainId,e.address):ar(e.chainId);function Rf({currency0:e,currency1:t,feeAmount:n}){const{t:i}=I(),r=ue(),s=nt(bn(e)),a=nt(bn(t)),c=n===Mu;return(0,o.jsxs)(et,{placement:"top",children:[(0,o.jsx)(et.Trigger,{children:(0,o.jsxs)(Hs,{children:[(0,o.jsx)("div",{className:kf,children:(0,o.jsx)(pu,{chainId:e.chainId,inputCurrencyInfo:s,outputCurrencyInfo:a,size:r?12:20})}),c?(0,o.jsx)(wn,{children:i("common.dynamic")}):(0,o.jsxs)(wn,{children:[n,"%"]})]})}),(0,o.jsxs)(et.Content,{children:[(0,o.jsx)(y,{variant:"body4",children:(0,o.jsx)(We,{i18nKey:"pool.percent",values:{pct:e.symbol+"/"+t.symbol+" "+n/1e4}})}),(0,o.jsx)(et.Arrow,{})]})]})}function Vs({currencyIn:e,currencyOut:t,routes:n}){const i=nt(bn(e)),r=nt(bn(t));return(0,o.jsx)("div",{className:Ff,children:n.map((s,a)=>(0,o.jsx)(Pf,{entry:s,currencyInCurrencyInfo:i,currencyOutCurrencyInfo:r},a))})}function Pf({entry:e,currencyInCurrencyInfo:t,currencyOutCurrencyInfo:n}){const i=ue(),{path:r}=e;return r.length<=2?(0,o.jsxs)("div",{className:Af,children:[(0,o.jsx)(tt,{currencyInfo:t,size:i?12:20}),(0,o.jsx)(qn,{entry:e}),(0,o.jsx)(tt,{currencyInfo:n,size:i?12:20})]}):(0,o.jsxs)("div",{className:If,children:[(0,o.jsxs)("div",{className:Bi,children:[(0,o.jsx)("div",{className:Cf,children:(0,o.jsx)(tt,{currencyInfo:t,size:i?12:20})}),(0,o.jsx)("div",{className:Tf,children:(0,o.jsx)(qn,{entry:{...e,path:r.slice(0,2)}})})]}),(0,o.jsxs)("div",{className:Bi,children:[(0,o.jsx)("div",{className:yf,children:(0,o.jsx)(qn,{entry:{...e,path:r.slice(2)},showBadge:!1})}),(0,o.jsx)("div",{className:bf,children:(0,o.jsx)(tt,{currencyInfo:n,size:i?12:20})})]})]})}function qn({entry:{percent:e,path:t,protocol:n},showBadge:i=!0}){const r=n===vf.Protocol.MIXED?[...new Set(t.map(([,,,s])=>s.toUpperCase()))].sort().join(" + "):n.toUpperCase();return(0,o.jsxs)("div",{className:wf,children:[(0,o.jsx)("div",{className:Sf,children:(0,o.jsx)(ud,{minWidth:"100%",minHeight:35})}),i&&(0,o.jsxs)(Hs,{children:[(0,o.jsx)(wn,{children:r}),(0,o.jsxs)(wn,{style:{minWidth:"auto"},children:[e.toSignificant(2),"%"]})]}),(0,o.jsx)("div",{className:_f,children:t.map(([s,a,c],l)=>(0,o.jsx)(Rf,{currency0:s,currency1:a,feeAmount:c},l))})]})}var Ot=Ge(lr());it();Ec();Nc();function zs(e){return e.swaps.map(({route:{path:t,pools:n,protocol:i},inputAmount:r,outputAmount:s})=>{let a;e.tradeType===dt.EXACT_OUTPUT?a=e.inputAmount.greaterThan(Ot.ZERO)?r.divide(e.inputAmount):new ct(0):a=e.outputAmount.greaterThan(Ot.ZERO)?s.divide(e.outputAmount):new ct(0);const c=new ct(a.numerator,a.denominator),l=[];for(let u=0;u<n.length;u++){const d=n[u],p=t[u],f=t[u+1];if(!p||!f||!d)break;const x=d instanceof ni?Ot.Protocol.V2:d instanceof Dc?Ot.Protocol.V3:Ot.Protocol.V4,g=[p,f,d instanceof ni?Ou:d.fee,x];l.push(g)}return{percent:c,path:l,protocol:i}})}const Wf="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _width-10037 ";function qs(){const{t:e}=I(),t=Ie(s=>s.trade),n=(0,m.useMemo)(()=>t&&_e(t)?zs(t):[],[t]);if(!t||!_e(t))return null;const{inputAmount:i,outputAmount:r}=t;return(0,o.jsxs)(B.Outer,{children:[(0,o.jsx)(B.Header,{title:{title:e("common.bestRoute.with",{provider:"Uniswap API"})},Icon:wo,iconColor:"$accent1"}),(0,o.jsx)(B.Content,{children:(0,o.jsx)(B.Row,{children:(0,o.jsx)("div",{className:Wf,children:(0,o.jsx)(Vs,{routes:n,currencyIn:i.currency,currencyOut:r.currency})})})}),(0,o.jsx)(B.Separator,{}),(0,o.jsx)(B.Description,{learnMoreUrl:ne.helpArticleUrls.routingSettings,text:e("swap.autoRouter")})]})}function Gs(){const{t:e}=I();return(0,o.jsxs)(B.Outer,{children:[(0,o.jsx)(B.Header,{title:{title:e("common.bestRoute.with",{provider:"UniswapX"}),uniswapX:!0},Icon:xt}),(0,o.jsx)(B.Content,{children:(0,o.jsxs)(B.Row,{children:[(0,o.jsx)(B.LineItemLabel,{label:e("swap.settings.protection.title")}),(0,o.jsx)(B.LineItemValue,{Icon:to,value:e("common.active"),iconColor:"$uniswapXPurple"})]})}),(0,o.jsx)(B.Description,{learnMoreUrl:ne.helpArticleUrls.uniswapXInfo,text:e("routing.aggregateLiquidity.uniswapx")})]})}const Bf="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-row _justifyContent-flex-end ",Df="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center _gap-t-space-spa94665589 ",Nf="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241 ",Ef="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334080 ";function Xs({chainId:e,gasFee:t}){const n=ue(),{t:i}=I(),r=Ie(x=>x.trade),{convertFiatAmountFormatted:s}=oe(),{value:a}=ll(e,t.displayValue??void 0),c=a!==void 0?s(a,te.FiatGasPrice):void 0,l=(0,m.useMemo)(()=>r&&_e(r)?zs(r):[],[r]),u=An(e),d=r&&u&&_e(r),p=(0,m.useMemo)(()=>{if(!r)return null;const x=D?"body4":"body2",g=D?"left":"center";return xe(r)?(0,o.jsx)(y,{variant:x,textAlign:g,color:"$neutral2",children:(0,o.jsx)(We,{i18nKey:"uniswapX.aggregatesLiquidity",components:{logo:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Et,{variant:x,children:"UniswapX"})})}})}):_e(r)?(0,o.jsxs)("div",{className:Ef,children:[D&&(0,o.jsx)(Vs,{routes:l,currencyIn:r.inputAmount.currency,currencyOut:r.outputAmount.currency}),(0,o.jsxs)(y,{variant:x,textAlign:g,color:"$neutral2",children:[c&&i("swap.bestRoute.cost",{gasPrice:c}),i("swap.route.optimizedGasCost")]})]}):null},[i,r,l,c]),f=(0,m.useMemo)(()=>{if(!r||!d&&!xe(r))return null;const x=ne.helpArticleUrls.routingSettings;return(0,o.jsx)(J,{onPress:async()=>{await Nt({uri:x})},children:(0,o.jsx)(y,{color:"$accent1",variant:D?"body4":"buttonLabel2",children:i("common.button.learn")})})},[i,r,d]);return(0,o.jsxs)("div",{className:Nf,children:[(0,o.jsx)(De,{infoButton:n?null:f,modalProps:{modalName:ee.SwapReview,captionComponent:p,rejectText:i("common.button.close"),icon:(0,o.jsx)(ls,{color:"$neutral1",size:"$icon.24"}),severity:M.None,title:i("swap.tradeRoutes"),zIndex:Ne.popover},tooltipProps:{text:n&&r?xe(r)?(0,o.jsx)(Gs,{}):(0,o.jsx)(qs,{}):p,placement:"top",maxWidth:n?300:r&&_e(r)?400:void 0},analyticsTitle:"Order routing",children:(0,o.jsx)("div",{className:Df,children:(0,o.jsx)(y,{color:"$neutral2",variant:"body3",children:i(n?"common.bestRoute":"swap.orderRouting")})})}),(0,o.jsx)("div",{className:Bf,children:(0,o.jsx)(y,{adjustsFontSizeToFit:!0,color:"$neutral1",variant:"body3",children:(0,o.jsx)(hf,{})})})]})}function Lo(e,t=!1){var n,i;if(!e)return{inputCurrencyAmount:void 0,outputCurrencyAmount:void 0};const{trade:{trade:r,indicativeTrade:s},wrapType:a,currencyAmounts:c}=e,l=r??s,u=a!==Te.NotApplicable,d=a===Te.Wrap?c[v.INPUT]:(n=c[v.INPUT])===null||n===void 0?void 0:n.wrapped,p=a===Te.Wrap?(i=c[v.OUTPUT])===null||i===void 0?void 0:i.wrapped:c[v.OUTPUT],f=u?d:l==null?void 0:l.inputAmount,x=u?p:t?l==null?void 0:l.quoteOutputAmount:l==null?void 0:l.outputAmount;return{inputCurrencyAmount:f,outputCurrencyAmount:x}}const $f="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _width-max-content ";function Ho({trade:e,derivedSwapInfo:t,styling:n="primary",initialInverse:i=!1,justifyContent:r="flex-start"}){const s=ue(),a=oe(),[c,l]=(0,m.useState)(i),{outputCurrencyAmount:u}=Lo(t,s),d=Ve(u),p=yl({usdAmountOut:d,outputCurrencyAmount:u,trade:e,showInverseRate:c,formatter:a}),f=e?Tl({formatter:a,trade:e,showInverseRate:c}):null,x=p,g=n==="primary";return e?(0,o.jsx)(J,{group:!0,flexDirection:"row",justifyContent:r,flexGrow:1,onPress:()=>l(!c),children:(0,o.jsxs)("div",{className:$f,children:[(0,o.jsx)(y,{adjustsFontSizeToFit:!0,"$group-hover":{color:g?"$neutral1Hovered":"$neutral2Hovered"},color:g?"$neutral1":"$neutral2",numberOfLines:1,variant:"body3",children:f}),(0,o.jsx)(y,{"$group-hover":{color:g?"$neutral1Hovered":"$neutral3Hovered"},color:g?"$neutral2":"$neutral3",variant:"body3",children:x&&` (${x})`})]})}):null}function Vo(e){const t=ue(),{t:n}=I(),{convertFiatAmountFormatted:i,formatCurrencyAmount:r}=oe(),{inputCurrencyAmount:s,outputCurrencyAmount:a}=Lo(e,t),c=Ve(s),l=Ve(a);return(0,m.useMemo)(()=>{var u,d;if(!e)return;const{currencies:p}=e,{input:f,output:x}=p,g=e.trade.trade??e.trade.indicativeTrade,h=(g==null||(u=g.inputTax)===null||u===void 0?void 0:u.greaterThan(0))||(g==null||(d=g.outputTax)===null||d===void 0?void 0:d.greaterThan(0));if(!g||!h||g.indicative||ft(g))return;const S=c==null?void 0:c.multiply(g.inputTax).toExact(),_=l==null?void 0:l.multiply(g.outputTax).toExact(),w=i(S,te.FiatTokenQuantity),C=i(_,te.FiatTokenQuantity),b=s==null?void 0:s.multiply(g.inputTax),j=a==null?void 0:a.multiply(g.outputTax),A=r({value:b,type:te.TokenTx}),P=r({value:j,type:te.TokenTx});return{inputTokenInfo:{currencyInfo:f,fee:g.inputTax,tokenSymbol:g.inputAmount.currency.symbol??n("token.symbol.input.fallback"),formattedUsdAmount:w,formattedAmount:A},outputTokenInfo:{currencyInfo:x,fee:g.outputTax,tokenSymbol:g.outputAmount.currency.symbol??n("token.symbol.output.fallback"),formattedUsdAmount:C,formattedAmount:P}}},[e,c,l,i,r,s,a,n])}const Uf="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-row _justifyContent-flex-end ",Mf="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241 ";function Of({isBridge:e}){const{t}=I(),{gasFee:n,gasFeeBreakdown:i}=Ie(x=>xe(x)?{gasFee:x.gasFee,gasFeeBreakdown:x.gasFeeBreakdown}:{gasFee:x.gasFee,gasFeeBreakdown:void 0}),r=N(x=>x.derivedSwapInfo),{priceImpactWarning:s}=Ye(),a=!!s,c=st(x=>x.customSlippageTolerance),l=Ur(x=>x.autoSlippageTolerance),{chainId:u,trade:d}=r,p=Fn(r),f=Vo(r);return d.trade?(0,o.jsx)(Zt.HeightAnimator,{animation:"fast",mt:"$spacing8",children:(0,o.jsx)(Zt.Content,{animation:"fast",p:"$none",exitStyle:{opacity:0},children:(0,o.jsxs)(Mo,{isSwap:!0,showExpandedChildren:!0,chainId:d.trade.inputAmount.currency.chainId,gasFee:n,swapFee:d.trade.swapFee,swapFeeUsd:p,indicative:d.trade.indicative,feeOnTransferProps:f,showGasFeeError:!1,showSeparatorToggle:!1,outputCurrency:d.trade.outputAmount.currency,transactionUSDValue:r.currencyAmountsUSDValue[v.OUTPUT],uniswapXGasBreakdown:i,RoutingInfo:e?(0,o.jsx)(Us,{}):(0,o.jsx)(Xs,{gasFee:n,chainId:u}),RateInfo:a?(0,o.jsxs)("div",{className:Mf,children:[(0,o.jsx)(y,{color:"$neutral2",variant:"body3",children:t("swap.details.rate")}),(0,o.jsx)("div",{className:Uf,children:(0,o.jsx)(Ho,{trade:d.trade,derivedSwapInfo:r})})]}):void 0,children:[(0,o.jsx)(Ls,{derivedSwapInfo:r,hide:a}),!e&&(0,o.jsx)(Os,{acceptedDerivedSwapInfo:r,autoSlippageTolerance:l,customSlippageTolerance:c})]})})}):null}function Lf({currencies:e,outputTokenHasBuyTax:t}){var n,i;const{t:r}=I(),s=t?(n=e[v.OUTPUT])===null||n===void 0?void 0:n.currency.symbol:(i=e[v.INPUT])===null||i===void 0?void 0:i.currency.symbol;return(0,o.jsx)(L,{animation:"quick",enterStyle:{opacity:0},exitStyle:{opacity:0},children:(0,o.jsx)(y,{color:"$statusCritical",textAlign:"center",variant:"body3",children:s?r("swap.form.warning.output.fotFees",{fotCurrencySymbol:s}):r("swap.form.warning.output.fotFees.fallback")})})}function Hf(e){return`chain_${e}`}function nn(e){const i=He()[Hf(e)].val;return tc(i,"Network color is not defined in Theme"),{foreground:i,background:co(10,i)}}const Vf="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignSelf-stretch ";function zf({inputToken:e,outputToken:t,outputNetworkName:n,onPress:i}){const{t:r}=I(),{foreground:s,background:a}=nn(t.currency.chainId),c=Ft(s),l=Ft(a),{navigateToSwapFlow:u}=ot(),d=()=>{i==null||i(),u({inputCurrencyId:e.currencyId,outputCurrencyId:t.currencyId})};if(!t.currency.symbol)throw new Error("Unexpected render of `BridgeTokenButton` without a token symbol for currency "+t.currencyId);return(0,o.jsx)(qe,{logPress:!0,element:je.BuyNativeTokenButton,children:(0,o.jsx)("div",{className:Vf,children:(0,o.jsx)(de,{backgroundColor:l,borderColor:"$transparent",hoverStyle:{borderColor:c},size:"medium",emphasis:"text-only","primary-color":c,onPress:d,children:(0,o.jsx)(de.Text,{color:c,children:r("swap.warning.insufficientGas.button.bridge",{tokenSymbol:t.currency.symbol,networkName:n})})})})})}function qf({countryCode:e,skip:t=!1,rampDirection:n}){const i=xl(),r=gl(Za.UnitedStatesDollar),s=i.code.toLowerCase(),{data:a}=sc({countryCode:e,rampDirection:n},{skip:t}),c=!a||a.fiatCurrencies.some(u=>s===u.fiatCurrencyCode.toLowerCase());return{appFiatCurrencySupportedInMeld:c,meldSupportedFiatCurrency:c?i:r,supportedFiatCurrencies:a==null?void 0:a.fiatCurrencies}}function Gf(e){const t=qt(e.chainId);return t?e.address?jt(t,e.address):ar(t):void 0}function Xf({sourceCurrencyCode:e,countryCode:t,skip:n=!1,rampDirection:i}){const{data:r,isLoading:s,error:a,refetch:c}=ac({fiatCurrency:e,countryCode:t,rampDirection:i},{skip:n}),l=(0,m.useMemo)(()=>(r==null?void 0:r.supportedTokens.reduce((_,w)=>{const C=Gf(w);return C&&(_[C]=w),_},{}))??{},[r]),{data:u,error:d,loading:p,refetch:f}=ju(Object.keys(l));return{list:(0,m.useMemo)(()=>Object.entries(l).map(([_,w])=>({currencyInfo:u==null?void 0:u.find(C=>C.currencyId.toLowerCase()===_.toLowerCase()),meldCurrencyCode:w.cryptoCurrencyCode})).filter(_=>!!_.currencyInfo),[u,l]),loading:s||p,error:!!(a||d),refetch:async()=>{a&&await c(),d&&(f==null||f())}}}function Kf(e,t=!1){const n=Jl(),{currentData:i,isLoading:r}=rc(void 0,{skip:t}),{meldSupportedFiatCurrency:s}=qf({countryCode:(i==null?void 0:i.countryCode)??n,skip:t}),{list:a,loading:c,error:l}=Xf({sourceCurrencyCode:s.code,countryCode:(i==null?void 0:i.countryCode)??n,skip:t}),u=r||c||l;return u?{currency:void 0,isLoading:u}:{currency:a==null?void 0:a.find(p=>{var f;return((f=p.currencyInfo)===null||f===void 0?void 0:f.currencyId.toLowerCase())===e.toLowerCase()}),isLoading:u}}const Zf="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignSelf-stretch ";function Qf({nativeCurrencyInfo:e,onPress:t,usesStaticText:n,usesStaticTheme:i}){const{t:r}=I(),{foreground:s,background:a}=nn(e.currency.chainId),c=Ft(s),l=Ft(a),{navigateToFiatOnRamp:u}=ot(),{currency:d,isLoading:p}=Kf(e.currencyId,!e),f=()=>{t==null||t(),u({prefilledCurrency:d})};return!p&&!d?null:(0,o.jsx)(qe,{logPress:!0,element:je.BuyNativeTokenButton,children:(0,o.jsx)("div",{className:Zf,children:(0,o.jsx)(de,{isDisabled:p||!d,backgroundColor:i?void 0:l,borderColor:"$transparent",size:"medium",emphasis:i?"secondary":"primary",onPress:f,children:(0,o.jsx)(de.Text,{color:i?void 0:c,children:n?r("swap.warning.insufficientGas.button.buyWithCard"):r("swap.warning.insufficientGas.button.buy",{tokenSymbol:e.currency.symbol??""})})})})})}const ro=D?"body4":"body3";function Yf({gasInfo:e}){var t;const n=ue();if(!e.fiatPriceFormatted)return null;const i=e.isHighRelativeToValue&&!q?"$statusCritical":n&&e.isLoading?"$neutral3":"$neutral2",r=(t=e.uniswapXGasFeeInfo)===null||t===void 0?void 0:t.preSavingsGasFeeFormatted;return r?(0,o.jsx)(Wl,{gasFee:e.fiatPriceFormatted,preSavingsGasFee:r}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(jl,{color:i,size:"$icon.16"}),(0,o.jsx)(y,{color:i,variant:"body3",children:e.fiatPriceFormatted})]})}function dn({gasInfo:e,hidden:t}){const n=ue();return e.fiatPriceFormatted?(0,o.jsx)(L,{centered:!0,row:!0,animation:"quick",enterStyle:{opacity:0},opacity:n?1:t?0:e.isLoading?.6:1,children:(0,o.jsx)(Pl,{gasFeeHighRelativeToValue:e.isHighRelativeToValue,placement:q?"top":"bottom",tooltipTrigger:(0,o.jsx)(L,{centered:!0,row:!0,gap:"$spacing4",testID:ze.GasInfoRow,children:(0,o.jsx)(Yf,{gasInfo:e})}),uniswapXGasFeeInfo:e.uniswapXGasFeeInfo,chainId:e.chainId})}):null}function Ks(){const{chainId:e,currencyAmountsUSDValue:t,trade:n,currencyAmounts:i,exactCurrencyField:r}=ie(w=>({chainId:w.chainId,currencyAmountsUSDValue:w.currencyAmountsUSDValue,trade:w.trade,currencyAmounts:w.currencyAmounts,exactCurrencyField:w.exactCurrencyField})),s=t[v.INPUT],a=t[v.OUTPUT],{gasFee:c,gasFeeBreakdown:l}=Ie(w=>xe(w)?{gasFee:w.gasFee,gasFeeBreakdown:w.gasFeeBreakdown}:{gasFee:w.gasFee,gasFeeBreakdown:void 0}),u=Jc(l,e),{gasFeeFormatted:d,gasFeeUSD:p}=el({gasFee:c,chainId:e,placeholder:void 0}),f=tl(p,a??s),x=ut(i[r])!==i[r],g=ut(n.trade)!==n.trade&&!!n.trade,h=!!(n.isLoading||n.isFetching),S=!!(c.isLoading||c.value&&!p),_=h||S||x||g;return(0,m.useMemo)(()=>({gasFee:c,fiatPriceFormatted:d??void 0,isHighRelativeToValue:f,uniswapXGasFeeInfo:u,isLoading:_,chainId:e}),[c,d,f,_,u,e])}const Di="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",Jf=" _pt-t-space-non101 _pr-t-space-non101 _pb-t-space-non101 _pl-t-space-non101",ex=" _pt-t-space-spa1360334076 _pr-t-space-spa1360334076 _pb-t-space-spa1360334076 _pl-t-space-spa1360334076",tx=" _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 _gap-t-space-spa94665593  ";function nx({parsedInsufficientNativeTokenWarning:e}){const t=ue(),n=Ks(),{nativeCurrency:i,networkColors:r,networkName:s,flow:a}=e,c=i.symbol,l=i.symbol==="ETH"&&i.chainId!==O.Mainnet,u=(0,o.jsx)(y,{style:{color:r.foreground},variant:ro});return(0,o.jsxs)("div",{className:$e(""+(tx+(D?ex:Jf))),children:[D&&(0,o.jsx)("div",{className:Di,children:(0,o.jsx)(Le,{color:"$neutral2",size:"$icon.16"})}),(0,o.jsx)(L,{fill:D,children:(0,o.jsx)(y,{color:"$neutral2",variant:ro,children:l?a==="swap"?(0,o.jsx)(We,{components:{highlight:u},i18nKey:"swap.warning.insufficientGas.message.withNetwork",values:{currencySymbol:c,networkName:s}}):(0,o.jsx)(We,{components:{highlight:u},i18nKey:"send.warning.insufficientGas.message.withNetwork",values:{currencySymbol:c,networkName:s}}):a==="swap"?(0,o.jsx)(We,{components:{highlight:u},i18nKey:"swap.warning.insufficientGas.message.withoutNetwork",values:{currencySymbol:c}}):(0,o.jsx)(We,{components:{highlight:u},i18nKey:"send.warning.insufficientGas.message.withoutNetwork",values:{currencySymbol:c}})})}),t&&(D||zt)&&(0,o.jsx)(dn,{gasInfo:n}),!D&&(0,o.jsx)("div",{className:Di,children:(0,o.jsx)(fn,{color:"$neutral3",size:"$icon.16"})})]})}function ox({flow:e,gasFee:t,warnings:n}){var i;const{defaultChainId:r,isTestnetModeEnabled:s}=Xe(),{convertFiatAmountFormatted:a}=oe(),c=n.find(j=>j.type===z.InsufficientGasFunds),l=e==="swap"?n.find(j=>j.type===z.InsufficientFunds):void 0,u=c??l,d=(u==null?void 0:u.type)===z.InsufficientGasFunds||(u==null?void 0:u.type)===z.InsufficientFunds&&((i=u.currency)===null||i===void 0?void 0:i.isNative),p=u==null?void 0:u.currency,f=(p==null?void 0:p.chainId)??r,x=_u(f),g=nn(f),h=(0,m.useMemo)(()=>mt({value:t.value,valueType:pt.Raw,currency:p!=null&&p.chainId?hr(p.chainId):void 0}),[t.value,p==null?void 0:p.chainId]),S=Ve(h),_=a(S==null?void 0:S.toExact(),te.FiatGasPrice);if(!d||!p||!x)return null;if(u.type===z.InsufficientGasFunds&&!h)return ge.warn("useInsufficientNativeTokenWarning","useInsufficientNativeTokenWarning","No `gasAmount` found when trying to render `InsufficientNativeTokenWarning`",{warning:u,gasFee:t,nativeCurrency:p,nativeCurrencyInfo:x}),null;const w=qt(p.chainId);if(!w)throw new Error(`Unsupported chain ID: ${p.chainId}`);const C=kt(w);return{flow:e,gasAmount:h,gasAmountFiatFormatted:_,nativeCurrency:p,nativeCurrencyInfo:x,networkColors:g,networkName:C,modalOrTooltipMainMessage:(()=>{if(u.type===z.InsufficientGasFunds){const j={fiatTokenAmount:(0,o.jsx)(y,{color:"$neutral2",variant:ro,children:_})},A={networkName:C,tokenSymbol:p.symbol,tokenAmount:h==null?void 0:h.toSignificant(2)};return s?(0,o.jsx)(We,{components:j,i18nKey:"transaction.warning.insufficientGas.modal.message.noAction",values:A}):(0,o.jsx)(We,{components:j,i18nKey:"transaction.warning.insufficientGas.modal.message",values:A})}else{const j={networkName:C,tokenSymbol:p.symbol};return s?(0,o.jsx)(We,{i18nKey:"transaction.warning.insufficientGas.modal.messageSwapWithoutTokenAmount.noAction",values:j}):(0,o.jsx)(We,{i18nKey:"transaction.warning.insufficientGas.modal.messageSwapWithoutTokenAmount",values:j})}})(),warning:u}}const ix="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _width-10037 _gap-t-space-spa1360334080 ",rx="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _pt-t-space-spa1360334080 _pb-t-space-spa1360334080 ";function sx({warnings:e,flow:t,gasFee:n}){var i;const r=ox({warnings:e,flow:t,gasFee:n}),{nativeCurrency:s,nativeCurrencyInfo:a}=r??{},c=(i=ce().evmAccount)===null||i===void 0?void 0:i.address;return!r||!a||!s?null:c?(0,o.jsx)(ax,{address:c,parsedInsufficientNativeTokenWarning:r,nativeCurrencyInfo:a,nativeCurrency:s}):(ge.error(new Error("Unexpected render of `InsufficientNativeTokenWarning` without an active address"),{tags:{file:"InsufficientNativeTokenWarning.tsx",function:"InsufficientNativeTokenWarning"}}),null)}function ax({address:e,parsedInsufficientNativeTokenWarning:t,nativeCurrencyInfo:n,nativeCurrency:i}){const{t:r}=I(),[s,a]=(0,m.useState)(!1),{isTestnetModeEnabled:c}=Xe(),{networkName:l,modalOrTooltipMainMessage:u}=t,d=cr(n.currencyId),{data:p}=Pc({address:e,currencyAddress:d,currencyChainId:n.currency.chainId}),f=i.symbol==="ETH"&&i.chainId!==O.Mainnet,x=()=>{a(!1)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(J,{onPress:()=>a(!0),children:(0,o.jsx)(nx,{parsedInsufficientNativeTokenWarning:t})}),s&&(0,o.jsxs)($t,{isOpen:!0,backgroundIconColor:!1,icon:(0,o.jsx)(tt,{currencyInfo:n}),modalName:ee.SwapWarning,title:f?r("transaction.warning.insufficientGas.modal.title.withNetwork",{tokenSymbol:i.symbol,networkName:l}):r("transaction.warning.insufficientGas.modal.title.withoutNetwork",{tokenSymbol:i.symbol??""}),onClose:x,children:[(0,o.jsx)(y,{color:"$neutral2",textAlign:"center",variant:"body3",children:u}),(0,o.jsx)("div",{className:rx,children:(0,o.jsx)(wt,{textColor:"$accent3",textVariant:"buttonLabel3",url:ne.helpArticleUrls.networkFeeInfo})}),(0,o.jsxs)("div",{className:ix,children:[p&&(0,o.jsx)(zf,{inputToken:p.currencyInfo,outputToken:n,outputNetworkName:l,onPress:x}),!c&&(0,o.jsx)(Qf,{nativeCurrencyInfo:n,usesStaticText:!!p,usesStaticTheme:!!p,onPress:x})]})]})]})}function cx({isOpen:e,onClose:t}){const{t:n}=I();return(0,o.jsx)($t,{caption:n("send.warning.blocked.modal.message"),rejectText:n("common.button.understand"),isOpen:e,modalName:ee.BlockedAddress,severity:M.None,title:n("send.warning.blocked.modal.title"),onClose:t})}function lx({isRecipientBlocked:e,...t}){const{t:n}=I(),[i,r]=(0,m.useState)(!1);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(cx,{isOpen:i,onClose:()=>r(!1)}),(0,o.jsx)(J,{onPress:()=>{Eu(),r(!0)},children:(0,o.jsxs)(L,{gap:"$spacing8",...t,children:[(0,o.jsx)(fn,{color:"$neutral2",size:"$icon.16"}),(0,o.jsx)(y,{color:"$neutral2",variant:"subheading2",children:n(e?"send.warning.blocked.recipient":"send.warning.blocked.default")})]})})]})}function ux(e){const t=e.map(n=>{const i=Bt(n);return i.bridge?iu(i.bridge):void 0}).filter(n=>n!==void 0);return[...new Set(t)]}const dx="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665593 _alignItems-center ";function px({chainId:e}){const{foreground:t}=nn(e),n=kt(e),i=Ft(t),r=ux([e])[0];return(0,o.jsx)(J,{onPress:()=>r&&Nt({uri:r}),children:(0,o.jsxs)("div",{className:dx,children:[(0,o.jsx)(hn,{chainId:e,size:Ae.icon20}),(0,o.jsxs)(y,{color:i,variant:"buttonLabel3",children:[n," Bridge"]}),(0,o.jsx)(Hr,{color:i,direction:"ne",size:Ae.icon20})]})})}function mx({children:e,warning:t}){const{t:n}=I(),i=t.message;return(0,o.jsx)(L,{animation:"quick",enterStyle:{opacity:0},children:(0,o.jsx)(De,{modalProps:{caption:i,rejectText:n("common.button.close"),modalName:ee.SwapWarning,severity:t.severity,title:t.title??"",icon:(0,o.jsx)(Le,{color:"$statusCritical",size:"$icon.16"})},tooltipProps:{text:i??"",placement:"bottom"},trigger:e})})}function fx(){const e=ie(i=>i.trade),[t,n]=(0,m.useState)();return(0,m.useEffect)(()=>{e.trade?n(e.trade):e.indicativeTrade?n(e.indicativeTrade):e.isLoading||n(void 0)},[e.indicativeTrade,e.isLoading,e.trade]),t}const xx="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665589 _alignItems-center ",gx="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center _gap-t-space-gap56 ",hx="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _flexGrow-1 ",vx="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center ";function _x({gasInfo:e,warning:t}){var n,i;const r=fx(),{text:s}=jn(t==null?void 0:t.severity),{isTestnetModeEnabled:a}=Xe(),c=ue(),l=ie(x=>x.currencies),u=ie(x=>x);if(a)return null;if(Be||c)return(0,o.jsx)(dn,{gasInfo:e});const d=(n=l.input)===null||n===void 0?void 0:n.currency.chainId,p=(i=l.output)===null||i===void 0?void 0:i.currency.chainId,f=q&&(t==null?void 0:t.type)===z.NoQuotesFound&&d!==p;return(0,o.jsxs)("div",{className:vx,children:[(0,o.jsxs)("div",{className:hx,children:[r&&!t&&(0,o.jsx)(Ho,{initialInverse:!0,styling:"secondary",trade:r,derivedSwapInfo:u}),t&&(0,o.jsx)(mx,{warning:t,children:(0,o.jsxs)("div",{className:gx,children:[(0,o.jsx)(Le,{color:s,size:"$icon.20"}),(0,o.jsx)(y,{color:s,variant:"body3",children:t.title})]})})]}),f?(0,o.jsx)(px,{chainId:p??O.Mainnet}):r?(0,o.jsx)(Zt.Trigger,{p:"$none",style:{background:"$surface1"},focusStyle:{background:"$surface1"},hoverStyle:{background:"$surface1"},children:({open:x})=>(0,o.jsxs)("div",{className:xx,children:[(0,o.jsx)(dn,{gasInfo:e,hidden:x}),(0,o.jsx)($a,{animation:"fast",width:Ae.icon16,height:Ae.icon16,direction:x?"up":"down",color:"$neutral3"})]})}):(0,o.jsx)(dn,{gasInfo:e})]})}const Sx="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665593 _pr-t-space-spa94665593 _pl-t-space-spa94665593 _pt-t-space-spa94665589 _pb-t-space-spa94665589 ",wx="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334080 ";function bx(){const e=ce().evmAccount,{isBlocked:t}=To(e==null?void 0:e.address),{formScreenWarning:n,warnings:i}=Ye(),r=n&&n.displayedInline&&!t?n.warning:void 0,s=Ks(),a=i.find(c=>c.type===z.InsufficientFunds);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:wx,children:[t&&(0,o.jsx)(lx,{row:!0,alignItems:"center",alignSelf:"stretch",backgroundColor:"$surface2",borderBottomLeftRadius:"$rounded16",borderBottomRightRadius:"$rounded16",flexGrow:1,px:"$spacing16",py:"$spacing12"}),!a&&(0,o.jsx)("div",{className:Sx,children:(0,o.jsx)(_x,{gasInfo:s,warning:r})}),(0,o.jsx)(sx,{flow:"swap",gasFee:s.gasFee,warnings:i})]})})}const yx=" _pt-t-space-spa1360334080",Tx=" _pt-t-space-spa94665593",Cx=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minWidth-0px _flexShrink-0 _flexDirection-column _minHeight-t-size-spac100347358  ";function Ix(){const e=Wt(),{outputTokenHasBuyTax:t,showFooter:n,showWarning:i,exactAmountToken:r,currencies:s}=Ut(c=>({outputTokenHasBuyTax:c.outputTokenHasBuyTax,showFooter:c.showFooter,showWarning:c.showWarning,exactAmountToken:c.exactAmountToken,currencies:c.currencies}));if(!n)return null;const a=D?r&&!i:!i;return(0,o.jsxs)("div",{className:$e(""+(Cx+(e?Tx:yx))),children:[(0,o.jsx)(At,{children:i&&(0,o.jsx)(Lf,{currencies:s,outputTokenHasBuyTax:t})}),a&&(0,o.jsx)(bx,{})]})}const Ax="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa94665589 ";function Fx({isOpen:e,onClose:t,onAcknowledge:n}){const{t:i}=I(),r=ht(),[s,a]=(0,m.useState)(!1),c=(0,m.useCallback)(()=>{a(!s)},[s]),l=(0,m.useCallback)(()=>{s&&r(wu(!0)),n()},[r,s,n]);return(0,o.jsx)($t,{caption:i("transaction.warning.maxNative.message"),acknowledgeText:i("common.button.continue"),isOpen:e,modalName:ee.LowNativeBalanceWarning,severity:M.Low,title:i("transaction.warning.maxNative.title"),rejectText:i("common.button.back"),onAcknowledge:l,onClose:t,onReject:t,children:(0,o.jsx)(J,{children:(0,o.jsxs)("div",{className:Ax,children:[(0,o.jsx)(Pr,{size:"$icon.20",borderColor:"$neutral2",checked:s,onPress:c}),(0,o.jsx)(y,{variant:"body3",color:"$neutral2",py:"$spacing8",onPress:c,children:i("common.dontShowAgain")})]})})})}const kx=({handleHideBridgingWarningModal:e,onReviewPress:t})=>({handleBridgingOnContinue:(0,m.useCallback)(()=>{e(),t({skipBridgingWarning:!0,skipMaxTransferWarning:!1,skipTokenProtectionWarning:!0})},[t,e]),handleBridgingOnClose:e}),jx=()=>{const{derivedSwapInfo:e,prefilledCurrencies:t}=N(r=>({derivedSwapInfo:r.derivedSwapInfo,prefilledCurrencies:r.prefilledCurrencies})),{currenciesWithProtectionWarnings:n}=ks(e,t),i=n[0];return i===void 0?{currencyInfo0:void 0,currencyInfo1:void 0}:{currencyInfo0:i,currencyInfo1:n[1]}},Rx="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa94665589 ",Px="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap56 _alignItems-center ";function Wx({isOpen:e,derivedSwapInfo:t,onContinue:n,onClose:i}){var r,s;const{t:a}=I(),c=ht(),[l,u]=(0,m.useState)(!0),d=(0,m.useCallback)(()=>{u(!l)},[l]),p=(0,m.useCallback)(()=>{l&&c(Su(!0)),n()},[c,l,n]),f=(r=t.currencies.input)===null||r===void 0?void 0:r.currency.chainId,x=f?qt(f):null,g=(s=t.currencies.output)===null||s===void 0?void 0:s.currency.chainId,h=g?qt(g):null,S=(0,o.jsxs)("div",{className:Px,children:[(0,o.jsx)(hn,{chainId:x,shape:"square",size:Ae.icon28}),(0,o.jsx)(du,{color:"$neutral2",size:"$icon.20"}),(0,o.jsx)(hn,{chainId:h,shape:"square",size:Ae.icon28})]});return(0,o.jsx)($t,{backgroundIconColor:!1,caption:a("swap.bridging.warning.description",{fromNetwork:x?kt(x):"",toNetwork:h?kt(h):""}),rejectText:a("common.button.back"),acknowledgeText:a("common.button.continue"),icon:S,isOpen:e,modalName:ee.BridgingWarning,severity:M.None,title:a("swap.bridging.title"),onClose:i,onAcknowledge:p,children:(0,o.jsx)(J,{onPress:d,children:(0,o.jsxs)("div",{className:Rx,children:[(0,o.jsx)(Pr,{size:"$icon.20",borderColor:"$neutral2",checked:l,onPress:d}),(0,o.jsx)(y,{variant:"body3",color:"$neutral2",py:"$spacing8",children:a("common.dontShowAgain")})]})})})}const Bx=()=>{const e=En(i=>i.isMaxNativeTransferModalVisible),{handleHideMaxNativeTransferModal:t}=Mt(),{handleOnAcknowledgeLowNativeBalancePress:n}=$n();return(0,o.jsx)(Fx,{isOpen:e,onClose:t,onAcknowledge:n})},Dx=()=>{const e=En(n=>n.isViewOnlyModalVisible),{handleHideViewOnlyModal:t}=Mt();return(0,o.jsx)(zl,{isOpen:e,onDismiss:t})},Nx=()=>{const e=En(a=>a.isBridgingWarningModalVisible),{handleHideBridgingWarningModal:t}=Mt(),n=N(a=>a.derivedSwapInfo),{onReviewPress:i}=$n(),{handleBridgingOnContinue:r,handleBridgingOnClose:s}=kx({handleHideBridgingWarningModal:t,onReviewPress:i});return(0,o.jsx)(Wx,{isOpen:e,derivedSwapInfo:n,onContinue:r,onClose:s})},Ex=()=>{const e=En(s=>s.isTokenWarningModalVisible),{handleHideTokenWarningModal:t}=Mt(),{currencyInfo0:n,currencyInfo1:i}=jx(),{handleOnAcknowledgeTokenWarningPress:r}=$n();return n?(0,o.jsx)(po,{isVisible:e,currencyInfo0:n,currencyInfo1:i,closeModalOnly:t,onAcknowledge:r}):null},$x=()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Bx,{}),(0,o.jsx)(Dx,{}),(0,o.jsx)(Nx,{}),(0,o.jsx)(Ex,{})]}),Ux=()=>Qe()(Ze(e=>({isTokenWarningModalVisible:!1,isBridgingWarningModalVisible:!1,isMaxNativeTransferModalVisible:!1,isViewOnlyModalVisible:!1,actions:{handleShowTokenWarningModal:()=>e({isTokenWarningModalVisible:!0}),handleHideTokenWarningModal:()=>e({isTokenWarningModalVisible:!1}),handleShowBridgingWarningModal:()=>e({isBridgingWarningModalVisible:!0}),handleHideBridgingWarningModal:()=>e({isBridgingWarningModalVisible:!1}),handleShowMaxNativeTransferModal:()=>e({isMaxNativeTransferModalVisible:!0}),handleHideMaxNativeTransferModal:()=>e({isMaxNativeTransferModalVisible:!1}),handleShowViewOnlyModal:()=>e({isViewOnlyModalVisible:!0}),handleHideViewOnlyModal:()=>e({isViewOnlyModalVisible:!1})}}),{name:"useSwapFormWarningStore",enabled:Ke(),trace:!0,traceLimit:25})),Mx=({children:e})=>{const[t]=(0,m.useState)(()=>Ux());return(0,o.jsx)(As.Provider,{value:t,children:e})},Ni="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ";function Ox(){const e=ue(),{tokenColor:t,isBridge:n,showFooter:i}=Ut(r=>({tokenColor:r.tokenColor,isBridge:r.isBridge,showFooter:r.showFooter}));return(0,o.jsx)(Zt,{collapsible:!0,type:"single",overflow:"hidden",children:(0,o.jsxs)(Zt.Item,{value:"a1",className:"gas-container",children:[(0,o.jsx)("style",{children:`
              .gas-container > div > div {
                width: 100%;
              }
            `}),(0,o.jsxs)("div",{className:Ni,children:[(0,o.jsx)("div",{className:Ni,children:(0,o.jsxs)(Mx,{children:[(0,o.jsx)(K0,{tokenColor:t}),(0,o.jsx)($x,{})]})}),(0,o.jsx)(Ix,{})]}),i&&!e?(0,o.jsx)(Of,{isBridge:n}):null]})})}const Lx=()=>{const{filteredChainIds:e,selectingCurrencyField:t,input:n}=N(a=>({filteredChainIds:a.filteredChainIds,selectingCurrencyField:a.selectingCurrencyField,input:a.input})),{isTestnetModeEnabled:i,defaultChainId:r}=Xe(),s=e==null?void 0:e[t??v.INPUT];return s||!i?s:(e==null?void 0:e[v.INPUT])??(n==null?void 0:n.chainId)??r},Hx=()=>{const{updateSwapForm:e,isSelectingCurrencyFieldPrefilled:t}=N(i=>({updateSwapForm:i.updateSwapForm,isSelectingCurrencyFieldPrefilled:i.isSelectingCurrencyFieldPrefilled})),{setIsSwapTokenSelectorOpen:n}=ot();return U(()=>{e({selectingCurrencyField:void 0,isSelectingCurrencyFieldPrefilled:!1,...t?{filteredChainIds:{}}:{}}),n(!1)})};function Vx({isModalOpen:e,focusHook:t}){var n;const{selectingCurrencyField:i,input:r,output:s}=N(d=>({selectingCurrencyField:d.selectingCurrencyField,input:d.input,output:d.output})),a=(n=ce().evmAccount)===null||n===void 0?void 0:n.address,c=Lx(),l=Hx(),u=nu({onSelect:l});if(!e)return null;if(!i)throw new Error("TokenSelector rendered without `selectingCurrencyField`");return(0,o.jsx)(Fc,{isModalOpen:e,activeAccountAddress:a,chainId:c,input:r,output:s,currencyField:i,flow:Ac.Swap,variation:i===v.INPUT?ti.SwapInput:ti.SwapOutput,focusHook:t,onClose:l,onSelectCurrency:u})}const zx={backgroundColor:"$surface2Hovered"};function qx({backgroundColor:e="$surface2",iconSize:t=Ae.icon24,disabled:n,onPress:i,testID:r}){const s=He(),a=Wt();return(0,o.jsx)(J,{backgroundColor:e,borderColor:"$surface1",borderRadius:a?"$rounded12":"$rounded16",borderWidth:a?"$spacing2":"$spacing4",p:a?"$spacing6":"$spacing8",scaleTo:Da,hoverStyle:zx,disabled:n,testID:r,onPress:i,children:(0,o.jsx)(Hr,{color:s.neutral1.val,direction:"s",size:t})})}const Gx="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-center _height-0px ",Xx="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _zIndex-t-zIndex-ma3672 ",cn={size:{regular:Ae.icon24,small:Ae.icon12},innerPadding:{regular:Ct.spacing8+Ct.spacing2,small:Ct.spacing8},borderWidth:{regular:Ct.spacing4,small:Ct.spacing1}};function Kx(){const t=Wt()?"small":"regular",n=Ut(i=>i.onSwitchCurrencies);return(0,o.jsx)("div",{className:Xx,children:(0,o.jsx)("div",{className:Gx,children:(0,o.jsx)(L,{alignItems:"center",bottom:-(cn.size[t]+cn.innerPadding[t]*2+cn.borderWidth[t]*2)/2,position:"absolute",children:(0,o.jsx)(qe,{logPress:!0,element:je.SwitchCurrenciesButton,eventOnTrigger:uo.SwapTokensReversed,children:(0,o.jsx)(qx,{backgroundColor:"$surface2",iconSize:cn.size[t],testID:ze.SwitchCurrenciesButton,onPress:n})})})})})}function Zs(){const{t:e}=I();return(0,o.jsx)(B.Outer,{children:(0,o.jsx)(B.Description,{text:e("swap.details.orderRoutingInfo")})})}const Zx="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _pt-t-space-spa94665593 _pr-t-space-spa94665593 _pb-t-space-spa94665593 _pl-t-space-spa94665593 _backgroundColor-surface2 _borderTopLeftRadius-t-radius-ro840690002 _borderTopRightRadius-t-radius-ro840690002 _borderBottomRightRadius-t-radius-ro840690002 _borderBottomLeftRadius-t-radius-ro840690002 _justifyContent-space-betwe3241 _alignItems-center ";function Ei(e){const{t}=I();return(0,o.jsxs)("div",{className:Zx,children:[(0,o.jsx)(y,{variant:"body4",color:"$neutral2",children:t("swap.details.feeOnTransfer",{tokenSymbol:e.tokenSymbol})}),(0,o.jsx)(y,{variant:"body4",color:"$neutral1",children:e.feePercent})]})}function so(e){const{t}=I(),{formatPercent:n}=oe(),i=n(e.outputTokenInfo.fee.toFixed(8)),r=e.outputTokenInfo.fee.greaterThan(0),s=n(e.inputTokenInfo.fee.toFixed(8)),a=e.inputTokenInfo.fee.greaterThan(0);return(0,o.jsxs)(B.Outer,{children:[(0,o.jsx)(B.Header,{title:{title:t("token.safety.fee.detected")}}),(0,o.jsxs)(B.Content,{children:[r&&(0,o.jsx)(B.Description,{text:t("token.safety.warning.tokenChargesFee.buy.message.descriptive",{tokenSymbol:e.outputTokenInfo.tokenSymbol,feePercent:i})}),a&&(0,o.jsx)(B.Description,{text:t("token.safety.warning.tokenChargesFee.sell.message.descriptive",{tokenSymbol:e.inputTokenInfo.tokenSymbol,feePercent:s})})]}),r&&(0,o.jsx)(Ei,{tokenSymbol:e.outputTokenInfo.tokenSymbol,feePercent:i}),a&&(0,o.jsx)(Ei,{tokenSymbol:e.inputTokenInfo.tokenSymbol,feePercent:s})]})}function Qs(){const{t:e}=I();return(0,o.jsxs)(B.Outer,{children:[(0,o.jsx)(B.Header,{title:{title:e("large.price.difference")}}),(0,o.jsx)(B.Description,{text:e("large.price.difference.tooltip"),learnMoreUrl:ne.helpArticleUrls.priceImpact})]})}function Qx({receivedAmount:e,feeOnTransferProps:t}){var n,i,r;const{t:s}=I(),a=Ie(_=>xe({routing:_.routing})),{formatPercent:c}=oe(),l=N(_=>_.derivedSwapInfo),u=(n=l.trade.trade)===null||n===void 0?void 0:n.swapFee,d=Fn(l),p=oe(),{convertFiatAmountFormatted:f}=p,x=Ve(l.outputAmountUserWillReceive),g=x?f(x.toExact(),te.FiatTokenQuantity):void 0,h=u&&mr({currency:(i=l.currencies[v.OUTPUT])===null||i===void 0?void 0:i.currency,amount:u.amount,formatter:p})+Cn((r=l.currencies[v.OUTPUT])===null||r===void 0?void 0:r.currency.symbol),S=d&&!isNaN(d)?f(d,te.FiatGasPrice):void 0;return(0,o.jsxs)(B.Outer,{children:[(0,o.jsx)(B.Header,{title:{title:s("swap.bestPrice.through",{provider:a?"UniswapX":"Uniswap API"})},Icon:a?xt:wo,iconColor:"$accent1"}),(0,o.jsxs)(B.Content,{children:[(t==null?void 0:t.inputTokenInfo.fee.greaterThan(0))&&(0,o.jsxs)(B.Row,{children:[(0,o.jsx)(B.LineItemLabel,{label:`${s("swap.details.feeOnTransfer",{tokenSymbol:t.inputTokenInfo.tokenSymbol})} (${c(t.inputTokenInfo.fee.toFixed(8))})`}),(0,o.jsx)(B.LineItemValue,{value:t.inputTokenInfo.formattedAmount,usdValue:t.inputTokenInfo.formattedUsdAmount})]}),(t==null?void 0:t.outputTokenInfo.fee.greaterThan(0))&&(0,o.jsxs)(B.Row,{children:[(0,o.jsx)(B.LineItemLabel,{label:`${s("swap.details.feeOnTransfer",{tokenSymbol:t.outputTokenInfo.tokenSymbol})} (${c(t.outputTokenInfo.fee.toFixed(8))})`}),(0,o.jsx)(B.LineItemValue,{value:t.outputTokenInfo.formattedAmount,usdValue:t.outputTokenInfo.formattedUsdAmount})]}),(0,o.jsxs)(B.Row,{children:[(0,o.jsx)(B.LineItemLabel,{label:s("fee.uniswap",{percent:c(.25)})}),(0,o.jsx)(B.LineItemValue,{value:h,usdValue:S})]}),(0,o.jsxs)(B.Row,{children:[(0,o.jsx)(B.LineItemLabel,{label:s("common.youReceive")}),(0,o.jsx)(B.LineItemValue,{value:e,usdValue:g})]})]}),(0,o.jsx)(B.Separator,{}),(0,o.jsx)(B.Description,{text:s("swap.warning.uniswapFee.message")})]})}const Yx="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665589 _alignItems-center ",Jx="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 ",eg=({children:e})=>(0,o.jsx)("div",{className:Jx,children:e}),tg=({label:e,tooltip:t,analyticsTitle:n})=>(0,o.jsxs)("div",{className:Yx,children:[(0,o.jsx)(y,{variant:"body3",color:"$neutral2",children:e}),D&&(0,o.jsx)(De,{tooltipProps:{text:t,placement:"top",maxWidth:300},trigger:(0,o.jsx)(Pn,{color:"$neutral3",size:Ae.icon12}),modalProps:{modalName:ee.SwapWarning,zIndex:Ne.popover},analyticsTitle:n})]}),ng=({value:e,color:t="$neutral1"})=>(0,o.jsx)(y,{variant:"body3",color:t,children:e});function og({currencyAmount:e,isLoading:t,value:n,valueIsIndicative:i}){const r=(0,m.useRef)({value:void 0,color:"$neutral2"}),s=!!(t||e);return(0,m.useEffect)(()=>{s||(r.current={value:void 0,color:"$neutral2"})},[s]),(0,m.useMemo)(()=>{if(!n)return s?r.current:{value:n,color:"$neutral2"};const c={value:n,color:i?"$neutral2":"$neutral1"};return r.current=c,c},[n,s,i])}const ig=({amount:e,formattedAmount:t,priceDifferenceWarning:n,isIndicative:i=!1,isLoading:r=!1,feeOnTransferProps:s,isLoadingIndicative:a})=>{const c=s&&(s.inputTokenInfo.fee.greaterThan(0)||s.outputTokenInfo.fee.greaterThan(0)),{value:l,color:u}=og({currencyAmount:e,isLoading:r,value:t,valueIsIndicative:i}),d=n==null?void 0:n.priceDifferenceColor,p=r||a?"$neutral2":d??u;return(0,o.jsx)(De,{tooltipProps:{enabled:c||(n==null?void 0:n.showPriceDifferenceWarning),text:c?(0,o.jsx)(so,{...s}):n!=null&&n.showPriceDifferenceWarning?(0,o.jsx)(Qs,{}):null,placement:"top",maxWidth:300},modalProps:{modalName:ee.SwapWarning,severity:c?M.Medium:M.High,rejectText:"Close",zIndex:Ne.popover},trigger:(0,o.jsxs)(fu,{row:!0,gap:"$spacing4",alignItems:"center",children:[(c||(n==null?void 0:n.showPriceDifferenceWarning))&&(0,o.jsx)(Le,{color:p,size:"$icon.16"}),(0,o.jsx)(y,{variant:"body3",color:p,children:l})]})})},ae={Label:tg,Outer:eg,ReceivingAmount:ig,ValueLabel:ng};it();const rg="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334080 ",sg="  is_Separator _display-flex _alignItems-stretch _flexDirection-column _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _flexShrink-1 _borderTopWidth-0px _borderRightWidth-0px _borderBottomWidth-1px _borderLeftWidth-0px _flexGrow-1 _height-0px _maxHeight-0px _mt-t-space-spa1360334076 _mb-t-space-spa1360334076 _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid ",ag="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _borderTopLeftRadius-t-radius-ro291586424 _borderTopRightRadius-t-radius-ro291586424 _borderBottomRightRadius-t-radius-ro291586424 _borderBottomLeftRadius-t-radius-ro291586424 _borderTopWidth-t-space-spa94665586 _borderRightWidth-t-space-spa94665586 _borderBottomWidth-t-space-spa94665586 _borderLeftWidth-t-space-spa94665586 _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _backgroundColor-surface1 _pt-t-space-spa1360334076 _pr-t-space-spa1360334076 _pb-t-space-spa1360334076 _pl-t-space-spa1360334076 _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid _borderTopColor-0hover-surface3Hov3121676 _borderRightColor-0hover-surface3Hov3121676 _borderBottomColor-0hover-surface3Hov3121676 _borderLeftColor-0hover-surface3Hov3121676 ",cg="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665586 ",lg="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665589 _alignItems-center ",Pt="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665591 _alignItems-center ",$i=new ct(0,100),ug=300;function dg({isBridge:e,outputAmountUserWillReceive:t,formattedPostFeesAmount:n,priceDifference:i,feeOnTransferProps:r,isIndicative:s,isLoading:a,isLoadingIndicative:c,isOpen:l}){const{t:u}=I(),d=l?sd:pd;return(0,o.jsxs)(ae.Outer,{children:[(0,o.jsx)(ae.Label,{label:u("common.youReceive"),analyticsTitle:"You receive",tooltip:e?(0,o.jsx)(Zs,{}):(0,o.jsx)(Qx,{receivedAmount:n??"-",feeOnTransferProps:r})}),(0,o.jsxs)("div",{className:Pt,children:[(0,o.jsx)(ae.ReceivingAmount,{amount:t,formattedAmount:n,priceDifferenceWarning:i,isIndicative:s,isLoading:a,feeOnTransferProps:r,isLoadingIndicative:c}),Xn&&(0,o.jsx)(L,{rotate:l?"180deg":"0deg",animation:"simple",transition:"ease-in-out",children:(0,o.jsx)(d,{color:"$neutral2",size:"$icon.24"})})]})]})}function pg({feeOnTransferProps:e}){const{t}=I(),{formatPercent:n}=oe();return(0,o.jsxs)(o.Fragment,{children:[(e==null?void 0:e.inputTokenInfo.fee.greaterThan(0))&&(0,o.jsxs)(ae.Outer,{children:[(0,o.jsx)(ae.Label,{label:t("swap.details.feeOnTransfer.symbol",{tokenSymbol:e.inputTokenInfo.tokenSymbol}),analyticsTitle:"Token fee (input)",tooltip:(0,o.jsx)(so,{...e,outputTokenInfo:{...e.outputTokenInfo,fee:$i}})}),(0,o.jsxs)("div",{className:Pt,children:[(0,o.jsx)(Le,{color:"$neutral2",size:"$icon.16"}),(0,o.jsx)(ae.ValueLabel,{value:n(e.inputTokenInfo.fee.toFixed(8))})]})]}),(e==null?void 0:e.outputTokenInfo.fee.greaterThan(0))&&(0,o.jsxs)(ae.Outer,{children:[(0,o.jsx)(ae.Label,{analyticsTitle:"Token fee (output)",label:t("swap.details.feeOnTransfer.symbol",{tokenSymbol:e.outputTokenInfo.tokenSymbol}),tooltip:(0,o.jsx)(so,{...e,inputTokenInfo:{...e.inputTokenInfo,fee:$i}})}),(0,o.jsxs)("div",{className:Pt,children:[(0,o.jsx)(Le,{color:"$neutral2",size:"$icon.16"}),(0,o.jsx)(ae.ValueLabel,{value:n(e.outputTokenInfo.fee.toFixed(8))})]})]})]})}function mg({priceDifference:e}){const{t}=I(),{formatPercent:n}=oe();return e.showPriceDifferenceWarning?(0,o.jsxs)(ae.Outer,{children:[(0,o.jsx)(ae.Label,{label:t("large.price.difference"),analyticsTitle:"Large price difference",tooltip:(0,o.jsx)(Qs,{})}),(0,o.jsxs)("div",{className:lg,children:[(0,o.jsx)(Le,{color:e.priceDifferenceColor,size:"$icon.16"}),(0,o.jsx)(ae.ValueLabel,{value:n(e.priceDifferencePercentage),color:e.priceDifferenceColor})]})]}):null}function fg({formattedPostFeesAmount:e,formattedMinimumAmount:t,formattedCurrentSlippageTolerance:n,autoSlippageEnabled:i}){const{t:r}=I();return(0,o.jsxs)(ae.Outer,{children:[(0,o.jsx)(ae.Label,{label:r("settings.maxSlippage"),analyticsTitle:"Max slippage",tooltip:(0,o.jsx)(Ms,{receivedAmount:e??"-",minimumAmount:t,autoSlippageEnabled:i,currentSlippageTolerance:n})}),(0,o.jsxs)("div",{className:Pt,children:[!i&&(0,o.jsx)(Oo,{}),(0,o.jsx)(ae.ValueLabel,{value:n})]})]})}function xg({isBridge:e,isUniswapXContext:t,loading:n}){const{t:i}=I(),r=e?(0,o.jsx)(Zs,{}):t?(0,o.jsx)(Gs,{}):(0,o.jsx)(qs,{});return(0,o.jsxs)(ae.Outer,{children:[(0,o.jsx)(ae.Label,{label:i("common.bestRoute"),analyticsTitle:"Route",tooltip:r}),e?(0,o.jsxs)("div",{className:Pt,children:[(0,o.jsx)($s,{size:"$icon.16"}),(0,o.jsx)(ae.ValueLabel,{color:n?"$neutral2":"$neutral1",value:"Across API"})]}):t?(0,o.jsxs)("div",{className:cg,children:[(0,o.jsx)(mu,{size:"$icon.16",opacity:n?0:1,animation:"simple"}),(0,o.jsx)(Et,{variant:"body3",color:n?"$neutral2":void 0,children:"Uniswap X"})]}):(0,o.jsx)(ae.ValueLabel,{color:n?"$neutral2":"$neutral1",value:"Uniswap API"})]})}function gg({warning:e}){return(0,o.jsx)(ae.Outer,{children:(0,o.jsxs)("div",{className:Pt,children:[D&&(0,o.jsx)(Wn,{text:e.warning.message,placement:"top",maxWidth:ug,trigger:(0,o.jsx)(Le,{color:"$neutral2",size:"$icon.16"})}),(0,o.jsx)(y,{variant:"body3",color:"$neutral2",children:e.warning.title})]})})}function hg({isIndicative:e,isLoading:t,isLoadingIndicative:n,isBridge:i}){const r=ce().evmAccount,{value:s,toggle:a}=Kr(!1),{formatPercent:c}=oe(),{currentSlippageTolerance:l}=Er(),{customSlippageTolerance:u}=st(k=>({customSlippageTolerance:k.customSlippageTolerance})),d=N(k=>k.derivedSwapInfo),p=Bo(d),{isBlocked:f}=To(r==null?void 0:r.address),{formScreenWarning:x}=Ye(),g=x&&x.displayedInline&&!f?x:void 0,h=(g==null?void 0:g.warning.type)===z.PriceImpactHigh||(g==null?void 0:g.warning.type)===z.PriceImpactMedium,S=Vo(d),_=Ie(k=>xe({routing:k.routing})),w=Ie(k=>k.trade),C=d.outputAmountUserWillReceive?Kt({amount:d.outputAmountUserWillReceive,locale:"en-US",type:te.TokenTx,placeholder:""}):void 0,b=d.currencies.output,j=b&&C?`${C} ${b.currency.symbol}`:void 0,A=w==null?void 0:w.minAmountOut,P=`${Kt({amount:A,locale:"en-US",type:te.TokenTx,placeholder:"-"})} ${b==null?void 0:b.currency.symbol}`,F=c(l),W=d.wrapType===Te.NotApplicable&&!!d.currencies.output&&!!d.currencies.input&&d.currencyAmounts[d.exactCurrencyField];return(0,o.jsx)(J,{transition:"all 0.3s ease-in-out",maxHeight:W?300:0,opacity:W?1:0,mb:W?"$spacing4":"$none",onPress:a,children:(0,o.jsxs)("div",{className:ag,children:[g&&!h?(0,o.jsx)(gg,{warning:g}):(0,o.jsx)(dg,{isBridge:i,outputAmountUserWillReceive:d.outputAmountUserWillReceive,formattedPostFeesAmount:j,priceDifference:p,feeOnTransferProps:S,isIndicative:e,isLoading:t,isLoadingIndicative:n,isOpen:s}),(0,o.jsxs)(_o,{open:s,children:[(0,o.jsx)("div",{className:sg}),(0,o.jsxs)("div",{className:rg,children:[(0,o.jsx)(pg,{feeOnTransferProps:S}),(0,o.jsx)(mg,{priceDifference:p}),!i&&(0,o.jsx)(fg,{formattedPostFeesAmount:j,formattedMinimumAmount:P,formattedCurrentSlippageTolerance:F,autoSlippageEnabled:!u}),(0,o.jsx)(xg,{isBridge:i,isUniswapXContext:_,loading:!w})]})]})]})})}const Ys=()=>{const{focusOnCurrencyField:e,exactCurrencyField:t}=N(n=>({focusOnCurrencyField:n.focusOnCurrencyField,exactCurrencyField:n.exactCurrencyField}));return e??t},vg=2,_g=2;function Sg({skip:e=!1}){const{isFiatMode:t,updateSwapForm:n,exactAmountToken:i,exactAmountFiat:r,exactCurrencyField:s}=N(f=>({isFiatMode:f.isFiatMode,updateSwapForm:f.updateSwapForm,exactAmountToken:f.exactAmountToken,exactAmountFiat:f.exactAmountFiat,exactCurrencyField:f.exactCurrencyField})),c=ie(f=>f.currencies)[s],{price:l}=cl(e?void 0:(c==null?void 0:c.currency)??void 0),{convertFiatAmount:u}=oe(),d=u(1).amount,p=Sc((c==null?void 0:c.currencyId)??"");(0,m.useEffect)(()=>{if(!(e||!c||!l||!p)){if(t){const x=((r&&!isNaN(parseFloat(r))?parseFloat(r):0)/d).toFixed(vg),g=mt({value:x,valueType:pt.Exact,currency:vc(p)}),h=g?l.invert().quote(g):void 0;n({exactAmountToken:h==null?void 0:h.toExact()})}if(!t||!r&&i){const f=mt({value:i,valueType:pt.Exact,currency:c.currency}),x=f?l.quote(f):void 0,g=parseFloat((x==null?void 0:x.toExact())??"0")*d,h=g?g.toFixed(_g):"";n({exactAmountFiat:h})}}},[r,i,c,d,n,p,l,t,e])}const wg=(e,t)=>{const i=new WeakSet,r=(s,a=0)=>{if(a>10)return"[Max Depth Reached]";if(typeof s=="bigint")return s.toString()+"n";if(!s||typeof s!="object")return s;if("nodeType"in s||"_reactInternalInstance"in s||"__reactFiber$"in s)return"[DOM Element]";if(i.has(s))return"[Circular]";if(i.add(s),Array.isArray(s))return s.slice(0,100).map(p=>r(p,a+1));const c={},l=Object.entries(s),u=50;l.length>u&&ge.warn("devUtils.ts","stateReplacerSerializer",`We're only serializing the first ${u} entries of a total of ${l.length} entries`);const d=l.slice(0,u);for(const[p,f]of d)c[p]=r(f,a+1);return c};return r(t)},bg=(e,t)=>typeof t=="string"&&t.endsWith("n")?BigInt(t.slice(0,-1)):t,yg=e=>Qe()(Ze(()=>e,{name:"useSwapFormScreenStore",enabled:Ke(),trace:!0,traceLimit:25,serialize:{replacer:wg,reviver:bg}}));function Tg({inputChainId:e,outputChainId:t,onChainIdsChanged:n,skipInitialCallback:i=!0}){const r=(0,m.useRef)({inputChainId:void 0,outputChainId:void 0}),s=(0,m.useRef)(!0);(0,m.useEffect)(()=>{if(!n)return;const a={inputChainId:e,outputChainId:t},c=r.current;if(s.current&&i){s.current=!1,r.current=a;return}const l=e!==c.inputChainId,u=t!==c.outputChainId;(l||u)&&n({currentChains:a,prevChains:c,hasInputChanged:l,hasOutputChanged:u}),r.current=a,s.current=!1},[e,t,n,i])}function Cg({inputChainId:e,outputChainId:t}){const{onSwapChainsChanged:n}=ot(),i=U(({currentChains:s,prevChains:a})=>{const{inputChainId:c,outputChainId:l}=s,{inputChainId:u,outputChainId:d}=a,p=u??d;if(c&&l&&c!==l)n({chainId:c,outputChainId:l});else if(c||l&&p){const f=c??l;if(!f||f===p)return;n({chainId:f,prevChainId:p})}});Tg({inputChainId:e,outputChainId:t,onChainIdsChanged:i,skipInitialCallback:!!e&&!!t&&e===t||Be})}const Ig=Dt*3,Ag=()=>{const{value:e,setTrue:t,setFalse:n}=Kr(!1),i=(0,m.useRef)(null),r=U(()=>{i.current&&(clearTimeout(i.current),i.current=null)}),s=U(()=>{i.current&&r(),t(),i.current=setTimeout(()=>{n(),i.current=null},Ig)});return(0,m.useEffect)(()=>r,[r]),{showWarning:e,showTemporaryFoTWarning:s}},Fg=e=>{const t=N(n=>n.updateSwapForm);(0,m.useEffect)(()=>{e&&t({exactCurrencyField:v.INPUT,focusOnCurrencyField:v.INPUT})},[])},kg=({formattedDerivedValueRef:e,moveCursorToEnd:t})=>{const{exactAmountFiatRef:n,exactAmountTokenRef:i,exactCurrencyField:r,focusOnCurrencyField:s,isFiatMode:a,updateSwapForm:c}=N(l=>({exactAmountFiatRef:l.exactAmountFiatRef,exactAmountTokenRef:l.exactAmountTokenRef,exactCurrencyField:l.exactCurrencyField,focusOnCurrencyField:l.focusOnCurrencyField,isFiatMode:l.isFiatMode,updateSwapForm:l.updateSwapForm}));return U(l=>{const u=!a;let d;l!==s?(c({focusOnCurrencyField:l}),d=e):l!==r?(c({exactCurrencyField:l,exactAmountToken:e.current,exactAmountFiat:void 0,isFiatMode:!0}),d=n):(c({isFiatMode:u}),d=u?n:i),setTimeout(()=>{d&&t({targetInputRef:d})},0)})},Ui=500;function jg({exactOutputWouldFailIfCurrenciesSwitched:e,exactFieldIsInput:t,isBridge:n,formattedDerivedValueRef:i,inputRef:r,outputRef:s,decimalPadRef:a,inputSelectionRef:c,outputSelectionRef:l}){const u=ho(),{amountUpdatedTimeRef:d,exactAmountTokenRef:p,exactCurrencyField:f,focusOnCurrencyField:x,input:g,isFiatMode:h,output:S,updateSwapForm:_}=N(T=>({amountUpdatedTimeRef:T.amountUpdatedTimeRef,exactAmountTokenRef:T.exactAmountTokenRef,exactCurrencyField:T.exactCurrencyField,focusOnCurrencyField:T.focusOnCurrencyField,isFiatMode:T.isFiatMode,output:T.output,input:T.input,updateSwapForm:T.updateSwapForm})),w=Ys(),C=U(({start:T,end:E,currencyField:V})=>{var se,Ee;const Me=V??w,bt=Me===v.INPUT?c:l,ye=Me===v.INPUT?(se=r.current)===null||se===void 0?void 0:se.textInputRef:(Ee=s.current)===null||Ee===void 0?void 0:Ee.textInputRef;bt.current={start:T,end:E},!D&&ye&&setTimeout(()=>{var ke;(ke=ye.current)===null||ke===void 0||ke.setNativeProps({selection:{start:T,end:E}})},0)}),b=U(({targetInputRef:T})=>{C({start:T.current.length,end:T.current.length})}),j=U(()=>{switch(w){case v.INPUT:var T;(T=r.current)===null||T===void 0||T.triggerShakeAnimation();break;case v.OUTPUT:var E;(E=s.current)===null||E===void 0||E.triggerShakeAnimation();break}}),A=U((T,E)=>{var V;Date.now()-d.current<Ui||(c.current={start:T,end:E},(V=a.current)===null||V===void 0||V.updateDisabledKeys())}),P=U((T,E)=>{var V;Date.now()-d.current<Ui||(l.current={start:T,end:E},(V=a.current)===null||V===void 0||V.updateDisabledKeys())}),F=U(()=>_({focusOnCurrencyField:v.INPUT})),W=U(()=>_({focusOnCurrencyField:v.OUTPUT})),k=U(()=>{_({selectingCurrencyField:v.INPUT})}),$=U(()=>{_({selectingCurrencyField:v.OUTPUT})}),R=U((T,E)=>{const V=h&&x===f;_({exactAmountFiat:V?E:void 0,exactAmountToken:V?void 0:E,exactCurrencyField:T,isFiatMode:V,presetPercentage:void 0}),zn(u)}),X=U(T=>{R(v.INPUT,T)}),K=U(T=>{R(v.OUTPUT,T)}),G=U((T,E)=>{_({exactAmountFiat:void 0,exactAmountToken:T,exactCurrencyField:v.INPUT,focusOnCurrencyField:void 0,isMax:eu(E),presetPercentage:E}),setTimeout(()=>{var V;b({targetInputRef:p}),(V=a.current)===null||V===void 0||V.updateDisabledKeys()},0),zn(u)}),Q=kg({formattedDerivedValueRef:i,moveCursorToEnd:b}),H=U(()=>{const T=n?v.INPUT:e?v.INPUT:t?v.OUTPUT:v.INPUT,E=n?{input:void 0,output:S==null?void 0:S.chainId}:void 0;_({exactCurrencyField:T,focusOnCurrencyField:T,input:S,output:g,...e&&t&&!h?{exactAmountToken:i.current}:void 0,...n?{filteredChainIds:E}:void 0}),setTimeout(()=>{b({targetInputRef:p})},0),zn(u)});return{resetSelection:C,moveCursorToEnd:b,onDecimalPadTriggerInputShake:j,onInputSelectionChange:A,onOutputSelectionChange:P,onFocusInput:F,onFocusOutput:W,onShowTokenSelectorInput:k,onShowTokenSelectorOutput:$,onSetExactAmount:R,onSetExactAmountInput:X,onSetExactAmountOutput:K,onSetPresetValue:G,onToggleIsFiatMode:Q,onSwitchCurrencies:H}}it();function Mi(e){return(e==null?void 0:e.currency)instanceof hc?{hasBuyTax:!!e.currency.buyFeeBps&&e.currency.buyFeeBps.gt(0),hasSellTax:!!e.currency.sellFeeBps&&e.currency.sellFeeBps.gt(0)}:{hasBuyTax:!1,hasSellTax:!1}}function Rg({currencies:e}){const{hasBuyTax:t,hasSellTax:n}=Mi(e[v.INPUT]),{hasBuyTax:i,hasSellTax:r}=Mi(e[v.OUTPUT]);return{outputTokenHasBuyTax:i,exactOutputWillFail:n||i,exactOutputWouldFailIfCurrenciesSwitched:t||r}}const Pg=()=>N(e=>e.isFiatMode?e.exactAmountFiatRef:e.exactAmountTokenRef),Wg=({children:e,tokenColor:t})=>{const{walletNeedsRestore:n,screen:i}=re(),{exactAmountFiat:r,exactAmountToken:s,exactCurrencyField:a,focusOnCurrencyField:c,selectingCurrencyField:l,input:u,isFiatMode:d,output:p,hideFooter:f}=N(he=>({exactAmountFiat:he.exactAmountFiat,exactAmountToken:he.exactAmountToken,exactCurrencyField:he.exactCurrencyField,focusOnCurrencyField:he.focusOnCurrencyField,selectingCurrencyField:he.selectingCurrencyField,input:he.input,isFiatMode:he.isFiatMode,output:he.output,hideFooter:he.hideFooter})),{currencyAmounts:x,currencyBalances:g,currencies:h,currencyAmountsUSDValue:S,trade:_}=ie(he=>({currencyAmounts:he.currencyAmounts,currencyBalances:he.currencyBalances,currencies:he.currencies,currencyAmountsUSDValue:he.currencyAmountsUSDValue,trade:he.trade}));Sg({skip:i!==Se.Form}),Cg({inputChainId:u==null?void 0:u.chainId,outputChainId:p==null?void 0:p.chainId}),di(u),di(p);const{outputTokenHasBuyTax:w,exactOutputWillFail:C,exactOutputWouldFailIfCurrenciesSwitched:b}=(0,m.useMemo)(()=>Rg({currencies:h}),[h]);Fg(C);const j=a===v.INPUT,A=a===v.OUTPUT,P=j?v.OUTPUT:v.INPUT,F=Ys(),W=(0,m.useRef)(null),k=(0,m.useRef)(null),$=(0,m.useRef)(null),R=(0,m.useRef)(),X=(0,m.useRef)(),K=Kt({amount:x[P],locale:"en-US",type:te.SwapTradeAmount,placeholder:""}),G=(0,m.useRef)(K);G.current=K;const Q=!!(u&&p&&u.chainId!==p.chainId),H=Q||C,T=jg({exactOutputWouldFailIfCurrenciesSwitched:b,exactFieldIsInput:j,isBridge:Q,formattedDerivedValueRef:G,inputRef:W,outputRef:k,decimalPadRef:$,inputSelectionRef:R,outputSelectionRef:X});(0,m.useEffect)(()=>{F!==a&&T.moveCursorToEnd({targetInputRef:G})},[K]);const E=d?r:s,V=Pg(),se=F===a?V:G,{showWarning:Ee,showTemporaryFoTWarning:Me}=Ag(),bt=Xt(h.input)===M.Blocked||Xt(h.output)===M.Blocked,ye=!!(!f&&(Be||!bt&&u&&p&&s)),ke=(0,m.useMemo)(()=>({inputRef:W,outputRef:k,decimalPadRef:$,inputSelectionRef:R,outputSelectionRef:X,decimalPadValueRef:se,focusOnCurrencyField:c,currencies:h,currencyAmounts:x,currencyBalances:g,selectingCurrencyField:l,isFiatMode:d,exactFieldIsInput:j,exactFieldIsOutput:A,exactOutputDisabled:H,resetSelection:T.resetSelection,currencyAmountsUSDValue:S,exactValue:E,formattedDerivedValue:K,tokenColor:t,walletNeedsRestore:n,showFooter:ye,showWarning:Ee,outputTokenHasBuyTax:w,exactAmountToken:s,isBridge:Q,trade:_,onFocusInput:T.onFocusInput,onInputSelectionChange:T.onInputSelectionChange,onSetExactAmountInput:T.onSetExactAmountInput,onSetPresetValue:T.onSetPresetValue,onShowTokenSelectorInput:T.onShowTokenSelectorInput,onToggleIsFiatMode:T.onToggleIsFiatMode,onSwitchCurrencies:T.onSwitchCurrencies,onFocusOutput:T.onFocusOutput,onOutputSelectionChange:T.onOutputSelectionChange,onSetExactAmountOutput:T.onSetExactAmountOutput,onShowTokenSelectorOutput:T.onShowTokenSelectorOutput,showTemporaryFoTWarning:Me,onDecimalPadTriggerInputShake:T.onDecimalPadTriggerInputShake}),[se,c,h,x,g,l,d,j,A,H,T.resetSelection,T.onFocusInput,T.onInputSelectionChange,T.onSetExactAmountInput,T.onSetPresetValue,T.onShowTokenSelectorInput,T.onToggleIsFiatMode,T.onSwitchCurrencies,T.onFocusOutput,T.onOutputSelectionChange,T.onSetExactAmountOutput,T.onShowTokenSelectorOutput,T.onDecimalPadTriggerInputShake,S,E,K,t,n,ye,Ee,w,s,Q,_,Me]),[at]=(0,m.useState)(()=>yg(ke)),Ko=Yt(ke);return(0,m.useEffect)(()=>{Ko&&at.setState(ke)},[ke,Ko,at]),(0,o.jsx)(ys.Provider,{value:at,children:e})},Bg="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",Dg="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665587 ",Ng="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _flexGrow-1 _gap-t-space-spa94665593 _justifyContent-space-betwe3241 ",Eg={opacity:0};function $g({hideContent:e,settings:t=[jo,xs],tokenColor:n,focusHook:i}){const{bottomSheetViewStyles:r}=re(),{selectingCurrencyField:s,hideSettings:a}=N(d=>({selectingCurrencyField:d.selectingCurrencyField,hideSettings:d.hideSettings})),{trade:c}=ie(d=>d.trade),l=!e&&!!s,u=c instanceof In;return(0,o.jsxs)(Nn,{fullscreen:!0,bottomSheetViewStyles:r,children:[!q&&(0,o.jsx)(Op,{}),!a&&(0,o.jsx)(Cp,{settings:t,isBridgeTrade:u}),!e&&(0,o.jsx)(Wg,{tokenColor:n,children:(0,o.jsx)(Ug,{})}),(0,o.jsx)(Vx,{isModalOpen:l,focusHook:i})]})}function Ug(){const{trade:e,isBridge:t}=Ut(i=>({trade:i.trade,isBridge:i.isBridge})),n=ue();return(0,o.jsxs)("div",{className:Ng,children:[(0,o.jsxs)(L,{gap:"$spacing4",animation:"quick",exitStyle:Eg,grow:zt,children:[(0,o.jsxs)("div",{className:Dg,children:[(0,o.jsx)(Wp,{}),(0,o.jsx)(Kx,{}),(0,o.jsx)(Np,{})]}),(0,o.jsxs)("div",{className:Bg,children:[n&&(0,o.jsx)(hg,{isIndicative:!!(e.indicativeTrade&&!e.trade),isLoadingIndicative:e.isIndicativeLoading,isLoading:!!e.isFetching,isBridge:t}),(0,o.jsx)(Ox,{})]})]}),(0,o.jsx)(Ep,{})]})}const Mg="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-flex-end _mt-t-space-spa1360334080 _mr-t-space-spa1360334080 _mb-t-space-spa1360334080 _ml-t-space-spa1360334080 _gap-t-space-spa94665593 ",Og="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334076 ";function Lg({submissionError:e,setSubmissionError:t,onPressRetry:n,resubmitSwap:i,onClose:r}){const{t:s}=I(),{bottomSheetViewStyles:a}=re(),{selectedProtocols:c}=st(S=>({selectedProtocols:S.selectedProtocols})),{setSelectedProtocols:l}=$r(),{title:u,message:d,supportArticleURL:p,buttonText:f}=xc(s,e),x=e instanceof fc&&e.isBackendRejection&&e.step.type===_l.UniswapXSignature,g=()=>{if(n)n();else if(x){const S=c.filter(_=>_!==le.UNISWAPX_V2);l(S)}else i();t(void 0)},h=async()=>{await Nt({uri:p??ne.helpUrl})};return(0,o.jsx)(Nn,{bottomSheetViewStyles:a,fullscreen:!1,children:(0,o.jsxs)("div",{className:Og,children:[D&&(0,o.jsxs)("div",{className:Mg,children:[(0,o.jsx)(de,{fill:!1,emphasis:"tertiary",size:"xxsmall",icon:(0,o.jsx)(dd,{}),onPress:h,children:s("common.getHelp.button")}),(0,o.jsx)(Yi,{size:"xxsmall",variant:"default",emphasis:"text-only",icon:(0,o.jsx)(ao,{}),onPress:r})]}),(0,o.jsx)(L,{animation:"quick",enterStyle:{opacity:0},exitStyle:{opacity:0},children:(0,o.jsx)(Bu,{modalName:ee.SwapError,title:u,caption:d,severity:M.Low,rejectText:f??s("common.button.tryAgain"),onReject:g})})]})})}function Js(){const e=ht(),{exactCurrencyField:t,focusOnCurrencyField:n,updateSwapForm:i}=N(a=>({exactCurrencyField:a.exactCurrencyField,focusOnCurrencyField:a.focusOnCurrencyField,updateSwapForm:a.updateSwapForm})),{setScreen:r}=re();return{onPrev:(0,m.useCallback)(()=>{n||i({focusOnCurrencyField:t}),q&&(i({isSubmitting:!1}),e(rr())),r(Se.Form)},[t,n,r,i,e])}}const ea=(0,m.createContext)(null),Hg=()=>{const e=(0,m.useContext)(ea);if(!e)throw new Error("useSwapReviewCallbacksStore must be used within a SwapReviewCallbacksStoreContext");return e};function on(e){const t=Hg();return Fe(t,Ue(e))}const ta=(0,m.createContext)(null),na=[],Vg=({hideContent:e})=>Qe()(Ze(t=>({submissionError:void 0,onPressRetry:void 0,steps:na,currentStep:void 0,hideContent:e,actions:{setSubmissionError:n=>t({submissionError:n}),setRetrySwap:n=>t({onPressRetry:n}),setSteps:n=>t({steps:n}),setCurrentStep:n=>t({currentStep:n}),resetCurrentStep:()=>t({currentStep:void 0}),setHideContent:n=>t({hideContent:n})}}),{name:"useSwapReviewStore",enabled:Ke(),trace:!0,traceLimit:25})),oa=()=>{const e=(0,m.useContext)(ta);if(!e)throw new Error("useSwapReviewStore must be used within SwapReviewStoreContextProvider");return e};function zo(e){const t=oa();return Fe(t,Ue(e))}const ia=()=>{const e=oa();return Fe(e,Ue(t=>t.actions))},ra=()=>{const{currentStep:e,steps:t}=zo(q?n=>({currentStep:n.currentStep,steps:n.steps}):()=>({currentStep:void 0,steps:na}));return!!(q&&e&&t.length>1)},sa=(0,m.createContext)(null),zg=()=>{const e=(0,m.useContext)(sa);if(!e)throw new Error("useSwapReviewTransactionStore must be used within SwapReviewTransactionStoreContextProvider");return e};function Je(e){const t=zg();return Fe(t,Ue(e))}function qg(){return Je(e=>!e.acceptedDerivedSwapInfo||!e.isWrap&&!e.indicativeTrade&&(!e.acceptedTrade||!e.trade))}function Gg(){return Je(e=>{var t;return!e.currencyInInfo||!e.currencyOutInfo||!e.derivedSwapInfo.currencyAmounts[v.INPUT]||!e.derivedSwapInfo.currencyAmounts[v.OUTPUT]||!(!((t=e.acceptedDerivedSwapInfo)===null||t===void 0)&&t.currencyAmounts[v.INPUT])||!e.acceptedDerivedSwapInfo.currencyAmounts[v.OUTPUT]})}function Xg(){const e=on(r=>r.onSwapButtonClick),{submissionError:t,onPressRetry:n}=zo(r=>({submissionError:r.submissionError,onPressRetry:r.onPressRetry})),{setSubmissionError:i}=ia();return{submissionError:t,setSubmissionError:i,onSwapButtonClick:e,onPressRetry:n}}const aa=(0,m.createContext)(null),ca=()=>{const e=(0,m.useContext)(aa);if(!e)throw new Error("SwapReviewWarningStoreContext not found");return e},Un=e=>{const t=ca();return Fe(t,Ue(e))},la=()=>{const e=ca();return Fe(e,t=>t.actions)},Kg="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665593 ",Zg=(0,m.memo)(function(){const t=ra(),{onPrev:n}=Js(),{disabled:i,showPendingUI:r,warning:s,onSubmit:a}=Qg(),c=Wt(),{chainId:l}=Je(d=>({chainId:d.chainId})),u=!!(l&&[O.Unichain,O.UnichainSepolia].includes(l));return t?null:(0,o.jsxs)(op,{children:[u&&(0,o.jsx)(hs,{}),(0,o.jsxs)("div",{className:Kg,children:[!D&&!r&&(0,o.jsx)(Yi,{icon:(0,o.jsx)(Fa,{}),emphasis:"secondary",size:c?"medium":"large",onPress:n}),(0,o.jsx)(M0,{disabled:i,showPendingUI:r,warning:s,onSubmit:a})]})]})});function Qg(){const{tokenWarningProps:e,feeOnTransferProps:t,blockingWarning:n,newTradeRequiresAcceptance:i,reviewScreenWarning:r,swapTxContext:s,isWrap:a}=Je(x=>({tokenWarningProps:x.tokenWarningProps,feeOnTransferProps:x.feeOnTransferProps,blockingWarning:x.blockingWarning,newTradeRequiresAcceptance:x.newTradeRequiresAcceptance,reviewScreenWarning:x.reviewScreenWarning,swapTxContext:x.swapTxContext,isWrap:x.isWrap})),c=Un(x=>x.tokenWarningChecked),{isSubmitting:l,showPendingUI:u}=N(x=>({isSubmitting:x.isSubmitting,showPendingUI:x.showPendingUI})),d=on(x=>x.onSwapButtonClick),{shouldDisplayTokenWarningCard:p}=Ns({tokenWarningProps:e,feeOnTransferProps:t});return{disabled:(0,m.useMemo)(()=>!gn(s)&&!a||!!n||i||l||p&&!c,[s,a,n,i,l,c,p]),showPendingUI:u,onSubmit:d,warning:r==null?void 0:r.warning}}const Yg="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-center _height-377px _mb-t-space-spa1360334043 ",Jg=(0,m.memo)(function(){const{bottomSheetViewStyles:t}=re();return(0,o.jsx)(Nn,{bottomSheetViewStyles:t,fullscreen:!1,children:(0,o.jsx)("div",{className:Yg,children:(0,o.jsx)(Ma,{size:Ae.icon40})})})}),eh="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",th="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center ",nh="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _flexGrow-1 ",oh="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-row _alignItems-center _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _borderTopLeftRadius-t-radius-ro291586449 _borderTopRightRadius-t-radius-ro291586449 _borderBottomRightRadius-t-radius-ro291586449 _borderBottomLeftRadius-t-radius-ro291586449 _borderTopWidth-t-space-spa94665586 _borderRightWidth-t-space-spa94665586 _borderBottomWidth-t-space-spa94665586 _borderLeftWidth-t-space-spa94665586 _gap-t-space-spa1360334080 _justifyContent-space-betwe3241 _pl-t-space-spa1360334080 _pr-t-space-spa94665593 _pt-t-space-spa94665593 _pb-t-space-spa94665593 _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid ";function ih({derivedSwapInfo:e,acceptedDerivedSwapInfo:t}){var n,i;const r=e.exactCurrencyField===v.INPUT?v.OUTPUT:v.INPUT,s=(n=e.currencyAmounts[r])===null||n===void 0?void 0:n.asFraction,a=(i=t.currencyAmounts[r])===null||i===void 0?void 0:i.asFraction;if(!s||!a)return null;const c=s.subtract(a).divide(a).multiply(100);return`${c.greaterThan(0)?"+":""}${c.toFixed(2)}`}function rh({acceptedDerivedSwapInfo:e,derivedSwapInfo:t,onAcceptTrade:n}){var i;const{t:r}=I(),{formatCurrencyAmount:s}=oe(),a=t.exactCurrencyField===v.INPUT?v.OUTPUT:v.INPUT,c=t.currencyAmounts[a],l=Cn((i=t.currencies[a])===null||i===void 0?void 0:i.currency.symbol),u=s({value:c,type:te.TokenTx}),d=ih({derivedSwapInfo:t,acceptedDerivedSwapInfo:e});return(0,o.jsxs)("div",{className:oh,children:[(0,o.jsxs)("div",{className:nh,children:[(0,o.jsx)(y,{color:"$neutral2",variant:"body3",children:t.exactCurrencyField===v.INPUT?r("swap.details.newQuote.output"):r("swap.details.newQuote.input")}),(0,o.jsx)("div",{className:th,children:(0,o.jsxs)(y,{adjustsFontSizeToFit:!0,color:"$neutral1",numberOfLines:1,textAlign:"center",variant:"body3",children:[u," ",l," ",(0,o.jsxs)(y,{color:"$neutral2",children:["(",d,"%)"]})]})})]}),(0,o.jsx)("div",{className:eh,children:(0,o.jsx)(yo,{logPress:!0,element:je.AcceptNewRate,children:(0,o.jsx)(J,{backgroundColor:"$accent2",borderRadius:"$rounded12",px:"$spacing8",py:"$spacing4",onPress:n,children:(0,o.jsx)(y,{color:"$accent1",variant:"buttonLabel2",children:r("common.button.accept")})})})})]})}const sh="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241 ";function ah({acceptedDerivedSwapInfo:e,autoSlippageTolerance:t,customSlippageTolerance:n,derivedSwapInfo:i,feeOnTransferProps:r,tokenWarningProps:s,tokenWarningChecked:a,gasFee:c,uniswapXGasBreakdown:l,newTradeRequiresAcceptance:u,warning:d,onAcceptTrade:p,onShowWarning:f,setTokenWarningChecked:x,txSimulationErrors:g,includesDelegation:h}){var S;const _=An(i.chainId),w=ue(),{t:C}=I(),b=i.trade.trade&&ft(i.trade.trade),j=i.trade.trade??i.trade.indicativeTrade,A=e.trade.trade??e.trade.indicativeTrade,P=Fn(i),F=St(i.chainId);if(!j)throw new Error("Invalid render of `SwapDetails` with no `trade`");if(!A)throw new Error("Invalid render of `SwapDetails` with no `acceptedTrade`");const W=(0,m.useMemo)(()=>{var k;const $=(k=i.trade.trade)===null||k===void 0?void 0:k.quote;if(!(!$||!ft($)))return $.quote.estimatedFillTimeMs},[(S=i.trade.trade)===null||S===void 0?void 0:S.quote]);return(0,o.jsx)(_o,{animationDisabled:Be||yn,children:(0,o.jsxs)(Mo,{isSwap:!0,banner:u&&(0,o.jsx)(rh,{acceptedDerivedSwapInfo:e,derivedSwapInfo:i,onAcceptTrade:p}),chainId:A.inputAmount.currency.chainId,feeOnTransferProps:r,tokenWarningProps:s,tokenWarningChecked:a,setTokenWarningChecked:x,gasFee:c,swapFee:A.swapFee,swapFeeUsd:P,indicative:A.indicative,outputCurrency:A.outputAmount.currency,showExpandedChildren:!!n,showNetworkLogo:!F,showWarning:d&&!u,transactionUSDValue:i.currencyAmountsUSDValue[v.OUTPUT],uniswapXGasBreakdown:l,warning:d,estimatedBridgingTime:W,isBridgeTrade:b??!1,txSimulationErrors:g,amountUserWillReceive:i.outputAmountUserWillReceive??void 0,includesDelegation:h,onShowWarning:f,children:[(0,o.jsxs)("div",{className:sh,children:[(0,o.jsx)(y,{color:"$neutral2",variant:"body3",children:C("swap.details.rate")}),(0,o.jsx)(Ho,{trade:j,derivedSwapInfo:e,justifyContent:"flex-end"})]}),b&&(0,o.jsx)(Es,{visibleIfLong:!1,timeMs:W}),b&&(0,o.jsx)(Us,{}),b===!1&&(0,o.jsx)(Os,{acceptedDerivedSwapInfo:e,autoSlippageTolerance:t,customSlippageTolerance:n}),b===!1&&_&&(0,o.jsx)(Xs,{gasFee:c,chainId:A.inputAmount.currency.chainId}),!w&&(0,o.jsx)(Ls,{derivedSwapInfo:e})]})})}const ch=(0,m.memo)(function(){const{acceptedDerivedSwapInfo:t,derivedSwapInfo:n,feeOnTransferProps:i,tokenWarningProps:r,gasFee:s,newTradeRequiresAcceptance:a,uniswapXGasBreakdown:c,reviewScreenWarning:l,txSimulationErrors:u,swapTxContext:d}=Je(C=>({acceptedDerivedSwapInfo:C.acceptedDerivedSwapInfo,derivedSwapInfo:C.derivedSwapInfo,feeOnTransferProps:C.feeOnTransferProps,tokenWarningProps:C.tokenWarningProps,gasFee:C.gasFee,newTradeRequiresAcceptance:C.newTradeRequiresAcceptance,uniswapXGasBreakdown:C.uniswapXGasBreakdown,reviewScreenWarning:C.reviewScreenWarning,txSimulationErrors:C.txSimulationErrors,swapTxContext:C.swapTxContext})),p=Un(C=>C.tokenWarningChecked),{setTokenWarningChecked:f}=la(),{onAcceptTrade:x,onShowWarning:g}=on(C=>({onAcceptTrade:C.onAcceptTrade,onShowWarning:C.onShowWarning})),h=st(C=>C.customSlippageTolerance),S=Ur(C=>C.autoSlippageTolerance),[_,w]=(0,m.useState)(d.includesDelegation);return(0,m.useEffect)(()=>{d.includesDelegation!==void 0&&w(d.includesDelegation)},[d.includesDelegation]),t?(0,o.jsx)(ah,{acceptedDerivedSwapInfo:t,autoSlippageTolerance:S,customSlippageTolerance:h,derivedSwapInfo:n,feeOnTransferProps:i,tokenWarningProps:r,tokenWarningChecked:p,setTokenWarningChecked:f,gasFee:s,newTradeRequiresAcceptance:a,uniswapXGasBreakdown:c,warning:l==null?void 0:l.warning,txSimulationErrors:u,includesDelegation:_,onAcceptTrade:x,onShowWarning:g}):null}),lh=(0,m.memo)(function(){const{t}=I(),{reviewScreenWarning:n,blockingWarning:i}=Je(l=>({reviewScreenWarning:l.reviewScreenWarning,blockingWarning:l.blockingWarning})),r=Un(l=>l.showWarningModal),{onCloseWarning:s,onConfirmWarning:a,onCancelWarning:c}=on(l=>({onCloseWarning:l.onCloseWarning,onConfirmWarning:l.onConfirmWarning,onCancelWarning:l.onCancelWarning}));return n!=null&&n.warning.title?(0,o.jsx)($t,{caption:n.warning.message,rejectText:i?void 0:t("common.button.cancel"),acknowledgeText:t(i?"common.button.ok":"common.button.confirm"),isOpen:r,modalName:ee.SwapWarning,severity:n.warning.severity,title:n.warning.title,onReject:c,onClose:s,onAcknowledge:a}):null}),uh=(0,m.memo)(function(){const{chainId:t,gasFee:n,reviewScreenWarning:i,txSimulationErrors:r}=Je(a=>({chainId:a.chainId,gasFee:a.gasFee,reviewScreenWarning:a.reviewScreenWarning,txSimulationErrors:a.txSimulationErrors})),s=on(a=>a.onShowWarning);return t?(0,o.jsx)(Mo,{chainId:t,gasFee:n,warning:i==null?void 0:i.warning,txSimulationErrors:r,onShowWarning:s}):(ge.error("Missing chainId in `SwapReviewWrapTransactionDetails`",{tags:{file:"SwapReviewWrapTransactionDetails",function:"render"}}),null)}),dh="  _mt-t-space-spa94665593",ph=" _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665589 _alignItems-center  ",mh="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _flexGrow-1 _gap-t-space-spa94665589 ",fh="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center _flexGrow-1 ",xh="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center _gap-t-space-spa1360334080 ",gh="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _flexGrow-1 ",hh="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center ",vh={gap:"$spacing8"};function _h({acceptedDerivedSwapInfo:e,newTradeRequiresAcceptance:t,onClose:n}){const{t:i}=I(),{convertFiatAmountFormatted:r,formatCurrencyAmount:s}=oe(),{exactCurrencyField:a,trade:{trade:c,indicativeTrade:l}}=e,u=c??l,d=(c&&ft(c))??!1,p=ue(),{inputCurrencyAmount:f,outputCurrencyAmount:x}=Lo(e,p);if(!f||!x)throw new Error("Missing required `currencyAmount` to render `TransactionAmountsReview`");const g=(0,m.useMemo)(()=>s({value:f,type:te.TokenTx}),[s,f]),h=(0,m.useMemo)(()=>s({value:x,type:te.TokenTx}),[s,x]),S=Ve(f),_=Ve(x),w=(0,m.useMemo)(()=>r(S==null?void 0:S.toExact(),te.FiatTokenQuantity),[r,S]),C=(0,m.useMemo)(()=>r(_==null?void 0:_.toExact(),te.FiatTokenQuantity),[r,_]),b=t&&a===v.OUTPUT,j=t&&a===v.INPUT,A=!!(u!=null&&u.indicative&&a===v.OUTPUT),P=!!(u!=null&&u.indicative&&a===v.INPUT),F=nt(jt(f.currency.chainId,Kn(f.currency))),W=nt(jt(x.currency.chainId,Kn(x.currency)));return(!F||!W)&&ge.warn("TransactionAmountsReview.tsx","TransactionAmountsReview","Missing required `currencyInInfo` or `currencyOutInfo` when rendering `TransactionAmountsReview`",{acceptedDerivedSwapInfo:e,inputCurrencyAmount:f,outputCurrencyAmount:x}),(0,o.jsxs)(L,{$short:vh,gap:"$spacing16",ml:"$spacing12",mr:"$spacing12",children:[(0,o.jsxs)("div",{className:hh,children:[(0,o.jsx)("div",{className:gh,children:(0,o.jsx)(y,{color:"$neutral2",variant:"body2",children:i("swap.review.summary")})}),D&&(0,o.jsx)("div",{className:xh,children:(0,o.jsx)(Ji,{size:"$icon.20",onClose:n})})]}),F?(0,o.jsx)(Li,{currencyInfo:F,formattedFiatAmount:w,formattedTokenAmount:g,indicative:A,shouldDim:b,isBridgeTrade:d}):(0,o.jsx)(Oi,{}),(0,o.jsx)(au,{color:"$neutral3",size:"$icon.20"}),W?(0,o.jsx)(Li,{currencyInfo:W,formattedFiatAmount:C,formattedTokenAmount:h,indicative:P,shouldDim:j,isBridgeTrade:d}):(0,o.jsx)(Oi,{})]})}function Oi(){return(0,o.jsx)(Il.Box,{height:60})}function Li({currencyInfo:e,formattedFiatAmount:t,formattedTokenAmount:n,shouldDim:i,indicative:r,isBridgeTrade:s}){const{defaultChainId:a}=Xe(),c=r?"$neutral2":i?"$neutral3":"$neutral1",l=r||i?"$neutral3":"$neutral2",u=qt(e.currency.chainId)??a,d=nn(u),p=kt(u),f=Ft(d.foreground),x=kl(),g=(0,m.useMemo)(()=>Cn(e.currency.symbol),[e.currency.symbol]);return(0,o.jsxs)("div",{className:fh,children:[(0,o.jsxs)("div",{className:mh,children:[s&&(0,o.jsxs)("div",{className:$e(""+(ph+(x.sm?dh:" "))),children:[(0,o.jsx)(hn,{chainId:e.currency.chainId,size:Ae.icon16}),(0,o.jsx)(y,{color:f,variant:"buttonLabel3",children:p})]}),(0,o.jsxs)(y,{color:c,variant:"heading3",children:[n," ",g]}),(0,o.jsx)(y,{color:l,variant:"body2",children:t})]}),(0,o.jsx)(tt,{currencyInfo:e,size:Ae.icon40})]})}function Sh({derivedSwapInfo:e,isSubmitting:t}){const[n,i]=(0,m.useState)(),r=ht(),{trade:s,indicativeTrade:a}=(e==null?void 0:e.trade)??{},c=n==null?void 0:n.trade.trade,u=!(t&&!q)&&Cl(c,s);return(0,m.useEffect)(()=>{!s&&!a||s===c||((!c||!u)&&i(e),q&&u&&r(rr()))},[s,c,a,u,e,r]),{onAcceptTrade:()=>{s&&i(e)},acceptedDerivedSwapInfo:n,newTradeRequiresAcceptance:u}}function wh(){const e=Je(i=>!!i.acceptedDerivedSwapInfo),t=pe(i=>i.prepareSwapTransaction),n=Ie(i=>gn(i)?i:void 0);mo({queryKey:[en.PrepareSwapTransaction,n,e,!!t],queryFn:async()=>{if(!n||!e||!t)return null;try{return await t({swapTxContext:n}),!0}catch(i){return ge.warn("SwapReviewContent","prepareAndSignSwapTransaction","Failed to prepare and sign transaction",{error:i}),null}},enabled:!!(n&&e&&t),refetchInterval:!1})}function bh(e){var t,n;const{resetCurrentStep:i,setScreen:r,authTrigger:s,onSubmitSwap:a,setSubmissionError:c,setRetrySwap:l,onClose:u,showWarningModal:d,warningAcknowledged:p,shouldSubmitTx:f,setShowWarningModal:x,setWarningAcknowledged:g,setShouldSubmitTx:h,getExecuteSwapService:S,updateSwapForm:_,reviewScreenWarning:w,setCurrentStep:C,setSteps:b}=e,{derivedSwapInfo:j}=pe(se=>({derivedSwapInfo:se.derivedSwapInfo,getExecuteSwapService:se.getExecuteSwapService})),A=j.chainId,P=St(A),F=Co((t=j.trade.trade)===null||t===void 0?void 0:t.routing)||((n=j.trade.trade)===null||n===void 0?void 0:n.routing)===Z.BRIDGE,W=(0,m.useCallback)((se,Ee)=>{i();const Me=js();_({isSubmitting:!1,isConfirmed:!1,txId:Me,showPendingUI:!1}),c(se),l(()=>Ee)},[_,c,i,l]),k=(0,m.useCallback)(()=>{if(P&&F){_({isConfirmed:!0,isSubmitting:!1,showPendingUI:!1});return}q&&(_({exactAmountFiat:void 0,exactAmountToken:"",showPendingUI:!1,isConfirmed:!1,instantReceiptFetchTime:void 0,instantOutputAmountRaw:void 0,txHash:void 0,txHashReceivedTime:void 0}),setTimeout(()=>_({isSubmitting:!1}),Aa),r(Se.Form)),u()},[r,_,u,P,F]),$=(0,m.useCallback)(()=>{P&&F||_({showPendingUI:!0})},[_,P,F]),R=Ie(se=>se),X=U(()=>R),K=(0,m.useMemo)(()=>S({onSuccess:k,onFailure:W,onPending:$,setCurrentStep:C,setSteps:b,getSwapTxContext:X}),[S,k,W,$,C,b,X]),G=(0,m.useCallback)(()=>{if(w&&!d&&!p){h(!0),x(!0);return}K.executeSwap()},[w,d,p,h,x,K]),Q=(0,m.useCallback)(async()=>{_({isSubmitting:!0}),s?await s({successCallback:G,failureCallback:W}):G(),await(a==null?void 0:a())},[s,W,G,_,a]),H=(0,m.useCallback)(()=>{g(!0),x(!1),f&&K.executeSwap()},[f,K,x,g]),T=(0,m.useCallback)(()=>{f&&W(),x(!1),g(!1),h(!1)},[W,f,x,g,h]),E=(0,m.useCallback)(()=>{x(!0)},[x]),V=(0,m.useCallback)(()=>{x(!1)},[x]);return{onSwapButtonClick:Q,onConfirmWarning:H,onCancelWarning:T,onShowWarning:E,onCloseWarning:V}}const yh=e=>Qe()(Ze(()=>e,{name:"useSwapReviewCallbacksStore",enabled:Ke(),trace:!0,traceLimit:25})),Th=({children:e,setScreen:t,authTrigger:n,onSubmitSwap:i,onClose:r,onAcceptTrade:s,getExecuteSwapService:a})=>{const{setShowWarningModal:c,setWarningAcknowledged:l,setShouldSubmitTx:u}=la(),{showWarningModal:d,warningAcknowledged:p,shouldSubmitTx:f}=Un(R=>({showWarningModal:R.showWarningModal,warningAcknowledged:R.warningAcknowledged,shouldSubmitTx:R.shouldSubmitTx})),{setCurrentStep:x,setSteps:g,resetCurrentStep:h,setSubmissionError:S,setRetrySwap:_}=ia(),w=N(R=>R.updateSwapForm),{reviewScreenWarning:C}=Ye(),{onSwapButtonClick:b,onConfirmWarning:j,onCancelWarning:A,onShowWarning:P,onCloseWarning:F}=bh({resetCurrentStep:h,setSubmissionError:S,setRetrySwap:_,showWarningModal:d,warningAcknowledged:p,shouldSubmitTx:f,setShowWarningModal:c,setWarningAcknowledged:l,setShouldSubmitTx:u,setScreen:t,authTrigger:n,onSubmitSwap:i,onClose:r,getExecuteSwapService:a,updateSwapForm:w,reviewScreenWarning:C,setCurrentStep:x,setSteps:g}),W=(0,m.useMemo)(()=>({onSwapButtonClick:b,onConfirmWarning:j,onCancelWarning:A,onShowWarning:P,onCloseWarning:F,onAcceptTrade:s}),[b,j,A,P,F,s]),[k]=(0,m.useState)(()=>yh(W)),$=Yt(W);return(0,m.useEffect)(()=>{$&&k.setState(W)},[W,k,$]),(0,o.jsx)(ea.Provider,{value:k,children:e})},Ch=({children:e,hideContent:t})=>{const[n]=(0,m.useState)(()=>Vg({hideContent:t})),i=Yt(t);return(0,m.useEffect)(()=>{i&&n.setState({hideContent:t})},[i,t,n]),(0,o.jsx)(ta.Provider,{value:n,children:e})};function Ih(e){const t=e==null?void 0:e.currencies.output,n=Ir(t),i=xo(n);return{currencyInfo:t,tokenProtectionWarning:n,severity:i}}const Ah=e=>Qe()(Ze(()=>e,{name:"useSwapReviewTransactionStore",enabled:Ke(),trace:!0,traceLimit:25}));function Fh(e,t){if(!e||!t||e.chainId!==t.chainId)return Te.NotApplicable;const n=e.chainId,i=_c(n);return e.isNative&&ei(Oe(t),i)?Te.Wrap:t.isNative&&ei(Oe(e),i)?Te.Unwrap:Te.NotApplicable}function kh(e){return e===Te.Unwrap||e===Te.Wrap}const jh=({children:e,derivedSwapInfo:t,swapTxContext:n,acceptedDerivedSwapInfo:i,newTradeRequiresAcceptance:r})=>{const s=xe(n)?n.gasFeeBreakdown:void 0,{chainId:a,currencies:c,wrapType:l,trade:{trade:u,indicativeTrade:d}}=t,{blockingWarning:p,reviewScreenWarning:f}=Ye(),x=kh(l),g=i==null?void 0:i.trade.trade,h=Vo(i),S=Ih(i),_=(0,m.useMemo)(()=>{if(!(!u||!_e(u)))return u.quote.quote.txFailureReasons},[u]),w=(0,m.useMemo)(()=>({trade:u??void 0,indicativeTrade:d??void 0,acceptedTrade:g??void 0,swapTxContext:n,gasFee:n.gasFee,uniswapXGasBreakdown:s,derivedSwapInfo:t,acceptedDerivedSwapInfo:i,isWrap:x,blockingWarning:p,reviewScreenWarning:f,txSimulationErrors:_,newTradeRequiresAcceptance:r,feeOnTransferProps:h,tokenWarningProps:S,currencyInInfo:c[v.INPUT],currencyOutInfo:c[v.OUTPUT],chainId:a}),[u,d,g,n,s,t,i,x,p,f,_,r,h,S,c,a]),[C]=(0,m.useState)(()=>Ah(w)),b=Yt(w);return(0,m.useEffect)(()=>{b&&C.setState(w)},[w,C,b]),(0,o.jsx)(sa.Provider,{value:C,children:e})},Rh=()=>Qe()(Ze(e=>({showWarningModal:!1,warningAcknowledged:!1,shouldSubmitTx:!1,tokenWarningChecked:!1,actions:{setShowWarningModal:t=>e({showWarningModal:t}),setWarningAcknowledged:t=>e({warningAcknowledged:t}),setShouldSubmitTx:t=>e({shouldSubmitTx:t}),setTokenWarningChecked:t=>e({tokenWarningChecked:t})}}),{name:"useSwapReviewWarningStore",enabled:Ke(),trace:!0,traceLimit:25})),Ph=({children:e})=>{const[t]=(0,m.useState)(()=>Rh());return(0,o.jsx)(aa.Provider,{value:t,children:e})};function Wh({hideContent:e,onSubmitSwap:t}){return(0,o.jsx)(Bh,{hideContent:e,onSubmitSwap:t})}function Bh({hideContent:e,onSubmitSwap:t}){var n;const{onClose:i,authTrigger:r,setScreen:s}=re(),a=N(g=>g.isSubmitting),{derivedSwapInfo:c,getExecuteSwapService:l}=pe(g=>({derivedSwapInfo:g.derivedSwapInfo,getExecuteSwapService:g.getExecuteSwapService})),u=Ie(g=>g),{onAcceptTrade:d,acceptedDerivedSwapInfo:p,newTradeRequiresAcceptance:f}=Sh({derivedSwapInfo:c,isSubmitting:a}),x=St(p==null?void 0:p.chainId);return Ss(x&&!(!(p==null||(n=p.trade.trade)===null||n===void 0)&&n.routing&&xu.includes(p.trade.trade.routing))),(0,o.jsx)(Ch,{hideContent:e,children:(0,o.jsx)(Ph,{children:(0,o.jsx)(Th,{setScreen:s,authTrigger:r,getExecuteSwapService:l,onSubmitSwap:t,onClose:i,onAcceptTrade:d,children:(0,o.jsx)(jh,{derivedSwapInfo:c,swapTxContext:u,acceptedDerivedSwapInfo:p,newTradeRequiresAcceptance:f,children:(0,o.jsx)(Dh,{})})})})})}function Dh(){const{acceptedDerivedSwapInfo:e,isWrap:t,newTradeRequiresAcceptance:n}=Je(p=>({acceptedDerivedSwapInfo:p.acceptedDerivedSwapInfo,isWrap:p.isWrap,newTradeRequiresAcceptance:p.newTradeRequiresAcceptance})),{steps:i,currentStep:r,hideContent:s}=zo(p=>({steps:p.steps,currentStep:p.currentStep,hideContent:p.hideContent})),a=ra(),{onPrev:c}=Js(),l=qg(),u=Gg(),d=Xg();return wh(),l?(0,o.jsx)(Jg,{}):u?(ge.error("Missing required props in `derivedSwapInfo` to render `SwapReview` screen.",{tags:{file:"SwapReviewScreen",function:"render"}}),null):d.submissionError?(0,o.jsx)(Lg,{submissionError:d.submissionError,setSubmissionError:d.setSubmissionError,resubmitSwap:d.onSwapButtonClick,onPressRetry:d.onPressRetry,onClose:c}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Nh,{children:[(0,o.jsx)(lh,{}),(0,o.jsxs)(L,{animation:"quick",opacity:s?0:1,gap:"$spacing16",pt:D?"$spacing8":void 0,children:[e&&(0,o.jsx)(_h,{acceptedDerivedSwapInfo:e,newTradeRequiresAcceptance:n,onClose:c}),a?(0,o.jsx)(Dl,{currentStep:r,steps:i}):t?(0,o.jsx)(uh,{}):(0,o.jsx)(ch,{})]})]}),(0,o.jsx)(Zg,{})]})}const Nh=(0,m.memo)(function({children:t}){const{bottomSheetViewStyles:n}=re();return(0,o.jsx)(Nn,{bottomSheetViewStyles:n,fullscreen:!1,children:t})});function Eh({settings:e,onSubmitSwap:t,tokenColor:n}){const{screen:i,setScreen:r}=re(),s=pe(c=>c.derivedSwapInfo.chainId),a=St(s);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(qe,{logImpression:!0,section:pn.SwapForm,children:(0,o.jsx)($g,{settings:e,hideContent:!1,tokenColor:n})}),(0,o.jsx)(zr,{height:"auto",alignment:q?"center":"top",isModalOpen:i===Se.Review,name:ee.SwapReview,padding:"$spacing12",gap:0,onClose:()=>r(Se.Form),children:(0,o.jsx)(qe,{logImpression:!0,section:pn.SwapReview,children:(0,o.jsx)(Wh,{hideContent:!1,onSubmitSwap:t})})}),a&&(0,o.jsx)(yp,{})]})}function $h({params:e,...t}){const n=[en.TradingApi,ne.tradingApiPaths.approval,e];return Ar({queryKey:n,queryFn:e?async()=>await Lc(e):ur,...t})}function Uh(e,t){const n=lt(s=>{var a;return(a=s.getCanBatchTransactions)===null||a===void 0?void 0:a.call(s,e)}),i=lt(s=>{var a;return(a=s.getSwapDelegationInfo)===null||a===void 0?void 0:a.call(s,e)}),r=!!(t&&!xe({routing:t}));return!!((n||i!=null&&i.delegationAddress)&&r)}function ua(e){const{account:t,chainId:n,wrapType:i,currencyInAmount:r,currencyOutAmount:s,routing:a}=e,c=i!==Te.NotApplicable,l=t==null?void 0:t.address,d=a&&xe({routing:a})?r==null?void 0:r.currency.wrapped:r==null?void 0:r.currency,p=r==null?void 0:r.quotient.toString(),f=oi(d),x=a===Z.BRIDGE,g=s==null?void 0:s.currency,h=oi(g),S=kn(n,"general"),_=(0,m.useMemo)(()=>{const F=Qn(n),W=Qn(g==null?void 0:g.chainId);if(!(!l||!p||!d||!f||!F)&&!(x&&!h&&!W))return{walletAddress:l,token:f,amount:p,chainId:F,includeGasInfo:!0,tokenOut:h,tokenOutChainId:W,gasStrategies:[S]}},[S,l,p,n,d,g==null?void 0:g.chainId,x,f,h]),w=Uh(n,a),C=!_||c||!l||w,{data:b,isLoading:j,error:A}=$h({params:C?void 0:_,staleTime:15*Dt,immediateGcTime:Lt}),P=(0,m.useMemo)(()=>{if(A&&ge.error(A,{tags:{file:"useTokenApprovalInfo",function:"useTokenApprovalInfo"},extra:{approvalRequestArgs:_}}),c||!l||w)return{action:me.None,txRequest:null,cancelTxRequest:null};if(b&&!A){if(b.approval===null)return{action:me.None,txRequest:null,cancelTxRequest:null};if(b.approval)return b.cancel?{action:me.RevokeAndPermit2Approve,txRequest:b.approval,cancelTxRequest:b.cancel}:{action:me.Permit2Approve,txRequest:b.approval,cancelTxRequest:null}}return{action:me.Unknown,txRequest:null,cancelTxRequest:null}},[l,_,w,b,A,c]);return(0,m.useMemo)(()=>{var F;const W=b==null||(F=b.gasEstimates)===null||F===void 0?void 0:F[0],k=P.action===me.None,$=P.action===me.Permit2Approve||P.action===me.None,R=k?"0":b==null?void 0:b.gasFee,X=$?"0":b==null?void 0:b.cancelGasFee,K=P.action===me.Unknown,G=K&&j,Q=K&&!j?new Error("Approval action unknown"):null;return{tokenApprovalInfo:P,approvalGasFeeResult:{value:R,displayValue:mn(R,S),isLoading:G,error:Q,gasEstimate:W},revokeGasFeeResult:{value:X,displayValue:mn(X,S),isLoading:G,error:Q}}},[S,b==null?void 0:b.cancelGasFee,b==null?void 0:b.gasEstimates,b==null?void 0:b.gasFee,j,P])}Tn();function Hi(e){if(e.length!==0)return e.reduce((t,n)=>ve.from(t).add(ve.from(n||"0")).toString(),"0")}function Mh(...e){const t=e.map(a=>a.error).find(a=>!!a)??null,n=e.some(a=>a.isLoading);if(e.some(a=>a.value===void 0)||t)return{value:void 0,displayValue:void 0,error:t,isLoading:n};const r=Hi(e.map(a=>a.value)),s=Hi(e.map(a=>a.displayValue));return{value:r,displayValue:s,error:t,isLoading:n}}function qo({gasStrategy:e}){return function({swapQuoteResponse:n,signature:i,transactionSettings:r,alreadyApproved:s,overrideSimulation:a}){const c=n.routing===Z.BRIDGE,l=n.permitData,u=a??(c?!1:s),d=ql(r.customDeadline);return{quote:n.quote,permitData:l??void 0,signature:i,simulateTransaction:u,deadline:d,refreshGasPrice:!0,gasStrategies:[e],urgency:Oc}}}function da({derivedSwapInfo:e}){const{currencyBalances:t,currencyAmounts:n}=e,i=n[v.INPUT],r=t[v.INPUT];return!!(r&&i&&r.lessThan(i))}function Oh({derivedSwapInfo:e,tokenApprovalInfo:t,signature:n,permitsDontNeedSignature:i}){const{trade:r}=e.trade,a=!!(r!=null&&r.quote.permitData)&&!n&&!i,c=!(t!=null&&t.action)||t.action===me.Unknown;return da({derivedSwapInfo:e})||c||a}function Lh({swapQuote:e,isRevokeNeeded:t}){var n;if(!e||!("txFailureReasons"in e))return null;const i=(n=e.txFailureReasons)===null||n===void 0?void 0:n.filter(r=>!(t&&r===It.SIMULATION_ERROR));return i!=null&&i.includes(It.SIMULATION_ERROR)||i!=null&&i.includes(It.SLIPPAGE_TOO_LOW)?new Error(fo):null}function pa({gasStrategy:e}){return function({response:n,error:i,swapQuote:r,isSwapLoading:s,permitData:a,swapRequestParams:c,isRevokeNeeded:l,permitsDontNeedSignature:u}){const d={value:r==null?void 0:r.gasFee,displayValue:mn(r==null?void 0:r.gasFee,e)},f=Lh({swapQuote:r,isRevokeNeeded:l})?new Error(fo):i,x={value:d.value,displayValue:d.displayValue,isLoading:s,error:f},g={swapEstimate:n==null?void 0:n.gasEstimate};return{gasFeeResult:x,txRequests:n==null?void 0:n.transactions,permitData:u?void 0:a,gasEstimate:g,includesDelegation:n==null?void 0:n.includesDelegation,swapRequestArgs:c}}}function ma({trace:e}){return function({txRequest:n,gasFeeResult:i,derivedSwapInfo:r,transactionSettings:s,previousRequestId:a}){var c;const l=(c=r.trade.trade)===null||c===void 0?void 0:c.quote,u=(l==null?void 0:l.requestId)!==a;if(!l||!u)return;const d="quoteId"in l.quote?l.quote.quoteId:void 0;i.error&&(ge.warn("utils","logSwapRequestErrors",fo,{...ii({derivedSwapInfo:r,transactionSettings:s,trace:e}),chainLabel:kt(r.chainId),requestId:l.requestId,quoteId:d,error:i.error,simulationFailureReasons:_e(l)?l.quote.txFailureReasons:void 0,txRequest:n}),Be||zt||Rt(uo.SwapEstimateGasCallFailed,{...ii({derivedSwapInfo:r,transactionSettings:s,trace:e}),error:i.error,txRequest:n,simulationFailureReasons:_e(l)?l.quote.txFailureReasons:void 0}))}}function Mn({swapTxInfo:e,approvalTxInfo:t,permitTxInfo:n=Go}){const{approvalGasFeeResult:i,revokeGasFeeResult:r}=t,s=Mh(e.gasFeeResult,i,r,n.gasFeeResult),a={...e.gasEstimate,approvalEstimate:i.gasEstimate};return{gasFee:s,gasFeeEstimation:a}}function On({approvalTxInfo:e}){const{tokenApprovalInfo:t}=e,n=Yn(t.txRequest),i=Yn(t.cancelTxRequest);return{approveTxRequest:n,revocationTxRequest:i}}function fa({trade:e,swapTxInfo:t,approvalTxInfo:n,permitTxInfo:i}){const r=Rn(t.txRequests),s=!!(q&&t.permitData),a=kr(t.permitData),c=a?{method:xn.TypedData,typedData:a}:i.permitTxRequest?{method:xn.Transaction,txRequest:i.permitTxRequest}:void 0;return{routing:e.routing,trade:e,...Mn({swapTxInfo:t,approvalTxInfo:n,permitTxInfo:i}),...On({approvalTxInfo:n}),swapRequestArgs:t.swapRequestArgs,unsigned:s,txRequests:r,permit:c,includesDelegation:t.includesDelegation}}const Go={permitTxRequest:void 0,gasFeeResult:{value:"0",displayValue:"0",isLoading:!1,error:null}};function Hh({quote:e}){const t=e&&_e(e)?e:void 0,n=kn(t==null?void 0:t.quote.chainId,"swap"),i=(0,m.useMemo)(()=>xa({gasStrategy:n}),[n]);return(0,m.useMemo)(()=>t?i({quote:t}):Go,[i,t])}function xa({gasStrategy:e}){return function({quote:n}){const i=Yn(n.permitTransaction);return i?{permitTxRequest:i,gasFeeResult:{value:n.permitGasFee,displayValue:mn(n.permitGasFee,e),isLoading:!1,error:null}}:Go}}function ga({trade:e,swapTxInfo:t,approvalTxInfo:n}){const i=Rn(t.txRequests);return{routing:e.routing,trade:e,...Mn({swapTxInfo:t,approvalTxInfo:n}),...On({approvalTxInfo:n}),txRequests:i,includesDelegation:t.includesDelegation}}function ha({trade:e,swapTxInfo:t}){const n=Rn(t.txRequests);return{routing:e.routing,trade:e,txRequests:n,approveTxRequest:void 0,revocationTxRequest:void 0,gasFee:t.gasFeeResult,gasFeeEstimation:t.gasEstimate,includesDelegation:t.includesDelegation}}function Vh({swapTxInfo:e,approvalTxInfo:t}){const n=Rn(e.txRequests);return{routing:Z.CLASSIC,...Mn({swapTxInfo:e,approvalTxInfo:t}),...On({approvalTxInfo:t}),txRequests:n,permit:void 0,swapRequestArgs:e.swapRequestArgs,unsigned:!1,includesDelegation:e.includesDelegation}}function Xo(e){const{gasStrategy:t,transactionSettings:n,instructionService:i}=e,r=pa({gasStrategy:t});return async({trade:a,approvalTxInfo:c,derivedSwapInfo:l})=>{const{tokenApprovalInfo:u}=c,d=a.quote,p=d.quote,f=u.action,x=f===me.Unknown,g=da({derivedSwapInfo:l})||x,{data:h,error:S}=await nc(g?Promise.resolve(void 0):i.getSwapInstructions({swapQuoteResponse:d,transactionSettings:n,approvalAction:f})),_=u.action===me.RevokeAndPermit2Approve;return r({response:(h==null?void 0:h.response)??void 0,error:S,permitData:h==null?void 0:h.unsignedPermit,swapQuote:p,isSwapLoading:!1,isRevokeNeeded:_,swapRequestParams:(h==null?void 0:h.swapRequestParams)??void 0})}}function zh(e){const t=Xo(e);return{async getSwapTxAndGasInfo(i){const r=await t(i);return ga({...i,swapTxInfo:r})}}}function qh(e){const t=Xo(e),n=xa(e);return{async getSwapTxAndGasInfo(r){const s=await t(r),a=n(r.trade);return fa({...r,swapTxInfo:s,permitTxInfo:a})}}}function va(e){var t;return{requestId:e.requestId,transactions:[e.swap],gasFee:e.gasFee,gasEstimate:(t=e.gasEstimates)===null||t===void 0?void 0:t[0]}}function Gh(){return{fetchSwapData:async e=>va(await Sr(e))}}function _a(e,t){return{requestId:e.requestId,transactions:[e.swap],gasFee:e.gasFee,includesDelegation:t}}function Xh(e){const{getSwapDelegationInfo:t}=e;async function n(i){const r=yr(i.quote.chainId),s=t(r),a=await br({...i,smartContractDelegationAddress:s.delegationAddress});return _a(a,s.delegationInclusion)}return{fetchSwapData:n}}function Sa(e){return{requestId:e.requestId,transactions:e.calls.map(t=>({...t,chainId:e.chainId})),gasFee:e.gasFee}}function Kh(){return{fetchSwapData:async e=>Sa(await wr(e))}}function Zh(e){const{gasStrategy:t,swapRepository:n}=e,i=qo({gasStrategy:t});return{getSwapInstructions:async({swapQuoteResponse:s,transactionSettings:a,approvalAction:c})=>{var l;const{permitData:u,permitTransaction:d}=s,p=u?await((l=e.presignPermit)===null||l===void 0?void 0:l.call(e,u)):void 0,f=u&&!p,x=c===me.None&&!d,g=i({swapQuoteResponse:s,signature:p,transactionSettings:a,alreadyApproved:x});return f?{response:null,unsignedPermit:u,swapRequestParams:g}:{response:await n.fetchSwapData(g),unsignedPermit:null,swapRequestParams:null}}}}function Vi(e){const{gasStrategy:t,swapRepository:n}=e,i=qo({gasStrategy:t});return{getSwapInstructions:async({swapQuoteResponse:s,transactionSettings:a,approvalAction:c})=>{const l=i({swapQuoteResponse:s,signature:void 0,transactionSettings:a,alreadyApproved:c===me.None,overrideSimulation:!0});return{response:await n.fetchSwapData(l),unsignedPermit:null,swapRequestParams:null}}}}function Qh(e){const{getSwapDelegationInfo:t}=e,n=t?Vi({...e,swapRepository:Xh({getSwapDelegationInfo:t})}):void 0,i=Vi({...e,swapRepository:Kh()}),r=Zh({...e,swapRepository:Gh()});return{getSwapInstructions:async a=>{var c,l;const u=yr(a.swapQuoteResponse.quote.chainId);return n&&(!((c=e.getSwapDelegationInfo)===null||c===void 0)&&c.call(e,u).delegationAddress)?n.getSwapInstructions(a):!((l=e.getCanBatchTransactions)===null||l===void 0)&&l.call(e,u)?i.getSwapInstructions(a):r.getSwapInstructions(a)}}}function Yh(e){return"_signTypedData"in e&&typeof e._signTypedData=="function"}async function wa({domain:e,types:t,value:n,signer:i}){if(!Yh(i))throw new Error("Incompatible account for signing typed data");const r=await i._signTypedData(e,t,n);return wc(r)}async function Jh(e,t){const{domain:n,types:i,values:r}=e||{};if(!(!n||!i||!r))return wa({domain:n,types:i,value:r,signer:t})}function ev(){const e=ir(),t=(0,m.useCallback)(async n=>{if(e)return Jh(n,e)},[e]);return q?void 0:t}const zi=new Map;function tv(e){const{trace:t,transactionSettings:n}=e,i=ma({trace:t});return function(s){return{async getSwapTxAndGasInfo(c){const l=await s.getSwapTxAndGasInfo(c);if(l.routing===Z.CLASSIC||l.routing===Z.BRIDGE){var u;const{derivedSwapInfo:d}=c,{txId:p}=d,f=p?zi.get(p):void 0;i({txRequest:(u=l.txRequests)===null||u===void 0?void 0:u[0],gasFeeResult:l.gasFee,derivedSwapInfo:d,transactionSettings:n,previousRequestId:f}),p&&zi.set(p,c.trade.quote.requestId)}return l}}}}function nv(){return{async getSwapTxAndGasInfo(t){const{trade:n}=t,i=n.quote.quote.prioritizationFeeLamports.toString(),r=n.quote.quote.transaction??void 0,s={value:i,displayValue:i,isLoading:!1,error:null};return{routing:Z.JUPITER,trade:n,gasFee:s,gasFeeEstimation:{},includesDelegation:!1,approveTxRequest:void 0,revocationTxRequest:void 0,transactionBase64:r}}}}function ov(e){function t(i){const r=e.services[i.routing];if(!r)throw new Error(`Unsupported routing: ${i.routing}`);return r}return{async getSwapTxAndGasInfo(i){const{trade:r}=i;return t(r).getSwapTxAndGasInfo({...i,trade:r})}}}function ba({permitData:e}){return{gasFeeResult:{value:"0",displayValue:"0",error:null,isLoading:!1},gasEstimate:{},txRequests:void 0,swapRequestArgs:void 0,permitData:e}}function iv({trade:e,approvalTxInfo:t,swapTxInfo:n}){const{approvalGasFeeResult:i}=t;return{gasFeeBreakdown:{classicGasUseEstimateUSD:e.quote.quote.classicGasUseEstimateUSD,approvalCost:i.displayValue,wrapCost:n.gasFeeResult.displayValue,inputTokenSymbol:e.inputAmount.currency.wrapped.symbol}}}function ya({trade:e,swapTxInfo:t,approvalTxInfo:n}){const i=kr(t.permitData);return{routing:e.routing,trade:e,...Mn({swapTxInfo:t,approvalTxInfo:n}),...On({approvalTxInfo:n}),...iv({trade:e,approvalTxInfo:n,swapTxInfo:t}),permit:i?{method:xn.TypedData,typedData:i}:void 0}}function rv(){return{async getSwapTxAndGasInfo(t){const n=t.trade.quote.permitData,i=ba({permitData:n});return ya({...t,swapTxInfo:i})}}}function sv(e){const t=Xo(e);return{async getSwapTxAndGasInfo(i){const r=await t(i);return ha({...i,swapTxInfo:r})}}}const av={routing:Z.CLASSIC,txRequests:void 0,approveTxRequest:void 0,revocationTxRequest:void 0,gasFee:{isLoading:!1,error:null},gasFeeEstimation:{},trade:void 0,permit:void 0,swapRequestArgs:void 0,unsigned:!1,includesDelegation:!1};function cv(){const e=ie(s=>s.chainId),t=kn(e,"general"),n=An(e),{getCanBatchTransactions:i,getSwapDelegationInfo:r}=ot();return(0,m.useMemo)(()=>({v4SwapEnabled:n,gasStrategy:t,getCanBatchTransactions:i,getSwapDelegationInfo:r}),[n,t,i,r])}function lv(){const e=cv(),t=ev(),n=ho(),i=Nr(),r=(0,m.useMemo)(()=>Qh({...e,presignPermit:t}),[e,t]),s=U(tv({trace:n,transactionSettings:i})),a=(0,m.useMemo)(()=>{const f=qh({...e,transactionSettings:i,instructionService:r});return s(f)},[e,i,r,s]),c=(0,m.useMemo)(()=>{const f=zh({...e,transactionSettings:i,instructionService:r});return s(f)},[e,i,r,s]),l=(0,m.useMemo)(()=>rv(),[]),u=(0,m.useMemo)(()=>{const f=sv({...e,transactionSettings:i,instructionService:r});return s(f)},[e,i,r,s]),d=(0,m.useMemo)(()=>nv(),[]),p=(0,m.useMemo)(()=>({[Z.CLASSIC]:a,[Z.BRIDGE]:c,[Z.PRIORITY]:l,[Z.DUTCH_V2]:l,[Z.DUTCH_V3]:l,[Z.WRAP]:u,[Z.UNWRAP]:u,[Z.LIMIT_ORDER]:qi(),[Z.DUTCH_LIMIT]:qi(),[Z.JUPITER]:d}),[a,c,l,u,d]);return(0,m.useMemo)(()=>ov({services:p}),[p])}function qi(){return{getSwapTxAndGasInfo:async()=>{throw new Error("Not implemented")}}}function uv(e){const{trade:t,derivedSwapInfo:n}=e;if(!t){var i,r;const{input:s,output:a}=n.currencies,c=n.currencyAmounts,l=(i=c[v.INPUT])===null||i===void 0?void 0:i.toExact(),u=(r=c[v.OUTPUT])===null||r===void 0?void 0:r.toExact();return{inputCurrencyId:s==null?void 0:s.currencyId,outputCurrencyId:a==null?void 0:a.currencyId,inputAmount:l,outputAmount:u}}return{requestId:t.quote.requestId,approvalTxInfo:e.approvalTxInfo}}function dv(e,t){if(t!=null&&t.trade&&e.trade){const n=t.approvalTxInfo.tokenApprovalInfo.action===e.approvalTxInfo.tokenApprovalInfo.action,i=t.trade.tradeType===e.trade.tradeType&&t.trade.inputAmount.equalTo(e.trade.inputAmount)||t.trade.outputAmount.equalTo(e.trade.outputAmount);return n&&i}return!1}function pv(e){return function(n){const{trade:i}=n;return dl({queryKey:[en.SwapTxAndGasInfo,uv(n)],queryFn:async()=>i?e.swapTxAndGasInfoService.getSwapTxAndGasInfo({...n,trade:i}):null,refetchInterval:e.refetchInterval,enabled:!!i})}}function mv(){const e=N(c=>c.derivedSwapInfo),t=ce().evmAccount,{chainId:n,wrapType:i,currencyAmounts:r,trade:{trade:s}}=e;return{approvalTxInfo:ua({account:t,chainId:n,wrapType:i,currencyInAmount:r[v.INPUT],currencyOutAmount:r[v.OUTPUT],routing:s==null?void 0:s.routing}),derivedSwapInfo:e,trade:s??void 0}}function fv(e){const t=lv(),n=gr({config:fr.Swap,key:xr.TradingApiSwapRequestMs,defaultValue:vr}),i=U(pv({swapTxAndGasInfoService:t,refetchInterval:n}));return mo(i(e))}function xv(){const e=mv(),{data:t}=fv(e),n=ut(t),i=ut(e),s=(0,m.useMemo)(()=>dv(e,i),[e,i])?n:void 0;return t??s??av}const Ta=e=>{const t=Qe()(Ze(()=>e,{name:"useSwapTxStore",enabled:Ke(),trace:!0,traceLimit:25})),n=t.subscribe(i=>{So("SwapTxContext",i)});return{store:t,cleanup:n}};function gv({params:e,...t},n){const i=[en.TradingApi,ne.tradingApiPaths.swap,e],r=hv(n);return Ar({queryKey:i,queryFn:e?()=>r(e):ur,...t})}function hv(e){const{canBatchTransactions:t,swapDelegationAddress:n,includesDelegation:i}=e??{};return n?r=>vv({swapDelegationAddress:n,params:r,includesDelegation:i}):t?Sv:_v}async function vv({swapDelegationAddress:e,params:t,includesDelegation:n}){return _a(await br({...t,smartContractDelegationAddress:e}),n)}async function _v(e){return va(await Sr(e))}async function Sv(e){return Sa(await wr(e))}function wv({permitData:e,skip:t}){const n=ir(),{domain:i,types:r,values:s}=e||{},a=(0,m.useCallback)(async()=>t||!n||!i||!r||!s?null:await wa({domain:i,types:r,value:s,signer:n}),[i,n,t,r,s]);return mo(vl({queryKey:[en.Permit2SignatureWithData,e],queryFn:a,enabled:!t}))}function bv({derivedSwapInfo:e,tokenApprovalInfo:t}){var n,i;const r=ho(),s=kn(e.chainId,"general"),a=Nr(),c=(n=e.trade.trade)===null||n===void 0?void 0:n.quote.permitData,{data:l}=wv({permitData:c,skip:q}),u=(0,m.useMemo)(()=>{var k;const $=(k=e.trade.trade)===null||k===void 0?void 0:k.quote;if($&&(_e($)||ft($)||Tr($)))return $},[(i=e.trade.trade)===null||i===void 0?void 0:i.quote]),d=u==null?void 0:u.quote,p=lt(k=>{var $;return($=k.getSwapDelegationInfo)===null||$===void 0?void 0:$.call(k,e.chainId)}),f=!!(p!=null&&p.delegationAddress),x=(0,m.useMemo)(()=>qo({gasStrategy:s}),[s]),g=(0,m.useMemo)(()=>{if(!u)return;const k=(t==null?void 0:t.action)===me.None&&!u.permitTransaction;return x({swapQuoteResponse:u,signature:l??void 0,transactionSettings:a,alreadyApproved:k,overrideSimulation:f})},[u,t==null?void 0:t.action,x,l,a,f]),h=lt(k=>{var $;return($=k.getCanBatchTransactions)===null||$===void 0?void 0:$.call(k,e.chainId)}),S=!!h,_=Oh({derivedSwapInfo:e,tokenApprovalInfo:t,signature:l??void 0,permitsDontNeedSignature:S}),w=gr({config:fr.Swap,key:xr.TradingApiSwapRequestMs,defaultValue:vr}),{data:C,error:b,isLoading:j}=gv({params:_?void 0:g,refetchInterval:w,staleTime:w,immediateGcTime:w+Dt*5},{canBatchTransactions:h,swapDelegationAddress:p==null?void 0:p.delegationAddress,includesDelegation:p==null?void 0:p.delegationInclusion}),A=(0,m.useMemo)(()=>pa({gasStrategy:s}),[s]),P=(0,m.useMemo)(()=>A({response:C,error:b,swapQuote:d,isSwapLoading:j,permitData:c,swapRequestParams:g,isRevokeNeeded:(t==null?void 0:t.action)===me.RevokeAndPermit2Approve,permitsDontNeedSignature:S}),[C,b,j,c,d,g,A,t==null?void 0:t.action,S]),F=(0,m.useRef)(u==null?void 0:u.requestId),W=(0,m.useMemo)(()=>ma({trace:r}),[r]);return(0,m.useEffect)(()=>{var k;W({txRequest:(k=P.txRequests)===null||k===void 0?void 0:k[0],gasFeeResult:P.gasFeeResult,derivedSwapInfo:e,transactionSettings:a,previousRequestId:F.current}),u&&(F.current=u.requestId)},[W,P,e,a,u]),P}function yv(e){return(0,m.useMemo)(()=>ba({permitData:e}),[e])}function Tv({derivedSwapInfo:e,tokenApprovalInfo:t}){var n;const i=yv((n=e.trade.trade)===null||n===void 0?void 0:n.quote.permitData),r=bv({derivedSwapInfo:e,tokenApprovalInfo:t});return e.trade.trade&&xe(e.trade.trade)?i:r}function Cv({derivedSwapInfo:e,account:t}){const{chainId:n,wrapType:i,currencyAmounts:r,trade:{trade:s}}=e,a=ua({account:t,chainId:n,wrapType:i,currencyInAmount:r[v.INPUT],currencyOutAmount:r[v.OUTPUT],routing:s==null?void 0:s.routing}),{tokenApprovalInfo:c}=a,l=Tv({derivedSwapInfo:e,tokenApprovalInfo:c}),u=Hh({quote:s==null?void 0:s.quote});return(0,m.useMemo)(()=>{switch(s==null?void 0:s.routing){case Z.DUTCH_V2:case Z.DUTCH_V3:case Z.PRIORITY:return ya({trade:s,swapTxInfo:l,approvalTxInfo:a});case Z.BRIDGE:return ga({trade:s,swapTxInfo:l,approvalTxInfo:a});case Z.CLASSIC:return fa({trade:s,swapTxInfo:l,approvalTxInfo:a,permitTxInfo:u});case Z.WRAP:case Z.UNWRAP:return ha({trade:s,swapTxInfo:l});default:return Vh({swapTxInfo:l,approvalTxInfo:a})}},[a,u,l,s])}const Iv=({children:e})=>{const t=ce().evmAccount,n=N(c=>c.derivedSwapInfo),i=Cv({derivedSwapInfo:n,account:t}),[{store:r,cleanup:s}]=(0,m.useState)(()=>Ta(i));(0,m.useEffect)(()=>()=>s(),[s]);const a=tr(i);return(0,m.useEffect)(()=>{a!==i&&r.setState(i)},[i,a,r]),(0,o.jsx)(Do.Provider,{value:r,children:e})},Av=({children:e})=>{const t=xv(),[{store:n,cleanup:i}]=(0,m.useState)(()=>Ta(t));(0,m.useEffect)(()=>()=>i(),[i]);const r=tr(t);return(0,m.useEffect)(()=>{r!==t&&n.setState(t)},[t,r,n]),(0,o.jsx)(Do.Provider,{value:n,children:e})},Fv=({children:e})=>{const n=_t(vt.ServiceBasedSwapTransactionInfo)?Av:Iv;return(0,o.jsx)(n,{children:e})};function kv({settings:e,onSubmitSwap:t,tokenColor:n,...i}){const r=Xl(),s=_s(),a=vu();return(0,o.jsx)(np,{modalName:ee.Swap,...i,children:(0,o.jsx)(Hl.Provider,{value:r,children:(0,o.jsx)(Or.Provider,{value:a,children:(0,o.jsx)(Fv,{children:(0,o.jsx)(Ro.Provider,{value:s,children:(0,o.jsx)(Eh,{settings:e,tokenColor:n,onSubmitSwap:t})})})})})})}function jv(e){return(0,m.useMemo)(()=>{var n,i;if(!e)return;const r=((n=e.filteredChainIdsOverride)===null||n===void 0?void 0:n.input)??(e.selectingCurrencyField===v.INPUT?e.selectingCurrencyChainId:void 0),s=((i=e.filteredChainIdsOverride)===null||i===void 0?void 0:i.output)??(e.selectingCurrencyField===v.OUTPUT?e.selectingCurrencyChainId:void 0);return{exactAmountFiat:e.exactAmountFiat,exactAmountToken:e.exactAmountToken,exactCurrencyField:e.exactCurrencyField,filteredChainIds:{[v.INPUT]:r,[v.OUTPUT]:s},focusOnCurrencyField:Rv(e),input:e.input??void 0,output:e.output??void 0,selectingCurrencyField:e.selectingCurrencyField,txId:e.txId,isFiatMode:!1,isSubmitting:!1,isConfirmed:!1,isMax:!1,showPendingUI:!1,instantReceiptFetchTime:void 0,instantOutputAmountRaw:void 0,txHash:void 0,txHashReceivedTime:void 0}},[e])}function Rv({focusOnCurrencyField:e,skipFocusOnCurrencyField:t,input:n,output:i,exactCurrencyField:r}){if(!t){if(e)return e;if(n&&r===v.INPUT)return v.INPUT;if(i&&r===v.OUTPUT)return v.OUTPUT}}function Pv(e){function t(i){var r,s,a;const c=(r=e.getSwapTxContext)===null||r===void 0?void 0:r.call(e),l=(s=e.getAccount)===null||s===void 0?void 0:s.call(e);if(!l||!c||!ai(l)||!gn(c))return;const{presetPercentage:u,preselectAsset:d}=e.getPresetInfo(),p=Hc(c),f=(p==null?void 0:p.to)===l.address;e.swapCallback({txId:i.txId,currencyInAmountUSD:i.currencyInAmountUSD,currencyOutAmountUSD:i.currencyOutAmountUSD,isAutoSlippage:i.isAutoSlippage,isFiatInputMode:(a=e.getIsFiatMode)===null||a===void 0?void 0:a.call(e),account:l,swapTxContext:c,presetPercentage:u,preselectAsset:d,isSmartWalletTransaction:f,includesDelegation:c.includesDelegation,onSuccess:e.onSuccess,onFailure:e.onFailure,onPending:e.onPending,setCurrentStep:e.setCurrentStep,setSteps:e.setSteps})}function n(i){var r,s,a;const c=(r=e.getAccount)===null||r===void 0?void 0:r.call(e),l=(s=e.getSwapTxContext)===null||s===void 0?void 0:s.call(e);if(!c||!l)return;const u=Tr(l)?(a=l.txRequests)===null||a===void 0?void 0:a[0]:void 0;!u||!i.inputCurrencyAmount||!i.wrapType||e.wrapCallback({inputCurrencyAmount:i.inputCurrencyAmount,txRequest:u,txId:i.txId,wrapType:i.wrapType,account:c,gasEstimate:l.gasFeeEstimation.wrapEstimate,onSuccess:e.onSuccess,onFailure:e.onFailure})}return{executeSwap:()=>{if(e.onPrepareSwap&&e.onExecuteSwap){var i,r,s;const{currencyAmounts:a,currencyAmountsUSDValue:c,txId:l,wrapType:u}=e.getDerivedSwapInfo(),{customSlippageTolerance:d}=e.getTxSettings(),p=(i=e.getSwapTxContext)===null||i===void 0?void 0:i.call(e),f=(r=e.getAccount)===null||r===void 0?void 0:r.call(e);if(!f||!p||!ai(f)||!gn(p)){e.onFailure(new Error("Invalid account or swap context"));return}const{presetPercentage:x,preselectAsset:g}=e.getPresetInfo();e.onExecuteSwap({account:f,swapTxContext:p,currencyInAmountUSD:c[v.INPUT]??void 0,currencyOutAmountUSD:c[v.OUTPUT]??void 0,isAutoSlippage:!d,presetPercentage:x,preselectAsset:g,onSuccess:e.onSuccess,onFailure:e.onFailure,onPending:e.onPending,txId:l,setCurrentStep:e.setCurrentStep,setSteps:e.setSteps,isFiatInputMode:(s=e.getIsFiatMode)===null||s===void 0?void 0:s.call(e),wrapType:u,inputCurrencyAmount:a.input??void 0}).catch(e.onFailure)}else{const{currencyAmounts:a,currencyAmountsUSDValue:c,txId:l,wrapType:u}=e.getDerivedSwapInfo(),{customSlippageTolerance:d}=e.getTxSettings();u?n({txId:l,wrapType:u,inputCurrencyAmount:a.input??void 0}):t({txId:l,currencyInAmountUSD:c[v.INPUT]??void 0,currencyOutAmountUSD:c[v.OUTPUT]??void 0,isAutoSlippage:!d})}}}}function Wv(e){const{swapCallback:t,wrapCallback:n,swapHandlers:i,derivedSwapInfo:r}=e,s=ce().evmAccount,a=st(h=>h.customSlippageTolerance),{isFiatMode:c,presetPercentage:l,preselectAsset:u}=N(h=>({isFiatMode:h.isFiatMode,presetPercentage:h.presetPercentage,preselectAsset:h.preselectAsset})),d=U(()=>s),p=U(()=>c),f=U(()=>r),x=U(()=>({customSlippageTolerance:a})),g=U(()=>({presetPercentage:l,preselectAsset:u}));return(0,m.useCallback)(h=>Pv({getAccount:d,getSwapTxContext:h.getSwapTxContext,getDerivedSwapInfo:f,getTxSettings:x,getIsFiatMode:p,getPresetInfo:g,onSuccess:h.onSuccess,onFailure:h.onFailure,onPending:h.onPending,setCurrentStep:h.setCurrentStep,setSteps:h.setSteps,swapCallback:t,wrapCallback:n,onPrepareSwap:i==null?void 0:i.prepareAndSign,onExecuteSwap:i==null?void 0:i.execute}),[t,n,i,d,f,g,p,x])}const Bv=({derivedSwapInfo:e,getExecuteSwapService:t,prepareSwapTransaction:n,wrapCallback:i})=>Qe()(Ze(r=>({derivedSwapInfo:e,getExecuteSwapService:t,prepareSwapTransaction:n,wrapCallback:i,actions:{setDerivedSwapInfo:s=>r({derivedSwapInfo:s}),setGetExecuteSwapService:s=>r({getExecuteSwapService:s}),setPrepareSwapTransaction:s=>r({prepareSwapTransaction:s}),setWrapCallback:s=>r({wrapCallback:s})}}),{name:"useSwapDependenciesStore",enabled:Ke(),trace:!0,traceLimit:25})),Dv=({children:e,swapCallback:t,wrapCallback:n,swapHandlers:i})=>{const r=N(u=>u.derivedSwapInfo),s=Wv({swapCallback:t,wrapCallback:n,swapHandlers:i,derivedSwapInfo:r}),a=(0,m.useMemo)(()=>({derivedSwapInfo:r,getExecuteSwapService:s,prepareSwapTransaction:i==null?void 0:i.prepareAndSign,wrapCallback:n}),[r,s,i,n]),[c]=(0,m.useState)(()=>Bv(a)),l=Yt(a);return(0,m.useEffect)(()=>{l&&c.setState(a)},[a,l,c]),(0,o.jsx)(Ro.Provider,{value:c,children:e})},Nv={exactAmountFiat:void 0,exactAmountToken:"",exactCurrencyField:v.INPUT,focusOnCurrencyField:void 0,filteredChainIds:void 0,input:void 0,output:void 0,selectingCurrencyField:void 0,isSelectingCurrencyFieldPrefilled:void 0,txId:void 0,txHash:void 0,txHashReceivedTime:void 0,isFiatMode:!1,isMax:!1,presetPercentage:void 0,preselectAsset:void 0,isSubmitting:!1,isConfirmed:!1,showPendingUI:!1,instantReceiptFetchTime:void 0,instantOutputAmountRaw:void 0},Ev=({hideFooter:e,hideSettings:t,initialState:n,derivedSwapInfo:i,dependenciesForSideEffect:{dispatch:r}})=>{const s=Qe()(Ze(Gl(u=>{const d=(0,m.createRef)(),p=(0,m.createRef)(),f=(0,m.createRef)();return d.current=0,p.current="",f.current="",{exactAmountFiat:void 0,exactAmountToken:"",exactCurrencyField:v.INPUT,focusOnCurrencyField:void 0,filteredChainIds:void 0,input:void 0,output:void 0,instantReceiptFetchTime:void 0,selectingCurrencyField:void 0,isSelectingCurrencyFieldPrefilled:void 0,txId:void 0,txHash:void 0,txHashReceivedTime:void 0,isFiatMode:!1,isMax:!1,presetPercentage:void 0,preselectAsset:void 0,isSubmitting:!1,showPendingUI:!1,isConfirmed:!1,instantOutputAmountRaw:void 0,hideFooter:e,hideSettings:t,prefilledCurrencies:void 0,isPrefilled:void 0,derivedSwapInfo:i,amountUpdatedTimeRef:d,exactAmountFiatRef:p,exactAmountTokenRef:f,updateSwapForm:x=>{u(g=>({...g,...x}))},...n,actions:{setSwapFormState:x=>{u(g=>({...g,...x}))},setUpdateSwapForm:x=>{u(g=>({...g,updateSwapForm:x}))}}}}),{name:"useSwapFormStore",enabled:Ke(),trace:!0,traceLimit:25})),a=s.subscribe(u=>u.filteredChainIds,u=>{u&&r(lc({filteredChainIds:u}))},{equalityFn:hu}),c=s.subscribe(u=>u,u=>{So("SwapFormContext",u)});return{store:s,cleanup:()=>{a(),c()}}},Gi=250,$v=({exactCurrencyField:e,exactAmountToken:t,exactAmountFiat:n})=>{const r=ut(e)!==e,[s,a]=ci({value:t,delay:Gi,skipDebounce:r}),[c,l]=ci({value:n,delay:Gi,skipDebounce:r});return{debouncedExactAmountToken:s??"",isDebouncingExactAmountToken:a,debouncedExactAmountFiat:c??"",isDebouncingExactAmountFiat:l}},Uv=e=>({address:bc(e),chainId:e,type:qr.Currency}),Mv=e=>({exactAmountFiat:void 0,exactAmountToken:"",exactCurrencyField:v.INPUT,focusOnCurrencyField:v.INPUT,filteredChainIds:{},input:Uv(e),output:void 0,isFiatMode:!1,isMax:!1,isSubmitting:!1,isConfirmed:!1,showPendingUI:!1,instantReceiptFetchTime:void 0,instantOutputAmountRaw:void 0,txHash:void 0,txHashReceivedTime:void 0}),Ca=()=>{const{defaultChainId:e}=Xe();return(0,m.useMemo)(()=>Mv(e),[e])};it();function Ov({isDebouncing:e,...t}){const{[v.INPUT]:n,[v.OUTPUT]:i,exactAmountFiat:r,exactAmountToken:s,exactCurrencyField:a,focusOnCurrencyField:c=v.INPUT,selectingCurrencyField:l,txId:u}=t,{defaultChainId:d}=Xe(),{customSlippageTolerance:p,selectedProtocols:f,isV4HookPoolsEnabled:x}=st(ye=>({customSlippageTolerance:ye.customSlippageTolerance,selectedProtocols:ye.selectedProtocols,isV4HookPoolsEnabled:ye.isV4HookPoolsEnabled})),g=nt(n?jt(n.chainId,n.address):void 0,{refetch:!0}),h=nt(i?jt(i.chainId,i.address):void 0,{refetch:!0}),S=g==null?void 0:g.currency,_=h==null?void 0:h.currency,w=(S==null?void 0:S.chainId)??(_==null?void 0:_.chainId)??d,{evmAccount:C,svmAccount:b}=ce(),j=w===O.Solana?b:C,A=(0,m.useMemo)(()=>({[v.INPUT]:g,[v.OUTPUT]:h}),[g,h]),{balance:P}=ri(S,j==null?void 0:j.address),{balance:F}=ri(_,j==null?void 0:j.address),W=a===v.INPUT,k=Fh(S,_),$=W?_:S,R=W?S:_,X=(0,m.useMemo)(()=>mt({value:s,valueType:pt.Exact,currency:R}),[s,R]),K=_t(vt.PortionFields),G=lt(ye=>{var ke,at;return((ke=ye.getCanSignPermits)===null||ke===void 0?void 0:ke.call(ye,w))&&!(!((at=ye.getSwapDelegationInfo)===null||at===void 0)&&at.call(ye,w).delegationAddress)}),Q=sl({account:j,amountSpecified:X,otherCurrency:$,tradeType:W?dt.EXACT_INPUT:dt.EXACT_OUTPUT,customSlippageTolerance:p,selectedProtocols:f,sendPortionEnabled:K,isDebouncing:e,generatePermitAsTransaction:G,isV4HookPoolsEnabled:x}),H=Q.trade??Q.indicativeTrade,E=ue()?H==null?void 0:H.quoteOutputAmount:H==null?void 0:H.outputAmount,V=(0,m.useMemo)(()=>({[v.INPUT]:a===v.INPUT?X:H==null?void 0:H.inputAmount,[v.OUTPUT]:a===v.OUTPUT?X:E}),[a,X,H==null?void 0:H.inputAmount,E]),se=Ve(V[v.INPUT]),Ee=Ve(V[v.OUTPUT]),Me=(0,m.useMemo)(()=>({[v.INPUT]:se,[v.OUTPUT]:Ee}),[se,Ee]),bt=(0,m.useMemo)(()=>({[v.INPUT]:P,[v.OUTPUT]:F}),[P,F]);return(0,m.useMemo)(()=>({chainId:w,currencies:A,currencyAmounts:V,currencyAmountsUSDValue:Me,currencyBalances:bt,trade:Q,exactAmountToken:s,exactAmountFiat:r,exactCurrencyField:a,focusOnCurrencyField:c,wrapType:k,selectingCurrencyField:l,txId:u,outputAmountUserWillReceive:H==null?void 0:H.quoteOutputAmountUserWillReceive}),[w,A,V,Me,bt,r,s,a,c,l,Q,u,k,H])}const Lv=({prefilledSelectingCurrencyField:e,prefilledFilteredChainIds:t,setSwapForm:n})=>{(0,m.useEffect)(()=>{e&&t&&n({selectingCurrencyField:e,filteredChainIds:t,isSelectingCurrencyFieldPrefilled:!0})},[e,t,n])},Hv=({prefilledState:e,setSwapForm:t})=>{const n=ut(e==null?void 0:e.input),i=ut(e==null?void 0:e.output),r=Ca();(0,m.useEffect)(()=>{const s=n&&Oe(n),a=i&&Oe(i);(s!==((e==null?void 0:e.input)&&Oe(e.input))||a!==((e==null?void 0:e.output)&&Oe(e.output)))&&t(e??r)},[e,n,i,r,t])},Xi=e=>{const{debouncedExactAmountToken:t,isDebouncingExactAmountToken:n,debouncedExactAmountFiat:i,isDebouncingExactAmountFiat:r}=$v({exactCurrencyField:e.exactCurrencyField,exactAmountToken:e.exactAmountToken,exactAmountFiat:e.exactAmountFiat});return Ov({txId:e.txId,[v.INPUT]:e.input??null,[v.OUTPUT]:e.output??null,exactCurrencyField:e.exactCurrencyField,exactAmountToken:t,exactAmountFiat:i,focusOnCurrencyField:e.focusOnCurrencyField,selectingCurrencyField:e.selectingCurrencyField,isDebouncing:n||r})},Vv=({children:e,hideFooter:t,hideSettings:n,prefilledState:i})=>{var r;const s=ht(),a=Ca(),c=(0,m.useMemo)(()=>i??a,[i,a]),l=Xi({...Nv,...c}),[{store:u,cleanup:d}]=(0,m.useState)(()=>Ev({hideFooter:t,hideSettings:n,initialState:c,derivedSwapInfo:l,dependenciesForSideEffect:{dispatch:s}}));(0,m.useEffect)(()=>()=>d(),[d]);const{amountUpdatedTimeRef:p,exactAmountFiatRef:f,exactAmountTokenRef:x,exactAmountFiat:g,exactAmountToken:h,exactCurrencyField:S,focusOnCurrencyField:_,input:w,isMax:C,isSelectingCurrencyFieldPrefilled:b,output:j,selectingCurrencyField:A,txId:P}=Fe(u,Ue(T=>({amountUpdatedTimeRef:T.amountUpdatedTimeRef,exactAmountFiatRef:T.exactAmountFiatRef,exactAmountTokenRef:T.exactAmountTokenRef,exactAmountFiat:T.exactAmountFiat,exactAmountToken:T.exactAmountToken,exactCurrencyField:T.exactCurrencyField,focusOnCurrencyField:T.focusOnCurrencyField,input:T.input,isMax:T.isMax,isSelectingCurrencyFieldPrefilled:T.isSelectingCurrencyFieldPrefilled,output:T.output,selectingCurrencyField:T.selectingCurrencyField,txId:T.txId,hideFooter:t,hideSettings:n}))),{setSwapFormState:F,setUpdateSwapForm:W}=Fe(u,Ue(T=>T.actions));Hv({prefilledState:i,setSwapForm:F}),Lv({prefilledSelectingCurrencyField:i==null?void 0:i.selectingCurrencyField,prefilledFilteredChainIds:i==null?void 0:i.filteredChainIds,setSwapForm:F});const k=Xi({exactAmountFiat:g,exactAmountToken:h,exactCurrencyField:S,focusOnCurrencyField:_,input:w,output:j,selectingCurrencyField:A,txId:P}),$=k.currencyAmounts[v.INPUT],R=k.currencyBalances[v.INPUT];il(k);const X=ou((r=tu({currencyAmount:R,txType:go.Swap,isExtraTx:!0}))===null||r===void 0?void 0:r.toExact()),K=(0,m.useMemo)(()=>{const T=$==null?void 0:$.toExact();if(k.exactCurrencyField===v.OUTPUT&&T&&X.current){const E=parseFloat(T)>=parseFloat(X.current);if(E!==C)return E}return C},[k.exactCurrencyField,$,C,X]),G=U(T=>{const E={...T},V=E.exactAmountFiat!==void 0||E.exactAmountToken!==void 0;if(V&&(p.current=Date.now()),E.exactAmountFiat!==void 0&&(f.current=E.exactAmountFiat),E.exactAmountToken!==void 0&&(x.current=E.exactAmountToken),V||E.exactCurrencyField!==v.OUTPUT){const se=!!X.current&&!!E.exactAmountToken&&parseFloat(X.current)<=parseFloat(E.exactAmountToken);E.isMax=E.isMax??se}F(E)});(0,m.useEffect)(()=>{W(G)},[W,G]);const Q=(0,m.useMemo)(()=>[i==null?void 0:i.input,i==null?void 0:i.output].filter(T=>!!T),[i==null?void 0:i.input,i==null?void 0:i.output]),H=(0,m.useMemo)(()=>({derivedSwapInfo:k,hideFooter:t,hideSettings:n,prefilledCurrencies:Q,isSelectingCurrencyFieldPrefilled:b,isMax:K}),[k,t,n,Q,b,K]);return(0,m.useEffect)(()=>{F(H)},[H,F]),(0,o.jsx)(Or.Provider,{value:u,children:e})},Ki=e=>e?{address:Kn(e),chainId:e.chainId,type:qr.Currency}:null,zv="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334076 ",qv="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa1360334076 ",Gv="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",Xv=" _opacity-1",Kv=" _opacity-0--6",Zv=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _position-relative _gap-t-space-spa1360334076  ";function M1(){const e=or(),t=nr();_t(vt.AATestWeb);const n=Cu(),{initialInputCurrency:i,initialOutputCurrency:r,initialChainId:s,initialTypedValue:a,initialField:c,triggerConnect:l}=Wc();return(0,m.useEffect)(()=>{l&&(n.open(),e(t.pathname,{replace:!0}))},[n,l,e,t.pathname]),(0,o.jsxs)(qe,{logImpression:!0,page:Bc.SwapPage,children:[(0,o.jsx)(Wu,{children:(0,o.jsx)(Qv,{chainId:s,initialInputCurrency:i,initialOutputCurrency:r,initialTypedValue:a,initialIndependentField:c,syncTabToUrl:!0,usePersistedFilteredChainIds:!0})}),t.pathname==="/swap"&&(0,o.jsx)(Pu,{})]})}function Qv({initialInputCurrency:e,initialOutputCurrency:t,initialTypedValue:n,initialIndependentField:i,chainId:r,hideHeader:s=!1,hideFooter:a=!1,onCurrencyChange:c,syncTabToUrl:l,swapRedirectCallback:u,tokenColor:d,usePersistedFilteredChainIds:p=!1}){const f=eo(Jn.EXPLORE),g=Ja(r)&&f,h=Ki(e),S=Ki(t),{isSwapTokenSelectorOpen:_,swapOutputChainId:w}=ot(),C=Jt(jc),b=jv({input:h,output:S,exactAmountToken:n??"",exactCurrencyField:i??v.INPUT,selectingCurrencyField:_?v.OUTPUT:void 0,selectingCurrencyChainId:w,skipFocusOnCurrencyField:yn,filteredChainIdsOverride:p?C:void 0});return(0,o.jsx)(Du,{initialChainId:r,children:(0,o.jsx)(Jd,{children:(0,o.jsx)(Yd,{initialInputCurrency:e,initialOutputCurrency:t,children:(0,o.jsx)(yc,{children:(0,o.jsx)(Vv,{prefilledState:b,hideSettings:s,hideFooter:a,children:(0,o.jsxs)("div",{className:$e(""+(Zv+(g?Kv:Xv))),children:[g&&(0,o.jsx)(n_,{}),(0,o.jsx)(t_,{hideHeader:s,hideFooter:a,syncTabToUrl:l,swapRedirectCallback:u,onCurrencyChange:c,prefilledState:b,tokenColor:d})]})})})})})})}const Yv=[Y.Swap,Y.Limit,Y.Buy,Y.Sell],Jv={[Y.Swap]:e=>e("swap.form.header"),[Y.Limit]:e=>e("swap.limit"),[Y.Send]:e=>e("send.title"),[Y.Buy]:e=>e("common.buy.label"),[Y.Sell]:e=>e("common.sell.label")},e_={"/swap":Y.Swap,"/send":Y.Send,"/limit":Y.Limit,"/buy":Y.Buy,"/sell":Y.Sell};function t_({hideHeader:e=!1,hideFooter:t=!1,disableTokenInputs:n=!1,syncTabToUrl:i=!0,prefilledState:r,onCurrencyChange:s,swapRedirectCallback:a,tokenColor:c}){var l;const[u,d]=(0,m.useState)(Y.Swap),{pathname:p}=nr(),f=or(),{t:x}=I(),g=dc(),h=mc(),S=Si(()=>Zo(()=>import("./LimitForm-SR40RLg0.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346])).then(k=>({default:k.LimitFormWrapper}))),_=Si(()=>Zo(()=>import("./BuyForm-BjJf3FBD.js"),__vite__mapDeps([347,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,348,68,69,70,71,57,72,73,48,74,75,76,349,350,35,36,37,38,39,40,41,42,43,44,45,46,47,106,78,52,107,108,109,110,88,102,111,87,80,112,60,61,62,50,51,113,114,115,116,117,79,118,63,94,95,96,97,98,119,49,56,120,121,122,89,123,124,125,100,126,127,128,129,130,131,132,101,133,135,342,351,352,59,151,353,158,156,354,355,239,356,214,210,55,357,279,358,238,240,157,359,236,237,83,99,215,213,204,205,92,93,206,207,86,285,286,249,250,251,252,253,176,85,254,152,266,260,261,174,262,160,263,264,265,267,268,269,90,91,287,288,289,274,230,290,103,104,291,142,292,180,177,181,182,183,178,179,293,270,271,277,208,223,224,225,222,294,226,194,188,189,190,295,220,221,296,297,360,305,172,255,256,257,258,259,245,309,168,325,361,202,203,331,299,300,301,193,192,362,363,364,273,275,311,137,138,139,140,141,365,282,366,317,367])).then(k=>({default:k.BuyForm}))),{openModal:w}=Iu(ee.Send);(0,m.useEffect)(()=>{p==="/send"?(d(Y.Swap),Lu()||w()):d(e_[p]??Y.Swap)},[p,d,w]);const C=(0,m.useCallback)(k=>{Rt(Cc.SwapTabClicked,{tab:k}),i?f(`/${k}`,{replace:!0}):d(k)},[f,i,d]),b=_t(vt.FiatOffRamp),j=(0,m.useMemo)(()=>Yv.filter(k=>!(k===Y.Sell&&!b)).map(k=>({value:k,display:(0,o.jsx)(y,{variant:"buttonLabel3",hoverStyle:{color:"$neutral1"},color:u===k?"$neutral1":"$neutral2",tag:"h1",children:Jv[k](x)})})),[x,u,b]),A=Xd(),P=uc(),F=(l=Fr().connector)===null||l===void 0?void 0:l.id,W=Nu(F);return(0,o.jsxs)("div",{className:Gv,children:[!e&&(0,o.jsx)("div",{className:qv,children:(0,o.jsx)(Ua,{outlined:!1,size:"large",options:j,selectedOption:u,onSelectOption:C,gap:yn?"$spacing8":void 0})}),u===Y.Swap&&(0,o.jsxs)("div",{className:zv,children:[(0,o.jsx)(Dv,{swapCallback:g,wrapCallback:h,children:(0,o.jsx)(kv,{settings:A,hideHeader:e,hideFooter:t,onClose:wl,swapRedirectCallback:a,onCurrencyChange:s,prefilledState:r,tokenColor:c,onSubmitSwap:P,passkeyAuthStatus:W})}),(0,o.jsx)(Id,{})]}),u===Y.Limit&&S&&(0,o.jsx)(S,{onCurrencyChange:s}),u===Y.Buy&&_&&(0,o.jsx)(_,{rampDirection:Jo.ONRAMP,disabled:n,initialCurrency:r==null?void 0:r.output}),u===Y.Sell&&_&&(0,o.jsx)(_,{rampDirection:Jo.OFFRAMP,disabled:n,initialCurrency:r==null?void 0:r.output})]})}const Zi=rt(L,{position:"absolute",width:"100%",height:"100%",zIndex:Ne.overlay}),n_=()=>{const{t:e}=I();return(0,o.jsx)(Zi,{cursor:"not-allowed",children:(0,o.jsxs)(et,{placement:"left-start",children:[(0,o.jsxs)(et.Content,{animationDirection:"left",children:[(0,o.jsx)(et.Arrow,{}),(0,o.jsx)(y,{variant:"body4",children:e("testnet.unsupported")})]}),(0,o.jsx)(et.Trigger,{position:"relative",width:"100%",height:"100%",children:(0,o.jsx)(Zi,{})})]})})};export{Zt as Accordion,Fx as LowNativeBalanceModal,to as ShieldCheck,Qv as Swap,M1 as SwapPage,_m as TokenWarningCard,np as TransactionModal,gd as selectHasDismissedLowNetworkTokenWarning,$1 as selectHasShownMismatchToast,Si as useDeferredComponent};
