import{__toESM as he}from"./chunk-DgAfPHQg.js";import"./preload-helper-CaakwtpC.js";import"./i18next-DD3sT7R5.js";import{require_react as cn}from"./react-CNoFhWkx.js";import{ADAPTIVE_MODAL_ANIMATION_DURATION as ln,AnimatePresence as un,Button as Ct,TouchableArea as dn,Trans as A,useIsShortMobileDevice as pn}from"./src-DOOtfpHS.js";import{useTranslation as ve}from"./useTranslation-BotBuoJf.js";import"./index.web-BqgtOHN3.js";import"./constants-CrXoXfFH.js";import"./es-Iwj7vF3u.js";import"./react-dom-xovCOntK.js";import"./react-is-BJXMVkew.js";import"./cache-BFZkIToX.js";import"./dist-Q7olfaoJ.js";import"./tslib.es6-Dbpxy1u8.js";import"./dist-QCpUvRkJ.js";import"./chunk-QMGIS6GS-B91ZVkXt.js";import{require_jsx_runtime as mn}from"./jsx-runtime-D7bMTQeG.js";import"./useEnabledChains-DuB86c95.js";import{logger as pt}from"./hooks-BXO4d1DJ.js";import"./dist-ceZDlR1V.js";import"./analytics.web-DLc1_wTk.js";import"./redux-toolkit.esm-BnRUBto_.js";import"./api-BsCrUy1C.js";import{useTotalBalancesUsdForAnalytics as hi}from"./state-BVuwBOpM.js";import"./utils-CK6a47NA.js";import{CurrencyAmount as ce,Fraction as fn,Price as nt,TradeType as le,UniverseChainId as et,getPrimaryStablecoin as zt,getStablecoinsForChain as hn,init_jsbi as Pt,init_sdk_core_esm as Ne,invariant as m,isUniverseChainId as vn,jsbi_default as X}from"./utils-BX1Fu73x.js";import"./bn-D7somgUb.js";import{AddressZero as Re,BigNumber as ee,init_lib$5 as vi}from"./lib-DPFIyRke.js";import{ZERO_PERCENT as Gt}from"./misc-BMnlqqV4.js";import{currencyId as Xt,isEVMChain as xi}from"./currencyId-Ci6selsx.js";import{AlertTriangleFilled as gi,AnimatedEntranceConfirmationIcon as xn,AnimatedEntranceSubmittedIcon as gn,LoadingIndicatorOverlay as yn,LogoContainer as Tn,OrderContent as wn,SwapModalHeaderAmount as Qt}from"./OffchainActivityModal-B5RlXTeb.js";import"./constants-vVZBLDwL.js";import"./constants-CZ9iND_H.js";import{PrefetchBalancesWrapper as Rt}from"./slice-DimuiOR8.js";import"./config-C4KrHqHG.js";import"./time-D_OqcZ4M.js";import"./wallet-gHLp87c6.js";import{SwapEventName as je}from"./features-yACC1hVw.js";import{InterfaceEventName as pe}from"./interface-BdpC4qOF.js";import{SectionName as Xe,useSwapActionHandlers as bn,useSwapAndLimitContext as jt}from"./TokenSelector-CNVK2itZ.js";import{ElementName as Nt}from"./element-Wnp4RkdY.js";import{ModalName as Yt}from"./modal-Dvm06CN4.js";import{InterfacePageName as In}from"./page-zDkoCQe4.js";import"./uniswap-Bm-6KILn.js";import"./isAddress-P2vaZgmG.js";import"./chain-ghiO403o.js";import"./slice-cfC6NcyN.js";import"./node-C_BraYgX.js";import"./formatUnits-DkyMpOD7.js";import"./_u64-b_viZRi_.js";import"./sha2-Jt0E41S_.js";import"./sha256-BqbhXHGu.js";import"./call-CTDbaN-t.js";import"./parseAccount-CRyN5swV.js";import"./encodeFunctionData-CD63gkvM.js";import"./public-fap09Zv6.js";import"./stringify-B82RFruy.js";import"./rpc-nQR4Ijs4.js";import"./dist-CBK-d0jO.js";import"./hmac-D-QTodfL.js";import{ExplorerDataType as yi,getExplorerLink as Ti}from"./linking-D29RyAR8.js";import"./lib-CKG8APVv.js";import"./lib-XGdDYWzD.js";import{CosignedPriorityOrder as An,CosignedV2DutchOrder as Zt,CosignedV3DutchOrder as Jt,MissingConfiguration as _n,OrderType as mt,REACTOR_ADDRESS_MAPPING as ei,UnsignedPriorityOrder as En,UnsignedV2DutchOrder as On,UnsignedV3DutchOrder as Sn,getPermit2 as kt,getReactor as Dt,init_lib as $e}from"./V3DutchOrderTrade-Cl7yELmp.js";import{init_v3_sdk_esm as Cn,toHex as Pn}from"./v3-sdk.esm-CHH6GWR1.js";import"./hash-05APZTFm.js";import"./inherits_browser-Dqx8HagI.js";import"./useQuery-D_ZCw8XG.js";import"./lib-CWHZrl0T.js";import"./v2-sdk.esm-CIiDMO7F.js";import"./lib-BncBk3QF.js";import{require_utils as wi}from"./utils-7WDx1QGa.js";import"./lib-CgeiDO5B.js";import"./lib-Dj-AwQVD.js";import{DutchOrder as Rn,LimitOrderTrade as jn,OffchainOrderType as tt,PriorityOrderTrade as Nn,RouterPreference as wt,TradeFillType as oe,V2DutchOrderTrade as kn,V3DutchOrderTrade as Dn}from"./types-DbOmsKtk.js";import"./slice-CYdI68Yo.js";import"./defaultOptions-ENwqzwHj.js";import"./getCurrencyAmount-vvZpAzIm.js";import"./addresses-D56PBUHX.js";import"./currency-DIOEzjz2.js";import"./actions-BvAnf7JG.js";import"./reducer-26KeQlno.js";import{require_ms as bi}from"./ms-BqmEYo6j.js";import"./configs-B4dDdw82.js";import{FeatureFlags as Ii,useFeatureFlag as Ai}from"./hooks-Bp0VtWbX.js";import"./statsig-B7I9iQRf.js";import"./usePollingIntervalByChain-YBOfXXzb.js";import"./providers-BELGpWsr.js";import"./erc20-CdGGKIp0.js";import"./getContract-CMwwszTa.js";import{LDO as Bn,MNW as Ln,NMR as Un,USDT as Fn,WRAPPED_NATIVE_CURRENCY as ti,nativeOnChain as Bt}from"./objects-DlLkJwrJ.js";import{formatCommonPropertiesForTrade as Mn,formatSwapSignedAnalyticsEventProperties as Se,formatToDecimal as $n,getPriceUpdateBasisPoints as Wn,getTokenAddress as ii,getUSDCostPerGas as Vn,getWrapInfo as qn,isClassicTrade as me,isLimitTrade as re,isPreviewTrade as rt,isUniswapXSwapTrade as Kn,isUniswapXTrade as Fe,isUniswapXTradeType as Lt}from"./analytics-Ccvj1WVk.js";import{sendAnalyticsEvent as z}from"./send.web-CrSXW2rw.js";import"./TradingApiClient-Cp_0ez5S.js";import"./ProtocolItems-DhZWSiXS.js";import"./selectors-BwkayGDl.js";import"./useUSDCPrice-HO7Wgroz.js";import"./balances-DV0Wvmri.js";import"./getCurrencySafetyInfo-BHD1ohD-.js";import"./mutation-CRQvRc5_.js";import"./infiniteQueryBehavior-C10I_UVS.js";import"./getPositions-B2zd3dQ2.js";import"./connector-Cw8HJLtm.js";import"./queryOptions-P48mrm5X.js";import"./connect-transport-9OnIgPz5.js";import"./proto3-DkSQZto4.js";import"./embeddedWallet-BdHUTaHg.js";import"./use-query-8AOGtvlP.js";import"./promise-client-BYLTs0DC.js";import{uniswapUrls as q}from"./urls-kwiZbYPW.js";import"./createApiClient-BjXZMbEB.js";import"./constants-D9cStT7K.js";import"./base-DVpWJ4NW.js";import"./types_pb-yZxlo4b1.js";import"./hooks-Dhx5teK4.js";import{TransactionStatus as ot,TransactionType as bt}from"./transactionDetails-BsNW_jus.js";import{NumberType as ue}from"./types-JuyYLR0O.js";import{useLocalizationContext as ye}from"./LocalizationContext-B31peW1_.js";import"./getAlertColor-J5DrJWHv.js";import{CurrencyField as B}from"./currency-xm5i4cH7.js";import"./ethers-D2SIY1xg.js";import{useIsSupportedChainId as _i,useSupportedChainId as Hn}from"./useSupportedChainId-DskHoisQ.js";import"./useWallet-CL5owP9P.js";import{useTrace as Ei}from"./TraceContext-Ddfk7zjz.js";import"./queryOptions-Dj3qRbwo.js";import"./types-7DAoWLTI.js";import"./analytics-UE3_EENu.js";import{PopupType as ni,SwitchNetworkAction as Oi}from"./types-BSmAADNJ.js";import"./eventemitter3-DFes51ku.js";import"./eventemitter3-BHLpX1jX.js";import"./dist-BWRHWQ_J.js";import"./readContract-Cae4hIjn.js";import"./recoverAddress-oPdWABRo.js";import"./getBalance-TsPVbzB5.js";import"./localBatchGatewayRequest-CdT4Kija.js";import"./createBatchScheduler-BJBpfhFD.js";import"./createTransport-WEDNYdh5.js";import{useEthersWeb3Provider as Si}from"./useEthersProvider-CBgc_azi.js";import"./http-CIklBnX8.js";import"./wagmiConfig-0BYSDqyO.js";import"./hashMessage-DdzTBpWL.js";import"./multicall-BYS6jvE9.js";import"./secp256k1-fbKD5lyl.js";import"./getAction-BBhbL9mE.js";import{useAccount as se}from"./useAccount-C5hwiBwN.js";import"./config-CDfnfyHL.js";import"./useConnect-DQZiZ0j4.js";import"./useDisconnect-GQ6byqBk.js";import{useCurrencyBalance as Ci,useCurrencyBalances as zn}from"./useCurrencyBalance-BuHM_Z2M.js";import"./useReadContracts-Orb8TypL.js";import"./wagmi-CsUiFCSO.js";import"./useSwitchChain-CY8eYAUF.js";import"./useAccountEffect-CHrs5vTR.js";import"./query-qNZtVuxH.js";import"./useReadContract-DodDFlY8.js";import"./constants-CGJJmXwV.js";import{useAtom as Gn}from"./utils-CDaPKk14.js";import"./zIndex-CmEE31Ab.js";import"./passkey.web-DakcatU3.js";import"./hex-njd-4N-2.js";import"./slice-qANrfSbi.js";import"./noop-BDbB2pLB.js";import"./walletMeta-DaLhfhet.js";import{signTypedData as Xn}from"./signing-DH5GfhKu.js";import{i18n_default as Pi}from"./i18n-CroUvoJw.js";import"./v4-D6Rlvprs.js";import{SignatureExpiredError as st,UniswapXv2HardQuoteError as It,UserRejectedRequestError as at,WrongChainError as Ri}from"./errors-BaezSPLl.js";import{didUserReject as Me,swapErrorToUserReadableMessage as ct}from"./swapErrorToUserReadableMessage-DgHZMHU-.js";import"./AccountDetails-pkaz6EG4.js";import"./lpIncentivesSaga-CyYcBLmn.js";import{Flex as ji,Text as de,styled as Ut}from"./Loader-D83W8G1W.js";import"./client-BlU1ozBP.js";import{Anchor as ri}from"./Anchor-B1nkrQbP.js";import"./Input-ClKbNpxm.js";import"./Checkbox-Id3GDHn8.js";import"./AnimatePresencePager-Dk43KD9E.js";import"./breakpoints-B-pYqY7D.js";import"./urls-aCnKF23w.js";import"./useNewChainIds-CIAogFpa.js";import"./encode-utf8-DiSL6KQ9.js";import"./dijkstra-6umg7ymP.js";import"./UniconSVGs-CVEtuhJW.js";import"./NetworkFilter-ZFjNguMa.js";import{AlertTriangleFilled as Qn}from"./AlertTriangleFilled-C9tf2eUJ.js";import"./ArrowDown-B8kFPZPX.js";import"./Blocked-BNx3Epiv.js";import"./CheckmarkCircle-Znmo2ojy.js";import"./CoinConvert-D8dLJ8GW.js";import"./CopyAlt-CU_LJNbN.js";import"./InfoCircleFilled-CBAL5Wj0.js";import"./ThemeToggle-BcuKj11V.js";import"./index.esm-CLP40SHA.js";import"./Passkey-Bey7xD4Z.js";import"./Person-B27R6hM-.js";import"./Pools-DKYxZO3F.js";import"./ReceiveAlt-nuO9D5GJ.js";import"./clipboard.web-CNSIHgMi.js";import"./SplitLogo-Ct--07LT.js";import"./WalletAlertBadge-ChtBPtO6.js";import"./reducer-CcXO4HTO.js";import{useSelectChain as Ni}from"./useSelectChain-CA5zoRWi.js";import"./tokens-Dxd89cHj.js";import{warningSeverity as Yn}from"./prices-BzyZhpWW.js";import"./useWallet-CpLwPvrh.js";import"./timing-DsWr56iv.js";import"./useIsUnichainFlashblocksEnabled-BbPYkimv.js";import{UniswapXOrderStatus as fe}from"./uniswapx-DgS0k47c.js";import"./experiments-rc6XUB0U.js";import"./SwapFormStoreContext-3NrPQE3L.js";import"./useSwapFormStore-D1oVGbBf.js";import"./swapTxAndGasInfo-DxVAGFqc.js";import"./types-NWGai6aQ.js";import"./useCurrencyInfo-Bxa3J04d.js";import"./createEthersProvider-B5AW2bpJ.js";import{addSuppressedPopups as Zn,removeSuppressedPopups as Jn}from"./reducer-1kwGyyVS.js";import"./constants-BNEwFtLH.js";import"./slice-CGCdMmTE.js";import"./actions-Budqlwp-.js";import"./slice-DoLbOto3.js";import"./slice-Crjw990S.js";import"./slice-CI92BTuM.js";import"./slice-CaJcHsUP.js";import{usePrevious as gt}from"./usePrevious-CggM0Zir.js";import{useAppDispatch as er}from"./hooks-Muz170pO.js";import"./types-00FZ6Wno.js";import"./chainParams-DIOvplzi.js";import"./util-BZ6kLG7e.js";import"./LimitDisclaimer-C4dN_xEH.js";import{useWETHContract as tr}from"./useContract-CKZ4cOLX.js";import"./UniswapInterfaceMulticall-DLE8QJ-2.js";import"./constants-CqzaOqD-.js";import"./Arrow-DIna6t35.js";import"./TokenLogo-JlSSDr3Q.js";import"./utils-CjNzOxi9.js";import{useAddOrder as ir,useOrder as Ft}from"./hooks-DB50ZKAa.js";import{useIsTransactionConfirmed as Mt,useTransaction as nr,useTransactionAdder as ki}from"./hooks-BA_A7Su9.js";import{useAccountDrawer as Di}from"./hooks-CRfHBoLD.js";import{SwapPriceUpdateUserResponse as rr}from"./types-DhBONJgE.js";import"./urlRoutes-Bn-NftBz.js";import"./use-transport-CPomNX05.js";import"./useEthersSigner-kdo6Ipah.js";import"./useModalState-BcPI2EiQ.js";import"./Tokens-HEKZ8edJ.js";import"./types-OmNOta2_.js";import{useMultichainContext as Te}from"./useMultichainContext-BVmgxqO2.js";import"./UnitagsApiClient-CvShPRCK.js";import{AnimationType as Bi,FadePresence as it,FadePresenceAnimationType as or,LoaderV3 as sr,useUnmountingAnimation as ar}from"./Identicon-SnsLMqUD.js";import"./api-u3dxy1Uz.js";import{DelegationMismatchModal_default as cr}from"./DelegationMismatchModal-CsNlr6c6.js";import{Divider as lr,useIsMismatchAccountQuery as ur,useRoutingAPITrade as At,useUSDPrice as lt}from"./Dividers-D5mIbKhU.js";import"./showSwitchNetworkNotification-C9hFtpTD.js";import"./useIsWindowVisible-CtuFA8fK.js";import{useBlockNumber as Li}from"./useBlockNumber-BeCJLIMW.js";import"./useIsMobile-Cq3RSgOi.js";import{Ae as We,We as $t,Xe as Ve,styled_components_default as C}from"./styled-components-DbVO3u5J.js";import{ThemedText as k}from"./text-CK4eXdYc.js";import"./index.esm-D6PJCa7X.js";import{require_prop_types as dr}from"./prop-types-BL9JsGr9.js";import{alert_triangle_default as pr}from"./alert-triangle-DFSqv9bh.js";import{arrow_down_default as mr}from"./arrow-down-DCHNWUQ6.js";import{arrow_right_default as fr}from"./arrow-right-pRMus0t-.js";import{OpenLimitOrdersButton as hr}from"./OpenLimitOrdersButton-Dx0HFPxC.js";import"./slash-ayZ3is1Y.js";import{x_default as vr}from"./x-CjDIEWOj.js";import{ClickableStyle as ke}from"./clickable-D5qUCIhr.js";import{ExternalLink as ut}from"./Links-Xomrvpth.js";import{useWeb3React as xr}from"./web3reactShim-CQtxnXhb.js";import{AutoColumn as ft,ColumnCenter as Ui,Column_default as qe}from"./Column-ekA0cfjc.js";import"./testIDs-CxYpwoP6.js";import"./useCommonTokensOptionsWithFallback-7qZUIHia.js";import{ArrowContainer as gr,ArrowWrapper as yr,SwapSection as _t}from"./styled-Cb09-IEr.js";import{Trace_default as Ie}from"./Trace-DgHN3Ak9.js";import{Modal as Tr}from"./Modal.web-DHbL39pN.js";import"./WarningModal-f8Gfhd_G.js";import{LearnMoreLink as wr}from"./LearnMoreLink-CrJtGK7U.js";import"./react-virtualized-auto-sizer.esm-5JBVmqYi.js";import"./types-Ds0gKmju.js";import"./dismissNativeKeyboard.web-99F1bxCR.js";import{WrapType as Ce}from"./wrap-ClUP-Vuk.js";import"./pools-5GjP-hMy.js";import"./ContextMenuV2.web-DtsTwCPj.js";import"./useBooleanState-QNOWYlXb.js";import"./service-ExploreStatsService_connectquery-YoP81iJ5.js";import"./useDeviceDimensions-iftoqxuy.js";import{StepStatus as te}from"./types-Ctc23WnH.js";import"./isIFramed-Ir4iCEzS.js";import{flexColumnNoWrap as br,flexRowNoWrap as Fi}from"./styles-nntGSkOP.js";import{RowBetween as Ir,RowFixed as oi,Row_default as Y}from"./Row-D0lmZ56K.js";import{MenuState as Ar,miniPortfolioMenuStateAtom as _r}from"./constants-Cf8nqJuy.js";import"./useSignInWithPasskey-m9q4-FpM.js";import"./PasskeysHelpModal-DejPGCoN.js";import"./usePasskeyAuthWithHelpModal-DfgGEzej.js";import"./api-PoolsService_connectquery-N1pfS4Yc.js";import"./StatusIcon-D9U7YL55.js";import"./currencyKey-B-LQIyOE.js";import"./EnvelopeHeart-DxsgNuRq.js";import{GetHelpHeader as Er}from"./GetHelpHeader-DB6Sgdgo.js";import"./Dialog-DZrFRjU_.js";import{tryParseCurrencyAmount as Pe}from"./tryParseCurrencyAmount-Bt3FPZDG.js";import"./PortfolioLogo-C-reBpb6.js";import{CurrencyLogo as xe}from"./CurrencyLogo-CvvmRzOI.js";import{DoubleCurrencyLogo as Or}from"./DoubleLogo-D40dQ2P7.js";import{LoadingOpacityContainer as Sr}from"./styled-qLLlrMEu.js";import{StyledNumericalInput as Mi}from"./NumericalInput-wkthWxek.js";import{CurrencySearchModal_default as $i}from"./CurrencySearchModal-CHoQ3krb.js";import{ReversedArrowsIcon as Cr}from"./iconExports-DR2SoqU0.js";import{maxAmountSpend as Pr}from"./maxAmountSpend-DXxbESLb.js";import{calculateGasMargin as Rr}from"./calculateGasMargin-D8W-u5un.js";import{MouseoverTooltip as Et}from"./Tooltip-DPNhKWF2.js";import"./useInterval-7f86mkEJ.js";import"./polished.es-BASfrnSv.js";import"./useHoverProps-BdQsOXMz.js";import"./DetailLineItem-d-0mcMrN.js";import{LoadingBubble as jr}from"./loading-C4pQN7jn.js";import{useUserSlippageTolerance as Nr}from"./hooks-ViKlw47o.js";import{colors as kr}from"./colors-DAHeqJj_.js";import{ThemeProvider as Dr}from"./theme-BHMiWygR.js";import"./useCurrentBlockTimestamp-Bm-OUlbk.js";import{require_dist as Wi}from"./dist-BxQUC-sk.js";import"./hooks-BCKOZK7U.js";import{useNativeCurrency as Vi}from"./useNativeCurrency-BDMzySGC.js";import"./useTokenAllowance-B1d-BbCj.js";import{useGetTransactionDeadline as Br}from"./useTransactionDeadline-CTg1dE5v.js";import{useColor as Lr}from"./useColor-DAHloagH.js";import{AllowanceState as V,SwapDetails as Ur,formatSwapPriceUpdatedEventProperties as Fr,usePermit2Allowance as Mr}from"./SwapDetails-CgubqLa5.js";import"./SwapLineItem-CkeBjgN3.js";$e();var ht=class{constructor(){this.orderInfo={additionalValidationContract:Re,additionalValidationData:"0x"}}deadline(e){return this.orderInfo.deadline=e,this}nonce(e){return this.orderInfo.nonce=e,this}swapper(e){return this.orderInfo.swapper=e,this}validation(e){return this.orderInfo.additionalValidationContract=e.additionalValidationContract,this.orderInfo.additionalValidationData=e.additionalValidationData,this}reactor(e){return this.orderInfo.reactor=e,this}getOrderInfo(){return m(this.orderInfo.reactor!==void 0,"reactor not set"),m(this.orderInfo.nonce!==void 0,"nonce not set"),m(this.orderInfo.deadline!==void 0,"deadline not set"),m(this.orderInfo.deadline>Date.now()/1e3,`Deadline must be in the future: ${this.orderInfo.deadline}`),m(this.orderInfo.swapper!==void 0,"swapper not set"),m(this.orderInfo.additionalValidationContract!==void 0,"validation contract not set"),m(this.orderInfo.additionalValidationData!==void 0,"validation data not set"),{reactor:this.orderInfo.reactor,swapper:this.orderInfo.swapper,nonce:this.orderInfo.nonce,deadline:this.orderInfo.deadline,additionalValidationContract:this.orderInfo.additionalValidationContract,additionalValidationData:this.orderInfo.additionalValidationData}}};$e();var $r=class qi extends ht{static fromOrder(t){const n=new qi(t.chainId,t.info.reactor).deadline(t.info.deadline).decayEndTime(t.info.decayEndTime).decayStartTime(t.info.decayStartTime).swapper(t.info.swapper).nonce(t.info.nonce).input(t.info.input).exclusiveFiller(t.info.exclusiveFiller,t.info.exclusivityOverrideBps).validation({additionalValidationContract:t.info.additionalValidationContract,additionalValidationData:t.info.additionalValidationData});for(const r of t.info.outputs)n.output(r);return n}constructor(t,n,r){super(),this.chainId=t,this.permit2Address=r;const s=ei[t]?ei[t][mt.Dutch]:void 0;if(n)this.reactor(n);else if(s)this.reactor(s);else throw new _n("reactor",t.toString());this.info={outputs:[],exclusiveFiller:Re,exclusivityOverrideBps:ee.from(0)}}decayStartTime(t){return this.info.decayStartTime=t,this}decayEndTime(t){return this.orderInfo.deadline===void 0&&super.deadline(t),this.info.decayEndTime=t,this}input(t){return this.info.input=t,this}output(t){return this.info.outputs||(this.info.outputs=[]),m(t.startAmount.gte(t.endAmount),`startAmount must be greater than endAmount: ${t.startAmount.toString()}`),this.info.outputs.push(t),this}deadline(t){return super.deadline(t),this.info.decayEndTime===void 0&&this.decayEndTime(t),this}swapper(t){return super.swapper(t),this}nonce(t){return super.nonce(t),this}validation(t){return super.validation(t),this}nonFeeRecipient(t,n){return m(t!==n,`newRecipient must be different from feeRecipient: ${t}`),this.info.outputs?(this.info.outputs=this.info.outputs.map(r=>n&&r.recipient.toLowerCase()===n.toLowerCase()?r:Object.assign(Object.assign({},r),{recipient:t})),this):this}exclusiveFiller(t,n){return this.info.exclusiveFiller=t,this.info.exclusivityOverrideBps=n,this}build(){return m(this.info.decayStartTime!==void 0,"decayStartTime not set"),m(this.info.input!==void 0,"input not set"),m(this.info.decayEndTime!==void 0,"decayEndTime not set"),m(this.info.exclusiveFiller!==void 0,"exclusiveFiller not set"),m(this.info.exclusivityOverrideBps!==void 0,"exclusivityOverrideBps not set"),m(this.info.outputs!==void 0&&this.info.outputs.length!==0,"outputs not set"),m(this.info.decayEndTime!==void 0||this.getOrderInfo().deadline!==void 0,"Must set either deadline or decayEndTime"),m(!this.orderInfo.deadline||this.info.decayStartTime<=this.orderInfo.deadline,`decayStartTime must be before or same as deadline: ${this.info.decayStartTime}`),m(!this.orderInfo.deadline||this.info.decayEndTime<=this.orderInfo.deadline,`decayEndTime must be before or same as deadline: ${this.info.decayEndTime}`),new Rn(Object.assign(this.getOrderInfo(),{decayStartTime:this.info.decayStartTime,decayEndTime:this.info.decayEndTime,exclusiveFiller:this.info.exclusiveFiller,exclusivityOverrideBps:this.info.exclusivityOverrideBps,input:this.info.input,outputs:this.info.outputs}),this.chainId,this.permit2Address)}};$e();var Wr=class Ki extends ht{static fromOrder(t){const n=new Ki(t.chainId,t.info.reactor).deadline(t.info.deadline).swapper(t.info.swapper).nonce(t.info.nonce).input(t.info.input).cosigner(t.info.cosigner).validation({additionalValidationContract:t.info.additionalValidationContract,additionalValidationData:t.info.additionalValidationData});for(const r of t.info.outputs)n.output(r);return t instanceof Zt&&(n.cosignature(t.info.cosignature),n.decayEndTime(t.info.cosignerData.decayEndTime),n.decayStartTime(t.info.cosignerData.decayStartTime),n.cosignerData(t.info.cosignerData)),n}constructor(t,n,r){super(),this.chainId=t,this.reactor(Dt(t,mt.Dutch_V2,n)),this.permit2Address=kt(t,r),this.info={outputs:[],cosignerData:{decayStartTime:0,decayEndTime:0,exclusiveFiller:Re,exclusivityOverrideBps:ee.from(0),inputOverride:ee.from(0),outputOverrides:[]}}}decayStartTime(t){return this.info.cosignerData?this.info.cosignerData.decayStartTime=t:this.initializeCosignerData({decayStartTime:t}),this}decayEndTime(t){return this.info.cosignerData?this.info.cosignerData.decayEndTime=t:this.initializeCosignerData({decayEndTime:t}),this.orderInfo.deadline||super.deadline(t),this}input(t){return this.info.input=t,this}output(t){var n;return m(t.startAmount.gte(t.endAmount),`startAmount must be greater than endAmount: ${t.startAmount.toString()}`),(n=this.info.outputs)===null||n===void 0||n.push(t),this}deadline(t){return super.deadline(t),this.info.cosignerData?this.info.cosignerData.decayEndTime||this.decayEndTime(t):this.initializeCosignerData({decayEndTime:t}),this}swapper(t){return super.swapper(t),this}nonce(t){return super.nonce(t),this}validation(t){return super.validation(t),this}nonFeeRecipient(t,n){return m(t!==n,`newRecipient must be different from feeRecipient: ${t}`),this.info.outputs?(this.info.outputs=this.info.outputs.map(r=>n&&r.recipient.toLowerCase()===n.toLowerCase()?r:Object.assign(Object.assign({},r),{recipient:t})),this):this}exclusiveFiller(t){return this.info.cosignerData||(this.info.cosignerData={decayStartTime:0,decayEndTime:0,exclusiveFiller:t,exclusivityOverrideBps:ee.from(0),inputOverride:ee.from(0),outputOverrides:[]}),this.info.cosignerData.exclusiveFiller=t,this}exclusivityOverrideBps(t){return this.info.cosignerData||(this.info.cosignerData={decayStartTime:0,decayEndTime:0,exclusiveFiller:Re,exclusivityOverrideBps:t,inputOverride:ee.from(0),outputOverrides:[]}),this.info.cosignerData.exclusivityOverrideBps=t,this}inputOverride(t){return this.info.cosignerData?this.info.cosignerData.inputOverride=t:this.initializeCosignerData({inputOverride:t}),this}outputOverrides(t){return this.info.cosignerData?this.info.cosignerData.outputOverrides=t:this.initializeCosignerData({outputOverrides:t}),this}cosigner(t){return this.info.cosigner=t,this}cosignature(t){return this.info.cosignature=t,this}cosignerData(t){return this.decayStartTime(t.decayStartTime),this.decayEndTime(t.decayEndTime),this.exclusiveFiller(t.exclusiveFiller),this.exclusivityOverrideBps(t.exclusivityOverrideBps),this.inputOverride(t.inputOverride),this.outputOverrides(t.outputOverrides),this}buildPartial(){var t,n;return m(this.info.cosigner!==void 0,"cosigner not set"),m(this.info.input!==void 0,"input not set"),m(this.info.outputs&&this.info.outputs.length>0,"outputs not set"),m(this.info.input!==void 0,"original input not set"),m(!this.orderInfo.deadline||this.info.cosignerData&&this.info.cosignerData.decayStartTime<=this.orderInfo.deadline,`if present, decayStartTime must be before or same as deadline: ${(t=this.info.cosignerData)===null||t===void 0?void 0:t.decayStartTime}`),m(!this.orderInfo.deadline||this.info.cosignerData&&this.info.cosignerData.decayEndTime<=this.orderInfo.deadline,`if present, decayEndTime must be before or same as deadline: ${(n=this.info.cosignerData)===null||n===void 0?void 0:n.decayEndTime}`),new On(Object.assign(this.getOrderInfo(),{input:this.info.input,outputs:this.info.outputs,cosigner:this.info.cosigner}),this.chainId,this.permit2Address)}build(){return m(this.info.cosigner!==void 0,"cosigner not set"),m(this.info.cosignature!==void 0,"cosignature not set"),m(this.info.input!==void 0,"input not set"),m(this.info.outputs&&this.info.outputs.length>0,"outputs not set"),m(this.info.cosignerData!==void 0,"cosignerData not set"),m(this.info.cosignerData.decayStartTime!==void 0,"decayStartTime not set"),m(this.info.cosignerData.decayEndTime!==void 0||this.orderInfo.deadline!==void 0,"Neither decayEndTime or deadline not set"),m(this.info.cosignerData.exclusiveFiller!==void 0,"exclusiveFiller not set"),m(this.info.cosignerData.exclusivityOverrideBps!==void 0,"exclusivityOverrideBps not set"),m(this.info.cosignerData.inputOverride.lte(this.info.input.startAmount),"inputOverride larger than original input"),m(this.info.cosignerData.outputOverrides.length>0,"outputOverrides not set"),this.info.cosignerData.outputOverrides.forEach((t,n)=>{m(t.gte(this.info.outputs[n].startAmount),"outputOverride must be larger than or equal to original output")}),m(this.info.input!==void 0,"original input not set"),m(!this.orderInfo.deadline||this.info.cosignerData.decayStartTime<=this.orderInfo.deadline,`decayStartTime must be before or same as deadline: ${this.info.cosignerData.decayStartTime}`),m(!this.orderInfo.deadline||this.info.cosignerData.decayEndTime<=this.orderInfo.deadline,`decayEndTime must be before or same as deadline: ${this.info.cosignerData.decayEndTime}`),new Zt(Object.assign(this.getOrderInfo(),{cosignerData:this.info.cosignerData,input:this.info.input,outputs:this.info.outputs,cosigner:this.info.cosigner,cosignature:this.info.cosignature}),this.chainId,this.permit2Address)}initializeCosignerData(t){this.info.cosignerData=Object.assign({decayStartTime:0,decayEndTime:0,exclusiveFiller:Re,exclusivityOverrideBps:ee.from(0),inputOverride:ee.from(0),outputOverrides:[]},t)}};$e();var Vr=class Hi extends ht{static fromOrder(t){const n=new Hi(t.chainId,t.info.reactor,t.permit2Address).deadline(t.info.deadline).swapper(t.info.swapper).nonce(t.info.nonce).input(t.info.input).auctionStartBlock(t.info.auctionStartBlock).baselinePriorityFeeWei(t.info.baselinePriorityFeeWei).cosigner(t.info.cosigner).validation({additionalValidationContract:t.info.additionalValidationContract,additionalValidationData:t.info.additionalValidationData});for(const r of t.info.outputs)n.output(r);return qr(t)&&(n.cosignature(t.info.cosignature),n.auctionTargetBlock(t.info.cosignerData.auctionTargetBlock)),n}constructor(t,n,r){super(),this.chainId=t,this.permit2Address=r,this.reactor(Dt(t,mt.Priority,n)),this.permit2Address=kt(t,r),this.info={cosignerData:{auctionTargetBlock:ee.from(0)},outputs:[]}}cosigner(t){return this.info.cosigner=t,this}auctionStartBlock(t){return this.info.auctionStartBlock=t,this}auctionTargetBlock(t){return this.info.cosignerData?this.info.cosignerData.auctionTargetBlock=t:this.info.cosignerData={auctionTargetBlock:t},this}baselinePriorityFeeWei(t){return this.info.baselinePriorityFeeWei=t,this}cosignerData(t){return this.info.cosignerData=t,this}cosignature(t){return this.info.cosignature=t,this}input(t){return this.info.input=t,this}output(t){return this.info.outputs||(this.info.outputs=[]),this.info.outputs.push(t),this}deadline(t){return super.deadline(t),this}swapper(t){return super.swapper(t),this}nonce(t){return super.nonce(t),this}validation(t){return super.validation(t),this}nonFeeRecipient(t,n){return m(t!==n,`newRecipient must be different from feeRecipient: ${t}`),this.info.outputs?(this.info.outputs=this.info.outputs.map(r=>n&&r.recipient.toLowerCase()===n.toLowerCase()?r:Object.assign(Object.assign({},r),{recipient:t})),this):this}buildPartial(){return m(this.info.input!==void 0,"input not set"),m(this.info.cosigner!==void 0,"cosigner not set"),m(this.info.baselinePriorityFeeWei!==void 0,"baselinePriorityFeeWei not set"),m(this.info.outputs!==void 0&&this.info.outputs.length!==0,"outputs not set"),m(this.info.auctionStartBlock!==void 0&&this.info.auctionStartBlock.gt(0),"auctionStartBlock not set"),m(!this.info.input.mpsPerPriorityFeeWei.eq(0)||this.info.outputs.every(t=>!t.mpsPerPriorityFeeWei.eq(0)),"Priority auction not configured"),m(!(this.info.input.mpsPerPriorityFeeWei.gt(0)&&this.info.outputs.every(t=>t.mpsPerPriorityFeeWei.gt(0))),"Can only configure priority auction on either input or output"),new En(Object.assign(this.getOrderInfo(),{cosigner:this.info.cosigner,auctionStartBlock:this.info.auctionStartBlock,baselinePriorityFeeWei:this.info.baselinePriorityFeeWei,input:this.info.input,outputs:this.info.outputs}),this.chainId,this.permit2Address)}build(){return m(this.info.input!==void 0,"input not set"),m(this.info.cosigner!==void 0,"cosigner not set"),m(this.info.cosignature!==void 0,"cosignature not set"),m(this.info.baselinePriorityFeeWei!==void 0,"baselinePriorityFeeWei not set"),m(this.info.outputs!==void 0&&this.info.outputs.length!==0,"outputs not set"),m(this.info.auctionStartBlock!==void 0&&this.info.auctionStartBlock.gt(0),"auctionStartBlock not set"),m(this.info.cosignerData!==void 0&&this.info.cosignerData.auctionTargetBlock.gt(0)&&this.info.cosignerData.auctionTargetBlock.lte(this.info.auctionStartBlock),"auctionTargetBlock not set properly"),m(!this.info.input.mpsPerPriorityFeeWei.eq(0)||this.info.outputs.every(t=>!t.mpsPerPriorityFeeWei.eq(0)),"Priority auction not configured"),m(!(this.info.input.mpsPerPriorityFeeWei.gt(0)&&this.info.outputs.some(t=>t.mpsPerPriorityFeeWei.gt(0))),"Can only configure priority auction on either input or output"),new An(Object.assign(this.getOrderInfo(),{cosigner:this.info.cosigner,auctionStartBlock:this.info.auctionStartBlock,baselinePriorityFeeWei:this.info.baselinePriorityFeeWei,input:this.info.input,outputs:this.info.outputs,cosignerData:this.info.cosignerData,cosignature:this.info.cosignature}),this.chainId,this.permit2Address)}};function qr(e){return e.info.cosignature!==void 0}$e();var Kr=class zi extends ht{static fromOrder(t){const n=new zi(t.chainId,t.info.reactor);return n.cosigner(t.info.cosigner).startingBaseFee(t.info.startingBaseFee).input(t.info.input).deadline(t.info.deadline).nonce(t.info.nonce).swapper(t.info.swapper).validation({additionalValidationContract:t.info.additionalValidationContract,additionalValidationData:t.info.additionalValidationData}),t.info.outputs.forEach(r=>{n.output(r)}),t instanceof Jt&&(n.cosignature(t.info.cosignature),n.decayStartBlock(t.info.cosignerData.decayStartBlock),n.exclusiveFiller(t.info.cosignerData.exclusiveFiller),n.inputOverride(t.info.cosignerData.inputOverride),n.exclusivityOverrideBps(t.info.cosignerData.exclusivityOverrideBps),n.outputOverrides(t.info.cosignerData.outputOverrides)),n}build(){return m(this.info.cosignature!==void 0,"cosignature not set"),this.checkUnsignedInvariants(this.info),this.checkCosignedInvariants(this.info),new Jt(Object.assign(this.getOrderInfo(),{cosignerData:this.info.cosignerData,startingBaseFee:this.info.startingBaseFee,input:this.info.input,outputs:this.info.outputs,cosigner:this.info.cosigner,cosignature:this.info.cosignature}),this.chainId,this.permit2Address)}constructor(t,n,r){super(),this.chainId=t,this.reactor(Dt(t,mt.Dutch_V3,n)),this.permit2Address=kt(t,r),this.info={outputs:[]},this.initializeCosignerData({})}cosigner(t){return this.info.cosigner=t,this}cosignature(t){return this.info.cosignature=t,this}decayStartBlock(t){return this.info.cosignerData?this.info.cosignerData.decayStartBlock=t:this.initializeCosignerData({decayStartBlock:t}),this}initializeCosignerData(t){this.info.cosignerData=Object.assign({decayStartBlock:0,exclusiveFiller:Re,exclusivityOverrideBps:ee.from(0),inputOverride:ee.from(0),outputOverrides:[]},t)}isRelativeBlocksIncreasing(t){let n=0;for(const r of t){if(r<=n)return!1;n=r}return!0}checkUnsignedInvariants(t){m(t.cosigner!==void 0,"cosigner not set"),m(t.startingBaseFee!==void 0,"startingBaseFee not set"),m(t.input!==void 0,"input not set"),m(t.outputs&&t.outputs.length>0,"outputs not set"),m(t.input.curve.relativeAmounts.length===t.input.curve.relativeBlocks.length,"relativeBlocks and relativeAmounts length mismatch"),m(this.isRelativeBlocksIncreasing(t.input.curve.relativeBlocks),"relativeBlocks not strictly increasing"),t.outputs.forEach(n=>{m(n.curve.relativeBlocks.length===n.curve.relativeAmounts.length,"relativeBlocks and relativeAmounts length mismatch"),m(this.isRelativeBlocksIncreasing(n.curve.relativeBlocks),"relativeBlocks not strictly increasing")}),m(this.orderInfo.deadline!==void 0,"deadline not set"),m(this.orderInfo.swapper!==void 0,"swapper not set")}checkCosignedInvariants(t){m(t.cosignerData!==void 0,"cosignerData not set"),m(t.cosignerData.decayStartBlock!==void 0,"decayStartBlock not set"),m(t.cosignerData.exclusiveFiller!==void 0,"exclusiveFiller not set"),m(t.cosignerData.exclusivityOverrideBps!==void 0,"exclusivityOverrideBps not set"),m(t.cosignerData.outputOverrides.length>0,"outputOverrides not set"),m(t.cosignerData.inputOverride.lte(this.info.input.startAmount),"inputOverride larger than original input"),t.cosignerData.outputOverrides.forEach((n,r)=>{n.toString()!="0"&&m(n.gte(this.info.outputs[r].startAmount),"outputOverride smaller than original output")})}startingBaseFee(t){return this.info.startingBaseFee=t,this}input(t){return this.info.input=t,this}output(t){var n;return(n=this.info.outputs)===null||n===void 0||n.push(t),this}inputOverride(t){return this.info.cosignerData?this.info.cosignerData.inputOverride=t:this.initializeCosignerData({inputOverride:t}),this}outputOverrides(t){return this.info.cosignerData?this.info.cosignerData.outputOverrides=t:this.initializeCosignerData({outputOverrides:t}),this}deadline(t){return super.deadline(t),this}swapper(t){return super.swapper(t),this}nonce(t){return super.nonce(t),this}validation(t){return super.validation(t),this}cosignerData(t){return this.decayStartBlock(t.decayStartBlock),this.exclusiveFiller(t.exclusiveFiller),this.exclusivityOverrideBps(t.exclusivityOverrideBps),this.inputOverride(t.inputOverride),this.outputOverrides(t.outputOverrides),this}exclusiveFiller(t){return this.info.cosignerData?this.info.cosignerData.exclusiveFiller=t:this.initializeCosignerData({exclusiveFiller:t}),this}exclusivityOverrideBps(t){return this.info.cosignerData?this.info.cosignerData.exclusivityOverrideBps=t:this.initializeCosignerData({exclusivityOverrideBps:t}),this}nonFeeRecipient(t,n){return m(t!==n,`newRecipient must be different from feeRecipient: ${t}`),this.info.outputs?(this.info.outputs=this.info.outputs.map(r=>n&&r.recipient.toLowerCase()===n.toLowerCase()?r:Object.assign(Object.assign({},r),{recipient:t})),this):this}buildPartial(){return this.checkUnsignedInvariants(this.info),new Sn(Object.assign(this.getOrderInfo(),{input:this.info.input,outputs:this.info.outputs,cosigner:this.info.cosigner,startingBaseFee:this.info.startingBaseFee}),this.chainId,this.permit2Address)}static getMaxAmountOut(t,n){if(n.length==0)return t;const r=n.reduce((o,a)=>a<o?a:o,BigInt(0));return t.sub(r.toString())}static getMinAmountOut(t,n){if(n.length==0)return t;const r=n.reduce((o,a)=>a>o?a:o,BigInt(0));return t.sub(r.toString())}},l=he(cn()),Qe=he(dr());function Ot(){return Ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(this,arguments)}function Hr(e,t){if(e==null)return{};var n=zr(e,t),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function zr(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var Wt=(0,l.forwardRef)(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=e.size,o=s===void 0?24:s,a=Hr(e,["color","size"]);return l.createElement("svg",Ot({ref:t,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),l.createElement("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),l.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}))});Wt.propTypes={color:Qe.default.string,size:Qe.default.oneOfType([Qe.default.string,Qe.default.number])};Wt.displayName="Lock";var Gr=Wt,i=he(mn());function Gi({trade:e}){const t=Ve(),{formatCurrencyAmount:n}=ye();return(0,i.jsxs)(Y,{gap:"sm",justify:"center",align:"center",children:[(0,i.jsx)(xe,{currency:e.inputAmount.currency,size:16}),(0,i.jsxs)(k.LabelSmall,{color:"neutral1",children:[n({value:e.inputAmount,type:ue.TokenTx})," ",e.inputAmount.currency.symbol]}),(0,i.jsx)(fr,{color:t.neutral1,size:"12px"}),(0,i.jsx)(xe,{currency:e.outputAmount.currency,size:16}),(0,i.jsxs)(k.LabelSmall,{color:"neutral1",children:[n({value:e.outputAmount,type:ue.TokenTx})," ",e.outputAmount.currency.symbol]})]})}const Xr="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap56 _justifyContent-center _alignItems-center ",Qr="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _backgroundColor-surface3 _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 _height-t-size-spac100347366 _width-t-size-spac100347366 _alignItems-center _justifyContent-center _mb-t-space-spa94665589 ",Yr="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-center _pt-t-space-spa94665593 _pr-t-space-spa94665593 _pb-t-space-spa94665593 _pl-t-space-spa94665593 _gap-t-space-spa94665593 ";let Q=(function(e){return e[e.TOKEN_APPROVAL_ERROR=0]="TOKEN_APPROVAL_ERROR",e[e.PERMIT_ERROR=1]="PERMIT_ERROR",e[e.XV2_HARD_QUOTE_ERROR=2]="XV2_HARD_QUOTE_ERROR",e[e.CONFIRMATION_ERROR=3]="CONFIRMATION_ERROR",e[e.WRAP_ERROR=4]="WRAP_ERROR",e})({});function Zr({errorType:e,trade:t}){switch(e){case Q.TOKEN_APPROVAL_ERROR:return{title:(0,i.jsx)(A,{i18nKey:"error.tokenApproval"}),message:(0,i.jsx)(A,{i18nKey:"error.tokenApproval.message"}),supportArticleURL:q.helpArticleUrls.approvalsExplainer};case Q.PERMIT_ERROR:return{title:(0,i.jsx)(A,{i18nKey:"permit.approval.fail"}),message:(0,i.jsx)(A,{i18nKey:"permit.approval.fail.message"}),supportArticleURL:q.helpArticleUrls.approvalsExplainer};case Q.XV2_HARD_QUOTE_ERROR:return{title:(0,i.jsx)(A,{i18nKey:"common.swap.failed"}),message:(0,i.jsx)(A,{i18nKey:"swap.fail.uniswapX"}),supportArticleURL:q.helpArticleUrls.uniswapXFailure};case Q.CONFIRMATION_ERROR:return re(t)?{title:(0,i.jsx)(A,{i18nKey:"common.limit.failed"}),supportArticleURL:q.helpArticleUrls.limitsFailure}:{title:(0,i.jsx)(A,{i18nKey:"common.swap.failed"}),message:(0,i.jsx)(A,{i18nKey:"swap.fail.message"}),supportArticleURL:Fe(t)?q.helpArticleUrls.uniswapXFailure:q.helpArticleUrls.transactionFailure};case Q.WRAP_ERROR:return{title:(0,i.jsx)(A,{i18nKey:"common.wrap.failed"}),message:(0,i.jsx)(A,{i18nKey:"token.wrap.fail.message"}),supportArticleURL:q.helpArticleUrls.wethExplainer};default:return{title:(0,i.jsx)(A,{i18nKey:"common.unknownError.error"}),message:(0,i.jsx)(A,{i18nKey:"common.swap.failed"})}}}function Jr({errorType:e,trade:t,showTrade:n,swapResult:r,onRetry:s}){const{title:o,message:a,supportArticleURL:d}=Zr({errorType:e,trade:t}),{t:u}=ve();return(0,i.jsxs)("div",{className:Yr,children:[(0,i.jsx)("div",{className:Qr,children:(0,i.jsx)(gi,{"data-testid":"pending-modal-failure-icon",size:"24px"})}),(0,i.jsx)(de,{variant:"subheading1",color:"$neutral1",mt:"$spacing8",children:o}),(0,i.jsx)(de,{variant:"body3",color:"$neutral2",children:a}),(0,i.jsxs)("div",{className:Xr,children:[n&&t&&(0,i.jsx)(Gi,{trade:t}),d&&(0,i.jsx)(wr,{url:d,centered:!0}),r&&r.type===oe.Classic&&(0,i.jsx)(ut,{href:Ti({chainId:r.response.chainId,data:r.response.hash,type:yi.TRANSACTION}),color:"neutral2",children:u("common.viewOnExplorer")})]}),(0,i.jsx)(Ct,{variant:"default",emphasis:"secondary",minHeight:"$spacing48",mt:"$spacing8",onPress:s,children:u("common.tryAgain.error")})]})}function eo({onDismiss:e,isLimitTrade:t,confirmModalState:n}){const r=t?(0,i.jsx)(A,{i18nKey:"swap.reviewLimit"}):(0,i.jsx)(A,{i18nKey:"swap.review"});return(0,i.jsx)(Er,{title:n===S.REVIEWING&&r,closeModal:e,closeDataTestId:"confirmation-close-icon"})}const to=C(ft)`
  background-color: ${({theme:e})=>e.surface1};
  width: 100%;
  padding: 8px;
  gap: 12px;
`;function io({children:e,onDismiss:t}){return(0,i.jsx)(Ie,{modal:Yt.ConfirmSwap,children:(0,i.jsx)(Tr,{name:Yt.SwapReview,isModalOpen:!0,onClose:t,padding:0,children:(0,i.jsx)(to,{children:e})})})}const no=$t`
  from { opacity: 0; transform: translateX(40px) }
  to { opacity: 1; transform: translateX(0px) }
`,ro=We`
  animation: ${no} ${({theme:e})=>`${e.transition.duration.medium} ${e.transition.timing.inOut}`};
`,oo=$t`
  from { opacity: 1; transform: translateX(0px) }
  to { opacity: 0; transform: translateX(-40px) }
`,so=We`
  animation: ${oo} ${({theme:e})=>`${e.transition.duration.medium} ${e.transition.timing.inOut}`};
`;vi();function ao(e){return e.orderHash!==void 0}const co=(e,t)=>e.status<200||e.status>202,Vt="https://interface.gateway.uniswap.org/v2";if(Vt===void 0)throw new Error("UNISWAP_GATEWAY_DNS_URL must be defined environment variables");async function lo(e,t){try{const n=await fetch(`${Vt}/nonce?address=${e.toLowerCase()}&chainId=${t}`),{nonce:r}=await n.json();return ee.from(r).add(1)}catch(n){return pt.error(n,{tags:{file:"useUniswapXSwapCallback",function:"getUpdatedNonce"}}),null}}function uo({trade:e,allowedSlippage:t,fiatValues:n}){const{t:r}=ve(),s=se(),o=(0,l.useRef)(s);o.current=s;const{chainId:a}=Te(),d=Si({chainId:a}),u=(0,l.useRef)(d);u.current=d;const c=Ei(),f=hi();return(0,l.useCallback)(async()=>{const p=o.current,x=u.current;if(p.status!=="connected")throw new Error("wallet not connected");if(!x)throw new Error("missing provider");if(!e)throw new Error("missing trade");const v=await x.getSigner().getChainId();if(p.chainId!==v||p.chainId!==a)throw new Ri;z(pe.UniswapXSignatureRequested,Se({trade:e,allowedSlippage:t,fiatValues:n,portfolioBalanceUsd:f,trace:c}));try{const y=await lo(p.address,e.inputAmount.currency.chainId),I=Math.floor(Date.now()/1e3);let E,_,b,P,O;if(e instanceof Dn){var h;E=I+e.deadlineBufferSecs;const j=e.order;O=Kr.fromOrder(j).deadline(E).nonFeeRecipient(p.address,(h=e.swapFee)===null||h===void 0?void 0:h.recipient).nonce(y??j.info.nonce).buildPartial(),{domain:_,types:b,values:P}=O.permitData()}else if(e instanceof kn){var w;E=I+e.deadlineBufferSecs;const j=e.order;O=Wr.fromOrder(j).deadline(E).nonFeeRecipient(p.address,(w=e.swapFee)===null||w===void 0?void 0:w.recipient).nonce(y??j.info.nonce).buildPartial(),{domain:_,types:b,values:P}=O.permitData()}else if(e instanceof Nn){var T;E=I+e.deadlineBufferSecs;const j=e.order;O=Vr.fromOrder(j).deadline(E).nonFeeRecipient(p.address,(T=e.swapFee)===null||T===void 0?void 0:T.recipient).nonce(y??j.info.nonce).buildPartial(),{domain:_,types:b,values:P}=O.permitData()}else{var g;const j=I+e.startTimeBufferSecs,G=j+e.auctionPeriodSecs;E=G+e.deadlineBufferSecs;const Z=e.asDutchOrderTrade({nonce:y,swapper:p.address}).order;O=$r.fromOrder(Z).decayStartTime(j).decayEndTime(G).deadline(E).nonFeeRecipient(p.address,(g=e.swapFee)===null||g===void 0?void 0:g.recipient).nonce(y??Z.info.nonce).build(),{domain:_,types:b,values:P}=O.permitData()}const F=await(async()=>{try{const j=u.current;if(!j)throw new Error("missing provider");const G=o.current;return await Xn({signer:j.getSigner(G.address),domain:_,types:b,value:P})}catch(j){throw Me(j)?new at(ct(r,j)):j}})(),M=Math.floor(Date.now()/1e3);if(E<M)throw z(pe.UniswapXSignatureDeadlineExpired,{...Se({trade:e,allowedSlippage:t,fiatValues:n,portfolioBalanceUsd:f,trace:c}),deadline:E,resultTime:M}),new st;z(je.SwapSigned,{...Se({trade:e,allowedSlippage:t,fiatValues:n,portfolioBalanceUsd:f,trace:c})});const K=O.serialize();let W,L;e.offchainOrderType===tt.DUTCH_V2_AUCTION?(W="rfq",L={encodedInnerOrder:K,innerSig:F,tokenInChainId:O.chainId,tokenOutChainId:O.chainId,requestId:e.requestId,quoteId:e.quoteId,forceOpenOrder:e.forceOpenOrder}):(W=e.offchainOrderType===tt.LIMIT_ORDER?"limit-order":"order",L={encodedOrder:K,orderType:e.offchainOrderType,signature:F,chainId:O.chainId,quoteId:e.quoteId,requestId:e.requestId});const H=await fetch(`${Vt}/${W}`,{method:"POST",body:JSON.stringify(L)}),U=await H.json();if(co(H,U))throw z(pe.UniswapXOrderPostError,{...Se({trade:e,allowedSlippage:t,fiatValues:n,portfolioBalanceUsd:f,trace:c}),errorCode:U.errorCode,detail:U.detail}),e.fillType===oe.UniswapXv2?new It:new Error(`${U.errorCode??U.detail??"Unknown error"}`);return z(pe.UniswapXOrderSubmitted,Se({trade:e,allowedSlippage:t,fiatValues:n,portfolioBalanceUsd:f,trace:c})),{type:e.offchainOrderType===tt.DUTCH_V2_AUCTION?oe.UniswapXv2:oe.UniswapX,response:{orderHash:ao(U)?U.orderHash:U.hash,deadline:O.info.deadline,encodedOrder:K}}}catch(y){throw y instanceof at||y instanceof st||y instanceof It?y:new Error(ct(r,y))}},[e,a,t,n,f,c,r])}function po(e){return/^0x0*$/.test(e)}var yt=he(Wi());Cn();var si=class extends Error{constructor(){super(Pi.t("swap.error.expectedToFail"))}},ai=class extends Error{constructor(){super(Pi.t("swap.error.modifiedByWallet"))}};function mo({trade:e,fiatValues:t,options:n}){const{t:r}=ve(),s=se(),o=(0,l.useRef)(s);o.current=s;const{chainId:a}=Te(),d=Si({chainId:a}),u=(0,l.useRef)(d);u.current=d;const c=Ei(),f=Li(),p=Br(),x=Nr()[0]==="auto",v=hi();return(0,l.useCallback)(async()=>{try{const h=o.current,w=u.current;if(h.status!=="connected")throw new Error("wallet not connected");if(!w)throw new Error("missing provider");if(!e)throw new Error("missing trade");const T=await w.getSigner().getChainId();if(h.chainId!==T||h.chainId!==a)throw new Ri;const g=await p(),{calldata:y,value:I}=yt.SwapRouter.swapCallParameters(e,{slippageTolerance:n.slippageTolerance,deadlineOrPreviousBlockhash:g==null?void 0:g.toString(),inputTokenPermit:n.permit,fee:n.feeOptions,flatFee:n.flatFeeOptions}),E={from:h.address,to:(0,yt.UNIVERSAL_ROUTER_ADDRESS)(yt.UniversalRouterVersion.V1_2,a),data:y,...I&&!po(I)?{value:Pn(I)}:{}};let _;try{const P=await w.estimateGas(E);_=Rr(P)}catch(P){z(je.SwapEstimateGasCallFailed,{...Mn({trade:e,allowedSlippage:n.slippageTolerance}),...c,client_block_number:f,txRequest:E,isAutoSlippage:x});const O=new Error("gas error",{cause:P});throw pt.warn("useUniversalRouter","useUniversalRouterSwapCallback","Failed to estimate gas",O),new si}const b=await(async()=>{try{const P=u.current;if(!P)throw new Error("missing provider");return await P.getSigner().sendTransaction({...E,gasLimit:_})}catch(P){throw Me(P)?new at(ct(r,P)):P}})();if(z(je.SwapSigned,{...Se({trade:e,allowedSlippage:n.slippageTolerance,fiatValues:t,txHash:b.hash,portfolioBalanceUsd:v,trace:c})}),E.data!==b.data&&(z(je.SwapModifiedInWallet,{txHash:b.hash,expected:E.data,actual:b.data,...c}),!b.data||b.data.length===0||b.data==="0x"))throw new ai;return{type:oe.Classic,response:b,deadline:g}}catch(h){throw h instanceof si||h instanceof at||h instanceof ai?h:Error(ct(r,h))}},[e,r,a,p,n.slippageTolerance,n.permit,n.feeOptions,n.flatFeeOptions,t,v,c,f,x])}vi();Ne();function fo(e){if(me(e)&&e.swapFee)return e.tradeType===le.EXACT_INPUT?{feeOptions:{fee:e.swapFee.percent,recipient:e.swapFee.recipient}}:{flatFeeOptions:{amount:ee.from(e.swapFee.amount),recipient:e.swapFee.recipient}}}function ho({trade:e,fiatValues:t,allowedSlippage:n,permitSignature:r}){const s=ki(),o=ir(),a=se(),d=Hn(a.chainId),{chainId:u}=Te(),c=uo({trade:Fe(e)?e:void 0,allowedSlippage:n,fiatValues:t}),f=mo({trade:me(e)?e:void 0,fiatValues:t,options:{slippageTolerance:n,permit:r,...fo(e)}}),p=Ni(),x=Fe(e)?c:f;return(0,l.useCallback)(async()=>{if(e){if(!a.isConnected||!a.address)throw new Error("wallet must be connected to swap");if(u)if(xi(u)){if((!d||d!==u)&&!await p(u))throw new Error("wallet must be connected to correct chain to swap")}else throw new Error("non EVM chain in legacy limits flow");else throw new Error("missing swap chainId")}else throw new Error("missing trade");const v=await x(),h={type:bt.Swap,inputCurrencyId:Xt(e.inputAmount.currency),outputCurrencyId:Xt(e.outputAmount.currency),isUniswapXOrder:v.type===oe.UniswapX||v.type===oe.UniswapXv2,...e.tradeType===le.EXACT_INPUT?{tradeType:le.EXACT_INPUT,inputCurrencyAmountRaw:e.inputAmount.quotient.toString(),expectedOutputCurrencyAmountRaw:e.outputAmount.quotient.toString(),minimumOutputCurrencyAmountRaw:e.minimumAmountOut(n).quotient.toString()}:{tradeType:le.EXACT_OUTPUT,maximumInputCurrencyAmountRaw:e.maximumAmountIn(n).quotient.toString(),outputCurrencyAmountRaw:e.outputAmount.quotient.toString(),expectedInputCurrencyAmountRaw:e.inputAmount.quotient.toString()}};switch(v.type){case oe.UniswapX:case oe.UniswapXv2:o({offerer:a.address,orderHash:v.response.orderHash,chainId:d,expiry:v.response.deadline,swapInfo:h,encodedOrder:v.response.encodedOrder,offchainOrderType:Fe(e)?e.offchainOrderType:tt.DUTCH_AUCTION});break;default:var w;s(v.response,h,(w=v.deadline)===null||w===void 0?void 0:w.toNumber())}return v},[a.address,a.isConnected,o,s,n,p,d,x,u,e])}function qt(e){const t=nr((e==null?void 0:e.type)===oe.Classic?e.response.hash:void 0);if(t)return t.status}const vo=C(Ui)`
  margin: 48px 0 8px;
`,xo=C(Ui)`
  ${({$disabled:e})=>e&&"opacity: 0.5;"}
  padding: 0 32px;
  overflow: visible;
`,go=C.div`
  position: relative;
  width: 100%;
  min-height: 72px;
  display: flex;
  flex-grow: 1;
`,yo=C(qe)`
  position: absolute;
  width: 100%;
  height: 100%;
  align-items: center;
  display: flex;
  flex-direction: column;
  transition: display ${({theme:e})=>`${e.transition.duration.medium} ${e.transition.timing.inOut}`};
  ${({disableEntranceAnimation:e})=>!e&&We`
      ${ro}
    `}

  &.${Bi.EXITING} {
    ${so}
  }
`;function To({t:e,trade:t,swapPending:n,swapConfirmed:r}){return re(t)?e(n?"swap.limitSubmitted":r?"swap.limitFilled":"swap.confirmLimit"):e(n?"swap.submitted":r?"swap.success":"swap.confirmSwap")}function wo({trade:e,swapResult:t,wrapTxHash:n,tokenApprovalPending:r=!1,revocationPending:s=!1}){const o=(0,l.useRef)(e).current,{chainId:a}=se(),{t:d}=ve(),u=qt(t),c=Ft(Lt(t==null?void 0:t.type)?t.response.orderHash:""),f=re(o)&&(c==null?void 0:c.status)===fe.OPEN,p=u===ot.Success||(c==null?void 0:c.status)===fe.FILLED,x=Mt(n),v=t!==void 0&&!p,h=n!=null&&!x,w=s||r||h||v,T=v&&a===et.Mainnet,g=p||a!==et.Mainnet&&v,y=(0,l.useRef)(null);ar({node:y,getAnimatingClass:()=>Bi.EXITING});const I=(0,l.useMemo)(()=>{let E;if(t&&t.type===oe.Classic)E=t.response.hash;else if(c&&c.status===fe.FILLED)E=c.txHash;else return;return Ti({chainId:a||et.Mainnet,data:E,type:yi.TRANSACTION})},[a,t,c]);return c&&c.status!==fe.OPEN&&c.status!==fe.FILLED?(0,i.jsx)(wn,{order:c}):(0,i.jsxs)(vo,{gap:"lg",children:[(0,i.jsxs)(Tn,{children:[g&&(0,i.jsx)(xn,{}),T&&(0,i.jsx)(gn,{}),!g&&!T&&(0,i.jsx)(yn,{})]}),(0,i.jsxs)(xo,{gap:"md",$disabled:w&&!f,children:[(0,i.jsx)(go,{children:(0,i.jsxs)(yo,{gap:"md",ref:y,disableEntranceAnimation:!0,children:[(0,i.jsx)(k.SubHeader,{width:"100%",textAlign:"center","data-testid":"pending-modal-content-title",children:To({t:d,trade:o,swapPending:v,swapConfirmed:p})}),o&&(0,i.jsx)(k.LabelSmall,{textAlign:"center",children:(0,i.jsx)(Gi,{trade:o})})]})}),!v&&!p&&(0,i.jsx)(Y,{justify:"center",marginTop:"32px",minHeight:"24px",children:(0,i.jsx)(k.BodySmall,{color:"neutral2",children:d("common.proceedInWallet")})}),c&&c.status===fe.OPEN&&(0,i.jsx)(Y,{justify:"center",marginTop:"32px",minHeight:"24px",children:(0,i.jsx)(k.BodySmall,{color:"neutral2",children:(0,i.jsx)(ut,{href:re(o)?q.helpArticleUrls.limitsInfo:q.helpArticleUrls.uniswapXInfo,children:re(o)?(0,i.jsx)(A,{i18nKey:"limits.learnMore"}):(0,i.jsx)(A,{i18nKey:"uniswapX.learnMore"})})})}),I&&(0,i.jsx)(Y,{justify:"center",marginTop:"32px",minHeight:"24px",children:(0,i.jsx)(k.BodySmall,{color:"neutral2",children:(0,i.jsx)(ut,{href:I,color:"neutral2",children:(0,i.jsx)(A,{i18nKey:"common.viewOnExplorer"})})})})]})]})}const bo=e=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","data-testid":"checkmark-icon",...e,children:(0,i.jsx)("path",{d:"M9.00002 17C8.99902 17 8.99802 17 8.99602 17C8.72902 16.999 8.47502 16.892 8.28802 16.702L4.28802 12.64C3.90002 12.246 3.90503 11.613 4.29903 11.226C4.69303 10.839 5.32502 10.843 5.71302 11.237L9.00602 14.581L18.294 5.29398C18.685 4.90298 19.317 4.90298 19.708 5.29398C20.099 5.68398 20.099 6.31798 19.708 6.70798L9.70801 16.708C9.52001 16.895 9.26502 17 9.00002 17Z",fill:"#40B66B"})}),Io="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center _gap-t-space-gap1569 _height-40px _pr-t-space-spa94665593 _pl-t-space-spa94665593 _pt-t-space-spa1360334076 _pb-t-space-spa1360334076 ",Ao="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _pr-t-space-spa1360334076 _justifyContent-space-betwe3241 ",Kt="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",ge=24,_o=$t`
  0% {
    transform: scale(1);
    opacity: 1;
  }
  100% {
    transform: scale(1.5);
    opacity: 0;
  }
`,Eo=C.div`
  position: absolute;
  width: ${ge}px;
  height: ${ge}px;
  border: 1px solid ${({$borderColor:e})=>e};
  border-radius: 50%;
  animation: ${({$animation:e})=>e} 1.5s linear infinite;
`;function Oo({rippleColor:e}){return e?(0,i.jsx)("div",{"data-testid":"icon-ripple-animation",className:Kt,children:(0,i.jsx)(Eo,{$borderColor:e,$animation:_o})}):null}function So({stepStatus:e,icon:t,rippleColor:n}){const r=e===te.Active;return e===te.InProgress?(0,i.jsx)(sr,{size:`${ge}px`,stroke:n,fill:n,"data-testid":"loader-icon"}):(0,i.jsxs)("div",{className:Kt,children:[r&&(0,i.jsx)(Oo,{rippleColor:n}),(0,i.jsx)(ji,{height:ge,width:ge,filter:r?"grayscale(0)":"grayscale(1)","data-testid":"step-icon",children:t})]})}function Co({stepStatus:e,stepDetails:t,isTimeRemaining:n}){switch(e){case te.Preview:return(0,i.jsx)(k.LabelSmall,{children:t.previewTitle});case te.Active:return(0,i.jsx)(k.BodySmall,{children:n?t.actionRequiredTitle:t.delayedStartTitle});case te.InProgress:return(0,i.jsx)(k.BodySmall,{children:n?t.inProgressTitle:null});case te.Complete:return(0,i.jsx)(k.LabelSmall,{children:t.previewTitle});default:return null}}const Po=C(k.LabelSmall)`
  font-variant-numeric: tabular-nums;
  padding-right: 8px;
`;function Ro({secondsRemaining:e}){const t=Math.floor(e/60),n=e%60,r=t<10?`0${t}`:t,s=n<10?`0${n}`:n,o=`${r}:${s}`;return(0,i.jsx)(Po,{"data-testid":"step-timer",children:o})}const jo=C(ut)`
  font-size: 12px;
  font-weight: 485px;
  line-height: 16px;
`;function No({stepStatus:e,stepDetails:t}){const[n,r]=(0,l.useState)(null);return(0,l.useEffect)(()=>{if(e===te.Active&&t.timeToStart)r(t.timeToStart);else{r(null);return}const s=setInterval(()=>{r(o=>o&&o>0?o-1:(clearInterval(s),0))},1e3);return()=>clearInterval(s)},[e,t.timeToStart]),(0,i.jsxs)("div",{className:Ao,children:[(0,i.jsxs)("div",{className:Io,children:[(0,i.jsx)(So,{stepStatus:e,icon:t.icon,rippleColor:t.rippleColor}),(0,i.jsxs)("div",{className:Kt,children:[(0,i.jsx)(Co,{stepStatus:e,stepDetails:t,isTimeRemaining:n===null||n>0}),e===te.Active&&t.learnMoreLinkHref&&(0,i.jsx)(jo,{href:t.learnMoreLinkHref||"",children:t.learnMoreLinkText})]})]}),n!==null&&(0,i.jsx)(Ro,{secondsRemaining:n}),e===te.Complete&&(0,i.jsx)(bo,{})]})}const ko=()=>(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("circle",{opacity:"0.24",cx:"12",cy:"12",r:"11.5",stroke:"#FC72FF"}),(0,i.jsx)("rect",{width:"24",height:"24",rx:"12",fill:"#FC72FF"}),(0,i.jsx)("path",{d:"M13.6297 16.1959C13.4577 16.2779 13.2567 16.3389 13.0292 16.3799L9.74417 16.9549C8.64917 17.1499 8.00411 16.6999 7.81411 15.6049L7.04422 11.2299C6.84922 10.1349 7.29919 9.48994 8.39419 9.29494L9.29312 9.13692C9.39562 9.11892 9.4852 9.20843 9.4667 9.31093L8.87869 12.6399C8.61369 14.1549 9.32865 15.1749 10.8387 15.4399C10.8387 15.4399 13.4482 15.8984 13.5827 15.9244C13.7487 15.9544 13.7752 16.1314 13.6297 16.1959ZM16.9562 9.55293L16.1841 13.9299C15.9981 14.9839 15.3902 15.4344 14.3677 15.2944C14.3287 15.2889 14.2937 15.2889 14.2532 15.2819L10.9706 14.7029C9.87611 14.5099 9.42568 13.8664 9.61868 12.7719L10.2902 8.96391L10.3907 8.39491C10.5837 7.30041 11.2272 6.84992 12.3217 7.04292L15.6046 7.62193C16.6986 7.81493 17.1492 8.45893 16.9562 9.55293ZM13.7766 12.9479C13.8126 12.7439 13.6767 12.5494 13.4727 12.5134L11.4207 12.1514C11.2177 12.1149 11.0222 12.2519 10.9867 12.4554C10.9507 12.6594 11.0867 12.8539 11.2907 12.8899L13.3427 13.2519C13.3647 13.2559 13.3866 13.2574 13.4081 13.2574C13.5866 13.2579 13.7446 13.1299 13.7766 12.9479ZM15.2981 11.5174C15.3341 11.3134 15.1982 11.1189 14.9942 11.0829L11.7117 10.5039C11.5097 10.4684 11.3131 10.6044 11.2776 10.8079C11.2416 11.0119 11.3777 11.2064 11.5817 11.2424L14.8642 11.8214C14.8862 11.8254 14.9082 11.8269 14.9297 11.8269C15.1082 11.8269 15.2661 11.6989 15.2981 11.5174ZM15.6482 9.88643C15.6842 9.68243 15.5481 9.48792 15.3441 9.45192L12.0617 8.87291C11.8597 8.83691 11.6632 8.97343 11.6277 9.17693C11.5917 9.38093 11.7277 9.57544 11.9317 9.61144L15.2141 10.1904C15.2361 10.1944 15.2582 10.1959 15.2797 10.1959C15.4582 10.1964 15.6162 10.0684 15.6482 9.88643Z",fill:"white"})]}),Do=()=>(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("rect",{width:"24",height:"24",rx:"12",fill:"#4C82FB"}),(0,i.jsx)("path",{d:"M10.6663 8.33325L13.6663 5.33325M13.6663 5.33325L16.6663 8.33325M13.6663 5.33325V11.9999M13.333 15.6666L10.333 18.6666M10.333 18.6666L7.33301 15.6666M10.333 18.6666L10.333 12.6666",stroke:"#F5F6FC",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"})]});function Bo(){const{provider:e}=xr(),t=Li(),[n,r]=(0,l.useState)(!1),[s,o]=(0,l.useState)(!1),[a,d]=(0,l.useState)(null);return(0,l.useEffect)(()=>{r(!0),o(!1);async function u(){if(!e||!t){r(!1);return}try{const[c,f]=await Promise.all([e.getBlock(t),e.getBlock(t-1)]);c.timestamp&&f.timestamp?d(c.timestamp-f.timestamp):(o(!0),d(null))}catch{o(!0),d(null)}r(!1)}u()},[t,e]),{loading:n,error:s,blockConfirmationTime:a}}const Lo="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _width-2px _height-10px _backgroundColor-neutral3 _ml-18px ",ci="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column ",Uo=C(qe)`
  height: 28px;
  padding: 0px 16px;
  justify-content: center;
`;function Fo({steps:e,currentStep:t,trade:n,swapResult:r,wrapTxHash:s,tokenApprovalPending:o=!1,revocationPending:a=!1,swapError:d,onRetryUniswapXSignature:u}){const{t:c}=ve(),{chainId:f}=se(),p=Vi(f),x=Lr(n==null?void 0:n.inputAmount.currency.wrapped),v=Ve(),{blockConfirmationTime:h}=Bo(),[w,T]=(0,l.useState)();(0,l.useEffect)(()=>{h&&!w&&T(Math.ceil(h*1.2))},[h,w]);const g=qt(r),y=Ft(Lt(r==null?void 0:r.type)?r.response.orderHash:""),I=g===ot.Success||(y==null?void 0:y.status)===fe.FILLED,E=Mt(s),_=r!==void 0&&!I,b=s!=null&&!E,P=a||o||b||_,[O,F]=(0,l.useState)("");(0,l.useEffect)(()=>{d instanceof st&&d.id!==O&&(F(d.id),u==null||u())},[u,O,d]);function M(W){const L=e.indexOf(t),H=e.indexOf(W);return L<H?te.Preview:L===H?P?te.InProgress:te.Active:te.Complete}const K=(0,l.useMemo)(()=>({[S.WRAPPING]:{icon:(0,i.jsx)(xe,{currency:n==null?void 0:n.inputAmount.currency,size:ge}),rippleColor:x,previewTitle:c("common.wrap",{symbol:p.symbol}),actionRequiredTitle:c("common.wrapIn",{symbol:p.symbol}),inProgressTitle:c("common.wrappingToken",{symbol:p.symbol}),learnMoreLinkText:c("common.whyWrap",{symbol:p.symbol}),learnMoreLinkHref:q.helpArticleUrls.wethExplainer},[S.RESETTING_TOKEN_ALLOWANCE]:{icon:(0,i.jsx)(xe,{currency:n==null?void 0:n.inputAmount.currency,size:ge}),rippleColor:x,previewTitle:c("common.resetLimit",{symbol:n==null?void 0:n.inputAmount.currency.symbol}),actionRequiredTitle:c("common.resetLimitWallet",{symbol:n==null?void 0:n.inputAmount.currency.symbol}),inProgressTitle:c("common.resettingLimit",{symbol:n==null?void 0:n.inputAmount.currency.symbol})},[S.APPROVING_TOKEN]:{icon:(0,i.jsx)(xe,{currency:n==null?void 0:n.inputAmount.currency,size:ge}),rippleColor:x,previewTitle:c("common.approveSpend",{symbol:n==null?void 0:n.inputAmount.currency.symbol}),actionRequiredTitle:c("common.wallet.approve"),inProgressTitle:c("common.approvePending"),learnMoreLinkText:c("common.whyApprove"),learnMoreLinkHref:q.helpArticleUrls.approvalsExplainer},[S.PERMITTING]:{icon:(0,i.jsx)(ko,{}),rippleColor:v.accent1,previewTitle:c("common.signMessage"),actionRequiredTitle:c("common.signMessageWallet"),learnMoreLinkText:c("common.whySign"),learnMoreLinkHref:q.helpArticleUrls.approvalsExplainer},[S.PENDING_CONFIRMATION]:{icon:(0,i.jsx)(Do,{}),rippleColor:kr.blue400,previewTitle:re(n)?c("common.confirm"):c("swap.confirmSwap"),actionRequiredTitle:re(n)?c("common.confirmWallet"):c("common.confirmSwap"),inProgressTitle:re(n)?c("common.pendingEllipsis"):c("common.swapPending"),...Kn(n)&&{timeToStart:n.order.info.deadline-Math.floor(Date.now()/1e3),delayedStartTitle:c("common.confirmTimedOut")},learnMoreLinkText:re(n)?c("limits.learnMore"):c("common.learnMoreSwap"),learnMoreLinkHref:re(n)?q.helpArticleUrls.limitsInfo:q.helpArticleUrls.howToSwapTokens}}),[n,x,c,p.symbol,v.accent1]);return e.length===0?null:(0,i.jsxs)("div",{className:ci,children:[(0,i.jsx)(Uo,{children:(0,i.jsx)(lr,{})}),e.map((W,L)=>(0,i.jsxs)("div",{className:ci,children:[(0,i.jsx)(No,{stepStatus:M(W),stepDetails:K[W]}),L!==e.length-1&&(0,i.jsx)("div",{className:Lo})]},`progress-indicator-step-${L}`))]})}Ne();const Mo=C(ft)`
  margin-top: 0px;
`;function $o({trade:e,inputCurrency:t,allowedSlippage:n}){const r=lt(e.inputAmount),s=lt(e.outputAmount);return(0,i.jsx)(Mo,{gap:"sm",children:(0,i.jsxs)(qe,{gap:"lg",children:[(0,i.jsx)(Qt,{field:B.INPUT,label:(0,i.jsx)(A,{i18nKey:"common.sell.label"}),amount:e.inputAmount,currency:t??e.inputAmount.currency,usdAmount:r.data,isLoading:rt(e)&&e.tradeType===le.EXACT_OUTPUT}),(0,i.jsx)(Qt,{field:B.OUTPUT,label:(0,i.jsx)(A,{i18nKey:"common.buy.label"}),amount:e.outputAmount,currency:e.outputAmount.currency,usdAmount:s.data,isLoading:rt(e)&&e.tradeType===le.EXACT_INPUT,tooltipText:e.tradeType===le.EXACT_INPUT?(0,i.jsx)(k.Caption,{children:(0,i.jsx)(A,{i18nKey:"swap.outputEstimated.atLeast",components:{amount:(0,i.jsxs)("b",{children:[e.minimumAmountOut(n).toSignificant(6)," ",e.outputAmount.currency.symbol]})}})}):(0,i.jsx)(k.Caption,{children:(0,i.jsx)(A,{i18nKey:"swap.inputEstimated.atMost",components:{amount:(0,i.jsxs)("b",{children:[e.maximumAmountIn(n).toSignificant(6)," ",e.inputAmount.currency.symbol]})}})})})]})})}const Wo=[Fn,Bn,Un,Ln],Tt={wrapType:Ce.NotApplicable};var Ue=(function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.ENTER_NATIVE_AMOUNT=1]="ENTER_NATIVE_AMOUNT",e[e.ENTER_WRAPPED_AMOUNT=2]="ENTER_WRAPPED_AMOUNT",e[e.INSUFFICIENT_NATIVE_BALANCE=3]="INSUFFICIENT_NATIVE_BALANCE",e[e.INSUFFICIENT_WRAPPED_BALANCE=4]="INSUFFICIENT_WRAPPED_BALANCE",e})(Ue||{});function Vo({inputCurrency:e,outputCurrency:t,typedValue:n}){const r=se(),{chainId:s}=Te(),o=tr(!0,s),a=(0,l.useRef)(o);a.current=o;const d=Ci(r.address,e??void 0),u=(0,l.useMemo)(()=>Pe(n,e??void 0),[e,n]),c=ki(),[f,p]=(0,l.useState)();if(f)throw f;return(0,l.useMemo)(()=>{if(!a.current||!s||!e||!t)return Tt;const x=ti[s];if(!x)return Tt;const v=!!(u!=null&&u.greaterThan("0")),h=u&&d&&!d.lessThan(u),w={token_in_address:ii(e),token_out_address:ii(t),token_in_symbol:e.symbol,token_out_symbol:t.symbol,chain_id:e.chainId,amount:u?$n(u,u.currency.decimals):void 0};return e.isNative&&x.equals(t)?{wrapType:Ce.Wrap,execute:h?async()=>{var T;const g=a.current;if(!g)throw new Error("wethContract is null");const y=await g.provider.getNetwork();if(y.chainId!==s||g.address!==((T=ti[y.chainId])===null||T===void 0?void 0:T.address)){z(pe.WrapTokenTxnInvalidated,{...w,contract_address:g.address,contract_chain_id:y.chainId,type:Ce.Wrap});const E=new Error(`Invalid WETH contract
Please file a bug detailing how this happened - https://github.com/Uniswap/interface/issues/new?labels=bug&template=bug-report.md&title=Invalid%20WETH%20contract`);throw p(E),E}const I=await g.deposit({value:`0x${u.quotient.toString(16)}`});return c(I,{type:bt.Wrap,unwrapped:!1,currencyAmountRaw:u.quotient.toString()}),z(pe.WrapTokenTxnSubmitted,{...w,transaction_hash:I.hash,type:Ce.Wrap}),I.hash}:void 0,inputError:h?void 0:v?Ue.INSUFFICIENT_NATIVE_BALANCE:Ue.ENTER_NATIVE_AMOUNT}:x.equals(e)&&t.isNative?{wrapType:Ce.Unwrap,execute:h?async()=>{try{const T=a.current;if(!T)throw new Error("wethContract is null");const g=await T.withdraw(`0x${u.quotient.toString(16)}`);return c(g,{type:bt.Wrap,unwrapped:!0,currencyAmountRaw:u.quotient.toString()}),z(pe.WrapTokenTxnSubmitted,{...w,transaction_hash:g.hash,type:Ce.Unwrap}),g.hash}catch(T){throw pt.warn("useWrapCallback","useWrapCallback","Failed to wrap",T),T}}:void 0,inputError:h?void 0:v?Ue.INSUFFICIENT_WRAPPED_BALANCE:Ue.ENTER_WRAPPED_AMOUNT}:Tt},[s,e,t,u,d,c])}function qo({currentTrade:e,newTrade:t,slippage:n}){return e.tradeType!==t.tradeType||!e.inputAmount.currency.equals(t.inputAmount.currency)||!e.outputAmount.currency.equals(t.outputAmount.currency)||t.executionPrice.lessThan(e.worstExecutionPrice(n))}function Ko({trade:e,originalTrade:t,allowedSlippage:n,onSwap:r,allowance:s,onCurrencySelection:o}){const[a,d]=(0,l.useState)(S.REVIEWING),[u,c]=(0,l.useState)(),[f,p]=(0,l.useState)([]),{formatCurrencyAmount:x}=ye(),v=se(),{chainId:h}=Te(),w=(0,l.useCallback)(()=>{const N=[];return Fe(e)&&e.wrapInfo.needsWrap&&N.push(S.WRAPPING),s.state===V.REQUIRED&&s.needsSetupApproval&&Wo.some(D=>D.equals(s.token))&&s.allowedAmount.greaterThan(0)&&N.push(S.RESETTING_TOKEN_ALLOWANCE),s.state===V.REQUIRED&&s.needsSetupApproval&&N.push(S.APPROVING_TOKEN),s.state===V.REQUIRED&&s.needsPermitSignature&&N.push(S.PERMITTING),N.push(S.PENDING_CONFIRMATION),N},[s,e]),T=Vi(h),[g,y]=(0,l.useState)(),{execute:I}=Vo({inputCurrency:T,outputCurrency:e.inputAmount.currency,typedValue:x({value:e.inputAmount,type:ue.SwapTradeAmount})}),E=Mt(g),_=gt(E),b=(0,l.useCallback)(async(N,D)=>{d(S.REVIEWING),!Me(N)&&(pt.warn("useConfirmModalState","catchUserReject","Failed to wrap",{error:N,trade:e}),c(D))},[e]),P=Ni(),O=(0,l.useCallback)(async N=>{switch(N){case S.WRAPPING:d(S.WRAPPING),I==null||I().then(D=>{y(D),o(B.INPUT,e.inputAmount.currency,!0)}).catch(D=>b(D,Q.WRAP_ERROR));break;case S.RESETTING_TOKEN_ALLOWANCE:d(S.RESETTING_TOKEN_ALLOWANCE),m(s.state===V.REQUIRED,"Allowance should be required"),s.revoke().catch(D=>b(D,Q.TOKEN_APPROVAL_ERROR));break;case S.APPROVING_TOKEN:d(S.APPROVING_TOKEN),m(s.state===V.REQUIRED,"Allowance should be required"),s.approve().catch(D=>b(D,Q.TOKEN_APPROVAL_ERROR));break;case S.PERMITTING:d(S.PERMITTING),m(s.state===V.REQUIRED,"Allowance should be required"),s.permit().catch(D=>b(D,Q.TOKEN_APPROVAL_ERROR));break;case S.PENDING_CONFIRMATION:d(S.PENDING_CONFIRMATION);try{r()}catch(D){b(D,Q.CONFIRMATION_ERROR)}break;default:d(S.REVIEWING);break}},[I,s,o,e,b,r]),F=(0,l.useCallback)(async()=>{if(h&&h!==v.chainId&&!await P(h))return;const N=w();p(N),O(N[0])},[v.chainId,h,w,O,P]),M=gt(s.state===V.REQUIRED?s.needsSetupApproval:void 0);(0,l.useEffect)(()=>{E&&!_&&O(f[1])},[f,O,_,E]),(0,l.useEffect)(()=>{s.state===V.REQUIRED&&s.needsPermitSignature&&!s.needsSetupApproval&&M&&O(S.PERMITTING)},[s,O,M]);const K=gt(s.state===V.REQUIRED&&s.isRevocationPending);(0,l.useEffect)(()=>{s.state===V.REQUIRED&&K&&!s.isRevocationPending&&O(S.APPROVING_TOKEN)},[s,O,K]);function W(N){return N===S.RESETTING_TOKEN_ALLOWANCE||N===S.APPROVING_TOKEN||N===S.PERMITTING}const L=t&&qo({currentTrade:e,newTrade:t,slippage:n});(0,l.useEffect)(()=>{if(W(a)&&s.state===V.ALLOWED){if(L){d(S.REVIEWING);return}O(S.PENDING_CONFIRMATION)}},[s,a,L,O]);const H=()=>{d(S.REVIEWING)},U=()=>{d(S.REVIEWING),c(void 0)},[j,G]=(0,l.useState)(e.executionPrice),[Z,ne]=(0,l.useState)();return(0,l.useEffect)(()=>{e.executionPrice.equalTo(j)||(ne(Wn(j,e.executionPrice)),G(e.executionPrice))},[j,G,e]),{startSwapFlow:F,resetToReviewScreen:H,onCancel:U,confirmModalState:a,doesTradeDiffer:L,approvalError:u,pendingModalSteps:f,priceUpdate:Z,wrapTxHash:g}}function Ho(e){const t=er(),n=(0,l.useCallback)(()=>t(Zn({popupTypes:e})),[t,e]),r=(0,l.useCallback)(()=>t(Jn({popupTypes:e})),[t,e]);return{suppressPopups:n,unsuppressPopups:r}}const Oe=C.div`
  height: ${({$height:e})=>e??""};
  padding: ${({$padding:e})=>e??""};
`;let S=(function(e){return e[e.REVIEWING=0]="REVIEWING",e[e.WRAPPING=1]="WRAPPING",e[e.RESETTING_TOKEN_ALLOWANCE=2]="RESETTING_TOKEN_ALLOWANCE",e[e.APPROVING_TOKEN=3]="APPROVING_TOKEN",e[e.PERMITTING=4]="PERMITTING",e[e.PENDING_CONFIRMATION=5]="PENDING_CONFIRMATION",e})({});function zo({trade:e,originalTrade:t,inputCurrency:n,allowance:r,allowedSlippage:s,fiatValueInput:o,fiatValueOutput:a,swapResult:d,swapError:u,clearSwapState:c,onAcceptChanges:f,onConfirm:p,onCurrencySelection:x,onDismiss:v,onXV2RetryWithClassic:h}){const{confirmModalState:w,pendingModalSteps:T,priceUpdate:g,doesTradeDiffer:y,approvalError:I,wrapTxHash:E,startSwapFlow:_,onCancel:b,resetToReviewScreen:P}=Ko({trade:e,originalTrade:t,allowance:r,allowedSlippage:s,onCurrencySelection:x,onSwap:()=>{c(),p()}}),O=qt(d),F=Ft(Lt(d==null?void 0:d.type)?d.response.orderHash:""),M=O===ot.Success||(F==null?void 0:F.status)===fe.FILLED,K=re(e)&&(F==null?void 0:F.status)===fe.OPEN,W=!!u&&!Me(u),L=O===ot.Failed,H=W||L,U=(0,l.useMemo)(()=>{if(I)return I;if(!(u instanceof st)){if(u instanceof It)return Q.XV2_HARD_QUOTE_ERROR;if(u&&!Me(u))return Q.CONFIRMATION_ERROR}},[I,u]),{showPreview:j,showDetails:G,showProgressIndicator:Z,showAcceptChanges:ne,showConfirming:N,showSuccess:D,showError:ae}=(0,l.useMemo)(()=>{const ze=w!==S.PENDING_CONFIRMATION&&y;let we,Ae,_e,De,Ge,Be;return U?Be=!0:M||K?Ge=!0:w===S.REVIEWING||ze?(we=!0,Ae=!0):T.length>1?(we=!0,_e=!0):De=!0,{showPreview:we,showDetails:Ae,showProgressIndicator:_e,showAcceptChanges:ze,showConfirming:De,showSuccess:Ge,showError:Be}},[w,y,U,K,T.length,M]);(0,l.useEffect)(()=>{u&&!H&&b()},[b,u,H]);const{suppressPopups:J,unsuppressPopups:Ke}=Ho([ni.Transaction,ni.Order]),He=(0,l.useCallback)(()=>{y&&w!==S.PENDING_CONFIRMATION&&z(je.SwapPriceUpdateAcknowledged,Fr({trade:e,priceUpdate:g,response:rr.REJECTED})),v(),setTimeout(()=>{b()},ln),Ke()},[w,y,b,v,g,Ke,e]);return(0,i.jsx)(Dr,{children:(0,i.jsxs)(io,{onDismiss:He,children:[(0,i.jsx)(Oe,{$height:"24px",$padding:"6px 12px 4px 12px",children:(0,i.jsx)(eo,{onDismiss:He,isLimitTrade:re(e),confirmModalState:w})}),j&&(0,i.jsx)(Oe,{$padding:"12px 12px 0px 12px",children:(0,i.jsx)($o,{inputCurrency:n,trade:e,allowedSlippage:s})}),G&&(0,i.jsx)(Oe,{children:(0,i.jsx)(it,{children:(0,i.jsx)(ft,{gap:"md",children:(0,i.jsx)(Ur,{onConfirm:()=>{J(),_()},inputCurrency:n,trade:e,allowance:r,swapResult:d,allowedSlippage:s,isLoading:rt(e),disabledConfirm:ne||rt(e)||r.state===V.LOADING,fiatValueInput:o,fiatValueOutput:a,showAcceptChanges:!!ne,onAcceptChanges:f,swapErrorMessage:H?u==null?void 0:u.message:void 0})})})}),w!==S.REVIEWING&&Z&&(0,i.jsx)(Oe,{children:(0,i.jsx)(it,{children:(0,i.jsx)(Fo,{steps:T,currentStep:w,trade:e,swapResult:d,wrapTxHash:E,tokenApprovalPending:r.state===V.REQUIRED&&r.isApprovalPending,revocationPending:r.state===V.REQUIRED&&r.isRevocationPending,swapError:u,onRetryUniswapXSignature:p})})}),(N||D)&&(0,i.jsx)(Oe,{children:(0,i.jsx)(it,{children:(0,i.jsx)(wo,{trade:e,swapResult:d,wrapTxHash:E,tokenApprovalPending:r.state===V.REQUIRED&&r.isApprovalPending,revocationPending:r.state===V.REQUIRED&&r.isRevocationPending})})}),U&&ae&&(0,i.jsx)(Oe,{$padding:"16px",children:(0,i.jsx)(Jr,{trade:e,showTrade:U!==Q.XV2_HARD_QUOTE_ERROR,swapResult:d,errorType:U,onRetry:()=>{U===Q.XV2_HARD_QUOTE_ERROR?(h==null||h(),P()):_()}})})]})})}const Go=We`
  border-radius: 999px;
  border: 1px solid ${({theme:e})=>e.surface3};
`,Xo=We`
  border-radius: 999px 0px 0px 999px;
  border-top: 1px solid ${({theme:e})=>e.surface3};
  border-bottom: 1px solid ${({theme:e})=>e.surface3};
  border-left: 1px solid ${({theme:e})=>e.surface3};
  border-right: 0px;
`,Xi=C.button`
  color: ${({theme:e,$selected:t,$disabled:n,$highlighted:r})=>r||t&&!n?e.neutral1:e.neutral2};
  padding: 2px 8px;
  height: 28px;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: ${({theme:e,$highlighted:t,$selected:n})=>t||n?e.surface3:"unset"};
  ${({$highlighted:e})=>e?Xo:Go};
  ${({$disabled:e})=>!e&&ke};
`,Qo=C.button`
  ${ke}
  background-color: ${({theme:e})=>e.surface3};
  color: ${({theme:e})=>e.neutral2};
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 6px 6px 6px 4px;
  height: 28px;
  border-radius: 0px 999px 999px 0px;
  border-top: 1px solid ${({theme:e})=>e.surface3};
  border-bottom: 1px solid ${({theme:e})=>e.surface3};
  border-right: 1px solid ${({theme:e})=>e.surface3};
  border-left: 1px solid transparent;
`;function Yo({priceAdjustmentPercentage:e,selected:t,disabled:n,onSelect:r}){const{formatPercent:s}=ye(),o=e>0?"+":"-";return(0,i.jsx)(Xi,{$selected:t,$disabled:n,$highlighted:!1,onClick:()=>!n&&r(e),children:e===0?(0,i.jsx)(k.BodySecondary,{fontWeight:535,color:"inherit",children:(0,i.jsx)(A,{i18nKey:"common.market.label"})}):(0,i.jsxs)(k.BodySecondary,{fontWeight:535,color:"inherit",children:[o,s(Math.abs(e))]})})}function Zo({customAdjustmentPercentage:e,selected:t,disabled:n,onSelect:r}){const s=()=>!n&&r(0),{formatPercent:o}=ye();return(0,i.jsxs)(Y,{width:"unset",gap:"1px",children:[(0,i.jsx)(Xi,{$selected:t,$disabled:n,$highlighted:e!==void 0,onClick:s,children:e?(0,i.jsxs)(k.BodySecondary,{color:"inherit",fontWeight:535,children:[e>0?"+":"",o(e)]}):(0,i.jsx)(k.BodySecondary,{color:"inherit",fontWeight:535,children:(0,i.jsx)(A,{i18nKey:"common.market.label"})})}),e&&(0,i.jsx)(Qo,{onClick:s,children:(0,i.jsx)(vr,{size:16})})]})}const Jo=C.span`
  display: inline-block;
  margin: 0 8px;
`,es=C(Y)`
  ${ke}
`;function ts({currency:e,showCurrencyMessage:t,openCurrencySearchModal:n}){return!e||!t?(0,i.jsx)(k.LabelSmall,{style:{userSelect:"none"},children:(0,i.jsx)(A,{i18nKey:"limits.price.label"})}):(0,i.jsx)(de,{variant:"body3",userSelect:"none",color:"$neutral2",children:(0,i.jsx)(Y,{align:"center",children:(0,i.jsx)(A,{i18nKey:"limits.price.input.label",components:{tokenSymbol:(0,i.jsx)(Jo,{children:(0,i.jsx)(Rt,{children:(0,i.jsxs)(es,{gap:"xs",align:"center",height:"100%",onClick:n,children:[(0,i.jsx)(xe,{currency:e,size:16}),(0,i.jsx)(k.BodyPrimary,{display:"inline",children:e.symbol})]})})})}})})})}Ne();var is=he(wi());Pt();let dt=(function(e){return e.CALCULATION_ERROR="CALCULATION_ERROR",e.BELOW_MARKET="BELOW_MARKET",e})({});function Qi({parsedLimitPrice:e,marketPrice:t,baseCurrency:n,quoteCurrency:r,limitPriceInverted:s}){return(0,l.useMemo)(()=>{if(!e||!t||!n||!r||!e.baseCurrency.equals(n))return{currentPriceAdjustment:void 0,priceError:dt.CALCULATION_ERROR};const o=ce.fromRawAmount(n,X.BigInt((0,is.parseUnits)("1",n.decimals))),a=t.quote(o),d=e.quote(o),u=X.exponentiate(X.BigInt(10),X.BigInt(18)),c=X.BigInt(a.multiply(u).toFixed(0)),f=X.BigInt(d.multiply(u).toFixed(0)),p=X.subtract(f,c),x=new fn(p,c),v=Math.round(Number(x.multiply(100).toFixed(2))),h=s?v>0:v<0;return{currentPriceAdjustment:v,priceError:h?dt.BELOW_MARKET:void 0}},[e,t,n,r,s])}const ns=({title:e,titleId:t,...n},r)=>l.createElement("svg",{width:12,height:7,viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:r,"aria-labelledby":t,...n},e?l.createElement("title",{id:t},e):null,l.createElement("path",{d:"M0.97168 1L6.20532 6L11.439 1",stroke:"#AEAEAE"})),rs=(0,l.forwardRef)(ns),os="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap56 ";function ss({fiatValue:e,priceImpact:t,testId:n}){const{formatPercent:r,convertFiatAmountFormatted:s}=ye(),o=(0,l.useMemo)(()=>{if(!t)return;if(t.lessThan("0"))return"$statusSuccess";const a=Yn(t);return a<1?"$neutral3":a<3?"$statusWarning":"$statusCritical"},[t]);return e.isLoading?(0,i.jsx)(jr,{borderRadius:"$rounded4",width:64,height:14}):(0,i.jsxs)("div",{className:os,children:[(0,i.jsx)(de,{variant:"body3",color:"$neutral2","data-testid":n,children:e.data?s(e.data,ue.FiatTokenPrice):(0,i.jsx)(Et,{text:(0,i.jsx)(A,{i18nKey:"liquidity.notEnough.label"}),children:"-"})}),t&&(0,i.jsx)(de,{variant:"body3",color:o,children:(0,i.jsxs)(Et,{placement:"right",text:(0,i.jsx)(A,{i18nKey:"swap.estimatedDifference.label"}),children:["(",r(t.multiply(-1).toSignificant()),")"]})})]})}function Yi(e){return e&&e.symbol&&e.symbol.length>20?e.symbol.slice(0,4)+"..."+e.symbol.slice(e.symbol.length-5,e.symbol.length):e==null?void 0:e.symbol}var as=he(bi());const cs="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-1 _flexDirection-column _flexGrow-1 ",Zi=C.div`
  ${br};
  position: relative;
  border-radius: ${({hideInput:e})=>e?"16px":"20px"};
  z-index: 1;
  width: ${({hideInput:e})=>e?"100%":"initial"};
  transition: height 1s ease;
  will-change: height;
`,ls=C.div`
  width: 100%;
  height: 100%;
  position: absolute;
  border-radius: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2;
`,us=C.div`
  min-height: 44px;
  border-radius: ${({hideInput:e})=>e?"16px":"20px"};
  width: ${({hideInput:e})=>e?"100%":"initial"};
`,ds=C.button`
  align-items: center;
  background-color: ${({selected:e,theme:t})=>e?t.surface1:t.accent1};
  opacity: ${({disabled:e})=>e?.4:1};
  color: ${({selected:e,theme:t})=>e?t.neutral1:t.neutralContrast};
  cursor: pointer;
  height: 36px;
  border-radius: 18px;
  outline: none;
  user-select: none;
  border: 1px solid ${({selected:e,theme:t})=>e?t.surface3:t.accent1};
  font-size: 16px;
  font-weight: 485;
  width: ${({hideInput:e})=>e?"100%":"initial"};
  padding: ${({selected:e})=>e?"4px 8px 4px 4px":"6px 6px 6px 8px"};
  gap: 8px;
  justify-content: space-between;
  margin-left: ${({hideInput:e})=>e?"0":"12px"};
  box-shadow: ${({theme:e})=>e.deprecated_shallowShadow};

  &:hover,
  &:active {
    background-color: ${({theme:e,selected:t})=>t?e.surface1Hovered:e.accent1Hovered};
  }

  &:before {
    background-size: 100%;
    border-radius: inherit;

    position: absolute;
    top: 0;
    left: 0;

    width: 100%;
    height: 100%;
    content: '';
  }

  ${({hideInput:e,theme:t})=>e&&`
      &:hover:before {
        background-color: ${t.deprecated_stateOverlayHover};
      }

      &:active:before {
        background-color: ${t.deprecated_stateOverlayPressed};
      }
    `}

  visibility: ${({visible:e})=>e?"visible":"hidden"};

  @keyframes horizontal-shaking {
    0% {
      transform: translateX(0);
      animation-timing-function: ease-in-out;
    }
    20% {
      transform: translateX(10px);
      animation-timing-function: ease-in-out;
    }
    40% {
      transform: translateX(-10px);
      animation-timing-function: ease-in-out;
    }
    60% {
      transform: translateX(10px);
      animation-timing-function: ease-in-out;
    }
    80% {
      transform: translateX(-10px);
      animation-timing-function: ease-in-out;
    }
    100% {
      transform: translateX(0);
      animation-timing-function: ease-in-out;
    }
  }
  animation: ${({animateShake:e})=>e?"horizontal-shaking 300ms":"none"};
`,ps=C.div`
  ${Fi};
  align-items: center;
  justify-content: space-between;
  margin-top: 4px;
`,ms=C.div`
  ${Fi};
  align-items: center;
  color: ${({theme:e})=>e.neutral2};
  font-size: 12px;
  line-height: 1rem;
`,fs=C(ms)`
  justify-content: flex-end;
  min-height: 24px;
  padding: 8px 0px 0px 0px;
`,hs=C.span`
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
`,vs=C(rs)`
  margin: 0 0.25rem 0 0.35rem;
  height: 35%;
  margin-left: 8px;

  path {
    stroke: ${({selected:e,theme:t})=>e?t.neutral1:t.neutralContrast};
    stroke-width: 2px;
  }
`,li=C.span`
  ${({active:e})=>"  margin: 0 0.25rem 0 0.25rem;"}
  font-size: 16px;
  font-weight: 535;
`,Ji=(0,l.forwardRef)(({value:e,onUserInput:t,onMax:n,showMaxButton:r,onCurrencySelect:s,currency:o,otherCurrency:a,id:d,renderBalance:u,fiatValue:c,priceImpact:f,hideBalance:p=!1,pair:x=null,hideInput:v=!1,locked:h=!1,loading:w=!1,disabled:T=!1,initialCurrencyLoading:g=!1,currencyField:y,numericalInputSettings:I,label:E,..._},b)=>{const[P,O]=(0,l.useState)(!1),F=se(),{chainId:M,isUserSelectedToken:K}=Te(),W=_i(M),L=Ci(F.address,o??void 0),H=Ve(),{formatCurrencyAmount:U}=ye(),{t:j}=ve(),G=(0,l.useCallback)(()=>{O(!1)},[O]),[Z,ne]=(0,l.useState)(!1),N=(0,l.useCallback)(()=>{if(I!=null&&I.disabled&&!Z){var J;ne(!0),setTimeout(()=>ne(!1),(0,as.default)("4s")),(J=I.onDisabledClick)===null||J===void 0||J.call(I)}},[Z,I]);(0,l.useEffect)(()=>ne(!1),[o]);const D=g&&!a&&!K&&y===B.INPUT,ae=!!(!W||T||I!=null&&I.disabled);return(0,i.jsxs)(Zi,{id:d,hideInput:v,..._,children:[h&&(0,i.jsx)(ls,{children:(0,i.jsxs)(ft,{gap:"sm",justify:"center",children:[(0,i.jsx)(Gr,{}),(0,i.jsx)(de,{variant:"body2",textAlign:"center",px:"$spacing12",children:(0,i.jsx)(A,{i18nKey:"swap.marketPrice.outsideRange.label"})})]})}),(0,i.jsxs)(us,{hideInput:v,children:[(0,i.jsx)(de,{variant:"body3",userSelect:"none",color:"$neutral2",children:E}),(0,i.jsxs)(ps,{style:v?{padding:"0",borderRadius:"8px"}:{},children:[!v&&(0,i.jsx)("div",{onClick:N,className:cs,children:(0,i.jsx)(Mi,{className:"token-amount-input",value:e,onUserInput:t,disabled:ae,$loading:w,id:d,ref:b,maxDecimals:o==null?void 0:o.decimals,style:{width:"100%"}})}),(0,i.jsx)(Rt,{children:(0,i.jsx)(Et,{disabled:!0,forceShow:Z&&!P,placement:"bottom",offsetY:14,text:I==null?void 0:I.disabledTooltipBody,children:(0,i.jsx)(ds,{disabled:!W||T||D,visible:o!==void 0,selected:!!o,hideInput:v,"data-testid":`currency-${o==null?void 0:o.chainId}-${o==null?void 0:o.symbol}`,className:"open-currency-select-button",onClick:()=>{s&&O(!0)},animateShake:Z,children:(0,i.jsxs)(hs,{children:[(0,i.jsx)(oi,{children:(0,i.jsx)(un,{children:(0,i.jsxs)(ji,{row:!0,alignItems:"center",animation:"300ms",exitStyle:{opacity:0},enterStyle:{opacity:0},children:[x?(0,i.jsx)("span",{style:{marginRight:"6px"},children:(0,i.jsx)(Or,{currencies:[x.token0,x.token1],size:24})}):o?(0,i.jsx)(xe,{style:{marginRight:"6px"},currency:o,size:24,loading:D}):null,x?(0,i.jsxs)(li,{className:"pair-name-container",children:[x.token0.symbol,":",x.token1.symbol]}):(0,i.jsx)(li,{className:"token-symbol-container",active:!!(o&&o.symbol),children:o?Yi(o):(0,i.jsx)(A,{i18nKey:"tokens.selector.button.choose"})})]})})}),s&&(0,i.jsx)(vs,{selected:!!o})]})})})})]}),!v&&!p&&(0,i.jsx)(fs,{children:(0,i.jsxs)(Ir,{children:[(0,i.jsx)(Sr,{$loading:w,children:c&&(0,i.jsx)(ss,{fiatValue:c,priceImpact:f,testId:`fiat-value-${d}`})}),g?(0,i.jsx)("span",{}):(0,i.jsxs)(oi,{style:{height:"16px"},children:[(0,i.jsx)(k.DeprecatedBody,{"data-testid":"balance-text",color:H.neutral2,fontWeight:485,fontSize:14,style:{display:"inline"},children:!p&&o&&L?u?u(L):(0,i.jsx)(A,{i18nKey:"swap.balance.amount",values:{amount:U({value:L,type:ue.TokenNonTx})}}):null}),r&&L?(0,i.jsx)(Ie,{logPress:!0,element:Nt.MaxTokenAmountButton,children:(0,i.jsx)(Ct,{alignSelf:"center",variant:"branded",pr:"$spacing6",pl:"$spacing12",emphasis:"text-only",size:"small",isDisabled:T,onPress:n,children:j("swap.button.max")})}):null]})]})})]}),s&&(0,i.jsx)($i,{currencyField:y,isOpen:P,onDismiss:G,onCurrencySelect:s,selectedCurrency:o,otherSelectedCurrency:a,switchNetworkAction:Oi.Swap})]})});Ji.displayName="SwapCurrencyInputPanel";var ui=Ji;let ie=(function(e){return e.Day="Day",e.Week="Week",e.Month="Month",e.Year="Year",e})({});var xs=he(bi());const Ye=(0,xs.default)("1d")/1e3;function gs(e){switch(e){case ie.Day:return Ye;case ie.Week:return Ye*7;case ie.Month:return Ye*30;case ie.Year:return Ye*365}}Ne();Pt();function di(e){return e!==void 0&&vn(e.chainId)&&hn(e.chainId).some(t=>t.equals(e))}function pi(e,t){const[n,r]=[di(e),di(t)];return n&&!r}function ys(e){const t=se(),{inputAmount:n,outputAmount:r,limitPriceInverted:s}=e,{currencyState:{inputCurrency:o,outputCurrency:a}}=jt(),d=zn(t.address,(0,l.useMemo)(()=>[o??void 0,a??void 0],[o,a])),u=(0,l.useMemo)(()=>({[B.INPUT]:d[0],[B.OUTPUT]:d[1]}),[d]),c=(0,l.useMemo)(()=>{if(!o||!a||!e.limitPrice)return;const[T,g]=s?[a,o]:[o,a],y=Pe(e.limitPrice,g);if(y)return new nt(T,g,X.BigInt(10**T.decimals),y.quotient)},[o,s,a,e.limitPrice]),f=(0,l.useMemo)(()=>{let T,g;const y=s?c==null?void 0:c.invert():c;return e.isInputAmountFixed?(T=Pe(n,o),g=y?T&&y.quote(T):Pe(r,a)):(g=Pe(r,a),T=y?g&&y.invert().quote(g):Pe(n,o)),{[B.INPUT]:T,[B.OUTPUT]:g}},[n,o,s,r,a,c,e.isInputAmountFixed]),{marketPrice:p,fee:x}=ws(o,a),v=!(o&&a),{trade:h}=At(v,le.EXACT_INPUT,f[B.INPUT],a,wt.API),w=Ts({inputCurrency:o,parsedAmounts:f,outputAmount:f[B.OUTPUT],trade:h,state:e,swapFee:x});return{currencyBalances:u,parsedAmounts:f,parsedLimitPrice:c,limitOrderTrade:w,marketPrice:p}}function Ts({state:e,trade:t,inputCurrency:n,parsedAmounts:r,outputAmount:s,swapFee:o}){const a=se(),[d,u]=(0,l.useState)();return(0,l.useEffect)(()=>{async function f(){if(!n||!xi(n.chainId)){u(void 0);return}const[p,x]=n.isNative?[n.wrapped,!0]:[n,!1],[v,h]=me(t)?[t.gasUseEstimate,t.gasUseEstimateUSD]:[void 0,void 0],w=Vn(h,v);if(x){const T=await qn({needsWrap:x,account:a.address,chainId:p.chainId,amount:"1",usdCostPerGas:w});u(T)}else u({needsWrap:!1})}f()},[a.address,n,t]),(0,l.useMemo)(()=>{if(!n||!r[B.INPUT]||!a.address||!s||!d)return;const f=ce.fromRawAmount(n.wrapped,r[B.INPUT].quotient);return new jn({amountIn:f,amountOut:s,tradeType:le.EXACT_INPUT,wrapInfo:d,approveInfo:{needsApprove:!1},swapper:a.address,deadlineBufferSecs:gs(e.expiry),swapFee:o})},[a.address,s,n,r,e.expiry,d,o])}function Ze(e){return e.isNative||Bt(e.chainId).wrapped.equals(e)}function ws(e,t){const n=!(e&&t),r=e&&ce.fromRawAmount(Bt(e.chainId),10**18),{trade:s}=At(n,le.EXACT_OUTPUT,r,e,wt.API),{trade:o}=At(n,le.EXACT_INPUT,r,t,wt.API),a=(0,l.useMemo)(()=>{var c,f;if(n)return;if(Ze(e)){var p;if(!(o!=null&&o.outputAmount.currency.equals(t))||!me(o))return;const w=(p=o.routes[0])===null||p===void 0?void 0:p.midPrice;return new nt(e,t,w.denominator,w.numerator)}if(Ze(t)){var x;if(!(s!=null&&s.inputAmount.currency.equals(e))||!me(s))return;const w=(x=s.routes[0])===null||x===void 0?void 0:x.midPrice;return new nt(e,t,w.denominator,w.numerator)}if(!(s!=null&&s.inputAmount.currency.equals(e))||!(o!=null&&o.outputAmount.currency.equals(t))||!me(s)||!me(o))return;const v=(c=s.routes[0])===null||c===void 0?void 0:c.midPrice,h=(f=o.routes[0])===null||f===void 0?void 0:f.midPrice;if(!(!v||!h))return v.multiply(h)},[e,t,n,s,o]),d=Ai(Ii.LimitsFees),u=(0,l.useMemo)(()=>{var c,f;return!a||!e||!t||!d?void 0:Ze(e)?!(o!=null&&o.outputAmount.currency.equals(t))||!me(o)?void 0:o.swapFee:Ze(t)?!(s!=null&&s.inputAmount.currency.equals(e))||!me(s)?void 0:s.swapFee:!s||!o?void 0:((c=s.swapFee)===null||c===void 0?void 0:c.percent.greaterThan(0))&&((f=o.swapFee)===null||f===void 0?void 0:f.percent.greaterThan(0))?o.swapFee:void 0},[e,t,a,s,o,d]);return(0,l.useMemo)(()=>({marketPrice:a,fee:u}),[a,u])}const en={inputAmount:"",limitPrice:"",limitPriceEdited:!1,limitPriceInverted:!1,outputAmount:"",expiry:ie.Week,isInputAmountFixed:!0},tn=(0,l.createContext)({limitState:en,setLimitState:()=>{},derivedLimitInfo:{currencyBalances:{},parsedAmounts:{}}});function Ht(){return(0,l.useContext)(tn)}function bs({children:e}){const[t,n]=(0,l.useState)(en),r=ys(t);return(0,i.jsx)(tn.Provider,{value:{limitState:t,setLimitState:n,derivedLimitInfo:r},children:e})}Ne();var Je=he(wi());Pt();const Is=C(Zi)`
  gap: 4px;
`,As=C.div`
  display: flex;
  justify-content: flex-end;
  ${ke}
`,_s=C(Rt)`
  display: flex;
  align-items: center;
  justify-content: center;
`,Es=C.button`
  user-select: none;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  background-color: transparent;
  border: none;
  display: flex;
  ${ke}
`,Os=C.div`
  display: flex;
  flex-grow: 1;
`,Ss=[1,5,10],Cs=[-1,-5,-10];function Ps(e){return e==="inputCurrency"?"outputCurrency":"inputCurrency"}function Rs({onCurrencySelect:e}){const[t,n]=(0,l.useState)(void 0),{derivedLimitInfo:{parsedLimitPrice:r,marketPrice:s},setLimitState:o,limitState:{limitPrice:a,limitPriceInverted:d}}=Ht(),u=(0,l.useCallback)(_=>{o(b=>({...b,limitPrice:_,limitPriceEdited:!0}))},[o]),{currencyState:{inputCurrency:c,outputCurrency:f}}=jt(),[p,x,v]=d?[f,c,s==null?void 0:s.invert()]:[c,f,s],{formatCurrencyAmount:h}=ye(),w=(0,l.useMemo)(()=>a||(p?h({value:r==null?void 0:r.quote(ce.fromRawAmount(p,1)),type:ue.SwapTradeAmount,placeholder:""}):""),[a,p,h,r]),T=(0,l.useMemo)(()=>{if(!v||!p||!x)return;const _=ce.fromRawAmount(p,X.BigInt((0,Je.parseUnits)("1",p.decimals))),b=P=>new nt({baseAmount:ce.fromRawAmount(p,X.BigInt((0,Je.parseUnits)("100",p.decimals))),quoteAmount:ce.fromRawAmount(x,X.multiply(X.BigInt(100+P),v.quote(_).quotient))});return d?{[-1]:b(-1),[-5]:b(-5),[-10]:b(-10)}:{1:b(1),5:b(5),10:b(10)}},[v,p,x,d]),g=(0,l.useCallback)((_,b)=>{if(!p)return;const P=ce.fromRawAmount(p,X.BigInt((0,Je.parseUnits)("1",p.decimals))),O=_==null?void 0:_.quote(P);u(h({value:O,type:ue.SwapTradeAmount,placeholder:a})),z(pe.LimitPresetRateSelected,{value:b})},[p,a,u,h]),{currentPriceAdjustment:y}=Qi({parsedLimitPrice:r,marketPrice:v,baseCurrency:p,quoteCurrency:x,limitPriceInverted:d}),I=(0,l.useCallback)(()=>{p&&v&&x&&u(h({value:v.invert().quote(ce.fromRawAmount(x,X.BigInt((0,Je.parseUnits)("1",x.decimals)))),type:ue.SwapTradeAmount,placeholder:""})),o(_=>({..._,limitPriceInverted:!_.limitPriceInverted,limitPriceEdited:!0})),z(pe.LimitPriceReversed)},[p,v,x,u,o,h]),E=d?Cs:Ss;return(0,i.jsxs)(Is,{children:[(0,i.jsxs)(Y,{justify:"space-between",children:[(0,i.jsx)(ts,{currency:p,showCurrencyMessage:!!w,openCurrencySearchModal:()=>n("inputCurrency")}),(0,i.jsx)(As,{onClick:I,children:(0,i.jsx)(Cr,{size:"16px"})})]}),(0,i.jsxs)(Os,{children:[(0,i.jsx)(Mi,{disabled:!(p&&x),className:"limit-price-input",value:w,onUserInput:u,$loading:!1}),x&&(0,i.jsx)(_s,{children:(0,i.jsx)(Es,{onClick:()=>n("outputCurrency"),children:(0,i.jsxs)(Y,{gap:"xs",width:"unset",children:[(0,i.jsx)(xe,{currency:x,size:16}),(0,i.jsx)(k.BodyPrimary,{className:"token-symbol-container",children:Yi(x)})]})})})]}),(0,i.jsx)(Y,{marginTop:"8px",justify:"space-between",children:(0,i.jsxs)(Y,{gap:"sm",children:[(0,i.jsx)(Zo,{customAdjustmentPercentage:(()=>{if(!(!y||y===0)&&!E.includes(y))return y})(),disabled:!p||!x,selected:y!==void 0&&!E.includes(y),onSelect:()=>g(v,0)},"limit-price-market"),E.map(_=>{const b=T==null?void 0:T[_];return(0,i.jsx)(Yo,{priceAdjustmentPercentage:_,disabled:!p||!x||!v,selected:y===_,onSelect:()=>g(b,_)},`limit-price-${_}`)})]})}),(0,i.jsx)($i,{isOpen:!!t,switchNetworkAction:Oi.Limit,onDismiss:()=>n(void 0),onCurrencySelect:_=>{t&&e(d?Ps(t):t,_)},selectedCurrency:x,otherSelectedCurrency:p})]})}const js=C(Y)`
  width: 100%;
  padding: 12px 16px;
  justify-content: space-between;
`,Ns=C.button`
  display: flex;
  padding: 4px 8px;
  justify-content: flex-end;
  align-items: center;
  gap: 4px;
  border: 1px solid ${({theme:e})=>e.surface3};
  height: 28px;
  border-radius: 999px;
  background-color: ${({theme:e,$selected:t})=>t?e.surface3:"unset"};
  color: ${({theme:e,$selected:t})=>t?e.neutral1:e.neutral2};
  ${ke}
`,ks=[ie.Day,ie.Week,ie.Month,ie.Year];function Ds(e,t){switch(t){case ie.Day:return e("common.oneDay");case ie.Week:return e("common.oneWeek");case ie.Month:return e("common.oneMonth");case ie.Year:return e("common.oneYear")}}function Bs(){const{t:e}=ve(),{limitState:t,setLimitState:n}=Ht();return(0,i.jsxs)(js,{children:[(0,i.jsx)(k.SubHeaderSmall,{children:(0,i.jsx)(A,{i18nKey:"common.expiry"})}),(0,i.jsx)(Y,{justify:"flex-end",gap:"xs",children:ks.map(r=>(0,i.jsx)(Ns,{$selected:r===t.expiry,onClick:()=>{r!==t.expiry&&(z(pe.LimitExpirySelected,{value:r}),n(s=>({...s,expiry:r})))},children:(0,i.jsx)(k.LabelSmall,{color:"inherit",fontWeight:535,children:Ds(e,r)})},r))})]})}const Ls="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row  _flexDirection-_sm_column",Us="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _backgroundColor-surface2 _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 _pt-t-space-pad1331704929 _pr-t-space-pad1331704929 _pb-t-space-pad1331704929 _pl-t-space-pad1331704929 _gap-t-space-spa1360334080 ";function Fs({onMoreDetails:e}){const{t}=ve();return(0,i.jsxs)("div",{className:Us,children:[(0,i.jsx)(gi,{width:20,height:20,color:"$neutral1"}),(0,i.jsxs)("div",{className:Ls,children:[(0,i.jsx)(de,{variant:"body3",color:"$neutral1",children:`${t("smartWallets.delegationMismatchModal.limitOrders.unsupported")} `}),(0,i.jsx)(dn,{onPress:e,children:(0,i.jsx)(de,{variant:"body3",color:"$accent1",children:t("common.moreDetails")})})]})]})}var Ms=Fs;const $s=C(Y)`
  padding: 12px;
  border: 1px solid ${({theme:e})=>e.surface3};
  border-radius: 16px;
  margin-top: 4px;
`,Ws=C.div`
  height: 40px;
  width: 40px;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 12px;
  background-color: ${({theme:e})=>e.critical2};
  flex-shrink: 0;
`;function Vs({inputCurrency:e,outputCurrency:t,priceInverted:n,priceError:r}){return r===dt.CALCULATION_ERROR?(0,i.jsx)(A,{i18nKey:"limitPrice.marketPriceNotAvailable.error.title"}):n?(0,i.jsx)(A,{i18nKey:"limitPrice.buyingAboveMarketPrice.error.title",values:{tokenSymbol:t.symbol}}):(0,i.jsx)(A,{i18nKey:"limitPrice.sellingBelowMarketPrice.error.title",values:{tokenSymbol:e.symbol}})}function qs({priceInverted:e,priceAdjustmentPercentage:t,priceError:n}){return n===dt.CALCULATION_ERROR?(0,i.jsx)(A,{i18nKey:"limitPrice.marketPriceNotAvailable.error.description",children:"We are unable to calculate the current market price. To avoid submitting an order below market price, please check your network connection and try again."}):e&&t?(0,i.jsx)(A,{i18nKey:"limitPrice.buyingAboveMarketPrice.error.description",values:{percentage:Math.abs(t)}}):t?(0,i.jsx)(A,{i18nKey:"limitPrice.sellingBelowMarketPrice.error.description",values:{percentage:Math.abs(t)}}):null}function Ks(e){const t=Ve();return(0,i.jsx)(it,{$transitionDuration:t.transition.duration.fast,$delay:t.transition.duration.fast,animationType:or.FadeAndTranslate,children:(0,i.jsxs)($s,{gap:"md",children:[(0,i.jsx)(Ws,{children:(0,i.jsx)(pr,{strokeWidth:1,color:t.critical,size:"20px"})}),(0,i.jsxs)(qe,{children:[(0,i.jsx)(k.SubHeader,{children:Vs(e)}),(0,i.jsx)(k.BodySmall,{color:"neutral2",children:qs(e)})]})]})})}Ne();var mi=he(Wi());const Hs="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row ",zs="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _backgroundColor-surface2 _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 _pt-t-space-pad1331704929 _pr-t-space-pad1331704929 _pb-t-space-pad1331704929 _pl-t-space-pad1331704929 _mt-t-space-pad1331704929 ",St=[et.Mainnet],Gs=Ut(_t,{height:"unset"}),Xs=Ut(yr,{mt:-22,mb:-22}),fi=Ut(de,{variant:"body3",color:"$accent1",animation:"100ms",hoverStyle:{opacity:.6},focusStyle:{opacity:.4}});function Qs({onCurrencyChange:e}){var t,n;const r=se(),{chainId:s}=Te(),{currencyState:{inputCurrency:o,outputCurrency:a},setCurrencyState:d}=jt(),u=_i(s),c=s&&St.includes(s),{limitState:f,setLimitState:p,derivedLimitInfo:x}=Ht(),{currencyBalances:v,parsedAmounts:h,parsedLimitPrice:w,limitOrderTrade:T,marketPrice:g}=x,[y,I]=(0,l.useState)(!1),[E,_]=(0,l.useState)(),[b,P]=(0,l.useState)(),O=Ve(),{onSwitchTokens:F}=bn(),{formatCurrencyAmount:M}=ye(),K=Di(),[,W]=Gn(_r),L=Ai(Ii.EnablePermitMismatchUX),{data:H}=ur({chainId:St[0]}),U=L&&H,[j,G]=(0,l.useState)(!1),{currentPriceAdjustment:Z,priceError:ne}=Qi({parsedLimitPrice:w,marketPrice:f.limitPriceInverted?g==null?void 0:g.invert():g,baseCurrency:f.limitPriceInverted?a:o,quoteCurrency:f.limitPriceInverted?o:a,limitPriceInverted:f.limitPriceInverted});(0,l.useEffect)(()=>{if(f.limitPriceEdited||!g||!o||!a)return;const R=M({value:f.limitPriceInverted?g.invert().quote(ce.fromRawAmount(a,10**a.decimals)):g.quote(ce.fromRawAmount(o,10**o.decimals)),type:ue.SwapTradeAmount,placeholder:""});p($=>({...$,limitPrice:R}))},[M,o,f.limitPriceEdited,f.limitPriceInverted,g,a,p]);const N=(0,l.useCallback)(R=>$=>{p(Le=>({...Le,[R]:$,isInputAmountFixed:R!=="outputAmount"}))},[p]),D=(0,l.useCallback)(()=>{F({newOutputHasTax:!1,previouslyEstimatedOutput:f.outputAmount}),p(R=>({...R,limitPriceEdited:!1,limitPriceInverted:pi(a,o)}))},[o,f.outputAmount,F,a,p]),ae=(0,l.useCallback)((R,$,Le)=>{var vt;if(!((vt=R==="inputCurrency"?a:o)===null||vt===void 0)&&vt.equals($)){D();return}const[rn,on]=R==="inputCurrency"?[$,a]:[o,$],Ee={inputCurrency:rn,outputCurrency:on},[be,sn]=R==="inputCurrency"?[a,o]:[o,a];if(be&&($.isNative||be.isNative)){const[xt,an]=$.isNative?[$,be]:[be,$];xt.wrapped.equals(an)&&(Ee[R==="inputCurrency"?"outputCurrency":"inputCurrency"]=sn)}$.chainId!==(be==null?void 0:be.chainId)&&(Ee[R==="inputCurrency"?"outputCurrency":"inputCurrency"]=void 0),Le||p(xt=>({...xt,limitPriceEdited:!1,limitPriceInverted:pi(Ee.inputCurrency,Ee.outputCurrency)})),e==null||e(Ee),d(Ee)},[o,e,a,d,p,D]);(0,l.useEffect)(()=>{if(!a&&u){const R=zt(s);ae("outputCurrency",o!=null&&o.equals(R)?Bt(s):R)}},[ae,a,u,s,o]),(0,l.useEffect)(()=>{if(u&&o&&a&&(o.isNative||a.isNative)){const[R,$]=o.isNative?[o,a]:[a,o];R.wrapped.equals($)&&ae("outputCurrency",zt(s))}},[]);const J=(0,l.useMemo)(()=>Pr(v[B.INPUT]),[v]),Ke=!!(J!=null&&J.greaterThan(0)&&!(!((t=h[B.INPUT])===null||t===void 0)&&t.equalTo(J))),He=(0,l.useCallback)(()=>{J&&N("inputAmount")(J.toExact())},[J,N]),ze=h.input&&v.input?v.input.lessThan(h.input):!1,we=Mr({amount:!((n=h.input)===null||n===void 0)&&n.currency.isNative?void 0:h.input,spender:u?(0,mi.UNIVERSAL_ROUTER_ADDRESS)(mi.UniversalRouterVersion.V1_2,s):void 0,tradeFillType:oe.UniswapX}),Ae=lt(h.input),_e=lt(h.output),De=(0,l.useMemo)(()=>{if(!f.limitPrice)return{[B.INPUT]:f.inputAmount,[B.OUTPUT]:f.outputAmount};const R=f.isInputAmountFixed?f.inputAmount:M({value:x.parsedAmounts[B.INPUT],type:ue.SwapTradeAmount,placeholder:""}),$=f.isInputAmountFixed?M({value:x.parsedAmounts[B.OUTPUT],type:ue.SwapTradeAmount,placeholder:""}):f.outputAmount;return{[B.INPUT]:R,[B.OUTPUT]:$}},[f.limitPrice,f.isInputAmountFixed,f.inputAmount,f.outputAmount,M,x.parsedAmounts]),Ge=(0,l.useMemo)(()=>({amountIn:Ae.data,amountOut:_e.data}),[Ae.data,_e.data]),Be=ho({trade:T,fiatValues:Ge,allowedSlippage:Gt,permitSignature:we.state===V.ALLOWED?we.permitSignature:void 0}),nn=(0,l.useCallback)(async()=>{try{const R=await Be();_(R)}catch(R){P(R)}},[Be]);return(0,i.jsxs)(qe,{gap:"xs",children:[(0,i.jsx)(Gs,{children:(0,i.jsx)(Rs,{onCurrencySelect:ae})}),(0,i.jsx)(_t,{children:(0,i.jsx)(Ie,{section:Xe.SwapCurrencyInput,children:(0,i.jsx)(ui,{label:(0,i.jsx)(A,{i18nKey:"common.sell.label"}),value:De[B.INPUT],showMaxButton:Ke,currency:o??null,currencyField:B.INPUT,onUserInput:N("inputAmount"),onCurrencySelect:R=>ae("inputCurrency",R),otherCurrency:a,onMax:He,id:Xe.SwapCurrencyInput})})}),(0,i.jsx)(Xs,{clickable:u,children:(0,i.jsx)(Ie,{logPress:!0,eventOnTrigger:je.SwapTokensReversed,element:Nt.SwapTokensReverseArrowButton,children:(0,i.jsx)(gr,{"data-testid":"swap-currency-button",onPress:D,children:(0,i.jsx)(mr,{size:"16",color:O.neutral1})})})}),(0,i.jsx)(_t,{children:(0,i.jsx)(Ie,{section:Xe.SwapCurrencyOutput,children:(0,i.jsx)(ui,{label:(0,i.jsx)(A,{i18nKey:"common.buy.label"}),value:De[B.OUTPUT],showMaxButton:!1,currency:a??null,currencyField:B.OUTPUT,onUserInput:N("outputAmount"),onCurrencySelect:R=>ae("outputCurrency",R),otherCurrency:o,id:Xe.SwapCurrencyOutput})})}),w&&(0,i.jsx)(Bs,{}),U?(0,i.jsx)(Ms,{onMoreDetails:()=>G(!0)}):(0,i.jsx)(Ys,{inputCurrency:o,handleContinueToReview:()=>{I(!0)},trade:T,hasInsufficientFunds:ze,limitPriceError:ne}),c&&!!ne&&o&&a&&T&&(0,i.jsx)(Ks,{priceError:ne,priceAdjustmentPercentage:Z,inputCurrency:o,outputCurrency:a,priceInverted:f.limitPriceInverted}),!U&&(0,i.jsxs)("div",{className:zs,children:[(0,i.jsx)(Qn,{size:"$icon.20",mr:"$spacing12",alignSelf:"flex-start",color:c?"$neutral2":"$critical"}),(0,i.jsx)(de,{variant:"body3",children:c?(0,i.jsx)(A,{i18nKey:"limits.form.disclaimer.uniswapx",components:{link:(0,i.jsx)(ri,{textDecorationLine:"none",href:q.helpArticleUrls.limitsFailure,target:"_blank",children:(0,i.jsx)(fi,{children:(0,i.jsx)(A,{i18nKey:"common.button.learn"})})})}}):(0,i.jsx)(A,{i18nKey:"limits.form.disclaimer.mainnet",components:{link:(0,i.jsx)(ri,{textDecorationLine:"none",href:q.helpArticleUrls.limitsNetworkSupport,target:"_blank",children:(0,i.jsx)(fi,{children:(0,i.jsx)(A,{i18nKey:"common.button.learn"})})})}})})]}),r.address&&(0,i.jsx)(hr,{account:r.address,openLimitsMenu:()=>{W(Ar.LIMITS),K.open()}}),T&&y&&(0,i.jsx)(zo,{allowance:we,trade:T,inputCurrency:o,allowedSlippage:Gt,clearSwapState:()=>{P(void 0),_(void 0)},fiatValueInput:Ae,fiatValueOutput:_e,onCurrencySelection:(R,$,Le)=>ae(R===B.INPUT?"inputCurrency":"outputCurrency",$,Le),onConfirm:nn,onDismiss:()=>{I(!1),_(void 0)},swapResult:E,swapError:b}),j&&(0,i.jsx)(cr,{onClose:()=>G(!1)})]})}function Ys({trade:e,handleContinueToReview:t,inputCurrency:n,hasInsufficientFunds:r,limitPriceError:s}){const o=Di(),a=se(),{chainId:d}=Te(),u=d&&St.includes(d),{t:c}=ve(),f=pn(),p=(!u||r||!!s||!e)&&a.isConnected,x=(0,l.useMemo)(()=>u?a.isConnected?r?n?c("common.insufficientTokenBalance.error.simple",{tokenSymbol:n.symbol}):c("common.insufficientBalance.error"):c("common.confirm"):c("common.connectWallet.button"):c("limits.selectSupportedTokens"),[u,a.isConnected,r,n,c]);return(0,i.jsx)(Ie,{logPress:!0,element:Nt.LimitOrderButton,children:(0,i.jsx)("div",{className:Hs,children:(0,i.jsx)(Ct,{variant:"branded",emphasis:a.isConnected?"primary":"secondary",size:f?"small":"large",isDisabled:p,onPress:a.isConnected?t:o.open,id:e?"submit-order-button":void 0,"data-testid":e?"submit-order-button":void 0,children:x})})})}function em(e){return(0,i.jsx)(Ie,{page:In.Limit,children:(0,i.jsx)(bs,{children:(0,i.jsx)(Qs,{...e})})})}export{em as LimitFormWrapper};
