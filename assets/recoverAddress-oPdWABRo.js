const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-DT0Vl4vj.js","assets/sha2-Jt0E41S_.js","assets/_u64-b_viZRi_.js","assets/chunk-DgAfPHQg.js","assets/hmac-D-QTodfL.js","assets/secp256k1-fbKD5lyl.js"])))=>i.map(i=>d[i]);
import{__vitePreload as x}from"./preload-helper-CaakwtpC.js";import{checksumAddress as m,hexToBigInt as n,hexToNumber as _,isHex as c,keccak256 as w,size as k,toHex as i}from"./isAddress-P2vaZgmG.js";function $(e){const r=w(`0x${e.substring(4)}`).substring(26);return m(`0x${r}`)}async function g({hash:e,signature:r}){const u=c(e)?e:i(e),{secp256k1:o}=await x(async()=>{const{secp256k1:t}=await import("./secp256k1-DT0Vl4vj.js");return{secp256k1:t}},__vite__mapDeps([0,1,2,3,4,5]));return`0x${(()=>{if(typeof r=="object"&&"r"in r&&"s"in r){const{r:f,s:v,v:y,yParity:p}=r,b=Number(p??y),l=s(b);return new o.Signature(n(f),n(v)).addRecoveryBit(l)}const t=c(r)?r:i(r);if(k(t)!==65)throw new Error("invalid signature length");const a=_(`0x${t.slice(130)}`),d=s(a);return o.Signature.fromCompact(t.substring(2,130)).addRecoveryBit(d)})().recoverPublicKey(u.substring(2)).toHex(!1)}`}function s(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function A({hash:e,signature:r}){return $(await g({hash:e,signature:r}))}export{A as recoverAddress};
