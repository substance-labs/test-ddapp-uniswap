import{__commonJS as j,__toESM as x}from"./chunk-DgAfPHQg.js";import{require_react as O}from"./react-CNoFhWkx.js";import{useEnabledChainsWithConnector as q}from"./useEnabledChains-DuB86c95.js";const G="2.17.2",T=()=>`@wagmi/core@${G}`;var D=function(t,n,e,r){if(e==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?t!==n||!r:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?r:e==="a"?r.call(t):r?r.value:n.get(t)},C,V,U=class P extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return T()}constructor(n,e={}){var r;super(),C.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const c=e.cause instanceof P?e.cause.details:!((r=e.cause)===null||r===void 0)&&r.message?e.cause.message:e.details,s=e.cause instanceof P&&e.cause.docsPath||e.docsPath;this.message=[n||"An error occurred.","",...e.metaMessages?[...e.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${e.docsSlug?`#${e.docsSlug}`:""}`]:[],...c?[`Details: ${c}`]:[],`Version: ${this.version}`].join(`
`),e.cause&&(this.cause=e.cause),this.details=c,this.docsPath=s,this.metaMessages=e.metaMessages,this.shortMessage=n}walk(n){return D(this,C,"m",V).call(this,this,n)}};C=new WeakSet,V=function t(n,e){return e!=null&&e(n)?n:n.cause?D(this,C,"m",t).call(this,n.cause,e):n};function B(t){const n=t.state.current,e=t.state.connections.get(n),r=e==null?void 0:e.accounts,c=r==null?void 0:r[0],s=t.chains.find(a=>a.id===(e==null?void 0:e.chainId)),i=t.state.status;switch(i){case"connected":return{address:c,addresses:r,chain:s,chainId:e==null?void 0:e.chainId,connector:e==null?void 0:e.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:i};case"reconnecting":return{address:c,addresses:r,chain:s,chainId:e==null?void 0:e.chainId,connector:e==null?void 0:e.connector,isConnected:!!c,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:i};case"connecting":return{address:c,addresses:r,chain:s,chainId:e==null?void 0:e.chainId,connector:e==null?void 0:e.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:i};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:i}}}function W(t){return t.state.chainId}function E(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;let e,r;if(Array.isArray(t)&&Array.isArray(n)){if(e=t.length,e!==n.length)return!1;for(r=e;r--!==0;)if(!E(t[r],n[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();const c=Object.keys(t);if(e=c.length,e!==Object.keys(n).length)return!1;for(r=e;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,c[r]))return!1;for(r=e;r--!==0;){const s=c[r];if(s&&!E(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}let I=!1;async function H(t,n={}){var e;if(I)return[];I=!0,t.setState(o=>({...o,status:o.current?"reconnecting":"connecting"}));const r=[];if(!((e=n.connectors)===null||e===void 0)&&e.length)for(const o of n.connectors){let u;typeof o=="function"?u=t._internal.connectors.setup(o):u=o,r.push(u)}else r.push(...t.connectors);let c;try{var s;c=await((s=t.storage)===null||s===void 0?void 0:s.getItem("recentConnectorId"))}catch{}const i={};for(const[,o]of t.state.connections)i[o.connector.id]=1;c&&(i[c]=0);const a=Object.keys(i).length>0?[...r].sort((o,u)=>(i[o.id]??10)-(i[u.id]??10)):r;let d=!1;const l=[],m=[];for(const o of a){const u=await o.getProvider().catch(()=>{});if(!u||m.some(y=>y===u)||!await o.isAuthorized())continue;const f=await o.connect({isReconnecting:!0}).catch(()=>null);f&&(o.emitter.off("connect",t._internal.events.connect),o.emitter.on("change",t._internal.events.change),o.emitter.on("disconnect",t._internal.events.disconnect),t.setState(y=>{const h=new Map(d?y.connections:new Map).set(o.uid,{accounts:f.accounts,chainId:f.chainId,connector:o});return{...y,current:d?y.current:o.uid,connections:h}}),l.push({accounts:f.accounts,chainId:f.chainId,connector:o}),m.push(u),d=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(d?t.setState(o=>({...o,status:"connected"})):t.setState(o=>({...o,connections:new Map,current:null,status:"disconnected"}))),I=!1,l}function L(t,n){const{onChange:e}=n;return t.subscribe(()=>B(t),e,{equalityFn(r,c){const{connector:s,...i}=r,{connector:a,...d}=c;return E(i,d)&&(s==null?void 0:s.id)===(a==null?void 0:a.id)&&(s==null?void 0:s.uid)===(a==null?void 0:a.uid)}})}function N(t,n){const{onChange:e}=n;return t.subscribe(r=>r.chainId,e)}function J(t,n){const{initialState:e,reconnectOnMount:r}=n;return e&&!t._internal.store.persist.hasHydrated()&&t.setState({...e,chainId:t.chains.some(c=>c.id===e.chainId)?e.chainId:t.chains[0].id,connections:r?e.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(c=>{var s;const i=new Set;for(const l of c??[])if(l.rdns){const m=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const o of m)i.add(o)}const a=[],d=((s=t._internal.mipd)===null||s===void 0?void 0:s.getProviders())??[];for(const l of d){if(i.has(l.info.rdns))continue;const m=t._internal.connectors.providerDetailToConnector(l),o=t._internal.connectors.setup(m);a.push(o)}return[...c,...a]})),r?H(t):t.storage&&t.setState(c=>({...c,connections:new Map}))}}}var g=x(O());function K(t){const{children:n,config:e,initialState:r,reconnectOnMount:c=!0}=t,{onMount:s}=J(e,{initialState:r,reconnectOnMount:c});e._internal.ssr||s();const i=(0,g.useRef)(!0);return(0,g.useEffect)(()=>{if(i.current&&e._internal.ssr)return s(),()=>{i.current=!1}},[]),n}const z=(0,g.createContext)(void 0);function fe(t){const{children:n,config:e}=t,r={value:e};return(0,g.createElement)(K,t,(0,g.createElement)(z.Provider,r,n))}const Q="2.15.5",X=()=>`wagmi@${Q}`;var Y=class extends U{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return X()}},Z=class extends Y{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}};function F(t={}){const n=t.config??(0,g.useContext)(z);if(!n)throw new Z;return n}var ee=j({"../../node_modules/wagmi/node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js"(t){var n=O();function e(u,v){return u===v&&(u!==0||1/u===1/v)||u!==u&&v!==v}var r=typeof Object.is=="function"?Object.is:e,c=n.useState,s=n.useEffect,i=n.useLayoutEffect,a=n.useDebugValue;function d(u,v){var f=v(),y=c({inst:{value:f,getSnapshot:v}}),h=y[0].inst,w=y[1];return i(function(){h.value=f,h.getSnapshot=v,l(h)&&w({inst:h})},[u,f,v]),s(function(){return l(h)&&w({inst:h}),u(function(){l(h)&&w({inst:h})})},[u]),a(f),f}function l(u){var v=u.getSnapshot;u=u.value;try{var f=v();return!r(u,f)}catch{return!0}}function m(u,v){return v()}var o=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;t.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:o}}),te=j({"../../node_modules/wagmi/node_modules/use-sync-external-store/shim/index.js"(t,n){n.exports=ee()}}),ne=j({"../../node_modules/wagmi/node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js"(t){var n=O(),e=te();function r(m,o){return m===o&&(m!==0||1/m===1/o)||m!==m&&o!==o}var c=typeof Object.is=="function"?Object.is:r,s=e.useSyncExternalStore,i=n.useRef,a=n.useEffect,d=n.useMemo,l=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(m,o,u,v,f){var y=i(null);if(y.current===null){var h={hasValue:!1,value:null};y.current=h}else h=y.current;y=d(function(){function M(p){if(!A){if(A=!0,b=p,p=v(p),f!==void 0&&h.hasValue){var _=h.value;if(f(_,p))return S=_}return S=p}if(_=S,c(b,p))return _;var k=v(p);return f!==void 0&&f(_,k)?(b=p,_):(b=p,S=k)}var A=!1,b,S,R=u===void 0?null:u;return[function(){return M(o())},R===null?void 0:function(){return M(R())}]},[o,u,v,f]);var w=s(m,y[0],y[1]);return a(function(){h.hasValue=!0,h.value=w},[w]),l(w),w}}}),re=j({"../../node_modules/wagmi/node_modules/use-sync-external-store/shim/with-selector.js"(t,n){n.exports=ne()}}),oe=x(re());const $=t=>typeof t=="object"&&!Array.isArray(t);function se(t,n,e=n,r=E){const c=(0,g.useRef)([]),s=(0,oe.useSyncExternalStoreWithSelector)(t,n,e,i=>i,(i,a)=>{if($(i)&&$(a)&&c.current.length){for(const d of c.current)if(!r(i[d],a[d]))return!1;return!0}return r(i,a)});return(0,g.useMemo)(()=>{if($(s)){const i={...s};let a={};for(const[d,l]of Object.entries(i))a={...a,[d]:{configurable:!1,enumerable:!0,get:()=>(c.current.includes(d)||c.current.push(d),l)}};return Object.defineProperties(i,a),i}return s},[s])}function ce(t={}){const n=F(t);return se(e=>L(n,{onChange:e}),()=>B(n))}function ie(t={}){const n=F(t);return(0,g.useSyncExternalStore)(e=>N(n,{onChange:e}),()=>W(n),()=>W(n))}function ue(t,n){const{chains:e}=q(n);return e.includes(t)?t:void 0}function ve(){const{chainId:t,...n}=ce(),e=ie(),r=ue(t??e,n.connector);return(0,g.useMemo)(()=>({...n,chainId:r}),[n,r])}export{U as BaseError,fe as WagmiProvider,E as deepEqual,B as getAccount,re as require_with_selector,ve as useAccount,ce as useAccount$1,ie as useChainId,F as useConfig,G as version,L as watchAccount};
