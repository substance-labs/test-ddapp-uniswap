import{__toESM as M}from"./chunk-DgAfPHQg.js";import{require_react as $}from"./react-CNoFhWkx.js";import{ExploreContext as V}from"./explore-CL40v3_c.js";var d=M($());function N({v2Data:e,v3Data:v,v4Data:l}){const o={};return e==null||e.forEach(t=>{const a=Number(t.timestamp);o[a]={v2:Number(t.value),v3:0,v4:0}}),v==null||v.forEach(t=>{const a=Number(t.timestamp);o[a]?o[a].v3=Number(t.value):o[a]={v2:0,v3:Number(t.value),v4:0}}),l==null||l.forEach(t=>{const a=Number(t.timestamp);o[a]?o[a].v4=Number(t.value):o[a]={v2:0,v3:0,v4:Number(t.value)}}),o}function S(){var e,v,l;const{protocolStats:{data:o,isLoading:t}}=(0,d.useContext)(V),a=o==null||(e=o.historicalProtocolVolume)===null||e===void 0||(e=e.Month)===null||e===void 0?void 0:e.v2,P=o==null||(v=o.historicalProtocolVolume)===null||v===void 0||(v=v.Month)===null||v===void 0?void 0:v.v3,g=o==null||(l=o.historicalProtocolVolume)===null||l===void 0||(l=l.Month)===null||l===void 0?void 0:l.v4,c=N({v2Data:a,v3Data:P,v4Data:g}),i=Object.keys(c).map(Number).sort((h,m)=>m-h),C=i[0],n=i[1],s=(0,d.useMemo)(()=>c[C]||{v2:0,v3:0,v4:0},[c,C]),r=(0,d.useMemo)(()=>c[n]||{v2:0,v3:0,v4:0},[c,n]),p=(s.v2||0)+(s.v3||0)+(s.v4||0),f=(r.v2||0)+(r.v3||0)+(r.v4||0),u=((h,m)=>m===0?0:(h-m)/m*100)(p,f);return(0,d.useMemo)(()=>({isLoading:t,totalVolume:p,totalChangePercent:u,protocolVolumes:{v2:s.v2,v3:s.v3,v4:s.v4}}),[t,p,s,u])}function j(){var e,v,l;const{protocolStats:{data:o,isLoading:t}}=(0,d.useContext)(V),a=o==null||(e=o.dailyProtocolTvl)===null||e===void 0?void 0:e.v2,P=o==null||(v=o.dailyProtocolTvl)===null||v===void 0?void 0:v.v3,g=o==null||(l=o.dailyProtocolTvl)===null||l===void 0?void 0:l.v4;return(0,d.useMemo)(()=>{const c=N({v2Data:a,v3Data:P,v4Data:g}),i=Object.keys(c).map(Number).sort((y,T)=>T-y);if(i.length===0)return{isLoading:t,totalTVL:0,totalChangePercent:0,protocolTVL:{v2:0,v3:0,v4:0},protocolChangePercent:{v2:0,v3:0,v4:0}};const C=i[0],n=c[C],s=i.length>1?i[1]:null,r=s?c[s]:{v2:0,v3:0,v4:0},p={v2:n.v2,v3:n.v3,v4:n.v4},f=n.v2+n.v3+n.v4,b=r.v2+r.v3+r.v4,u=(y,T)=>T===0?0:(y-T)/T*100,h=u(f,b),m=u(n.v2,r.v2),_=u(n.v3,r.v3),L=u(n.v4,r.v4);return{isLoading:t,totalTVL:f,protocolTVL:p,totalChangePercent:h,protocolChangePercent:{v2:m,v3:_,v4:L}}},[t,a,P,g])}export{S as use24hProtocolVolume,j as useDailyTVLWithChange};
