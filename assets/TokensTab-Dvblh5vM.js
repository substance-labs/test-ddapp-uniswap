import{__toESM as N}from"./chunk-DgAfPHQg.js";import"./preload-helper-CaakwtpC.js";import{require_react as z}from"./react-CNoFhWkx.js";import{AnimatePresence as K,CheckCircleFilled as W,Tooltip as j}from"./src-DOOtfpHS.js";import{useTranslation as U}from"./useTranslation-BotBuoJf.js";import"./index.web-BqgtOHN3.js";import"./constants-CrXoXfFH.js";import{useDispatch as B}from"./es-Iwj7vF3u.js";import"./react-dom-xovCOntK.js";import"./react-is-BJXMVkew.js";import"./cache-BFZkIToX.js";import"./dist-Q7olfaoJ.js";import"./tslib.es6-Dbpxy1u8.js";import"./dist-QCpUvRkJ.js";import{useNavigate as R}from"./chunk-QMGIS6GS-B91ZVkXt.js";import{require_jsx_runtime as G}from"./jsx-runtime-D7bMTQeG.js";import{useEnabledChains as L}from"./useEnabledChains-DuB86c95.js";import"./hooks-BXO4d1DJ.js";import"./dist-ceZDlR1V.js";import"./analytics.web-DLc1_wTk.js";import"./redux-toolkit.esm-BnRUBto_.js";import"./utils-BX1Fu73x.js";import"./bn-D7somgUb.js";import"./lib-DPFIyRke.js";import{NATIVE_TOKEN_PLACEHOLDER as $}from"./currencyId-Ci6selsx.js";import"./config-C4KrHqHG.js";import"./time-D_OqcZ4M.js";import{ElementName as J}from"./element-Wnp4RkdY.js";import"./isAddress-P2vaZgmG.js";import"./chain-ghiO403o.js";import"./slice-cfC6NcyN.js";import"./node-C_BraYgX.js";import"./formatUnits-DkyMpOD7.js";import"./_u64-b_viZRi_.js";import"./sha2-Jt0E41S_.js";import"./sha256-BqbhXHGu.js";import"./dist-CBK-d0jO.js";import"./hmac-D-QTodfL.js";import{getTokenDetailsURL as F}from"./linking-D29RyAR8.js";import"./lib-CKG8APVv.js";import"./lib-XGdDYWzD.js";import"./v3-sdk.esm-CHH6GWR1.js";import"./hash-05APZTFm.js";import"./inherits_browser-Dqx8HagI.js";import"./useQuery-D_ZCw8XG.js";import"./lib-CWHZrl0T.js";import"./lib-BncBk3QF.js";import"./utils-7WDx1QGa.js";import"./lib-CgeiDO5B.js";import"./lib-Dj-AwQVD.js";import"./addresses-D56PBUHX.js";import"./configs-B4dDdw82.js";import"./hooks-Bp0VtWbX.js";import"./statsig-B7I9iQRf.js";import"./objects-DlLkJwrJ.js";import"./selectors-BwkayGDl.js";import{usePortfolioCacheUpdater as Q,useSortedPortfolioBalances as X}from"./balances-DV0Wvmri.js";import"./getCurrencySafetyInfo-BHD1ohD-.js";import"./queryOptions-P48mrm5X.js";import"./connect-transport-9OnIgPz5.js";import"./proto3-DkSQZto4.js";import"./promise-client-BYLTs0DC.js";import"./urls-kwiZbYPW.js";import"./createApiClient-BjXZMbEB.js";import"./constants-D9cStT7K.js";import"./base-DVpWJ4NW.js";import"./types_pb-yZxlo4b1.js";import"./hooks-Dhx5teK4.js";import"./transactionDetails-BsNW_jus.js";import{NumberType as D}from"./types-JuyYLR0O.js";import{useLocalizationContext as Y}from"./LocalizationContext-B31peW1_.js";import"./currency-xm5i4cH7.js";import"./ethers-D2SIY1xg.js";import"./TraceContext-Ddfk7zjz.js";import{useAccount as H}from"./useAccount-C5hwiBwN.js";import"./utils-CDaPKk14.js";import{Text as P}from"./Loader-D83W8G1W.js";import"./client-BlU1ozBP.js";import"./HeightAnimator-DF8znv78.js";import"./urls-aCnKF23w.js";import"./encode-utf8-DiSL6KQ9.js";import"./dijkstra-6umg7ymP.js";import"./UniconSVGs-CVEtuhJW.js";import{CoinConvert as Z}from"./CoinConvert-D8dLJ8GW.js";import{CopyAlt as oo}from"./CopyAlt-CU_LJNbN.js";import{Eye as to}from"./Eye-D482ahgC.js";import{EyeOff as ro}from"./EyeOff-BiBJTOh0.js";import{InfoCircleFilled as eo}from"./InfoCircleFilled-CBAL5Wj0.js";import{SendAction as io,setClipboard as no}from"./clipboard.web-CNSIHgMi.js";import"./SplitLogo-Ct--07LT.js";import"./timing-DsWr56iv.js";import"./experiments-rc6XUB0U.js";import"./useCurrencyInfo-Bxa3J04d.js";import"./createEthersProvider-B5AW2bpJ.js";import{setTokenVisibility as so}from"./slice-CaJcHsUP.js";import{getChainUrlParam as O}from"./chainParams-DIOvplzi.js";import"./TokenLogo-JlSSDr3Q.js";import{useAccountDrawer as V}from"./hooks-CRfHBoLD.js";import"./UnitagsApiClient-CvShPRCK.js";import"./Identicon-SnsLMqUD.js";import"./api-u3dxy1Uz.js";import"./styled-components-DbVO3u5J.js";import{ThemedText as E}from"./text-CK4eXdYc.js";import"./index.esm-D6PJCa7X.js";import{EllipsisTamaguiStyle as A}from"./ellipsis-DjwAKJIh.js";import{DeltaArrow as mo}from"./Delta-_V0Ythbq.js";import{Trace_default as ao}from"./Trace-DgHN3Ak9.js";import{ContextMenu as po,ContextMenuTriggerMode as co}from"./ContextMenuV2.web-DtsTwCPj.js";import{useBooleanState as lo}from"./useBooleanState-QNOWYlXb.js";import{Row_default as uo}from"./Row-D0lmZ56K.js";import{PortfolioLogo as fo}from"./PortfolioLogo-C-reBpb6.js";import"./CurrencyLogo-CvvmRzOI.js";import"./DoubleLogo-D40dQ2P7.js";import"./polished.es-BASfrnSv.js";import"./loading-C4pQN7jn.js";import{PortfolioRow as ho,PortfolioSkeleton as xo}from"./PortfolioRow-D03IkJcm.js";import{EmptyWalletModule as bo}from"./EmptyWalletContent-KKAW7AY9.js";import{ExpandoRow as go}from"./ExpandoRow-ByvAjPmx.js";var c=N(z());function Co({tokenBalance:r}){const{t:e}=U(),f=B(),s=R(),t=H(),{isTestnetModeEnabled:u}=L(),[l,d]=(0,c.useState)(!1),h=Q(t.address),x=(0,c.useCallback)((g,q)=>{t.address&&h(g,q)},[t.address,h]),{balanceUSD:i,quantity:k,isHidden:C,currencyInfo:m}=r,{chainId:b,isNative:y}=m.currency,a=y?$:m.currency.address,p=O(b),n=!C,v=k>0&&!!i&&i>0,T=(0,c.useCallback)(async()=>{await no(a),d(!0),setTimeout(()=>{d(!1)},400)},[a]),w=(0,c.useCallback)(()=>{s(`/send?chain=${p}&inputCurrency=${a}`)},[s,a,p]),S=(0,c.useCallback)(()=>{s(`/swap?chain=${p}&inputCurrency=${a}`)},[s,a,p]),M=(0,c.useCallback)(()=>{if(u)return;const g=F({chainUrlParam:p,chain:b,address:a});s(g)},[u,s,a,b,p]),I=(0,c.useCallback)(()=>{x(n,r),f(so({currencyId:m.currencyId.toLowerCase(),isVisible:!n}))},[x,n,r,f,m.currencyId]);return(0,c.useMemo)(()=>{const g=[{onPress:T,label:e(l?"notification.copied.address":"common.copy.address"),Icon:l?W:oo,disabled:y,closeDelay:400,iconColor:l?"$statusSuccess":"$neutral2"},{label:e("common.button.swap"),onPress:S,Icon:Z},{label:e("common.button.send"),onPress:w,Icon:io},{label:e("token.details"),onPress:M,Icon:eo}];return v&&g.push({label:e(n?"tokens.action.hide":"tokens.action.unhide"),onPress:I,Icon:n?ro:to,showDivider:!0}),g},[T,l,e,y,S,w,M,v,n,I])}var o=N(G());function Dr(){const r=V(),e=H(),[f,s]=(0,c.useState)(!1),{data:t,loading:u}=X({address:e.address}),l=u&&!t,d=(t==null?void 0:t.hiddenBalances)??[],h=(t==null?void 0:t.balances)??[];if(l)return(0,o.jsx)(xo,{});if(d.length===0&&h.length===0)return(0,o.jsx)(bo,{type:"token",onNavigateClick:r.close});const x=()=>s(i=>!i);return(0,o.jsxs)(K,{children:[h.map(i=>(0,o.jsx)(_,{tokenBalance:i},i.id)),(0,o.jsx)(go,{isExpanded:f,toggle:x,numItems:d.length,children:d.map(i=>(0,o.jsx)(_,{tokenBalance:i},i.id))})]})}function _({tokenBalance:r}){const{t:e}=U(),{formatPercent:f,formatNumberOrString:s,convertFiatAmountFormatted:t}=Y(),{isTestnetModeEnabled:u}=L(),l=R(),d=V(),{value:h,setTrue:x,setFalse:i}=lo(!1),k=Co({tokenBalance:r}),C=r.currencyInfo.currency,{chainId:m,name:b,symbol:y,isNative:a}=C,p=r.relativeChange24??0,n=a?$:C.address,v=(0,c.useCallback)(async()=>{u||(l(F({address:n,chain:m,chainUrlParam:O(m),inputAddress:n})),d.close())},[d,u,l,n,m]),T=(0,o.jsx)(ho,{left:(0,o.jsx)(fo,{chainId:m,currencies:[C],size:40}),title:(0,o.jsx)(P,{variant:"subheading2",...A,children:b}),descriptor:(0,o.jsxs)(P,{variant:"body2",color:"$neutral2",...A,children:[s({value:r.quantity,type:D.TokenNonTx})," ",y]}),onClick:v,right:r.balanceUSD&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(E.SubHeader,{children:t(r.balanceUSD,D.PortfolioBalance)}),(0,o.jsxs)(uo,{justify:"flex-end",children:[(0,o.jsx)(mo,{delta:p,formattedDelta:f(Math.abs(p))}),(0,o.jsx)(E.BodySecondary,{children:f(Math.abs(p))})]})]})});return(0,o.jsx)(ao,{logPress:!0,element:J.MiniPortfolioTokenRow,properties:{chain_id:m,token_name:b,address:n},children:u?(0,o.jsxs)(j,{placement:"right",delay:{open:2e3},children:[(0,o.jsxs)(j.Content,{children:[(0,o.jsx)(P,{variant:"body4",children:e("token.details.testnet.unsupported")}),(0,o.jsx)(j.Arrow,{})]}),(0,o.jsx)(j.Trigger,{children:T})]}):(0,o.jsx)(po,{menuItems:k,triggerMode:co.Secondary,isOpen:h,closeMenu:i,openMenu:x,children:T})})}export{Dr as default};
