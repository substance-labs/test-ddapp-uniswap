import{__toESM as E}from"./chunk-DgAfPHQg.js";import{require_react as R}from"./react-CNoFhWkx.js";import{Button as f,RotatableChevron as I,TouchableArea as T}from"./src-DOOtfpHS.js";import{useTranslation as w}from"./useTranslation-BotBuoJf.js";import{require_jsx_runtime as D}from"./jsx-runtime-D7bMTQeG.js";import{uniswapUrls as B}from"./urls-kwiZbYPW.js";import{concatClassName as k}from"./Loader-D83W8G1W.js";import{CopyAlt as H}from"./CopyAlt-CU_LJNbN.js";import{useIsMobile as y}from"./useIsMobile-Cq3RSgOi.js";import{styled_components_default as N}from"./styled-components-DbVO3u5J.js";import{ThemedText as a}from"./text-CK4eXdYc.js";import{CopyToClipboard as L}from"./CopyHelper-DOhhKKQB.js";import{ExternalLink as M}from"./Links-Xomrvpth.js";const W={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},c=console,l={};Object.keys(W).forEach(t=>{l[t]=c[t]});const d="Datadog Browser SDK:",z={debug:l.debug.bind(c,d),log:l.log.bind(c,d),info:l.info.bind(c,d),warn:l.warn.bind(c,d),error:l.error.bind(c,d)},A="https://docs.datadoghq.com",qe=`${A}/real_user_monitoring/browser/troubleshooting`,U=1e3,F=60*U,G=60*F,q=24*G,Pe=365*q;function P(){return new Date().getTime()}function K(){return P()}function Y(){return performance.now()}function V(){return{relative:Y(),timeStamp:K()}}let h,J=!1;function j(t,e,o){try{return t.apply(e,o)}catch(r){X(r)}}function X(t){if(g(t),h)try{h(t)}catch(e){g(e)}}function g(...t){J&&z.error("[MONITOR]",...t)}const _="?";function Q(t){const e=[];let o=m(t,"stack");const r=String(t);return o&&o.startsWith(r)&&(o=o.slice(r.length)),o&&o.split(`
`).forEach(i=>{const s=te(i)||ne(i)||ie(i)||ce(i);s&&(!s.func&&s.line&&(s.func=_),e.push(s))}),{message:m(t,"message"),name:m(t,"name"),stack:e}}const C="((?:file|https?|blob|chrome-extension|electron|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",p="(?::(\\d+))",Z=new RegExp(`^\\s*at (.*?) ?\\(${C}${p}?${p}?\\)?\\s*$`,"i"),ee=new RegExp(`\\((\\S*)${p}${p}\\)`);function te(t){const e=Z.exec(t);if(!e)return;const o=e[2]&&e[2].indexOf("native")===0,r=e[2]&&e[2].indexOf("eval")===0,i=ee.exec(e[2]);return r&&i&&(e[2]=i[1],e[3]=i[2],e[4]=i[3]),{args:o?[e[2]]:[],column:e[4]?+e[4]:void 0,func:e[1]||_,line:e[3]?+e[3]:void 0,url:o?void 0:e[2]}}const oe=new RegExp(`^\\s*at ?${C}${p}?${p}??\\s*$`,"i");function ne(t){const e=oe.exec(t);if(e)return{args:[],column:e[3]?+e[3]:void 0,func:_,line:e[2]?+e[2]:void 0,url:e[1]}}const re=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function ie(t){const e=re.exec(t);if(e)return{args:[],column:e[4]?+e[4]:void 0,func:e[1]||_,line:+e[3],url:e[2]}}const se=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle|\[wasm code\])(?::(\d+))?(?::(\d+))?\s*$/i,ae=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function ce(t){const e=se.exec(t);if(!e)return;const o=e[3]&&e[3].indexOf(" > eval")>-1,r=ae.exec(e[3]);return o&&r&&(e[3]=r[1],e[4]=r[2],e[5]=void 0),{args:e[2]?e[2].split(","):[],column:e[5]?+e[5]:void 0,func:e[1]||_,line:e[4]?+e[4]:void 0,url:e[3]}}function m(t,e){if(typeof t!="object"||!t||!(e in t))return;const o=t[e];return typeof o=="string"?o:void 0}function le(t){const o=new Error(t);o.name="HandlingStack";let r;return j(()=>{const i=Q(o);i.stack=i.stack.slice(2),r=pe(i)}),r}function pe(t){let e=de(t);return t.stack.forEach(o=>{const r=o.func==="?"?"<anonymous>":o.func,i=o.args&&o.args.length>0?`(${o.args.join(", ")})`:"",s=o.line?`:${o.line}`:"",u=o.line&&o.column?`:${o.column}`:"";e+=`
  at ${r}${i} @ ${o.url}${s}${u}`}),e}function de(t){return`${t.name||"Error"}: ${t.message}`}let b;const _e=[];function ue(t){b?t(b):_e.push(t)}function me(t,e){const o=le("react error"),r=V();ue(i=>{j(()=>{var s;i.addError({error:t,handlingStack:o,componentStack:(s=e.componentStack)!==null&&s!==void 0?s:void 0,context:{framework:"react"},startClocks:r})})})}var x=E(R());const S={didCatch:!1,error:null};var xe=class extends x.Component{constructor(t){super(t),this.resetError=()=>{this.setState(S)},this.state=S}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}componentDidCatch(t,e){me(t,e)}render(){return this.state.didCatch?x.createElement(this.props.fallback,{error:this.state.error,resetError:this.resetError}):this.props.children}},n=E(D());const fe="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _mt-spacing12 _mb-spacing12 _gap-t-space-spa94665593 ",he="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap1573 _alignItems-center _justifyContent-space-betwe3241 ",ge=" _pt-t-space-spa1360334047 _pr-t-space-spa1360334047 _pb-t-space-spa1360334047 _pl-t-space-spa1360334047",be=" _pt-t-space-spa1360334076 _pr-t-space-spa1360334076 _pb-t-space-spa1360334076 _pl-t-space-spa1360334076",Se=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _alignSelf-stretch _backgroundColor-surface2 _gap-t-space-spa94665593 _borderTopLeftRadius-t-radius-ro291586420 _borderTopRightRadius-t-radius-ro291586420 _borderBottomRightRadius-t-radius-ro291586420 _borderBottomLeftRadius-t-radius-ro291586420  ",ve="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap56 ",Ee="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row ",we="  _display-flex _alignItems-stretch _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _flexBasis-0px _flexGrow-1 ",ke="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _width-10037 _gap-t-space-gap1569 ",ye=" _pt-t-space-spa94665586 _pr-t-space-spa94665586 _pb-t-space-spa94665586 _pl-t-space-spa94665586 _maxWidth-500px",Ne=" _pt-t-space-spa1360334076 _pr-t-space-spa1360334076 _pb-t-space-spa1360334076 _pl-t-space-spa1360334076 _maxWidth-10037",je=" _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1602 _width-10037 _justifyContent-center  ",Ce="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _height-10037 _width-10037 _position-absolute _justifyContent-center _top-0px _left-0px _right-0px _bottom-0px ",$e=N.code`
  font-weight: 485;
  font-size: 12px;
  line-height: 16px;
  word-wrap: break-word;
  width: 100%;
  color: ${({theme:t})=>t.neutral1};
  font-family: ${({theme:t})=>t.fonts.code};
  overflow: scroll;
  max-height: calc(100vh - 450px);
  -webkit-overflow-scrolling: touch;
`,v=N.div`
  border-bottom: 1px solid ${({theme:t})=>t.surface3};
`,Oe=({error:t,eventId:e})=>{const{t:o}=w(),r=y(),i=t.stack||t.message;return(0,n.jsx)("div",{className:Ce,children:(0,n.jsxs)("div",{className:k(""+(je+(r?Ne:ye))),children:[(0,n.jsx)(Re,{errorDetails:i,eventId:e}),(0,n.jsxs)("div",{className:ke,children:[(0,n.jsx)("div",{className:we,children:(0,n.jsx)(f,{emphasis:"primary",size:"small",variant:"branded",onPress:()=>window.location.reload(),children:o("common.reload.label")})}),(0,n.jsx)(M,{style:{flexGrow:1,flexBasis:0},id:"get-support-on-discord",href:B.helpRequestUrl,target:"_blank",children:(0,n.jsx)("div",{className:Ee,children:(0,n.jsx)(f,{emphasis:"secondary",size:"small",variant:"branded",children:o("common.getSupport.button")})})})]})]})})};function Re({errorDetails:t,eventId:e}){const{t:o}=w(),[r,i]=(0,x.useState)(!1),s=y(),[u,$]=s?[a.HeadlineSmall,a.BodySmall]:[a.HeadlineLarge,a.BodySecondary];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:ve,children:[(0,n.jsx)(u,{textAlign:"center",children:o("common.card.error.description")}),(0,n.jsx)($,{textAlign:"center",color:"neutral2",children:o(e?"error.request.provideId":"common.error.request")})]}),(0,n.jsxs)("div",{className:k(""+(Se+(s?be:ge))),children:[(0,n.jsxs)("div",{className:he,children:[(0,n.jsx)(a.SubHeader,{children:e?o("error.id",{eventId:e}):o("common.error.details")}),(0,n.jsx)(L,{toCopy:e??t,children:(0,n.jsx)(H,{color:"$neutral2",size:"$icon.24"})})]}),(0,n.jsx)(v,{}),(0,n.jsxs)("div",{className:fe,children:[(0,n.jsx)($e,{children:t.split(`
`).slice(0,r?void 0:4)}),(0,n.jsx)(v,{})]}),(0,n.jsxs)(T,{flexDirection:"row",justifyContent:"space-between",onPress:()=>i(O=>!O),children:[(0,n.jsx)(a.Link,{color:"neutral2",children:o(r?"common.showLess.button":"common.showMore.button")}),(0,n.jsx)(I,{width:"$icon.20",height:"$icon.20",direction:r?"up":"down"})]})]})]})}function Ke({children:t,fallback:e}){return(0,n.jsx)(xe,{fallback:e??(({error:o})=>(0,n.jsx)(Oe,{error:o,eventId:null})),children:t})}export{Ke as ErrorBoundary};
