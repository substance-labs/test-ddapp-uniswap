import{__toESM as ke}from"./chunk-DgAfPHQg.js";import"./preload-helper-CaakwtpC.js";import"./i18next-DD3sT7R5.js";import{require_react as Qe}from"./react-CNoFhWkx.js";import{Button as we,Switch as Je,Trans as V}from"./src-DOOtfpHS.js";import{useTranslation as ie}from"./useTranslation-BotBuoJf.js";import"./index.web-BqgtOHN3.js";import"./constants-CrXoXfFH.js";import{useDispatch as Ze}from"./es-Iwj7vF3u.js";import"./react-dom-xovCOntK.js";import"./react-is-BJXMVkew.js";import{ReactQueryCacheKey as Xe}from"./cache-BFZkIToX.js";import"./dist-Q7olfaoJ.js";import"./tslib.es6-Dbpxy1u8.js";import"./dist-QCpUvRkJ.js";import"./chunk-QMGIS6GS-B91ZVkXt.js";import{require_jsx_runtime as Ye}from"./jsx-runtime-D7bMTQeG.js";import"./useEnabledChains-DuB86c95.js";import{logger as ne}from"./hooks-BXO4d1DJ.js";import"./dist-ceZDlR1V.js";import"./analytics.web-DLc1_wTk.js";import"./redux-toolkit.esm-BnRUBto_.js";import"./utils-CK6a47NA.js";import{CurrencyAmount as H,PollingInterval as se,init_jsbi as eo,init_sdk_core_esm as je,jsbi_default as ae,toSupportedChainId as oo}from"./utils-BX1Fu73x.js";import"./bn-D7somgUb.js";import"./lib-DPFIyRke.js";import"./misc-BMnlqqV4.js";import"./currencyId-Ci6selsx.js";import"./config-C4KrHqHG.js";import{ONE_SECOND_MS as ce}from"./time-D_OqcZ4M.js";import"./features-yACC1hVw.js";import{InterfaceEventName as to}from"./interface-BdpC4qOF.js";import"./element-Wnp4RkdY.js";import{ModalName as le}from"./modal-Dvm06CN4.js";import"./isAddress-P2vaZgmG.js";import"./chain-ghiO403o.js";import"./slice-cfC6NcyN.js";import"./node-C_BraYgX.js";import"./formatUnits-DkyMpOD7.js";import"./_u64-b_viZRi_.js";import"./sha2-Jt0E41S_.js";import"./sha256-BqbhXHGu.js";import"./call-CTDbaN-t.js";import"./parseAccount-CRyN5swV.js";import"./encodeFunctionData-CD63gkvM.js";import"./public-fap09Zv6.js";import"./stringify-B82RFruy.js";import"./rpc-nQR4Ijs4.js";import"./dist-CBK-d0jO.js";import"./hmac-D-QTodfL.js";import"./linking-D29RyAR8.js";import"./lib-CKG8APVv.js";import"./lib-XGdDYWzD.js";import"./V3DutchOrderTrade-Cl7yELmp.js";import"./v3-sdk.esm-CHH6GWR1.js";import"./hash-05APZTFm.js";import"./inherits_browser-Dqx8HagI.js";import{useQuery as io}from"./useQuery-D_ZCw8XG.js";import"./lib-CWHZrl0T.js";import"./v2-sdk.esm-CIiDMO7F.js";import"./lib-BncBk3QF.js";import"./utils-7WDx1QGa.js";import"./lib-CgeiDO5B.js";import"./lib-Dj-AwQVD.js";import"./types-DbOmsKtk.js";import"./getCurrencyAmount-vvZpAzIm.js";import"./addresses-D56PBUHX.js";import{getSymbolDisplayText as de}from"./currency-DIOEzjz2.js";import"./ms-BqmEYo6j.js";import"./configs-B4dDdw82.js";import"./hooks-Bp0VtWbX.js";import"./statsig-B7I9iQRf.js";import"./usePollingIntervalByChain-YBOfXXzb.js";import"./erc20-CdGGKIp0.js";import{nativeOnChain as ro}from"./objects-DlLkJwrJ.js";import{sendAnalyticsEvent as no}from"./send.web-CrSXW2rw.js";import{decreaseLpPosition as so}from"./TradingApiClient-Cp_0ez5S.js";import{ProtocolItems as ao}from"./ProtocolItems-DhZWSiXS.js";import"./selectors-BwkayGDl.js";import{useTransactionGasFee as co,useUSDCValue as R,useUSDCurrencyAmountOfGasFee as pe}from"./useUSDCPrice-HO7Wgroz.js";import"./balances-DV0Wvmri.js";import"./getCurrencySafetyInfo-BHD1ohD-.js";import"./mutation-CRQvRc5_.js";import"./infiniteQueryBehavior-C10I_UVS.js";import"./connector-Cw8HJLtm.js";import"./queryOptions-P48mrm5X.js";import"./connect-transport-9OnIgPz5.js";import"./proto3-DkSQZto4.js";import"./embeddedWallet-BdHUTaHg.js";import"./promise-client-BYLTs0DC.js";import{uniswapUrls as lo}from"./urls-kwiZbYPW.js";import"./createApiClient-BjXZMbEB.js";import"./constants-D9cStT7K.js";import"./base-DVpWJ4NW.js";import{ProtocolVersion as q}from"./types_pb-yZxlo4b1.js";import"./hooks-Dhx5teK4.js";import"./transactionDetails-BsNW_jus.js";import{NumberType as P}from"./types-JuyYLR0O.js";import{useLocalizationContext as po}from"./LocalizationContext-B31peW1_.js";import"./getAlertColor-J5DrJWHv.js";import"./currency-xm5i4cH7.js";import"./ethers-D2SIY1xg.js";import"./useSupportedChainId-DskHoisQ.js";import{useWallet as Ie}from"./useWallet-CL5owP9P.js";import{useTrace as mo}from"./TraceContext-Ddfk7zjz.js";import{TransactionStepType as uo}from"./types-7DAoWLTI.js";import{getLPBaseAnalyticsProperties as vo}from"./analytics-UE3_EENu.js";import"./types-BSmAADNJ.js";import"./eventemitter3-DFes51ku.js";import"./eventemitter3-BHLpX1jX.js";import"./dist-BWRHWQ_J.js";import"./readContract-Cae4hIjn.js";import"./recoverAddress-oPdWABRo.js";import"./getBalance-TsPVbzB5.js";import"./localBatchGatewayRequest-CdT4Kija.js";import"./createBatchScheduler-BJBpfhFD.js";import"./createTransport-WEDNYdh5.js";import"./useEthersProvider-CBgc_azi.js";import"./http-CIklBnX8.js";import"./wagmiConfig-0BYSDqyO.js";import"./hashMessage-DdzTBpWL.js";import"./multicall-BYS6jvE9.js";import"./secp256k1-fbKD5lyl.js";import"./getAction-BBhbL9mE.js";import{useAccount as xo}from"./useAccount-C5hwiBwN.js";import"./config-CDfnfyHL.js";import"./useSwitchChain-CY8eYAUF.js";import"./query-qNZtVuxH.js";import"./constants-CGJJmXwV.js";import"./utils-CDaPKk14.js";import"./zIndex-CmEE31Ab.js";import"./passkey.web-DakcatU3.js";import"./hex-njd-4N-2.js";import"./slice-qANrfSbi.js";import"./noop-BDbB2pLB.js";import"./walletMeta-DaLhfhet.js";import"./signing-DH5GfhKu.js";import"./i18n-CroUvoJw.js";import"./v4-D6Rlvprs.js";import"./errors-BaezSPLl.js";import"./swapErrorToUserReadableMessage-DgHZMHU-.js";import{LiquidityTransactionType as me,getErrorMessageToDisplay as ue,isSignerMnemonicAccountDetails as _o,isValidLiquidityTxContext as yo,liquiditySaga as fo,parseErrorMessageTitle as ve,validateTransactionRequest as xe}from"./AccountDetails-pkaz6EG4.js";import{Text as l,concatClassName as ho,iconSizes as go}from"./Loader-D83W8G1W.js";import"./client-BlU1ozBP.js";import"./Anchor-B1nkrQbP.js";import"./Input-ClKbNpxm.js";import"./AnimatePresencePager-Dk43KD9E.js";import{HeightAnimator as bo}from"./HeightAnimator-DF8znv78.js";import{ProgressIndicator as To,getTradeSettingsDeadline as So,logContextUpdate as Ao,useTransactionSettingsStore as Co}from"./getTradeSettingsDeadline-B3uZN4NF.js";import"./urls-aCnKF23w.js";import"./encode-utf8-DiSL6KQ9.js";import"./dijkstra-6umg7ymP.js";import"./UniconSVGs-CVEtuhJW.js";import"./AlertTriangleFilled-C9tf2eUJ.js";import"./LpIncentivesAprDisplay-DAZ9W112.js";import"./Eye-D482ahgC.js";import"./InfoCircleFilled-CBAL5Wj0.js";import{Passkey as ko}from"./Passkey-Bey7xD4Z.js";import{ErrorCallout as wo}from"./ErrorCallout-YxcfJphA.js";import"./SplitLogo-Ct--07LT.js";import{LiquidityPositionInfo as jo}from"./LiquidityPositionInfo-Cs-PVI1A.js";import"./reducer-CcXO4HTO.js";import{useSelectChain as Io}from"./useSelectChain-CA5zoRWi.js";import"./tokens-Dxd89cHj.js";import"./timing-DsWr56iv.js";import"./experiments-rc6XUB0U.js";import"./SwapFormStoreContext-3NrPQE3L.js";import"./useSwapFormStore-D1oVGbBf.js";import"./types-NWGai6aQ.js";import"./useCurrencyInfo-Bxa3J04d.js";import"./createEthersProvider-B5AW2bpJ.js";import"./reducer-1kwGyyVS.js";import{useAppSelector as Lo}from"./hooks-Muz170pO.js";import{CurrencyLogo as _e,NetworkLogo as Ro}from"./TokenLogo-JlSSDr3Q.js";import{useModalState as qo}from"./useModalState-BcPI2EiQ.js";import{useCurrencyInfo as ye}from"./Tokens-HEKZ8edJ.js";import"./useIsMobile-Cq3RSgOi.js";import"./styled-components-DbVO3u5J.js";import"./text-CK4eXdYc.js";import"./index.esm-D6PJCa7X.js";import"./CopyHelper-DOhhKKQB.js";import"./copy-bNdbH7uS.js";import"./prop-types-BL9JsGr9.js";import"./clickable-D5qUCIhr.js";import"./ellipsis-DjwAKJIh.js";import"./testIDs-CxYpwoP6.js";import"./Trace-DgHN3Ak9.js";import{Modal as Po}from"./Modal.web-DHbL39pN.js";import"./WarningModal-f8Gfhd_G.js";import"./InfoTooltip.web-CkgGEmd3.js";import{useGetPasskeyAuthStatus as No}from"./useGetPasskeyAuthStatus-QVLoUPch.js";import"./dismissNativeKeyboard.web-99F1bxCR.js";import"./pools-5GjP-hMy.js";import"./types-Ctc23WnH.js";import"./Row-D0lmZ56K.js";import"./Pill-Bbfdbo1q.js";import{useResizeObserver as Do}from"./bundle.esm-B4P3X753.js";import"./CurrencyLogo-CvvmRzOI.js";import"./styled-qLLlrMEu.js";import"./NumericalInput-wkthWxek.js";import{NumericalInputMimic as Bo,NumericalInputSymbolContainer as Eo,NumericalInputWrapper as $o}from"./shared-EXoQIK7V.js";import"./Tooltip-DPNhKWF2.js";import"./useInterval-7f86mkEJ.js";import"./polished.es-BASfrnSv.js";import"./useHoverProps-BdQsOXMz.js";import{DetailLineItem as E}from"./DetailLineItem-d-0mcMrN.js";import{canUnwrapCurrency as fe,getCurrencyWithOptionalUnwrap as he,getTokenOrZeroAddress as ge}from"./currency-Brc-ymXr.js";import{getProtocolItems as Uo}from"./protocolVersion-Djp_Gxjw.js";import"./LPIncentiveFeeStatTooltip-CknsSvzz.js";import"./feeTiers-D9BvLkmt.js";import"./LiquidityPositionInfoBadges-DdjNrqYk.js";import{LPTransactionSettingsStoreContextProvider as Fo,useCheckLpApprovalQuery as Mo,useLPSlippageValue as zo}from"./LPTransactionSettingsStoreContextProvider-DlM9rbYL.js";import{StyledPercentInput as Wo}from"./PercentInput-R6KfjzCN.js";import{LiquidityModalHeader as Vo,TokenInfo as be}from"./TokenInfo-B8OkTNxp.js";import{LiquidityModalDetailRows as Ho}from"./LiquidityModalDetailRows-DAKn3k1K.js";import{useGetPoolTokenPercentage as Oo}from"./useGetPoolTokenPercentage-BWwxCwuY.js";import{PredefinedAmount as Go}from"./PredefinedAmount-D_ex-B61.js";var m=ke(Qe()),e=ke(Ye());let N=(function(i){return i[i.Input=0]="Input",i[i.Review=1]="Review",i})({});const Le=(0,m.createContext)({step:N.Input,setStep:()=>null,percent:"",setPercent:()=>null,percentInvalid:!0,unwrapNativeCurrency:!0,setUnwrapNativeCurrency:()=>null,currentTransactionStep:void 0,setCurrentTransactionStep:()=>null});function Ko({children:i}){var a;const[c,o]=(0,m.useState)(N.Input),[t,n]=(0,m.useState)(!0),[s,f]=(0,m.useState)(""),[h,b]=(0,m.useState)(),r=(a=Lo(d=>d.application.openModal))===null||a===void 0?void 0:a.initialState,T=s==="0"||s===""||!s,v=(0,m.useMemo)(()=>{const d=he({currency:r==null?void 0:r.currency0Amount.currency,shouldUnwrap:t&&(r==null?void 0:r.version)!==q.V4}),p=he({currency:r==null?void 0:r.currency1Amount.currency,shouldUnwrap:t&&(r==null?void 0:r.version)!==q.V4});if(!(!d||!p))return{TOKEN0:d,TOKEN1:p}},[r==null?void 0:r.version,r==null?void 0:r.currency0Amount.currency,r==null?void 0:r.currency1Amount.currency,t]),g=(0,m.useMemo)(()=>({percent:s,setPercent:f,step:c,setStep:o,positionInfo:r,currencies:v,percentInvalid:T,unwrapNativeCurrency:t,setUnwrapNativeCurrency:n,currentTransactionStep:h,setCurrentTransactionStep:b}),[s,c,r,v,T,t,n,h]);return(0,e.jsx)(Le.Provider,{value:g,children:i})}function $(){const i=(0,m.useContext)(Le);if(i===void 0)throw new Error("`useRemoveLiquidityTxContext` must be used inside of `RemoveLiquidityTxContextProvider`");return i}function Qo({params:i,deadlineInMinutes:a,...c}){const o=[Xe.TradingApi,lo.tradingApiPaths.decreaseLp,i],t=So(a),n={...i,deadline:t};return io({queryKey:o,queryFn:async()=>{if(!i)throw{name:"Params are required"};return await so(n)},...c})}eo();function Jo({account:i}){var a,c;const{positionInfo:o,percent:t,percentInvalid:n,currencies:s,currentTransactionStep:f}=$(),{customDeadline:h,customSlippageTolerance:b}=Co(_=>({customDeadline:_.customDeadline,customSlippageTolerance:_.customSlippageTolerance})),[r,T]=(0,m.useState)(!1),v=s==null?void 0:s.TOKEN0,g=s==null?void 0:s.TOKEN1,d=(0,m.useMemo)(()=>{if(!(!o||!o.liquidityToken||n||!o.liquidityAmount))return{protocol:ao.V2,walletAddress:i,chainId:o.liquidityToken.chainId,positionToken:o.liquidityToken.address,positionAmount:o.liquidityAmount.multiply(ae.BigInt(t)).divide(ae.BigInt(100)).quotient.toString()}},[o,t,i,n]),{data:p,isLoading:A,error:y,refetch:C}=Mo({params:d,staleTime:5*ce,enabled:!!d});y&&ne.info("RemoveLiquidityTxAndGasInfo","RemoveLiquidityTxAndGasInfo",ve(y,{defaultTitle:"unkown CheckLpApprovalQuery"}),{error:JSON.stringify(y),v2LpTokenApprovalQueryParams:JSON.stringify(d)});const w=pe(o==null||(a=o.liquidityToken)===null||a===void 0?void 0:a.chainId,p==null?void 0:p.gasFeePositionTokenApproval)??void 0,u=!!p,{token0UncollectedFees:D,token1UncollectedFees:B}=o??{},j=(0,m.useMemo)(()=>{var _,S;const W=Uo(o==null?void 0:o.version);if(!(!o||!W||!i||n||!v||!g))return{simulateTransaction:!u,protocol:W,tokenId:o.tokenId?Number(o.tokenId):void 0,chainId:o.currency0Amount.currency.chainId,walletAddress:i,liquidityPercentageToDecrease:Number(t),liquidity0:o.version===q.V2?o.currency0Amount.quotient.toString():void 0,liquidity1:o.version===q.V2?o.currency1Amount.quotient.toString():void 0,positionLiquidity:o.version===q.V2?(_=o.liquidityAmount)===null||_===void 0?void 0:_.quotient.toString():o.liquidity,expectedTokenOwed0RawAmount:o.version!==q.V4?D:void 0,expectedTokenOwed1RawAmount:o.version!==q.V4?B:void 0,position:{tickLower:o.tickLower!==void 0?o.tickLower:void 0,tickUpper:o.tickUpper!==void 0?o.tickUpper:void 0,pool:{token0:ge(v),token1:ge(g),fee:(S=o.feeTier)===null||S===void 0?void 0:S.feeAmount,tickSpacing:o.tickSpacing?Number(o.tickSpacing):void 0,hooks:o.v4hook}},slippageTolerance:b}},[o,i,n,v,g,u,t,D,B,b]),U=(f==null?void 0:f.step.type)===uo.DecreasePositionTransaction,{data:x,isLoading:O,error:I,refetch:F}=Qo({params:j,deadlineInMinutes:h,refetchInterval:r?!1:5*ce,retry:!1,enabled:!U&&!!j&&(!n&&!d||!A&&!y&&!!p)});if((0,m.useEffect)(()=>{T(ue({approvalError:y,calldataError:I}))},[I,j,y]),I){const _=ve(I,{defaultTitle:"DecreaseLpPositionCalldataQuery"});ne.error(_,{tags:{file:"RemoveLiquidityTxAndGasInfo",function:"useEffect"}}),no(to.DecreaseLiquidityFailed,{message:_})}const{value:M}=co({tx:x==null?void 0:x.decrease,skip:!!(x!=null&&x.gasFee)}),L=pe(oo(x==null||(c=x.decrease)===null||c===void 0?void 0:c.chainId)??void 0,(x==null?void 0:x.gasFee)||M)??void 0;return{gasFeeEstimateUSD:w?L==null?void 0:L.add(w):L,decreaseCalldataLoading:O,decreaseCalldata:x,v2LpTokenApproval:p,approvalLoading:A,error:ue({approvalError:y,calldataError:I}),refetch:y?C:I?F:void 0}}je();const Re=(0,m.createContext)(void 0);function Zo({children:i}){var a;const c=Ie().evmAccount,{positionInfo:o,percent:t,currencies:n}=$(),s=Jo({account:c==null?void 0:c.address}),{approvalLoading:f,decreaseCalldataLoading:h,decreaseCalldata:b,error:r,refetch:T}=s;(0,m.useEffect)(()=>{Ao("RemoveLiquidityTxContext",s)},[s]);const v=n==null?void 0:n.TOKEN0,g=n==null?void 0:n.TOKEN1,d=(0,m.useMemo)(()=>{var p;if(!o||f||h||!b||!v||!g)return;const A=xe((p=s.v2LpTokenApproval)===null||p===void 0?void 0:p.positionTokenApproval),y=xe(b.decrease);if(!y)return;const{currency0Amount:C,currency1Amount:w}=o,u=H.fromRawAmount(v,C.quotient),D=H.fromRawAmount(g,w.quotient),B=u.multiply(t).divide(100),j=D.multiply(t).divide(100);return{type:me.Decrease,protocolVersion:o.version,action:{type:me.Decrease,currency0Amount:B,currency1Amount:j,liquidityToken:o.liquidityToken},approvePositionTokenRequest:A,txRequest:y,approveToken0Request:void 0,approveToken1Request:void 0,revokeToken0Request:void 0,revokeToken1Request:void 0,token0PermitTransaction:void 0,token1PermitTransaction:void 0,positionTokenPermitTransaction:void 0,permit:void 0}},[o,f,h,b,v,g,(a=s.v2LpTokenApproval)===null||a===void 0?void 0:a.positionTokenApproval,t]);return(0,e.jsx)(Re.Provider,{value:{...s,txContext:d,error:r,refetch:T},children:i})}const qe=()=>{const i=(0,m.useContext)(Re);if(i===void 0)throw new Error("`useRemoveLiquidityTxContext` must be used inside of `RemoveLiquidityTxContextProvider`");return i},Xo="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row ",Yo="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap56 _width-10037 _justifyContent-center ",et="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-center _width-10037 ",ot="  _borderBottomLeftRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453",tt=" _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _backgroundColor-surface2 _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _pt-t-space-pad1331704925 _pr-t-space-pad1331704925 _pb-t-space-pad1331704925 _pl-t-space-pad1331704925 _gap-t-space-gap1569  ",it="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap52 ",rt="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _width-10037 _justifyContent-flex-start ",nt="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1602 ",st="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _backgroundColor-surface2 _borderBottomLeftRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _justifyContent-space-betwe3241 _alignItems-center _pt-t-space-pad95589114 _pb-t-space-pad95589114 _pr-t-space-pad1331704925 _pl-t-space-pad1331704925 ",at=i=>{const a=Number(i);return!isNaN(a)&&a<=100};function ct(){const i=Do(),{t:a}=ie(),{percent:c,positionInfo:o,setPercent:t,setStep:n,percentInvalid:s,unwrapNativeCurrency:f,setUnwrapNativeCurrency:h}=$(),{gasFeeEstimateUSD:b,txContext:r,error:T,refetch:v}=qe();if(!o)throw new Error("RemoveLiquidityModal must have an initial state when opening");const{currency0Amount:g,currency1Amount:d}=o,p=fe(g.currency,o.version),A=fe(d.currency,o.version),y=ro(o.chainId),C=p||A,w=(0,m.useMemo)(()=>C?(0,e.jsxs)("div",{className:st,children:[(0,e.jsx)(l,{variant:"body3",color:"$neutral2",children:(0,e.jsx)(V,{i18nKey:"pool.withdrawAs",values:{nativeWrappedSymbol:y.symbol}})}),(0,e.jsx)(Je,{id:"add-as-weth",checked:f,onCheckedChange:()=>h(u=>!u),variant:"branded"})]}):null,[C,y,f,h]);return(0,e.jsxs)("div",{className:nt,children:[(0,e.jsx)("div",{className:rt,children:(0,e.jsx)(jo,{positionInfo:o})}),(0,e.jsxs)("div",{className:it,children:[(0,e.jsxs)("div",{className:ho(""+(tt+(C?" ":ot))),children:[(0,e.jsx)(l,{variant:"body3",color:"$neutral2",children:(0,e.jsx)(V,{i18nKey:"common.withdrawal.amount"})}),(0,e.jsx)("div",{className:et,children:(0,e.jsxs)($o,{width:"100%",children:[(0,e.jsx)(Wo,{value:c,onUserInput:u=>{at(u)&&t(u)},placeholder:"0",$width:c&&i.width?i.width+1:void 0,maxDecimals:0,maxLength:3}),(0,e.jsx)(Eo,{showPlaceholder:!c,children:"%"}),(0,e.jsx)(Bo,{ref:i.ref,children:c})]})}),(0,e.jsx)("div",{className:Yo,children:[25,50,75,100].map(u=>(0,e.jsx)(Go,{onPress:()=>{t(u.toString())},label:u<100?u+"%":a("swap.button.max")},u))})]}),w]}),(0,e.jsx)(Ho,{currency0Amount:g,currency1Amount:d,networkCost:b}),(0,e.jsx)(wo,{errorMessage:T,onPress:v}),(0,e.jsx)("div",{className:Xo,children:(0,e.jsx)(we,{isDisabled:s||!(r!=null&&r.txRequest),onPress:()=>n(N.Review),loading:!T&&!s&&!(r!=null&&r.txRequest),variant:"branded",size:"large",children:a("common.button.review")},"LoaderButton-animation-RemoveLiquidity-continue")})]})}je();const lt="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row ",dt="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap52 _alignItems-center ",Te="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap52 ",pt="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap56 _pr-t-space-pad1331704925 _pl-t-space-pad1331704925 ",mt="  is_Separator _display-flex _alignItems-stretch _flexDirection-column _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _flexShrink-1 _borderTopWidth-0px _borderRightWidth-0px _borderBottomWidth-1px _borderLeftWidth-0px _flexGrow-1 _height-0px _maxHeight-0px _mr-t-space-pad1331704925 _ml-t-space-pad1331704925 _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid ",Se="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa94665589 ",Ae="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap56 _alignItems-center ",Ce="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241 ",ut="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _pt-t-space-spa1360334076 _pr-t-space-spa1360334076 _pb-t-space-spa1360334076 _pl-t-space-spa1360334076 _gap-t-space-gap1569 _background-surface2 _borderTopLeftRadius-t-radius-ro291586453 _borderTopRightRadius-t-radius-ro291586453 _borderBottomRightRadius-t-radius-ro291586453 _borderBottomLeftRadius-t-radius-ro291586453 ",vt="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1573 _pr-t-space-pad1331704925 _pl-t-space-pad1331704925 ",xt="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1573 ";function _t({onClose:i}){var a,c;const{t:o}=ie(),{percent:t,positionInfo:n,currencies:s,currentTransactionStep:f,setCurrentTransactionStep:h}=$(),[b,r]=(0,m.useState)([]),T=qe(),{formatCurrencyAmount:v,formatPercent:g,convertFiatAmountFormatted:d}=po(),p=R(n==null?void 0:n.currency0Amount),A=R(n==null?void 0:n.currency1Amount),y=Io(),C=xo(),w=C.chainId,u=Ie().evmAccount,D=Ze(),B=mo(),{needsPasskeySignin:j}=No((a=C.connector)===null||a===void 0?void 0:a.id),{txContext:U,gasFeeEstimateUSD:x}=T,O=()=>{r([]),h(void 0),i()},I=()=>{h(void 0)};if(!n)throw new Error("RemoveLiquidityModal must have an initial state when opening");const{fee0Amount:F,fee1Amount:M}=n,L=R(F,se.Slow),z=R(M,se.Slow),{currency0Amount:_,currency1Amount:S,chainId:W,feeTier:G,tickSpacing:Pe,tickLower:Ne,tickUpper:De,version:Be,poolId:Ee,v4hook:$e}=n,k=(c=n.poolOrPair)===null||c===void 0?void 0:c.token1Price,K=(s==null?void 0:s.TOKEN0)??n.currency0Amount.currency,Q=(s==null?void 0:s.TOKEN1)??n.currency1Amount.currency,{unwrappedCurrency0AmountToRemove:J,unwrappedCurrency1AmountToRemove:Z,currency0AmountToRemove:Ue,currency1AmountToRemove:Fe}=(0,m.useMemo)(()=>{const te=H.fromRawAmount(K,_.quotient).multiply(t).divide(100),Oe=H.fromRawAmount(Q,S.quotient).multiply(t).divide(100),Ge=_.multiply(t).divide(100),Ke=S.multiply(t).divide(100);return{unwrappedCurrency0AmountToRemove:te,unwrappedCurrency1AmountToRemove:Oe,currency0AmountToRemove:Ge,currency1AmountToRemove:Ke}},[_,K,S,Q,t]),Me=R(J),ze=R(Z),X=_.subtract(Ue),Y=S.subtract(Fe),ee=R(X),oe=R(Y),re=Oo(n),We=ye(_.currency),Ve=ye(S.currency),He=()=>{const te=yo(U);!u||!_o(u)||!te||D(fo.actions.trigger({selectChain:y,startChainId:w,account:u,liquidityTxContext:U,setCurrentStep:h,setSteps:r,onSuccess:O,onFailure:I,analytics:{...vo({trace:B,fee:G==null?void 0:G.feeAmount,tickSpacing:Pe,tickLower:Ne,tickUpper:De,hook:$e,poolId:Ee,currency0:K,currency1:Q,currency0AmountUsd:Me,currency1AmountUsd:ze,version:Be}),expectedAmountBaseRaw:J.quotient.toString(),expectedAmountQuoteRaw:Z.quotient.toString(),closePosition:t==="100"}}))};return(0,e.jsxs)("div",{className:xt,children:[(0,e.jsxs)("div",{className:vt,children:[(0,e.jsx)(be,{currencyAmount:J,currencyUSDAmount:p==null?void 0:p.multiply(t).divide(100)}),(0,e.jsx)(l,{variant:"body3",color:"$neutral2",children:o("common.and")}),(0,e.jsx)(be,{currencyAmount:Z,currencyUSDAmount:A==null?void 0:A.multiply(t).divide(100)}),n.version!==q.V2&&(0,e.jsxs)("div",{className:ut,children:[(0,e.jsx)(l,{variant:"body4",color:"$neutral2",children:o("fee.uncollected")}),(0,e.jsxs)("div",{className:Ce,children:[(0,e.jsxs)("div",{className:Ae,children:[(0,e.jsx)(_e,{currencyInfo:We,size:24}),(0,e.jsxs)(l,{variant:"body3",children:[_.currency.symbol," fees"]})]}),(0,e.jsxs)("div",{className:Se,children:[(0,e.jsx)(l,{variant:"body3",children:v({value:F})})," ",(0,e.jsxs)(l,{variant:"body3",color:"$neutral2",children:["(",d(L==null?void 0:L.toExact(),P.FiatTokenPrice),")"]})]})]}),(0,e.jsxs)("div",{className:Ce,children:[(0,e.jsxs)("div",{className:Ae,children:[(0,e.jsx)(_e,{currencyInfo:Ve,size:24}),(0,e.jsxs)(l,{variant:"body3",children:[S.currency.symbol," fees"]})]}),(0,e.jsxs)("div",{className:Se,children:[(0,e.jsx)(l,{variant:"body3",children:v({value:M})})," ",(0,e.jsxs)(l,{variant:"body3",color:"$neutral2",children:["(",d(z==null?void 0:z.toExact(),P.FiatTokenPrice),")"]})]})]})]})]}),f?(0,e.jsx)(To,{steps:b,currentStep:f}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:mt}),(0,e.jsxs)("div",{className:pt,children:[(0,e.jsx)(E,{LineItem:{Label:()=>(0,e.jsx)(l,{variant:"body3",color:"$neutral2",children:o("common.rate")}),Value:()=>(0,e.jsx)(l,{variant:"body3",children:`1 ${k==null?void 0:k.baseCurrency.symbol} = ${k==null?void 0:k.toFixed()} ${k==null?void 0:k.quoteCurrency.symbol}`})}}),(0,e.jsx)(E,{LineItem:{Label:()=>(0,e.jsx)(l,{variant:"body3",color:"$neutral2",children:(0,e.jsx)(V,{i18nKey:"pool.newSpecificPosition",values:{symbol:_.currency.symbol}})}),Value:()=>(0,e.jsxs)("div",{className:Te,children:[(0,e.jsxs)(l,{variant:"body3",children:[v({value:X,type:P.TokenNonTx})," ",de(X.currency.symbol)]}),(0,e.jsx)(l,{variant:"body3",color:"$neutral2",children:`(${d(ee==null?void 0:ee.toExact(),P.FiatStandard)})`})]})}}),(0,e.jsx)(E,{LineItem:{Label:()=>(0,e.jsx)(l,{variant:"body3",color:"$neutral2",children:(0,e.jsx)(V,{i18nKey:"pool.newSpecificPosition",values:{symbol:S.currency.symbol}})}),Value:()=>(0,e.jsxs)("div",{className:Te,children:[(0,e.jsxs)(l,{variant:"body3",children:[v({value:Y,type:P.TokenNonTx})," ",de(Y.currency.symbol)]}),(0,e.jsx)(l,{variant:"body3",color:"$neutral2",children:`(${d(oe==null?void 0:oe.toExact(),P.FiatStandard)})`})]})}}),re?(0,e.jsx)(E,{LineItem:{Label:()=>(0,e.jsx)(l,{variant:"body3",color:"$neutral2",children:o("addLiquidity.shareOfPool")}),Value:()=>(0,e.jsx)(l,{variant:"body3",children:g(re.toFixed())})}}):null,(0,e.jsx)(E,{LineItem:{Label:()=>(0,e.jsx)(l,{variant:"body3",color:"$neutral2",children:o("common.networkCost")}),Value:()=>(0,e.jsxs)("div",{className:dt,children:[(0,e.jsx)(Ro,{chainId:W,size:go.icon16,shape:"square"}),(0,e.jsx)(l,{variant:"body3",children:d(x==null?void 0:x.toExact(),P.FiatGasPrice)})]})}})]}),(0,e.jsx)("div",{className:lt,children:(0,e.jsx)(we,{size:"large",onPress:He,icon:j?(0,e.jsx)(ko,{size:"$icon.24"}):void 0,children:o(j?"pool.removeLiquidity":"common.confirm")})})]})]})}function yt(){const{closeModal:i}=qo(le.RemoveLiquidity),{t:a}=ie(),{step:c,setStep:o,positionInfo:t}=$(),n=zo({version:t==null?void 0:t.version,currencyA:t==null?void 0:t.currency0Amount.currency,currencyB:t==null?void 0:t.currency1Amount.currency});let s;switch(c){case N.Input:s=(0,e.jsx)(ct,{});break;case N.Review:s=(0,e.jsx)(_t,{onClose:i});break}return(0,e.jsx)(Fo,{autoSlippageTolerance:n,children:(0,e.jsx)(Zo,{children:(0,e.jsxs)(Po,{name:le.RemoveLiquidity,onClose:i,isDismissible:!0,gap:"$gap24",padding:"$padding16",children:[(0,e.jsx)(Vo,{title:a("pool.removeLiquidity"),closeModal:i,goBack:c===N.Review?()=>o(N.Input):void 0}),(0,e.jsx)(bo,{useInitialHeight:!0,children:s})]})})})}function gs(){return(0,e.jsx)(Ko,{children:(0,e.jsx)(yt,{})})}export{gs as RemoveLiquidityModal};
