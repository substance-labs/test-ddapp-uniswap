import{__toESM as z}from"./chunk-DgAfPHQg.js";import"./preload-helper-CaakwtpC.js";import{require_react as G}from"./react-CNoFhWkx.js";import{Button as k,TouchableArea as U,Trans as _,useSporeColors as V}from"./src-DOOtfpHS.js";import{useTranslation as Y}from"./useTranslation-BotBuoJf.js";import"./index.web-BqgtOHN3.js";import"./constants-CrXoXfFH.js";import"./es-Iwj7vF3u.js";import"./react-dom-xovCOntK.js";import"./react-is-BJXMVkew.js";import"./cache-BFZkIToX.js";import"./dist-Q7olfaoJ.js";import"./tslib.es6-Dbpxy1u8.js";import"./dist-QCpUvRkJ.js";import{Link as P,useLocation as Z,useNavigate as J}from"./chunk-QMGIS6GS-B91ZVkXt.js";import{require_jsx_runtime as Q}from"./jsx-runtime-D7bMTQeG.js";import"./useEnabledChains-DuB86c95.js";import"./hooks-BXO4d1DJ.js";import"./dist-ceZDlR1V.js";import"./analytics.web-DLc1_wTk.js";import"./redux-toolkit.esm-BnRUBto_.js";import{Percent as X,Token as ii,V2_FACTORY_ADDRESSES as ti,init_jsbi as ei,init_sdk_core_esm as A,jsbi_default as T}from"./utils-BX1Fu73x.js";import"./bn-D7somgUb.js";import{getCreate2Address as ri,init_lib$2 as oi}from"./lib-DPFIyRke.js";import{BIG_INT_ZERO as ni}from"./misc-BMnlqqV4.js";import{currencyId as B}from"./currencyId-Ci6selsx.js";import"./config-C4KrHqHG.js";import"./time-D_OqcZ4M.js";import"./wallet-gHLp87c6.js";import"./features-yACC1hVw.js";import"./interface-BdpC4qOF.js";import"./element-Wnp4RkdY.js";import{InterfacePageName as si}from"./page-zDkoCQe4.js";import"./uniswap-Bm-6KILn.js";import"./isAddress-P2vaZgmG.js";import"./chain-ghiO403o.js";import"./slice-cfC6NcyN.js";import"./node-C_BraYgX.js";import"./formatUnits-DkyMpOD7.js";import"./_u64-b_viZRi_.js";import"./sha2-Jt0E41S_.js";import"./sha256-BqbhXHGu.js";import"./call-CTDbaN-t.js";import"./parseAccount-CRyN5swV.js";import"./encodeFunctionData-CD63gkvM.js";import"./stringify-B82RFruy.js";import"./rpc-nQR4Ijs4.js";import"./dist-CBK-d0jO.js";import"./hmac-D-QTodfL.js";import"./lib-CKG8APVv.js";import"./lib-XGdDYWzD.js";import"./V3DutchOrderTrade-Cl7yELmp.js";import"./v3-sdk.esm-CHH6GWR1.js";import"./hash-05APZTFm.js";import"./inherits_browser-Dqx8HagI.js";import"./useQuery-D_ZCw8XG.js";import{init_lib as ai,keccak256 as mi,pack as li}from"./lib-CWHZrl0T.js";import"./v2-sdk.esm-CIiDMO7F.js";import"./lib-BncBk3QF.js";import"./utils-7WDx1QGa.js";import"./lib-CgeiDO5B.js";import"./lib-Dj-AwQVD.js";import"./types-DbOmsKtk.js";import"./slice-CYdI68Yo.js";import"./getCurrencyAmount-vvZpAzIm.js";import"./addresses-D56PBUHX.js";import"./currency-DIOEzjz2.js";import"./reducer-26KeQlno.js";import"./ms-BqmEYo6j.js";import"./configs-B4dDdw82.js";import"./hooks-Bp0VtWbX.js";import"./statsig-B7I9iQRf.js";import"./usePollingIntervalByChain-YBOfXXzb.js";import"./objects-DlLkJwrJ.js";import"./send.web-CrSXW2rw.js";import"./selectors-BwkayGDl.js";import"./balances-DV0Wvmri.js";import"./getCurrencySafetyInfo-BHD1ohD-.js";import"./infiniteQueryBehavior-C10I_UVS.js";import"./getPositions-B2zd3dQ2.js";import"./queryOptions-P48mrm5X.js";import"./connect-transport-9OnIgPz5.js";import"./proto3-DkSQZto4.js";import"./use-query-8AOGtvlP.js";import"./promise-client-BYLTs0DC.js";import"./urls-kwiZbYPW.js";import"./createApiClient-BjXZMbEB.js";import"./constants-D9cStT7K.js";import"./base-DVpWJ4NW.js";import"./types_pb-yZxlo4b1.js";import"./hooks-Dhx5teK4.js";import"./transactionDetails-BsNW_jus.js";import"./currency-xm5i4cH7.js";import"./useSupportedChainId-DskHoisQ.js";import"./TraceContext-Ddfk7zjz.js";import"./readContract-Cae4hIjn.js";import"./getBalance-TsPVbzB5.js";import"./createBatchScheduler-BJBpfhFD.js";import"./multicall-BYS6jvE9.js";import"./getAction-BBhbL9mE.js";import{useAccount as H}from"./useAccount-C5hwiBwN.js";import{useRpcTokenBalancesWithLoadingIndicator as ci,useTokenBalance as pi}from"./useCurrencyBalance-BuHM_Z2M.js";import"./useReadContracts-Orb8TypL.js";import"./wagmi-CsUiFCSO.js";import"./query-qNZtVuxH.js";import"./useReadContract-DodDFlY8.js";import"./zIndex-CmEE31Ab.js";import{Flex as N,Text as m,iconSizes as $}from"./Loader-D83W8G1W.js";import"./client-BlU1ozBP.js";import"./urls-aCnKF23w.js";import"./encode-utf8-DiSL6KQ9.js";import"./dijkstra-6umg7ymP.js";import"./UniconSVGs-CVEtuhJW.js";import"./AlertTriangleFilled-C9tf2eUJ.js";import"./ArrowDown-B8kFPZPX.js";import"./SplitLogo-Ct--07LT.js";import"./tokens-Dxd89cHj.js";import"./useCurrencyInfo-Bxa3J04d.js";import"./hooks-Muz170pO.js";import"./chainParams-DIOvplzi.js";import"./util-BZ6kLG7e.js";import{Arrow as di}from"./Arrow-DIna6t35.js";import"./TokenLogo-JlSSDr3Q.js";import"./use-transport-CPomNX05.js";import"./Tokens-HEKZ8edJ.js";import"./styled-components-DbVO3u5J.js";import{Text as xi,ThemedText as ui}from"./text-CK4eXdYc.js";import"./index.esm-D6PJCa7X.js";import{require_prop_types as fi}from"./prop-types-BL9JsGr9.js";import{chevron_down_default as hi}from"./chevron-down-D6qx6nnR.js";import"./clickable-D5qUCIhr.js";import{StyledInternalLink as _i}from"./Links-Xomrvpth.js";import{AutoColumn as E}from"./Column-ekA0cfjc.js";import{SwitchLocaleLink as gi}from"./SwitchLocaleLink-BUGvLhIf.js";import{Dots as vi}from"./styled-Cb09-IEr.js";import{Trace_default as bi}from"./Trace-DgHN3Ak9.js";import{BadgeVariant as yi,Badge_default as ji}from"./Badge-vnMif72r.js";import"./api-PoolsService_connectquery-N1pfS4Yc.js";import"./currencyKey-B-LQIyOE.js";import{CurrencyLogo as q}from"./CurrencyLogo-CvvmRzOI.js";import{DoubleCurrencyLogo as M}from"./DoubleLogo-D40dQ2P7.js";import{curriedTransparentize as R}from"./polished.es-BASfrnSv.js";import{toV2LiquidityToken as ki,useTrackedTokenPairs as Si}from"./hooks-ViKlw47o.js";import{LightCard as L}from"./cards-Dfv3X3g5.js";import{CardNoise as F}from"./styled-HAbRXrdw.js";import{PairState as wi,useV2Pairs as Ti}from"./useV2Pairs-CQkQtDF2.js";import"./hooks-BCKOZK7U.js";import{useNetworkSupportsV2 as $i}from"./useNetworkSupportsV2-BFYJkGkx.js";import{V2Unsupported as Pi,useTotalSupply as Ii}from"./useTotalSupply-y8EMKKe8.js";import{BodyWrapper as zi}from"./AppBody-DSS6xi7C.js";import{unwrappedToken as S}from"./unwrappedToken-BclHT9I4.js";import{useColor as K}from"./useColor-DAHloagH.js";var x=z(G()),j=z(fi());function I(){return I=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},I.apply(this,arguments)}function Ni(t,r){if(t==null)return{};var n=Ci(t,r),e,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)e=s[a],!(r.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(t,e)&&(n[e]=t[e])}return n}function Ci(t,r){if(t==null)return{};var n={},e=Object.keys(t),a,s;for(s=0;s<e.length;s++)a=e[s],!(r.indexOf(a)>=0)&&(n[a]=t[a]);return n}var C=(0,x.forwardRef)(function(t,r){var n=t.color,e=n===void 0?"currentColor":n,a=t.size,s=a===void 0?24:a,p=Ni(t,["color","size"]);return x.createElement("svg",I({ref:r,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:e,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},p),x.createElement("polyline",{points:"18 15 12 9 6 15"}))});C.propTypes={color:j.default.string,size:j.default.oneOfType([j.default.string,j.default.number])};C.displayName="ChevronUp";var Bi=C,i=z(Q());const qi="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-8px _alignItems-center ",Li="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 ",Di="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-md ";function Wi({tokenA:t,tokenB:r,liquidityToken:n}){const e=S(t),a=S(r),s=V(),p=K(t);return(0,i.jsxs)(N,{p:"$spacing16",borderRadius:"$rounded16","$platform-web":{background:`radial-gradient(91.85% 100% at 1.84% 0%, ${R(.8,p)} 0%, ${s.surface2.val} 100%) `},children:[(0,i.jsx)(F,{}),(0,i.jsx)("div",{className:Di,children:(0,i.jsxs)("div",{className:Li,children:[(0,i.jsxs)("div",{className:qi,children:[(0,i.jsx)(M,{currencies:[e,a],size:20}),(0,i.jsx)(xi,{fontWeight:535,fontSize:20,children:`${e.symbol}/${a.symbol}`}),(0,i.jsx)(ji,{badgeVariant:yi.WARNING,children:"Sushi"})]}),(0,i.jsx)(P,{to:`/migrate/v2/${n.address}`,style:{textDecoration:"none"},children:(0,i.jsx)(k,{variant:"branded",emphasis:"tertiary",fill:!1,children:(0,i.jsx)(_,{i18nKey:"common.migrate"})})})]})})]})}A();ei();const Oi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _mt-t-space-spa1360334076 _width-10037 ",Vi="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 ",D="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center ",W="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665593 ",b="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241 ",O="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa94665591 ";function Ai({pair:t,stakedBalance:r}){const n=H(),{t:e}=Y(),a=V(),s=S(t.token0),p=S(t.token1),[u,h]=(0,x.useState)(!1),f=pi(n.address,t.liquidityToken),d=Ii(t.liquidityToken),c=r?f==null?void 0:f.add(r):f,g=c&&d&&T.greaterThanOrEqual(d.quotient,c.quotient)?new X(c.quotient,d.quotient):void 0,[y,w]=d&&c&&T.greaterThanOrEqual(d.quotient,c.quotient)?[t.getLiquidityValue(t.token0,d,c,!1),t.getLiquidityValue(t.token1,d,c,!1)]:[void 0,void 0],o=K(t.token0);return(0,i.jsxs)(N,{p:"$spacing16",borderRadius:"$rounded16","$platform-web":{background:`radial-gradient(91.85% 100% at 1.84% 0%, ${R(.8,o)} 0%, ${a.surface2.val} 100%) `},children:[(0,i.jsx)(F,{}),(0,i.jsxs)("div",{className:O,children:[(0,i.jsxs)("div",{className:b,children:[(0,i.jsxs)("div",{className:W,children:[(0,i.jsx)(M,{currencies:[s,p],size:20}),(0,i.jsx)(m,{variant:"body1",children:`${s.symbol}/${p.symbol}`})]}),(0,i.jsx)("div",{className:W,children:(0,i.jsx)(k,{emphasis:"tertiary",variant:"branded",size:"small",icon:u?(0,i.jsx)(Bi,{}):(0,i.jsx)(hi,{}),iconPosition:"after",onPress:()=>h(!u),children:e("common.manage")})})]}),u&&(0,i.jsxs)("div",{className:O,children:[(0,i.jsxs)("div",{className:b,children:[(0,i.jsx)(m,{variant:"body2",children:e("pool.totalTokens")}),(0,i.jsx)(m,{variant:"body2",children:c?c.toSignificant(4):"-"})]}),r&&(0,i.jsxs)("div",{className:b,children:[(0,i.jsx)(m,{variant:"body2",children:e("pool.rewardsPool.label")}),(0,i.jsx)(m,{variant:"body2",children:r.toSignificant(4)})]}),(0,i.jsxs)("div",{className:b,children:[(0,i.jsx)(m,{variant:"body2",children:e("removeLiquidity.pooled",{symbol:s.symbol})}),y?(0,i.jsxs)("div",{className:D,children:[(0,i.jsx)(m,{variant:"body2",mr:"$spacing4",children:y.toSignificant(6)}),(0,i.jsx)(q,{size:20,currency:s})]}):"-"]}),(0,i.jsxs)("div",{className:b,children:[(0,i.jsx)(m,{variant:"body2",children:e("pool.pooled",{sym:p.symbol})}),w?(0,i.jsxs)("div",{className:D,children:[(0,i.jsx)(m,{variant:"body2",mr:"$spacing4",children:w.toSignificant(6)}),(0,i.jsx)(q,{size:20,currency:p})]}):"-"]}),(0,i.jsxs)("div",{className:Vi,children:[(0,i.jsx)(m,{variant:"body2",children:e("pool.share.label")}),(0,i.jsx)(m,{variant:"body2",children:g?(g.toFixed(2)==="0.00"?"<0.01":g.toFixed(2))+"%":"-"})]}),f&&T.greaterThan(f.quotient,ni)&&(0,i.jsxs)("div",{className:Oi,children:[(0,i.jsx)(P,{to:`/migrate/v2/${t.liquidityToken.address}`,style:{textDecoration:"none",width:"64%"},children:(0,i.jsx)(k,{size:"medium",variant:"branded",width:"100%",children:e("common.migrate")})}),(0,i.jsx)(P,{to:`/remove/v2/${B(s)}/${B(p)}`,style:{textDecoration:"none",width:"32%"},children:(0,i.jsx)(k,{size:"medium",variant:"branded",emphasis:"tertiary",width:"100%",children:e("common.remove.label")})})]})]})]})]})}oi();ai();A();const Hi="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241 _gap-t-space-gap56 ",Ei="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1573 ";function Mi({message:t}){return(0,i.jsx)(E,{style:{minHeight:200,justifyContent:"center",alignItems:"center"},children:(0,i.jsx)(ui.DeprecatedBody,{children:t})})}const Ri=({tokenA:t,tokenB:r})=>{const[n,e]=t.sortsBefore(r)?[t,r]:[r,t];return ri("0xC0AEe478e3658e2610c5F7A4A2E1777cE9e4f2Ac",mi(["bytes"],[li(["address","address"],[n.address,e.address])]),"0xe18a34eb0e04b04f7a0ac29a6e80748dca96319b42c54d679cb821dca90c6303")};function Fi([t,r]){return new ii(t.chainId,Ri({tokenA:t,tokenB:r}),18,"SLP","SushiSwap LP Token")}function Dr(){const t=H(),r=J(),{state:n}=Z(),e=t.chainId?ti[t.chainId]:void 0,a=Si(),s=(0,x.useMemo)(()=>a.map(o=>{const l=t.chainId===1?Fi(o):null;return{v2liquidityToken:e?ki(o):void 0,sushiLiquidityToken:l,tokens:o}}),[a,t.chainId,e]),p=(0,x.useMemo)(()=>{const o=s.map(({v2liquidityToken:v})=>v),l=s.map(({sushiLiquidityToken:v})=>v).filter(v=>!!v);return[...o,...l]},[s]),[u,h]=ci({address:t.address,tokens:p}),f=(0,x.useMemo)(()=>h?[]:s.filter(({v2liquidityToken:o})=>{var l;return o&&((l=u[o.address])===null||l===void 0?void 0:l.greaterThan(0))}).map(o=>o.tokens),[h,s,u]),d=(0,x.useMemo)(()=>h?[]:s.filter(({sushiLiquidityToken:o})=>{var l;return!!o&&((l=u[o.address])===null||l===void 0?void 0:l.greaterThan(0))}),[h,s,u]),c=Ti(f),g=h||c.some(([o])=>o===wi.LOADING),y=(0,x.useCallback)(()=>{n!=null&&n.from?r(n.from):r("/positions")},[r,n==null?void 0:n.from]);return $i()?(0,i.jsxs)(bi,{logImpression:!0,page:si.MigrateV2,children:[(0,i.jsx)(zi,{style:{padding:24},children:(0,i.jsxs)("div",{className:Ei,children:[(0,i.jsxs)("div",{className:Hi,children:[(0,i.jsx)(U,{p:"$spacing6",borderRadius:"$rounded8",onPress:y,hoverable:!0,hoverStyle:{backgroundColor:"$backgroundHover"},children:(0,i.jsx)(di,{direction:"w",color:"$neutral1",size:$.icon24})}),(0,i.jsx)(m,{variant:"heading3",tag:"h1",fontWeight:"$medium",children:(0,i.jsx)(_,{i18nKey:"migrate.v2Title"})}),(0,i.jsx)(N,{width:$.icon48,height:$.icon36})]}),(0,i.jsx)(m,{m:"$spacing8",lineHeight:"24px",variant:"body2",children:(0,i.jsx)(_,{i18nKey:"migrate.v2Instruction"})}),t.isConnected?g?(0,i.jsx)(L,{padding:"40px",children:(0,i.jsx)(m,{variant:"body2",color:"$neutral3",textAlign:"center",children:(0,i.jsx)(vi,{children:(0,i.jsx)(_,{i18nKey:"common.loading"})})})}):c.filter(([,o])=>!!o).length>0?(0,i.jsxs)(i.Fragment,{children:[c.filter(([,o])=>!!o).map(([,o])=>(0,i.jsx)(Ai,{pair:o},o.liquidityToken.address)),d.map(({sushiLiquidityToken:o,tokens:l})=>(0,i.jsx)(Wi,{tokenA:l[0],tokenB:l[1],liquidityToken:o},o.address))]}):(0,i.jsx)(Mi,{message:(0,i.jsx)(_,{i18nKey:"migrate.noV2Liquidity"})}):(0,i.jsx)(L,{padding:"40px",children:(0,i.jsx)(m,{variant:"body2",color:"$neutral3",textAlign:"center",children:(0,i.jsx)(_,{i18nKey:"migrate.connectWallet"})})}),(0,i.jsx)(E,{justify:"center",gap:"md",children:(0,i.jsx)(m,{textAlign:"center",fontSize:14,style:{padding:".5rem 0 .5rem 0"},children:(0,i.jsx)(_,{i18nKey:"migrate.missingV2Position",components:{Link:(0,i.jsx)(_i,{id:"import-pool-link",to:"/pools/v2/find"})}})})})]})}),(0,i.jsx)(gi,{})]}):(0,i.jsx)(Pi,{})}export{Dr as default};
