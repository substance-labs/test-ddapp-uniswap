import{__toESM as Zo}from"./chunk-DgAfPHQg.js";import"./preload-helper-CaakwtpC.js";import"./i18next-DD3sT7R5.js";import{require_react as _e}from"./react-CNoFhWkx.js";import{Button as Yo,Switch as he,Trans as bo}from"./src-DOOtfpHS.js";import{useTranslation as To}from"./useTranslation-BotBuoJf.js";import"./index.web-BqgtOHN3.js";import"./constants-CrXoXfFH.js";import{useDispatch as ge}from"./es-Iwj7vF3u.js";import"./react-dom-xovCOntK.js";import"./react-is-BJXMVkew.js";import"./cache-BFZkIToX.js";import"./dist-Q7olfaoJ.js";import"./tslib.es6-Dbpxy1u8.js";import"./dist-QCpUvRkJ.js";import"./chunk-QMGIS6GS-B91ZVkXt.js";import{require_jsx_runtime as Se}from"./jsx-runtime-D7bMTQeG.js";import{useUniswapContext as ke}from"./useEnabledChains-DuB86c95.js";import{logger as Lo}from"./hooks-BXO4d1DJ.js";import"./dist-ceZDlR1V.js";import"./analytics.web-DLc1_wTk.js";import"./redux-toolkit.esm-BnRUBto_.js";import"./utils-CK6a47NA.js";import{CurrencyAmount as No,ZERO_ADDRESS as Co,init_sdk_core_esm as Ae,toSupportedChainId as Ie}from"./utils-BX1Fu73x.js";import"./bn-D7somgUb.js";import"./lib-DPFIyRke.js";import"./misc-BMnlqqV4.js";import{currencyId as Oo}from"./currencyId-Ci6selsx.js";import"./config-C4KrHqHG.js";import{ONE_SECOND_MS as qo}from"./time-D_OqcZ4M.js";import"./features-yACC1hVw.js";import{InterfaceEventName as Ee}from"./interface-BdpC4qOF.js";import"./element-Wnp4RkdY.js";import{ModalName as Po}from"./modal-Dvm06CN4.js";import"./uniswap-Bm-6KILn.js";import"./isAddress-P2vaZgmG.js";import"./chain-ghiO403o.js";import"./slice-cfC6NcyN.js";import"./node-C_BraYgX.js";import"./formatUnits-DkyMpOD7.js";import"./_u64-b_viZRi_.js";import"./sha2-Jt0E41S_.js";import"./sha256-BqbhXHGu.js";import"./call-CTDbaN-t.js";import"./parseAccount-CRyN5swV.js";import"./encodeFunctionData-CD63gkvM.js";import"./public-fap09Zv6.js";import"./stringify-B82RFruy.js";import"./rpc-nQR4Ijs4.js";import"./dist-CBK-d0jO.js";import"./hmac-D-QTodfL.js";import"./linking-D29RyAR8.js";import"./lib-CKG8APVv.js";import"./lib-XGdDYWzD.js";import"./V3DutchOrderTrade-Cl7yELmp.js";import"./v3-sdk.esm-CHH6GWR1.js";import"./hash-05APZTFm.js";import"./inherits_browser-Dqx8HagI.js";import"./useQuery-D_ZCw8XG.js";import"./lib-CWHZrl0T.js";import"./v2-sdk.esm-CIiDMO7F.js";import"./lib-BncBk3QF.js";import"./utils-7WDx1QGa.js";import"./lib-CgeiDO5B.js";import"./lib-Dj-AwQVD.js";import"./types-DbOmsKtk.js";import"./getCurrencyAmount-vvZpAzIm.js";import"./addresses-D56PBUHX.js";import{getSymbolDisplayText as wo}from"./currency-DIOEzjz2.js";import"./ms-BqmEYo6j.js";import"./configs-B4dDdw82.js";import"./hooks-Bp0VtWbX.js";import"./statsig-B7I9iQRf.js";import"./usePollingIntervalByChain-YBOfXXzb.js";import"./erc20-CdGGKIp0.js";import{nativeOnChain as be}from"./objects-DlLkJwrJ.js";import{sendAnalyticsEvent as Le}from"./send.web-CrSXW2rw.js";import"./TradingApiClient-Cp_0ez5S.js";import{DepositInputForm as Ne,IndependentToken as Do,useDepositInfo as Ce,useIncreaseLpPositionCalldataQuery as Oe,useIncreasePositionDependentAmountFallback as qe,useUpdatedAmountsFromDependentAmount as Jo}from"./useDependentAmountFallback-CjPCh_wT.js";import"./ProtocolItems-DhZWSiXS.js";import"./selectors-BwkayGDl.js";import{useTransactionGasFee as Pe,useUSDCValue as Ko,useUSDCurrencyAmountOfGasFee as ro}from"./useUSDCPrice-HO7Wgroz.js";import"./balances-DV0Wvmri.js";import"./getCurrencySafetyInfo-BHD1ohD-.js";import"./mutation-CRQvRc5_.js";import"./infiniteQueryBehavior-C10I_UVS.js";import"./connector-Cw8HJLtm.js";import"./queryOptions-P48mrm5X.js";import"./connect-transport-9OnIgPz5.js";import"./proto3-DkSQZto4.js";import"./embeddedWallet-BdHUTaHg.js";import"./promise-client-BYLTs0DC.js";import"./urls-kwiZbYPW.js";import"./createApiClient-BjXZMbEB.js";import"./constants-D9cStT7K.js";import"./base-DVpWJ4NW.js";import{ProtocolVersion as no}from"./types_pb-yZxlo4b1.js";import"./hooks-Dhx5teK4.js";import"./transactionDetails-BsNW_jus.js";import{NumberType as uo}from"./types-JuyYLR0O.js";import{useLocalizationContext as we}from"./LocalizationContext-B31peW1_.js";import"./getAlertColor-J5DrJWHv.js";import"./currency-xm5i4cH7.js";import"./ethers-D2SIY1xg.js";import"./useSupportedChainId-DskHoisQ.js";import{useWallet as De}from"./useWallet-CL5owP9P.js";import{useTrace as Ke}from"./TraceContext-Ddfk7zjz.js";import{TransactionStepType as jo}from"./types-7DAoWLTI.js";import{getLPBaseAnalyticsProperties as je}from"./analytics-UE3_EENu.js";import"./types-BSmAADNJ.js";import"./eventemitter3-DFes51ku.js";import"./eventemitter3-BHLpX1jX.js";import"./dist-BWRHWQ_J.js";import"./readContract-Cae4hIjn.js";import"./recoverAddress-oPdWABRo.js";import"./getBalance-TsPVbzB5.js";import"./localBatchGatewayRequest-CdT4Kija.js";import"./createBatchScheduler-BJBpfhFD.js";import"./createTransport-WEDNYdh5.js";import"./useEthersProvider-CBgc_azi.js";import"./http-CIklBnX8.js";import"./wagmiConfig-0BYSDqyO.js";import"./hashMessage-DdzTBpWL.js";import"./multicall-BYS6jvE9.js";import"./secp256k1-fbKD5lyl.js";import"./getAction-BBhbL9mE.js";import{useAccount as _o}from"./useAccount-C5hwiBwN.js";import"./config-CDfnfyHL.js";import"./useSwitchChain-CY8eYAUF.js";import"./query-qNZtVuxH.js";import"./constants-CGJJmXwV.js";import"./utils-CDaPKk14.js";import"./zIndex-CmEE31Ab.js";import"./passkey.web-DakcatU3.js";import"./hex-njd-4N-2.js";import"./slice-qANrfSbi.js";import"./noop-BDbB2pLB.js";import"./walletMeta-DaLhfhet.js";import"./signing-DH5GfhKu.js";import"./i18n-CroUvoJw.js";import"./v4-D6Rlvprs.js";import"./errors-BaezSPLl.js";import"./swapErrorToUserReadableMessage-DgHZMHU-.js";import{LiquidityTransactionType as Uo,getErrorMessageToDisplay as Xo,isSignerMnemonicAccountDetails as Ue,isValidLiquidityTxContext as Fe,liquiditySaga as Me,parseErrorMessageTitle as Fo,validatePermit as $e,validateTransactionRequest as M}from"./AccountDetails-pkaz6EG4.js";import{Text as S,iconSizes as Re}from"./Loader-D83W8G1W.js";import"./client-BlU1ozBP.js";import"./Anchor-B1nkrQbP.js";import"./Input-ClKbNpxm.js";import"./AnimatePresencePager-Dk43KD9E.js";import{HeightAnimator as Be}from"./HeightAnimator-DF8znv78.js";import{ProgressIndicator as Ve,useTransactionSettingsStore as We}from"./getTradeSettingsDeadline-B3uZN4NF.js";import"./CurrencyInputPanel-CJ-UCFJ3.js";import"./urls-aCnKF23w.js";import"./encode-utf8-DiSL6KQ9.js";import"./dijkstra-6umg7ymP.js";import"./UniconSVGs-CVEtuhJW.js";import"./AlertTriangleFilled-C9tf2eUJ.js";import"./LpIncentivesAprDisplay-DAZ9W112.js";import"./Eye-D482ahgC.js";import"./InfoCircleFilled-CBAL5Wj0.js";import{Passkey as ze}from"./Passkey-Bey7xD4Z.js";import{ErrorCallout as Mo}from"./ErrorCallout-YxcfJphA.js";import"./SplitLogo-Ct--07LT.js";import{LiquidityPositionInfo as He}from"./LiquidityPositionInfo-Cs-PVI1A.js";import"./AnimatedFlex-BgzbJK30.js";import"./reducer-CcXO4HTO.js";import{useSelectChain as Ge}from"./useSelectChain-CA5zoRWi.js";import"./tokens-Dxd89cHj.js";import"./timing-DsWr56iv.js";import"./experiments-rc6XUB0U.js";import"./SwapFormStoreContext-3NrPQE3L.js";import"./useSwapFormStore-D1oVGbBf.js";import{PermitMethod as Qe}from"./swapTxAndGasInfo-DxVAGFqc.js";import"./types-NWGai6aQ.js";import{useCurrencyInfo as $o}from"./useCurrencyInfo-Bxa3J04d.js";import"./createEthersProvider-B5AW2bpJ.js";import"./reducer-1kwGyyVS.js";import"./slice-Crjw990S.js";import{useAppSelector as oe}from"./hooks-Muz170pO.js";import{NetworkLogo as Ze}from"./TokenLogo-JlSSDr3Q.js";import{useModalState as Ye}from"./useModalState-BcPI2EiQ.js";import"./Tokens-HEKZ8edJ.js";import"./useIsMobile-Cq3RSgOi.js";import"./styled-components-DbVO3u5J.js";import"./text-CK4eXdYc.js";import"./index.esm-D6PJCa7X.js";import"./CopyHelper-DOhhKKQB.js";import"./copy-bNdbH7uS.js";import"./prop-types-BL9JsGr9.js";import"./clickable-D5qUCIhr.js";import"./ellipsis-DjwAKJIh.js";import"./testIDs-CxYpwoP6.js";import"./useCommonTokensOptionsWithFallback-7qZUIHia.js";import"./Trace-DgHN3Ak9.js";import{Modal as Je}from"./Modal.web-DHbL39pN.js";import"./WarningModal-f8Gfhd_G.js";import"./InfoTooltip.web-CkgGEmd3.js";import"./assets-D-uPpcBZ.js";import{useGetPasskeyAuthStatus as Xe}from"./useGetPasskeyAuthStatus-QVLoUPch.js";import"./types-Ds0gKmju.js";import"./dismissNativeKeyboard.web-99F1bxCR.js";import"./TextInput-3sqL_9ZJ.js";import"./useDynamicFontSizing-DOxjEhTh.js";import"./pools-5GjP-hMy.js";import"./types-Ctc23WnH.js";import"./tryParseCurrencyAmount-Bt3FPZDG.js";import"./CurrencyLogo-CvvmRzOI.js";import"./styled-qLLlrMEu.js";import"./Tooltip-DPNhKWF2.js";import"./useInterval-7f86mkEJ.js";import"./polished.es-BASfrnSv.js";import"./useHoverProps-BdQsOXMz.js";import{DetailLineItem as po}from"./DetailLineItem-d-0mcMrN.js";import{canUnwrapCurrency as Ro,getCurrencyWithOptionalUnwrap as Bo,getTokenOrZeroAddress as Vo}from"./currency-Brc-ymXr.js";import{getProtocolItems as Wo}from"./protocolVersion-Djp_Gxjw.js";import"./getTickToPrice-BudeFeQp.js";import{getFieldsDisabled as ot}from"./priceRangeInfo-DbHE3vOq.js";import"./LPIncentiveFeeStatTooltip-CknsSvzz.js";import"./feeTiers-D9BvLkmt.js";import"./LiquidityPositionInfoBadges-DdjNrqYk.js";import{LPTransactionSettingsStoreContextProvider as et,useCheckLpApprovalQuery as tt,useLPSlippageValue as it}from"./LPTransactionSettingsStoreContextProvider-DlM9rbYL.js";import{PositionField as Y,hasLPFoTTransferError as zo}from"./hasLPFoTTransferError-Co-P2mPd.js";import{LiquidityModalHeader as rt,TokenInfo as Ho}from"./TokenInfo-B8OkTNxp.js";import{LiquidityModalDetailRows as nt}from"./LiquidityModalDetailRows-DAKn3k1K.js";import{useGetPoolTokenPercentage as st}from"./useGetPoolTokenPercentage-BWwxCwuY.js";function at(r,u){const x=_o(),{position:a,exactAmount:p,exactField:c}=r;if(!a)throw new Error("no position available");const f=Bo({currency:a.currency0Amount.currency,shouldUnwrap:u&&a.version!==no.V4}),y=Bo({currency:a.currency1Amount.currency,shouldUnwrap:u&&a.version!==no.V4}),{tickLower:m,tickUpper:T}=a;return{...Ce({protocolVersion:a.version,poolOrPair:a.poolOrPair,address:x.address,token0:f,token1:y,tickLower:m,tickUpper:T,exactField:c,exactAmounts:{[c]:p}}),currencies:{[Y.TOKEN0]:f,[Y.TOKEN1]:y}}}var l=Zo(_e()),e=Zo(Se());let q=(function(r){return r[r.Input=0]="Input",r[r.Review=1]="Review",r})({});const ee={step:q.Input,exactField:Y.TOKEN0},te=(0,l.createContext)({step:q.Input,setStep:()=>{},increaseLiquidityState:ee,derivedIncreaseLiquidityInfo:{},setIncreaseLiquidityState:()=>{},unwrapNativeCurrency:!0,setUnwrapNativeCurrency:()=>{},currentTransactionStep:void 0,setCurrentTransactionStep:()=>{}});function vo(){return(0,l.useContext)(te)}function ct({children:r}){var u;const x=(u=oe(s=>s.application.openModal))===null||u===void 0?void 0:u.initialState,[a,p]=(0,l.useState)(q.Input),[c,f]=(0,l.useState)(!0),[y,m]=(0,l.useState)({...ee,position:x}),[T,o]=(0,l.useState)(),v=at(y,c),I=(0,l.useMemo)(()=>({step:a,setStep:p,increaseLiquidityState:y,setIncreaseLiquidityState:m,derivedIncreaseLiquidityInfo:v,unwrapNativeCurrency:c,setUnwrapNativeCurrency:f,currentTransactionStep:T,setCurrentTransactionStep:o}),[y,v,a,c,T]);return(0,e.jsx)(te.Provider,{value:I,children:r})}const ie=(0,l.createContext)(void 0);function dt({children:r}){var u,x,a,p,c,f,y,m,T;const o=(u=oe(g=>g.application.openModal))===null||u===void 0?void 0:u.initialState,{derivedIncreaseLiquidityInfo:v,increaseLiquidityState:I,currentTransactionStep:s}=vo(),{customDeadline:$,customSlippageTolerance:J}=We(g=>({customDeadline:g.customDeadline,customSlippageTolerance:g.customSlippageTolerance})),[E,k]=(0,l.useState)(!1),R=(x=(a=ke()).getCanSignPermits)===null||x===void 0?void 0:x.call(a,o==null?void 0:o.chainId),{currencyAmounts:t,error:L}=v,{exactField:P}=I,b=_o(),X=(0,l.useMemo)(()=>{if(!(!o||!b.address||!(t!=null&&t.TOKEN0)||!t.TOKEN1))return{simulateTransaction:!0,walletAddress:b.address,chainId:o.currency0Amount.currency.chainId,protocol:Wo(o.version),token0:Vo(o.currency0Amount.currency),token1:Vo(o.currency1Amount.currency),amount0:t.TOKEN0.quotient.toString(),amount1:t.TOKEN1.quotient.toString(),generatePermitAsTransaction:o.version===no.V4?R:void 0}},[o,b.address,t,R]),{data:so,isLoading:i,error:_,refetch:n}=tt({params:X,staleTime:5*qo,enabled:!!X&&!L});if(_){const g=Fo(_,{defaultTitle:"unknown CheckLpApprovalQuery"});Lo.error(g,{tags:{file:"IncreaseLiquidityTxContext",function:"useEffect"}})}const{token0Approval:A,token1Approval:B,positionTokenApproval:w,permitData:N,gasFeeToken0Approval:ao,gasFeeToken1Approval:V,gasFeePositionTokenApproval:W,token0Cancel:D,token1Cancel:oo,token0PermitTransaction:K,token1PermitTransaction:C,gasFeeToken0Permit:O,gasFeeToken1Permit:z}=so??{},h=ro(o==null?void 0:o.currency0Amount.currency.chainId,ao),co=ro(o==null?void 0:o.currency1Amount.currency.chainId,V),j=ro(o==null||(p=o.liquidityToken)===null||p===void 0?void 0:p.chainId,W),lo=ro(o==null?void 0:o.currency1Amount.currency.chainId,O),U=ro(o==null?void 0:o.currency1Amount.currency.chainId,z),mo=!i&&!!(N||A||B||w||K||C),eo=t==null||(c=t.TOKEN0)===null||c===void 0?void 0:c.currency,to=t==null||(f=t.TOKEN1)===null||f===void 0?void 0:f.currency,H=t==null||(y=t.TOKEN0)===null||y===void 0?void 0:y.quotient.toString(),d=t==null||(m=t.TOKEN1)===null||m===void 0?void 0:m.quotient.toString(),G=(0,l.useMemo)(()=>{var g;const F=Wo(o==null?void 0:o.version);if(!o||!b.address||!F||!eo||!to||!H||!d)return;const[Z,xo]=P===Y.TOKEN0?[H,d]:[d,H],fo=P===Y.TOKEN0?Do.TOKEN_0:Do.TOKEN_1;return{simulateTransaction:!mo,protocol:F,tokenId:o.tokenId?Number(o.tokenId):void 0,walletAddress:b.address,chainId:o.currency0Amount.currency.chainId,independentAmount:Z,independentToken:fo,defaultDependentAmount:o.version===no.V2?xo:void 0,position:{tickLower:o.tickLower!==void 0?o.tickLower:void 0,tickUpper:o.tickUpper!==void 0?o.tickUpper:void 0,pool:{token0:eo.isNative?Co:eo.address,token1:to.isNative?Co:to.address,fee:(g=o.feeTier)===null||g===void 0?void 0:g.feeAmount,tickSpacing:o.tickSpacing?Number(o.tickSpacing):void 0,hooks:o.v4hook}},slippageTolerance:J}},[b,o,eo,to,H,d,mo,J,P]),ne=$o(Oo(o==null?void 0:o.currency0Amount.currency)),se=$o(Oo(o==null?void 0:o.currency1Amount.currency)),ae=zo(ne,o==null?void 0:o.version),ce=zo(se,o==null?void 0:o.version),ho=ae||ce,go=!((s==null?void 0:s.step.type)===jo.IncreasePositionTransaction||(s==null?void 0:s.step.type)===jo.IncreasePositionTransactionAsync)&&!L&&!i&&!_&&!!G&&!ho,{data:io,isLoading:So,error:Q,refetch:de}=Oe({params:G,deadlineInMinutes:$,refetchInterval:E?!1:5*qo,retry:!1,enabled:go}),{increase:yo,gasFee:ko,dependentAmount:Ao}=io||{};if(Q){const g=Fo(Q,{defaultTitle:"unknown IncreaseLpPositionCalldataQuery"});Lo.error(g,{tags:{file:"IncreaseLiquidityTxContext",function:"useEffect"}}),G&&Le(Ee.IncreaseLiquidityFailed,{message:g,...G})}const ue=qe(G,go&&!!Q),{value:pe}=Pe({tx:yo,skip:!!ko}),Io=ro(Ie(io==null||(T=io.increase)===null||T===void 0?void 0:T.chainId)??void 0,ko||pe);(0,l.useEffect)(()=>{k(Xo({approvalError:_,calldataError:Q}))},[_,Q,k]),(0,l.useEffect)(()=>{k(!1)},[H,d]);const le=(0,l.useMemo)(()=>{if(!o||i||So||!io||!(t!=null&&t.TOKEN0)||!t.TOKEN1)return;const g=M(A),F=M(B),Z=M(w),xo=M(D),fo=M(oo),Eo=$e(N),ye=!!N,xe=M(yo),fe=M(K),Te=M(C);return{type:Uo.Increase,protocolVersion:o.version,action:{type:Uo.Increase,currency0Amount:t.TOKEN0,currency1Amount:t.TOKEN1,liquidityToken:o.liquidityToken},approveToken0Request:g,approveToken1Request:F,approvePositionTokenRequest:Z,revokeToken0Request:xo,revokeToken1Request:fo,permit:Eo?{method:Qe.TypedData,typedData:Eo}:void 0,token0PermitTransaction:fe,token1PermitTransaction:Te,positionTokenPermitTransaction:void 0,increasePositionRequestArgs:{...G,batchPermitData:N??void 0},txRequest:xe,unsigned:ye}},[o,i,So,io,t==null?void 0:t.TOKEN0,t==null?void 0:t.TOKEN1,A,B,w,D,oo,N,yo,K,C,G]),me=(0,l.useMemo)(()=>[h,co,j,Io,lo,U].reduce((F,Z)=>Z&&F?F.add(Z):F||Z),[h,co,j,Io,lo,U]),ve={txInfo:le,gasFeeEstimateUSD:me??void 0,dependentAmount:Q&&Ao?Ao:ue,error:E,setTransactionError:k,refetch:_?n:Q?de:void 0,fotErrorToken:ho};return(0,e.jsx)(ie.Provider,{value:ve,children:r})}const re=()=>{const r=(0,l.useContext)(ie);if(!r)throw new Error("`useIncreaseLiquidityTxContext` must be used inside of `IncreaseLiquidityTxContextProvider`");return r},ut="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row ",Go="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1602 ",pt="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _alignItems-center ";function lt(){const{t:r}=To(),{setStep:u,increaseLiquidityState:x,derivedIncreaseLiquidityInfo:a,setIncreaseLiquidityState:p,unwrapNativeCurrency:c,setUnwrapNativeCurrency:f}=vo(),{formattedAmounts:y,currencyAmounts:m,currencyAmountsUSDValue:T,currencyBalances:o,currencies:v,error:I}=a,{position:s,exactField:$}=x,{gasFeeEstimateUSD:J,txInfo:E,error:k,refetch:R,dependentAmount:t,fotErrorToken:L}=re();if(!s)throw new Error("AddLiquidityModal must have an initial state when opening");const{currency0Amount:P,currency1Amount:b}=s,X=Ro(P.currency,s.version),so=Ro(b.currency,s.version),i=be(s.chainId),{tickLower:_,tickUpper:n}=s,{TOKEN0:A,TOKEN1:B}=ot({ticks:[_,n],poolOrPair:s.version===no.V2?void 0:s.poolOrPair}),{updatedFormattedAmounts:w,updatedUSDAmounts:N,updatedDeposit0Disabled:ao,updatedDeposit1Disabled:V}=Jo({token0:v==null?void 0:v.TOKEN0,token1:v==null?void 0:v.TOKEN1,dependentAmount:t,exactField:$,currencyAmounts:m,currencyAmountsUSDValue:T,formattedAmounts:y,deposit0Disabled:A,deposit1Disabled:B}),W=(O,z)=>{p(h=>({...h,exactField:O,exactAmount:z}))},D=(O,z)=>{p(h=>({...h,exactField:O,exactAmount:z}))},oo=()=>{I||u(q.Review)},K=(0,l.useMemo)(()=>(0,e.jsxs)("div",{className:pt,children:[(0,e.jsx)(S,{variant:"body3",color:"$neutral2",children:r("pool.addAs",{nativeWrappedSymbol:i.symbol})}),(0,e.jsx)(he,{id:"add-as-weth",checked:c,onCheckedChange:()=>f(O=>!O),variant:"branded"})]}),[i,r,c,f]),C=!!(!k&&!I&&(m!=null&&m.TOKEN0)&&m.TOKEN1&&!(E!=null&&E.txRequest)&&!L);return(0,e.jsxs)("div",{className:Go,children:[(0,e.jsxs)("div",{className:Go,children:[(0,e.jsx)(He,{positionInfo:s}),(0,e.jsx)(Ne,{token0:v==null?void 0:v.TOKEN0,token1:v==null?void 0:v.TOKEN1,formattedAmounts:w,currencyAmounts:m,currencyAmountsUSDValue:N,currencyBalances:o,onUserInput:W,onSetMax:D,deposit0Disabled:ao,deposit1Disabled:V,amount0Loading:C&&$===Y.TOKEN1,amount1Loading:C&&$===Y.TOKEN0,token0UnderCardComponent:X?K:void 0,token1UnderCardComponent:so?K:void 0})]}),(0,e.jsx)(nt,{currency0Amount:P,currency1Amount:b,networkCost:J}),L&&(0,e.jsx)(Mo,{errorMessage:!0,title:r("token.safety.warning.fotLow.title"),description:r("position.increase.fot",{token:L.currency.symbol})}),(0,e.jsx)(Mo,{errorMessage:k,onPress:R}),(0,e.jsx)("div",{className:ut,children:(0,e.jsx)(Yo,{isDisabled:!!I||!(E!=null&&E.txRequest)||!!L,onPress:oo,loading:C,variant:"branded",size:"large",children:I||r("swap.button.review")},"LoaderButton-animation-IncreaseLiquidity-continue")})]})}Ae();const mt="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row ",vt="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap52 _alignItems-center ",Qo="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap52 ",yt="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap56 _pr-t-space-pad1331704925 _pl-t-space-pad1331704925 _pb-t-space-pad1331704929 ",xt="  is_Separator _display-flex _alignItems-stretch _flexDirection-column _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _flexShrink-1 _borderTopWidth-0px _borderRightWidth-0px _borderBottomWidth-1px _borderLeftWidth-0px _flexGrow-1 _height-0px _maxHeight-0px _mr-t-space-pad1331704925 _ml-t-space-pad1331704925 _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid ",ft="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1573 _pr-t-space-pad1331704925 _pl-t-space-pad1331704925 _pt-t-space-pad1331704929 ",Tt="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1569 ";function _t({onClose:r}){var u,x,a,p;const{t:c}=To(),f=ge(),y=Ge(),m=_o(),T=m.chainId,o=De().evmAccount,v=Ke(),{needsPasskeySignin:I}=Xe((u=m.connector)===null||u===void 0?void 0:u.id),{formatCurrencyAmount:s,formatPercent:$}=we(),{setStep:J,derivedIncreaseLiquidityInfo:E,increaseLiquidityState:k,currentTransactionStep:R,setCurrentTransactionStep:t}=vo(),{txInfo:L,gasFeeEstimateUSD:P,dependentAmount:b,setTransactionError:X}=re(),{exactField:so}=k,{currencyAmounts:i,currencyAmountsUSDValue:_}=E,{updatedCurrencyAmounts:n,updatedUSDAmounts:A}=Jo({token0:i==null||(x=i.TOKEN0)===null||x===void 0?void 0:x.currency,token1:i==null||(a=i.TOKEN1)===null||a===void 0?void 0:a.currency,dependentAmount:b,exactField:so,currencyAmounts:i,currencyAmountsUSDValue:_}),[B,w]=(0,l.useState)([]),{version:N,poolId:ao,currency0Amount:V,currency1Amount:W,feeTier:D,v4hook:oo,tickSpacing:K,tickLower:C,tickUpper:O,chainId:z}=k.position??{},h=(p=k.position)===null||p===void 0||(p=p.poolOrPair)===null||p===void 0?void 0:p.token1Price,co=st(k.position),j=(0,l.useMemo)(()=>{if(!(n!=null&&n.TOKEN0)||!V)return;const d=No.fromRawAmount(n.TOKEN0.currency,V.quotient);return n.TOKEN0.add(d)},[V,n==null?void 0:n.TOKEN0]),lo=Ko(j),U=(0,l.useMemo)(()=>{if(!(n!=null&&n.TOKEN1)||!W)return;const d=No.fromRawAmount(n.TOKEN1.currency,W.quotient);return n.TOKEN1.add(d)},[W,n==null?void 0:n.TOKEN1]),mo=Ko(U),eo=d=>{d&&X(Xo({calldataError:d})),J(q.Input),t(void 0)},to=()=>{w([]),t(void 0),r()},H=()=>{const d=Fe(L);!o||!Ue(o)||!d||!k.position||!(i!=null&&i.TOKEN0)||!i.TOKEN1||f(Me.actions.trigger({selectChain:y,startChainId:T,account:o,liquidityTxContext:L,setCurrentStep:t,setSteps:w,onSuccess:to,onFailure:eo,analytics:{...je({trace:v,fee:D==null?void 0:D.feeAmount,tickSpacing:K,tickLower:C,tickUpper:O,hook:oo,version:N??no.UNSPECIFIED,poolId:ao,currency0:i.TOKEN0.currency,currency1:i.TOKEN1.currency,currency0AmountUsd:_==null?void 0:_.TOKEN0,currency1AmountUsd:_==null?void 0:_.TOKEN1}),expectedAmountBaseRaw:i.TOKEN0.quotient.toString(),expectedAmountQuoteRaw:i.TOKEN1.quotient.toString(),createPosition:!1}}))};return(0,e.jsxs)("div",{className:Tt,children:[(0,e.jsxs)("div",{className:ft,children:[(0,e.jsx)(Ho,{currencyAmount:n==null?void 0:n.TOKEN0,currencyUSDAmount:A==null?void 0:A.TOKEN0}),(0,e.jsx)(S,{variant:"body3",color:"$neutral2",children:c("common.and")}),(0,e.jsx)(Ho,{currencyAmount:n==null?void 0:n.TOKEN1,currencyUSDAmount:A==null?void 0:A.TOKEN1})]}),R?(0,e.jsx)(Ve,{currentStep:R,steps:B}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:xt}),(0,e.jsxs)("div",{className:yt,children:[(0,e.jsx)(po,{LineItem:{Label:()=>(0,e.jsx)(S,{variant:"body3",color:"$neutral2",children:c("common.rate")}),Value:()=>(0,e.jsx)(S,{variant:"body3",children:`1 ${h==null?void 0:h.baseCurrency.symbol} = ${h==null?void 0:h.toFixed()} ${h==null?void 0:h.quoteCurrency.symbol}`})}}),(0,e.jsx)(po,{LineItem:{Label:()=>{var d;return(0,e.jsx)(S,{variant:"body3",color:"$neutral2",children:(0,e.jsx)(bo,{i18nKey:"pool.newSpecificPosition",values:{symbol:i==null||(d=i.TOKEN0)===null||d===void 0?void 0:d.currency.symbol}})})},Value:()=>(0,e.jsxs)("div",{className:Qo,children:[(0,e.jsxs)(S,{variant:"body3",children:[s({value:j,type:uo.TokenNonTx})," ",wo(j==null?void 0:j.currency.symbol)]}),(0,e.jsx)(S,{variant:"body3",color:"$neutral2",children:`(${s({value:lo,type:uo.FiatStandard})})`})]})}}),(0,e.jsx)(po,{LineItem:{Label:()=>{var d;return(0,e.jsx)(S,{variant:"body3",color:"$neutral2",children:(0,e.jsx)(bo,{i18nKey:"pool.newSpecificPosition",values:{symbol:i==null||(d=i.TOKEN1)===null||d===void 0?void 0:d.currency.symbol}})})},Value:()=>(0,e.jsxs)("div",{className:Qo,children:[(0,e.jsxs)(S,{variant:"body3",children:[s({value:U,type:uo.TokenNonTx})," ",wo(U==null?void 0:U.currency.symbol)]}),(0,e.jsx)(S,{variant:"body3",color:"$neutral2",children:`(${s({value:mo,type:uo.FiatStandard})})`})]})}}),co?(0,e.jsx)(po,{LineItem:{Label:()=>(0,e.jsx)(S,{variant:"body3",color:"$neutral2",children:c("addLiquidity.shareOfPool")}),Value:()=>(0,e.jsx)(S,{children:$(co.toFixed())})}}):null,(0,e.jsx)(po,{LineItem:{Label:()=>(0,e.jsx)(S,{variant:"body3",color:"$neutral2",children:c("common.networkCost")}),Value:()=>(0,e.jsxs)("div",{className:vt,children:[(0,e.jsx)(Ze,{chainId:z??null,size:Re.icon16,shape:"square"}),(0,e.jsx)(S,{variant:"body3",children:s({value:P,type:uo.FiatGasPrice})})]})}})]}),(0,e.jsx)("div",{className:mt,children:(0,e.jsx)(Yo,{variant:"branded",size:"large",onPress:H,icon:I?(0,e.jsx)(ze,{size:"$icon.24"}):void 0,children:c(I?"common.addLiquidity":"common.confirm")})})]})]})}function ht(){var r,u,x;const{t:a}=To(),{step:p,setStep:c,increaseLiquidityState:f}=vo(),{closeModal:y}=Ye(Po.AddLiquidity),m=it({version:(r=f.position)===null||r===void 0?void 0:r.version,currencyA:(u=f.position)===null||u===void 0?void 0:u.currency0Amount.currency,currencyB:(x=f.position)===null||x===void 0?void 0:x.currency1Amount.currency});let T;switch(p){case q.Input:T=(0,e.jsx)(lt,{});break;case q.Review:T=(0,e.jsx)(_t,{onClose:y});break}return(0,e.jsx)(et,{autoSlippageTolerance:m,children:(0,e.jsx)(dt,{children:(0,e.jsxs)(Je,{name:Po.AddLiquidity,onClose:y,isDismissible:!0,gap:"$gap24",padding:"$padding16",children:[(0,e.jsx)(rt,{title:a("common.addLiquidity"),closeModal:y,goBack:p===q.Review?()=>c(q.Input):void 0}),(0,e.jsx)(Be,{useInitialHeight:!0,children:T})]})})})}function qs(){return(0,e.jsx)(ct,{children:(0,e.jsx)(ht,{})})}export{qs as IncreaseLiquidityModal};
