import{__toESM as v}from"./chunk-DgAfPHQg.js";import{require_react as R}from"./react-CNoFhWkx.js";import{DropdownMenuSheetItem as D,Popover as g}from"./src-DOOtfpHS.js";import{isMobileWeb as M,isWeb as k}from"./index.web-BqgtOHN3.js";import{require_jsx_runtime as B}from"./jsx-runtime-D7bMTQeG.js";import{useOnClickOutside as w}from"./hooks-BXO4d1DJ.js";import{Flex as F}from"./Loader-D83W8G1W.js";var s=v(R()),r=v(B());const L="  is_Separator _display-flex _alignItems-stretch _flexDirection-column _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _flexShrink-1 _borderTopWidth-0px _borderRightWidth-0px _borderBottomWidth-1px _borderLeftWidth-0px _flexGrow-1 _height-0px _maxHeight-0px _mt-t-space-spa94665591 _mb-t-space-spa94665591 _borderBottomStyle-solid _borderTopStyle-solid _borderLeftStyle-solid _borderRightStyle-solid ";function P({items:o,handleCloseMenu:a}){return(0,r.jsx)(F,{asChild:!0,flexDirection:"column",gap:"$spacing4",p:"$spacing8",backgroundColor:"$surface1",borderRadius:"$rounded20",borderWidth:"$spacing1",borderColor:"$surface3",minWidth:200,maxWidth:250,children:(0,r.jsx)("div",{onContextMenu:t=>{t.preventDefault(),t.stopPropagation()},children:o.map(({label:t,onPress:l,Icon:n,showDivider:p,disabled:d,iconColor:c,closeDelay:m},u)=>(0,r.jsxs)(s.Fragment,{children:[p&&(0,r.jsx)("div",{className:L}),(0,r.jsx)(D,{variant:k?"small":"medium",label:t,icon:n&&(0,r.jsx)(n,{size:"$icon.16",color:c??"$neutral2"}),disabled:d,closeDelay:m,handleCloseMenu:a,onPress:l})]},u))})})}let T=(function(o){return o.Primary="primary",o.Secondary="secondary",o})({});function G({menuItems:o,isPlacementAbove:a=!1,isPlacementRight:t=!1,offsetX:l=0,offsetY:n=0,triggerMode:p,disabled:d=!1,children:c,isOpen:m,closeMenu:u,openMenu:x}){const y=(0,s.useRef)(null),f=(0,s.useRef)(null),[i,j]=(0,s.useState)({x:0,y:0}),_=p===T.Primary;w({node:y,handler:u});const C=e=>{if(d)return;e.preventDefault(),e.stopPropagation(),x==null||x();const{clientX:h,clientY:b}=e;j({x:h,y:b})};function S(){if(_||!f.current)return{x:0,y:0};const e=f.current.getBoundingClientRect(),h=t?i.x-e.left:i.x-e.right,b=i.y-e.top-e.height;return{x:h,y:b}}const{x:W,y:$}=S();return d||M?(0,r.jsx)(s.Fragment,{children:c}):(0,r.jsxs)(g,{allowFlip:!0,open:m,strategy:"absolute",placement:a?t?"top-start":"top-end":t?"bottom-start":"bottom-end",offset:{mainAxis:$+(a?-n:n),crossAxis:W+(t?l:-l)},children:[(0,r.jsx)(g.Trigger,{onMouseDown:_?C:void 0,children:(0,r.jsx)("div",{ref:f,onContextMenu:_?void 0:C,children:c})}),(0,r.jsx)(g.Content,{ref:y,backgroundColor:"transparent",animation:"125ms",enterStyle:{opacity:0,scale:.98,transform:[{translateY:-4}]},children:(0,r.jsx)(P,{items:o,handleCloseMenu:u})},`${i.x}-${i.y}`)]})}export{G as ContextMenu,T as ContextMenuTriggerMode,P as MenuContent};
