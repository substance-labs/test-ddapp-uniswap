import{__toESM as de}from"./chunk-DgAfPHQg.js";import"./preload-helper-CaakwtpC.js";import"./i18next-DD3sT7R5.js";import{require_react as _i}from"./react-CNoFhWkx.js";import{Button as U,Path as hi,RotatableChevron as ke,SegmentedControl as $e,Svg as fi,TouchableArea as me,Trans as ze,createIcon as gi,useSporeColors as Ee}from"./src-DOOtfpHS.js";import{useTranslation as K}from"./useTranslation-BotBuoJf.js";import{isMobileWeb as Pe}from"./index.web-BqgtOHN3.js";import"./constants-CrXoXfFH.js";import"./es-Iwj7vF3u.js";import"./react-dom-xovCOntK.js";import"./react-is-BJXMVkew.js";import{ReactQueryCacheKey as vi}from"./cache-BFZkIToX.js";import"./dist-Q7olfaoJ.js";import"./tslib.es6-Dbpxy1u8.js";import"./dist-QCpUvRkJ.js";import{Navigate as bi,useLocation as yi,useNavigate as Fe,useParams as ji}from"./chunk-QMGIS6GS-B91ZVkXt.js";import{require_jsx_runtime as wi}from"./jsx-runtime-D7bMTQeG.js";import"./useEnabledChains-DuB86c95.js";import"./hooks-BXO4d1DJ.js";import"./dist-ceZDlR1V.js";import"./analytics.web-DLc1_wTk.js";import"./redux-toolkit.esm-BnRUBto_.js";import{CurrencyAmount as He,HistoryDuration as E,Percent as $,PollingInterval as Z,UniverseChainId as Ae,ZERO_ADDRESS as Si,getChainInfo as Ci,init_sdk_core_esm as Me}from"./utils-BX1Fu73x.js";import"./bn-D7somgUb.js";import{BigNumber as Oe,init_lib$5 as qe}from"./lib-DPFIyRke.js";import"./misc-BMnlqqV4.js";import{areAddressesEqual as Ii,buildCurrencyId as ki,currencyId as X,currencyIdToAddress as Te,isEVMChain as $i}from"./currencyId-Ci6selsx.js";import"./config-C4KrHqHG.js";import"./time-D_OqcZ4M.js";import"./features-yACC1hVw.js";import"./interface-BdpC4qOF.js";import"./element-Wnp4RkdY.js";import{ModalName as ne}from"./modal-Dvm06CN4.js";import{InterfacePageName as Pi}from"./page-zDkoCQe4.js";import"./isAddress-P2vaZgmG.js";import"./chain-ghiO403o.js";import"./slice-cfC6NcyN.js";import"./node-C_BraYgX.js";import"./formatUnits-DkyMpOD7.js";import"./_u64-b_viZRi_.js";import"./sha2-Jt0E41S_.js";import"./sha256-BqbhXHGu.js";import"./call-CTDbaN-t.js";import"./parseAccount-CRyN5swV.js";import"./encodeFunctionData-CD63gkvM.js";import"./stringify-B82RFruy.js";import"./rpc-nQR4Ijs4.js";import"./dist-CBK-d0jO.js";import"./hmac-D-QTodfL.js";import"./linking-D29RyAR8.js";import"./lib-CKG8APVv.js";import"./lib-XGdDYWzD.js";import"./V3DutchOrderTrade-Cl7yELmp.js";import"./v3-sdk.esm-CHH6GWR1.js";import"./hash-05APZTFm.js";import"./inherits_browser-Dqx8HagI.js";import{useQuery as Ti}from"./useQuery-D_ZCw8XG.js";import"./lib-CWHZrl0T.js";import"./v2-sdk.esm-CIiDMO7F.js";import"./lib-BncBk3QF.js";import"./utils-7WDx1QGa.js";import"./lib-CgeiDO5B.js";import"./lib-Dj-AwQVD.js";import"./types-DbOmsKtk.js";import"./getCurrencyAmount-vvZpAzIm.js";import"./addresses-D56PBUHX.js";import"./ms-BqmEYo6j.js";import"./configs-B4dDdw82.js";import{FeatureFlags as Ue,useFeatureFlag as Ve}from"./hooks-Bp0VtWbX.js";import"./statsig-B7I9iQRf.js";import"./usePollingIntervalByChain-YBOfXXzb.js";import"./providers-BELGpWsr.js";import"./erc20-CdGGKIp0.js";import"./getContract-CMwwszTa.js";import"./objects-DlLkJwrJ.js";import"./send.web-CrSXW2rw.js";import"./TradingApiClient-Cp_0ez5S.js";import"./ProtocolItems-DhZWSiXS.js";import"./selectors-BwkayGDl.js";import{useUSDCValue as Y}from"./useUSDCPrice-HO7Wgroz.js";import"./balances-DV0Wvmri.js";import"./getCurrencySafetyInfo-BHD1ohD-.js";import"./mutation-CRQvRc5_.js";import"./infiniteQueryBehavior-C10I_UVS.js";import"./queryOptions-P48mrm5X.js";import"./connect-transport-9OnIgPz5.js";import"./proto3-DkSQZto4.js";import"./use-query-8AOGtvlP.js";import"./promise-client-BYLTs0DC.js";import"./urls-kwiZbYPW.js";import"./createApiClient-BjXZMbEB.js";import"./constants-D9cStT7K.js";import"./base-DVpWJ4NW.js";import{PositionStatus as ee,ProtocolVersion as k}from"./types_pb-yZxlo4b1.js";import"./hooks-Dhx5teK4.js";import"./transactionDetails-BsNW_jus.js";import{NumberType as B}from"./types-JuyYLR0O.js";import{useLocalizationContext as F}from"./LocalizationContext-B31peW1_.js";import"./getAlertColor-J5DrJWHv.js";import"./currency-xm5i4cH7.js";import"./ethers-D2SIY1xg.js";import{useSupportedChainId as Ni}from"./useSupportedChainId-DskHoisQ.js";import"./useWallet-CL5owP9P.js";import"./TraceContext-Ddfk7zjz.js";import"./readContract-Cae4hIjn.js";import"./createBatchScheduler-BJBpfhFD.js";import"./createTransport-WEDNYdh5.js";import"./useEthersProvider-CBgc_azi.js";import"./multicall-BYS6jvE9.js";import"./getAction-BBhbL9mE.js";import{useAccount as Li}from"./useAccount-C5hwiBwN.js";import"./config-CDfnfyHL.js";import"./useReadContracts-Orb8TypL.js";import"./wagmi-CsUiFCSO.js";import"./query-qNZtVuxH.js";import"./utils-CDaPKk14.js";import"./zIndex-CmEE31Ab.js";import"./hex-njd-4N-2.js";import"./slice-qANrfSbi.js";import"./noop-BDbB2pLB.js";import"./v4-D6Rlvprs.js";import{Flex as D,Text as c,styled as Ri,useDeviceDimensions as Di,useMedia as Bi}from"./Loader-D83W8G1W.js";import"./client-BlU1ozBP.js";import"./Anchor-B1nkrQbP.js";import{Main as Wi}from"./esm-yo3h-xhx.js";import{breakpoints as Ne}from"./breakpoints-B-pYqY7D.js";import"./urls-aCnKF23w.js";import"./encode-utf8-DiSL6KQ9.js";import"./dijkstra-6umg7ymP.js";import"./UniconSVGs-CVEtuhJW.js";import"./CopyAlt-CU_LJNbN.js";import"./LpIncentivesAprDisplay-DAZ9W112.js";import{WrappedLiquidityPositionRangeChart as zi}from"./LiquidityPositionRangeChart-CJw3rPyq.js";import{InfoCircleFilled as Ke}from"./InfoCircleFilled-CBAL5Wj0.js";import"./ThemeToggle-BcuKj11V.js";import"./SplitLogo-Ct--07LT.js";import{LiquidityPositionInfo as Ei,LoadingRow as I}from"./LiquidityPositionInfo-Cs-PVI1A.js";import"./tokens-Dxd89cHj.js";import"./prices-BzyZhpWW.js";import"./timing-DsWr56iv.js";import"./experiments-rc6XUB0U.js";import{useCurrencyInfos as Fi}from"./useCurrencyInfo-Bxa3J04d.js";import"./createEthersProvider-B5AW2bpJ.js";import{setOpenModal as se}from"./reducer-1kwGyyVS.js";import"./actions-Budqlwp-.js";import"./usePrevious-CggM0Zir.js";import{useAppDispatch as Hi}from"./hooks-Muz170pO.js";import{getChainUrlParam as Ai,useChainIdFromUrlParam as Mi}from"./chainParams-DIOvplzi.js";import{getTokenDetailsURL as Oi}from"./util-BZ6kLG7e.js";import{useV3NFTPositionManagerContract as qi,useV4NFTPositionManagerContract as Ui}from"./useContract-CKZ4cOLX.js";import"./UniswapInterfaceMulticall-DLE8QJ-2.js";import{CurrencyLogo as ue}from"./TokenLogo-JlSSDr3Q.js";import{usePendingLPTransactionsChangeListener as Vi}from"./hooks-BA_A7Su9.js";import"./use-transport-CPomNX05.js";import{useCurrencyInfo as le}from"./Tokens-HEKZ8edJ.js";import"./types-OmNOta2_.js";import"./useMultichainContext-BVmgxqO2.js";import"./useIsWindowVisible-CtuFA8fK.js";import"./useBlockNumber-BeCJLIMW.js";import"./ErrorBoundary-oYzyK_hY.js";import"./useIsMobile-Cq3RSgOi.js";import{init_styled_components_browser_esm as Ki,styled_components_browser_esm_default as xe}from"./styled-components-DbVO3u5J.js";import"./text-CK4eXdYc.js";import"./index.esm-D6PJCa7X.js";import"./CopyHelper-DOhhKKQB.js";import"./copy-bNdbH7uS.js";import"./prop-types-BL9JsGr9.js";import{arrow_left_default as Qi}from"./arrow-left-64Zt5ugC.js";import{ClickableTamaguiStyle as ce}from"./clickable-D5qUCIhr.js";import"./ellipsis-DjwAKJIh.js";import"./Links-Xomrvpth.js";import"./testIDs-CxYpwoP6.js";import{Trace_default as Gi}from"./Trace-DgHN3Ak9.js";import{MultichainContextProvider as Zi}from"./MultichainContext-CEAgN3e0.js";import"./pools-5GjP-hMy.js";import"./useDeviceDimensions-iftoqxuy.js";import"./bundle.esm-B4P3X753.js";import"./api-PoolsService_connectquery-N1pfS4Yc.js";import"./tryParseCurrencyAmount-Bt3FPZDG.js";import"./CurrencyLogo-CvvmRzOI.js";import"./DoubleLogo-D40dQ2P7.js";import{LoadingFullscreen as Yi,LoadingRows as Ji}from"./styled-qLLlrMEu.js";import"./useOnClickOutside-B5O2_6zc.js";import{MouseoverTooltip as _e}from"./Tooltip-DPNhKWF2.js";import"./useInterval-7f86mkEJ.js";import"./polished.es-BASfrnSv.js";import{require_lib as Xi}from"./lib-vcvVECAN.js";import{linear as eo}from"./AdaptiveDropdown-Cv1C9ooR.js";import"./util-CfowgtYu.js";import{getBaseAndQuoteCurrencies as io}from"./currency-Brc-ymXr.js";import"./protocolVersion-Djp_Gxjw.js";import{isV4UnsupportedChain as oo}from"./networkSupportsV4-CXcYAtrx.js";import"./usePools-Bz9FGvMj.js";import"./getTickToPrice-BudeFeQp.js";import"./priceRangeInfo-DbHE3vOq.js";import{LP_INCENTIVES_REWARD_TOKEN as Qe}from"./LPIncentiveFeeStatTooltip-CknsSvzz.js";import{useGetRangeDisplay as ro,useLpIncentivesFormattedEarnings as to}from"./useLpIncentivesFormattedEarnings-Cp8RbAci.js";import"./feeTiers-D9BvLkmt.js";import"./LiquidityPositionInfoBadges-DdjNrqYk.js";import{parseRestPosition as no}from"./parseFromRest-Dp36Fdyo.js";import{BreadcrumbNavContainer as so,BreadcrumbNavLink as ao}from"./BreadcrumbNav-lC3fgSsx.js";import{DropdownSelector as Le}from"./DropdownSelector-CYN_6AdC.js";import{BaseQuoteFiatAmount as lo}from"./BaseQuoteFiatAmount-B6onp17b.js";import{useSrcColor as V}from"./useColor-DAHloagH.js";import{useGetPositionQuery as co}from"./getPosition-BPf_Aea4.js";import{NotFound as po}from"./NotFound-BnYMqlo6.js";var e=de(wi());const[Ge,Fs]=gi({name:"ExchangeHorizontal",getIcon:r=>(0,e.jsx)(fi,{viewBox:"0 0 16 16",fill:"none",...r,children:(0,e.jsx)(hi,{d:"M14.3532 9.68654L11.0198 13.0199C10.9225 13.1172 10.7945 13.1665 10.6665 13.1665C10.5385 13.1665 10.4105 13.1179 10.3131 13.0199C10.1178 12.8245 10.1178 12.5078 10.3131 12.3125L12.7931 9.83254H3.99982C3.72382 9.83254 3.49982 9.60854 3.49982 9.33254C3.49982 9.05654 3.72382 8.83254 3.99982 8.83254H13.9998C14.2025 8.83254 14.3846 8.95446 14.4619 9.14113C14.5392 9.32846 14.4965 9.54387 14.3532 9.68654ZM12.4998 5.99985C12.4998 5.72385 12.2758 5.49985 11.9998 5.49985H3.20717L5.68715 3.01987C5.88249 2.82454 5.88249 2.50785 5.68715 2.31252C5.49182 2.11718 5.17513 2.11718 4.9798 2.31252L1.64646 5.64585C1.50313 5.78852 1.46107 6.00378 1.53774 6.19045C1.61507 6.37711 1.79782 6.4992 1.99982 6.4992H11.9998C12.2758 6.49987 12.4998 6.27585 12.4998 5.99985Z",fill:"currentColor"})}),defaultFill:"#9B9B9B"});var h=de(_i());const mo="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-flex-end _gap-t-space-gap52 ",uo="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-flex-end _gap-t-space-gap52 ",xo="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-gap1569 _maxWidth-160px ",_o="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _justifyContent-space-betwe3241 ",ho="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1573 ";function J({rows:r}){const s=Fe(),{formatCurrencyAmount:a}=F(),t=Ai(r[0].currencyInfo.currency.chainId||Ae.Mainnet),i=(0,h.useCallback)(n=>Oi({address:n.currency.isToken?n.currency.address:void 0,chainUrlParam:t}),[t]);return(0,e.jsx)("div",{className:ho,children:r.map(n=>(0,e.jsxs)("div",{className:_o,children:[(0,e.jsx)(me,{onPress:()=>s(i(n.currencyInfo)),...ce,children:(0,e.jsxs)("div",{className:xo,children:[(0,e.jsx)(ue,{currencyInfo:n.currencyInfo,size:24}),(0,e.jsx)(c,{variant:"subheading1",color:"neutral1",$lg:{variant:"subheading2"},children:a({value:n.fiatValue,type:B.FiatTokenPrice})})]})}),(0,e.jsx)("div",{className:uo,children:(0,e.jsx)("div",{className:mo,children:(0,e.jsxs)(c,{variant:"body2",color:"$neutral2",children:[a({value:n.currencyAmount,type:B.TokenNonTx})," ",n.currencyAmount.currency.symbol]})})})]},n.currencyInfo.currencyId))})}Me();const fo="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-spa94665591 ",go="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap1569 ",vo="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _borderTopLeftRadius-t-radius-ro1041013639 _borderTopRightRadius-t-radius-ro1041013639 _borderBottomRightRadius-t-radius-ro1041013639 _borderBottomLeftRadius-t-radius-ro1041013639 _gap-t-space-spa94665587 _height-4px ",bo="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap56 ",Ze=({bars:r})=>{const{formatPercent:s}=F(),a=(0,h.useMemo)(()=>{const i=r.reduce((f,x)=>f.add(x.value),new $(0,100)),n=i.equalTo(new $(0,100))?1:Number(i.toFixed(2));return eo().domain([0,n]).range([0,100])},[r]),t=i=>i.equalTo(new $(0,100))?0:Number(i.toFixed(2));return(0,e.jsxs)("div",{className:bo,children:[(0,e.jsx)("div",{className:vo,children:r.map((i,n)=>(0,e.jsx)(D,{height:4,borderRadius:"$roundedFull",backgroundColor:i.color,width:`${a(t(i.value))}%`},n))}),(0,e.jsx)("div",{className:go,children:r.map((i,n)=>(0,e.jsxs)("div",{className:fo,children:[(0,e.jsx)(ue,{currencyInfo:i.currencyInfo,size:16}),(0,e.jsx)(c,{variant:"body3",color:"$neutral1",children:i.value.equalTo(new $(0,100))?"0%":s(a(t(i.value)))})]},n))})]})};Ki();function Re({src:r,canvas:s,targetHeight:a}){const t=s.getContext("2d");if(t){let{width:i,height:n}=r;const f=i/n;n=a,i=Math.round(f*a),s.width=i*devicePixelRatio,s.height=n*devicePixelRatio,s.style.width=i+"px",s.style.height=n+"px",t.scale(devicePixelRatio,devicePixelRatio),t.clearRect(0,0,i,n),t.drawImage(r,0,0,i,n)}}const yo=xe.div`
  display: grid;
  grid-template: 'overlap';
  min-height: 400px;
`,jo=xe.canvas`
  grid-area: overlap;
`,wo=xe.img`
  grid-area: overlap;
  height: 400px;
  /* Ensures SVG appears on top of canvas. */
  z-index: 1;
`;function So({image:r,height:s}){const[a,t]=(0,h.useState)(!1),i=(0,h.useRef)(null),n=(0,h.useRef)(null);return(0,e.jsxs)(yo,{onMouseEnter:()=>{t(!0)},onMouseLeave:()=>{n.current&&i.current&&Re({src:n.current,canvas:i.current,targetHeight:s}),t(!1)},children:[(0,e.jsx)(jo,{ref:i}),(0,e.jsx)(wo,{ref:n,src:r,hidden:!a,onLoad:()=>{n.current&&i.current&&Re({src:n.current,canvas:i.current,targetHeight:s})}})]})}qe();const De="data:application/json;base64,";function Co(r,s){const a=qi(!1,s),t=Ui(!1,s);return r===k.V3?a:t}function Io({tokenId:r,chainId:s,version:a}){const t=Co(a??k.V3,s),{data:i,isLoading:n,error:f}=Ti({queryKey:[vi.PositionTokenURI,r,s,a],queryFn:async()=>{const x=r instanceof Oe?r.toHexString():r==null?void 0:r.toString(16);return x?await(t==null?void 0:t.tokenURI(x)):null}});return(0,h.useMemo)(()=>{if(f||!r)return{valid:!1,loading:!1};if(n)return{valid:!0,loading:!0};if(!i)return{valid:!1,loading:!1};if(!i||!i.startsWith(De))return{valid:!1,loading:!1};try{return{valid:!0,loading:!1,result:JSON.parse(atob(i.slice(De.length)))}}catch{return{valid:!1,loading:!1}}},[f,n,i,r])}qe();Me();var ko=de(Xi());const $o="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334047 ",Po="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap52 ",To="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-spa94665591 _alignItems-center ",pe="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 ",No="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-space-betwe3241 _gap-t-space-gap56 ",Ye="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _mb-t-space-spa1360334047 ",Je="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _alignItems-center _gap-t-space-gap56 ",Xe="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap56 ",Lo="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-spa1360334051 ",Ro="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _mt-t-space-spa1360334047 ",Be="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _width-10037 _height-32px _alignItems-center _justifyContent-flex-start _pt-t-space-pad1331704929 _pr-t-space-pad1331704929 _pb-t-space-pad1331704929 _pl-t-space-pad1331704929 ",Do="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row-reverse _alignItems-center _justifyContent-space-betwe3241 _width-10037 ",Bo="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _width-10037 _height-10037 _justifyContent-center _alignItems-center _pt-t-space-spa1360334051 _pb-t-space-spa1360334051 _backgroundColor-surface2 _borderTopLeftRadius-t-radius-ro291586424 _borderTopRightRadius-t-radius-ro291586424 _borderBottomRightRadius-t-radius-ro291586424 _borderBottomLeftRadius-t-radius-ro291586424 ",ei="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap56 _alignItems-center ",Wo="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _pt-t-space-pad1331704900  _flexDirection-_lg_column _gap-_lg_t-space-gap1602",zo="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _gap-t-space-gap1569 _alignItems-center _flexWrap-wrap ",Eo="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-space-betwe3241 _alignItems-center _borderBottomWidth-1px _borderTopColor-surface3 _borderRightColor-surface3 _borderBottomColor-surface3 _borderLeftColor-surface3 _pb-t-space-pad1331704925 _borderBottomStyle-solid  _flexDirection-_lg_column _alignItems-_lg_flex-start _gap-_lg_t-space-gap1573",Fo="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _gap-t-space-gap1598 ",Ho="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-center ",Ao="  _display-flex _alignItems-center _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _justifyContent-center _maxWidth-7537 _mt-t-space-spa1360334051 ",We=Ri(Wi,{backgroundColor:"$surface1",display:"flex",flexDirection:"column",gap:"$spacing32",width:"100%",maxWidth:1200,zIndex:"$default",py:"$spacing24",px:"$spacing40",$lg:{px:"$padding20"}});function Mo(r){if(r)try{return Oe.from(r)}catch{return}}function Hs(){const r=Mi();return r&&!$i(r)?(0,e.jsx)(bi,{to:"/positions",replace:!0}):(0,e.jsx)(Zi,{initialChainId:r,children:(0,e.jsx)(Oo,{chainId:r})})}function Oo({chainId:r}){var s,a,t,i,n,f,x,l;const{tokenId:d}=ji(),g=Mo(d),w=r?Ci(r):void 0,m=Li(),_=Ni(m.chainId),{pathname:C}=yi(),{data:P,isLoading:v,refetch:S}=co({owner:m.address??Si,protocolVersion:C.includes("v3")?k.V3:C.includes("v4")?k.V4:k.UNSPECIFIED,tokenId:d,chainId:r??_}),b=P==null?void 0:P.position,o=(0,h.useMemo)(()=>no(b),[b]),W=Io({tokenId:g,chainId:r,version:o==null?void 0:o.version});Vi(S);const N=Hi(),H=Ve(Ue.LpIncentives),L=Fe(),{t:u}=K(),Q=Bi(),{currency0Amount:y,currency1Amount:j,status:ie,fee0Amount:A,fee1Amount:M}=o??{},ii=Y(A,Z.Slow),oi=Y(M,Z.Slow),fe=Y(y,Z.Slow),ge=Y(j,Z.Slow),O=(0,h.useMemo)(()=>{if((o==null?void 0:o.version)===k.V2||!(o!=null&&o.position))return{};const p=o.position,z=p.amount0.currency,xi=p.amount1.currency;return{priceLower:p.token0PriceLower,priceUpper:p.token0PriceUpper,quote:xi,base:z}},[o]),[T,ve]=(0,h.useState)(!1),{maxPrice:ri,minPrice:ti,tokenASymbol:ni,tokenBSymbol:si,isFullRange:ai}=ro({priceOrdering:O,tickSpacing:o==null?void 0:o.tickSpacing,tickLower:o==null?void 0:o.tickLower,tickUpper:o==null?void 0:o.tickUpper,pricesInverted:T}),{baseCurrency:be,quoteCurrency:ye}=io({TOKEN0:y==null?void 0:y.currency,TOKEN1:j==null?void 0:j.currency},T),[oe,je]=(0,h.useState)(E.Month),[li,ci]=(0,h.useState)(!1),[pi,di]=(0,h.useState)(!1),q=(0,h.useMemo)(()=>({options:[[E.Day,u("token.priceExplorer.timeRangeLabel.day"),u("token.priceExplorer.timeRangeLabel.day.verbose")],[E.Week,u("token.priceExplorer.timeRangeLabel.week"),u("token.priceExplorer.timeRangeLabel.week.verbose")],[E.Month,u("token.priceExplorer.timeRangeLabel.month"),u("token.priceExplorer.timeRangeLabel.month.verbose")],[E.Year,u("token.priceExplorer.timeRangeLabel.year"),u("token.priceExplorer.timeRangeLabel.year.verbose")],[E.Max,u("token.priceExplorer.timeRangeLabel.all")]].map(z=>({value:z[0],display:(0,e.jsx)(c,{variant:"buttonLabel3",children:z[1]}),verboseDisplay:(0,e.jsx)(c,{variant:"buttonLabel3",children:z[2]??z[1]})})),selected:oe}),[oe,u]),[G,we]=(0,h.useState)("chart"),re=(0,h.useMemo)(()=>[{value:"chart",display:(0,e.jsx)(c,{variant:"buttonLabel3",children:u("common.chart")})},{value:"nft",display:(0,e.jsx)(c,{variant:"buttonLabel3",children:u("common.nft")})}],[u]),{fullWidth:R}=Di(),Se=(0,h.useMemo)(()=>R&&R<Ne.lg?R-64:R&&R<Ne.xxl?Math.min((R-32)/2,620):620,[R]);if(v)return(0,e.jsx)(We,{children:(0,e.jsxs)(Ji,{children:[(0,e.jsx)(I,{}),(0,e.jsx)(I,{}),(0,e.jsx)(I,{}),(0,e.jsx)(I,{}),(0,e.jsx)(I,{}),(0,e.jsx)(I,{}),(0,e.jsx)(I,{}),(0,e.jsx)(I,{}),(0,e.jsx)(I,{}),(0,e.jsx)(I,{}),(0,e.jsx)(I,{})]})});if(!b||!o||!y||!j||!be||!ye)return(0,e.jsx)(po,{title:(0,e.jsx)(c,{variant:"heading2",children:u("position.notFound")}),subtitle:(0,e.jsx)("div",{className:Ao,children:(0,e.jsx)(c,{color:"$neutral2",variant:"heading3",textAlign:"center",children:u("position.notFound.description")})}),actionButton:(0,e.jsx)("div",{className:Ho,children:(0,e.jsx)(U,{width:"fit-content",variant:"branded",onPress:()=>L("/positions"),children:u("common.backToPositions")})})});const mi=(A==null?void 0:A.greaterThan(0))||(M==null?void 0:M.greaterThan(0)),Ce=o.version!==k.V2?(s=o.poolOrPair)===null||s===void 0?void 0:s.token0Price:void 0,Ie=o.version!==k.V2?(a=o.poolOrPair)===null||a===void 0?void 0:a.token1Price:void 0,ui=Ii({addressInput1:{address:o.owner,chainId:o.chainId},addressInput2:{address:m.address,chainId:_??o.chainId}}),te=oo(o.chainId);return(0,e.jsxs)(Gi,{logImpression:!0,page:Pi.PositionDetails,properties:{pool_address:o.poolId,label:[y.currency.symbol,j.currency.symbol].join("/"),type:o.version,fee_tier:(t=o.feeTier)===null||t===void 0?void 0:t.feeAmount,baseCurrencyId:Te(X(y.currency)),quoteCurrencyId:Te(X(j.currency))},children:[(0,e.jsx)(ko.Helmet,{children:(0,e.jsx)("title",{children:u("liquidityPool.positions.page.title",{quoteSymbol:j.currency.symbol,baseSymbol:y.currency.symbol})})}),(0,e.jsxs)(We,{mb:100,children:[(0,e.jsxs)("div",{className:Fo,children:[(0,e.jsx)(so,{"aria-label":"breadcrumb-nav",children:(0,e.jsxs)(ao,{style:{gap:"8px"},to:"/positions",children:[(0,e.jsx)(Qi,{size:14})," ",(0,e.jsx)(ze,{i18nKey:"pool.positions.title"})]})}),(0,e.jsxs)("div",{className:Eo,children:[(0,e.jsx)(Ei,{positionInfo:o,linkToPool:!0,includeNetwork:!0,includeLpIncentives:H}),ui&&(0,e.jsxs)("div",{className:zo,children:[o.version===k.V3&&ie!==ee.CLOSED&&(0,e.jsx)(_e,{text:u("pool.migrateLiquidityDisabledTooltip"),disabled:!te,style:Q.sm?{width:"100%",display:"block"}:{},children:(0,e.jsx)(U,{size:"small",emphasis:"secondary",$sm:{width:"100%"},fill:!1,isDisabled:te,opacity:te?.5:1,onPress:()=>{L(`/migrate/v3/${w==null?void 0:w.urlParam}/${d}`)},children:u("pool.migrateToV4")})}),(0,e.jsx)(U,{size:"small",emphasis:"secondary",$sm:{width:"100%"},fill:!1,onPress:()=>{N(se({name:ne.AddLiquidity,initialState:o}))},children:u("common.addLiquidity")}),ie!==ee.CLOSED&&(0,e.jsx)(U,{size:"small",emphasis:"secondary",fill:!1,$sm:{width:"100%"},onPress:()=>{N(se({name:ne.RemoveLiquidity,initialState:o}))},children:u("pool.removeLiquidity")}),mi&&(0,e.jsx)(U,{size:"small",maxWidth:"fit-content",fill:!1,onPress:()=>{N(se({name:ne.ClaimFee,initialState:o}))},children:u("pool.collectFees")})]})]})]}),(0,e.jsxs)("div",{className:Wo,children:[(0,e.jsxs)(D,{gap:"$gap12",width:Se,children:[(0,e.jsxs)("div",{className:ei,children:[(0,e.jsx)(lo,{price:T?Ie:Ce,base:T?j.currency:y.currency,quote:T?y.currency:j.currency,variant:"heading3"}),(0,e.jsx)(me,{onPress:()=>{ve(p=>!p)},children:(0,e.jsx)(Ge,{size:"$icon.16"})})]}),(0,e.jsx)(D,{animation:"fast",height:"auto",width:"100%",$lg:{width:"100%"},borderWidth:0,borderColor:"$surface3",pb:"$padding12",children:G==="chart"?(0,e.jsx)(zi,{version:o.version,quoteCurrency:ye,baseCurrency:be,sdkCurrencies:{TOKEN0:y.currency,TOKEN1:j.currency},priceInverted:T,poolAddressOrId:o.poolId,chainId:o.chainId,tickSpacing:o.tickSpacing,feeTier:(i=o.feeTier)===null||i===void 0?void 0:i.feeAmount,hook:o.v4hook,positionStatus:ie,priceOrdering:T?{base:O.quote,priceLower:(n=O.priceUpper)===null||n===void 0?void 0:n.invert(),priceUpper:(f=O.priceLower)===null||f===void 0?void 0:f.invert()}:O,duration:oe,width:Se,height:440,showXAxis:!0,showYAxis:!0,showLiquidityBars:!0,showChartBorder:!0,crosshairEnabled:!1}):(0,e.jsx)("div",{className:Bo,children:"result"in W?(0,e.jsx)(So,{image:W.result.image,height:400}):(0,e.jsx)(Yi,{style:{borderRadius:12,backgroundColor:"transparent"}})})}),(0,e.jsxs)("div",{className:Do,children:[Pe?(0,e.jsx)(Le,{containerStyle:{width:"auto"},menuLabel:(0,e.jsxs)(D,{borderRadius:"$rounded16",backgroundColor:"transparent",row:!0,centered:!0,p:"$padding8",pl:"$padding12",borderColor:"$surface3",borderWidth:"$spacing1",gap:"$gap6",...ce,children:[(x=re.find(p=>p.value===G))===null||x===void 0?void 0:x.display,(0,e.jsx)(ke,{direction:"down",height:16,width:16,color:"$neutral2"})]}),buttonStyle:{borderWidth:0,p:0},dropdownStyle:{width:160},hideChevron:!0,isOpen:pi,toggleOpen:()=>{di(p=>!p)},children:re.map(p=>(0,e.jsx)("div",{onClick:()=>{we(p.value)},className:Be,children:p.display},p.value))}):(0,e.jsx)($e,{options:re,selectedOption:G,onSelectOption:p=>{we(p)}}),G==="chart"&&(Pe?(0,e.jsx)(Le,{containerStyle:{width:"auto"},menuLabel:(0,e.jsxs)(D,{borderRadius:"$rounded16",backgroundColor:"transparent",row:!0,centered:!0,p:"$padding8",pl:"$padding12",borderColor:"$surface3",borderWidth:"$spacing1",gap:"$gap6",...ce,children:[(l=q.options.find(p=>p.value===q.selected))===null||l===void 0?void 0:l.display,(0,e.jsx)(ke,{direction:"down",height:16,width:16,color:"$neutral2"})]}),buttonStyle:{borderWidth:0,p:0},dropdownStyle:{width:160,left:0},hideChevron:!0,isOpen:li,toggleOpen:()=>{ci(p=>!p)},children:q.options.map(p=>(0,e.jsx)("div",{onClick:()=>{je(p.value)},className:Be,children:p.verboseDisplay},p.value))}):(0,e.jsx)($e,{options:q.options,selectedOption:q.selected,onSelectOption:p=>{je(p)}}))]}),(0,e.jsx)("div",{className:Ro,children:(0,e.jsx)(Ko,{maxPrice:ri,minPrice:ti,tokenASymbol:ni,tokenBSymbol:si,isFullRange:ai,token0CurrentPrice:Ce,token1CurrentPrice:Ie,priceInverted:T,setPriceInverted:ve})})]}),(0,e.jsxs)("div",{className:Lo,children:[(0,e.jsx)(qo,{position:b,currency0Amount:y,currency1Amount:j,fiatValue0:fe,fiatValue1:ge}),(0,e.jsx)(Vo,{positionInfo:o,currency0Amount:y,currency1Amount:j,fiatValue0:fe,fiatValue1:ge,fiatFeeValue0:ii,fiatFeeValue1:oi,fee0Amount:A,fee1Amount:M}),H&&o.version===k.V4&&!!o.boostedApr&&(0,e.jsx)(Uo,{poolApr:o.apr,lpIncentiveRewardApr:o.boostedApr,totalApr:o.totalApr})]})]})]})]})}const he=({children:r})=>(0,e.jsx)(D,{p:"$spacing20",backgroundColor:"$surface2",width:380,$lg:{width:"100%"},borderRadius:"$rounded16",gap:"$spacing24","$platform-web":{height:"min-content"},children:r}),qo=({position:r,currency0Amount:s,currency1Amount:a,fiatValue0:t,fiatValue1:i})=>{const{convertFiatAmountFormatted:n}=F(),{t:f}=K(),x=Ee(),l=le(s.currency),d=le(a.currency),g=V({src:(l==null?void 0:l.logoUrl)??void 0,currencyName:l==null?void 0:l.currency.name,backgroundColor:x.surface2.val}).tokenColor,w=V({src:(d==null?void 0:d.logoUrl)??void 0,currencyName:d==null?void 0:d.currency.name,backgroundColor:x.surface2.val}).tokenColor,m=t==null?void 0:t.add(i??He.fromRawAmount(t.currency,0)),_=(0,h.useMemo)(()=>{const P=m!=null&&m.greaterThan(0)&&t?new $(t.quotient,m.quotient):void 0,v=m!=null&&m.greaterThan(0)&&i?new $(i.quotient,m.quotient):void 0;return!P||!v||!g||!w||!l||!d?[]:[{value:P,color:g,currencyInfo:l},{value:v,color:w,currencyInfo:d}]},[l,d,t,i,g,w,m]),C=(0,h.useMemo)(()=>!l||!d?[]:[{currencyInfo:l,currencyAmount:s,fiatValue:t},{currencyInfo:d,currencyAmount:a,fiatValue:i}],[l,d,s,a,t,i]);return(0,e.jsx)(he,{children:(0,e.jsxs)("div",{className:Xe,children:[(0,e.jsx)(c,{color:"$neutral2",variant:"body2",children:(0,e.jsx)(ze,{i18nKey:"pool.position"})}),r.status===ee.CLOSED?(0,e.jsx)(c,{variant:"heading2",$lg:{variant:"heading3"},children:n(0,B.FiatTokenPrice)}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(c,{variant:"heading2",mb:"$spacing12",children:t&&i?n(t.add(i).toExact(),B.FiatTokenPrice):(0,e.jsx)(_e,{text:f("pool.positions.usdValueUnavailable.tooltip"),placement:"right",children:(0,e.jsxs)("div",{className:Je,children:[(0,e.jsx)(c,{variant:"body1",color:"$neutral2",children:f("pool.positions.usdValueUnavailable")}),(0,e.jsx)(Ke,{color:"$neutral2",size:"$icon.16"})]})})}),_.length>0&&(0,e.jsx)("div",{className:Ye,children:(0,e.jsx)(Ze,{bars:_})}),C.length>0&&(0,e.jsx)(J,{rows:C})]})]})})},Uo=({poolApr:r,lpIncentiveRewardApr:s,totalApr:a})=>{const{address:t,chainId:i,symbol:n}=Qe,f=le(t,i),{t:x}=K(),{formatPercent:l}=F(),d=r?l(r):"-",g=s?l(s):"-",w=a?l(a):"-";return(0,e.jsx)(he,{children:(0,e.jsxs)("div",{className:No,children:[(0,e.jsx)(c,{color:"$neutral2",variant:"body2",children:x("pool.totalAPR")}),(0,e.jsx)(c,{color:"$neutral1",variant:"heading2",pb:"$spacing4",children:w}),(0,e.jsxs)("div",{className:pe,children:[(0,e.jsx)(c,{color:"$neutral2",variant:"body3",children:x("pool.aprText")}),(0,e.jsx)(c,{color:"$neutral1",variant:"body3",children:d})]}),(0,e.jsxs)("div",{className:pe,children:[(0,e.jsx)(c,{color:"$neutral2",variant:"body3",children:x("pool.rewardAPR")}),(0,e.jsxs)("div",{className:To,children:[(0,e.jsx)(ue,{currencyInfo:f,size:16}),(0,e.jsxs)(c,{color:"$accent1",variant:"body3",children:[g," ",n]})]})]})]})})},Vo=({positionInfo:r,currency0Amount:s,currency1Amount:a,fiatFeeValue0:t,fiatFeeValue1:i,fee0Amount:n,fee1Amount:f})=>{const{convertFiatAmountFormatted:x}=F(),{t:l}=K(),d=Ee(),g=Ve(Ue.LpIncentives),{uniLpRewardsCurrencyAmount:w,uniLpRewardsFiatValue:m,totalEarningsFiatValue:_,hasRewards:C,hasFees:P}=to({liquidityPosition:r,fiatFeeValue0:t,fiatFeeValue1:i}),[v,S,b]=Fi([X(s.currency),X(a.currency),ki(Ae.Mainnet,Qe.address)]),o=V({src:(v==null?void 0:v.logoUrl)??void 0,currencyName:v==null?void 0:v.currency.name,backgroundColor:d.surface2.val}).tokenColor,W=V({src:(S==null?void 0:S.logoUrl)??void 0,currencyName:S==null?void 0:S.currency.name,backgroundColor:d.surface2.val}).tokenColor,N=V({src:(b==null?void 0:b.logoUrl)??void 0,currencyName:b==null?void 0:b.currency.name,backgroundColor:d.surface2.val}).tokenColor,H=(0,h.useMemo)(()=>{const Q=_!=null&&_.greaterThan(0)&&t?new $(t.quotient,_.quotient):void 0,y=_!=null&&_.greaterThan(0)&&i?new $(i.quotient,_.quotient):void 0;if(!Q||!y||!o||!W||!v||!S)return[];const j=g&&N&&(m!=null&&m.greaterThan(0))&&(_!=null&&_.greaterThan(0))&&C?[{value:new $(m.quotient,_.quotient),color:N,currencyInfo:b}]:[];return[{value:Q,color:o,currencyInfo:v},{value:y,color:W,currencyInfo:S},...j]},[_,t,i,o,W,v,S,g,N,m,C,b]),L=(0,h.useMemo)(()=>!v||!S||!n||!f?[]:[{currencyInfo:v,currencyAmount:n,fiatValue:t},{currencyInfo:S,currencyAmount:f,fiatValue:i}],[v,S,n,f,t,i]),u=(0,h.useMemo)(()=>!g||!b||!C?[]:[{currencyInfo:b,currencyAmount:w||He.fromRawAmount(b.currency,0),fiatValue:m}],[g,b,w,m,C]);return(0,e.jsx)(he,{children:(0,e.jsxs)("div",{className:Xe,children:[(0,e.jsx)(c,{color:"$neutral2",variant:"body2",children:l(g&&C?"pool.earnings":"common.feesEarned")}),r.status===ee.CLOSED?(0,e.jsx)(c,{variant:"heading2",children:x(0,B.FiatRewards)}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(c,{variant:"heading2",mb:"$spacing12",children:_?x(_.toExact(),B.FiatRewards):(0,e.jsx)(_e,{text:l("pool.positions.usdValueUnavailable.tooltip"),placement:"right",children:(0,e.jsxs)("div",{className:Je,children:[(0,e.jsx)(c,{variant:"body1",color:"$neutral2",children:l("pool.positions.usdValueUnavailable")}),(0,e.jsx)(Ke,{color:"$neutral2",size:"$icon.16"})]})})}),H.length>0&&(0,e.jsx)("div",{className:Ye,children:(0,e.jsx)(Ze,{bars:H})}),g?(0,e.jsxs)(e.Fragment,{children:[C&&u.length>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(c,{color:"$neutral2",variant:"body2",mb:"$spacing12",children:l("pool.rewards")}),(0,e.jsx)(J,{rows:u})]}),P&&L.length>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(c,{color:"$neutral2",variant:"body2",mb:"$spacing12",mt:C?"$spacing24":"$none",children:l("common.fees")}),(0,e.jsx)(J,{rows:L})]})]}):L.length>0&&(0,e.jsx)(J,{rows:L}),(!_||_.equalTo(0))&&(0,e.jsx)(c,{variant:"body3",color:"$neutral3",children:l("pool.earnings.empty")})]})]})})},ae=({labelText:r,price:s,tokenASymbol:a,tokenBSymbol:t,setPriceInverted:i})=>(0,e.jsxs)("div",{className:Po,children:[(0,e.jsx)(c,{variant:"subheading2",color:"$neutral2",children:r}),(0,e.jsx)(c,{variant:"subheading1",children:s}),(0,e.jsx)(D,{group:!0,row:!0,children:(0,e.jsxs)("div",{className:ei,children:[(0,e.jsxs)(c,{variant:"body4",color:"$neutral2",children:[a," = 1 ",t]}),(0,e.jsx)(me,{"$group-hover":{opacity:1},opacity:0,onPress:()=>{i(n=>!n)},children:(0,e.jsx)(Ge,{color:"$neutral2",size:"$icon.16"})})]})})]}),Ko=({maxPrice:r,minPrice:s,tokenASymbol:a,tokenBSymbol:t,token0CurrentPrice:i,token1CurrentPrice:n,isFullRange:f,priceInverted:x,setPriceInverted:l})=>{const{t:d}=K(),{formatNumberOrString:g}=F(),w=(0,h.useMemo)(()=>{var m;return g({value:(m=x?n:i)===null||m===void 0?void 0:m.toSignificant(),type:B.TokenTx})},[x,i,n,g]);return f?null:(0,e.jsxs)("div",{className:$o,children:[(0,e.jsx)(c,{variant:"heading3",color:"$neutral1",children:"Price Range"}),(0,e.jsxs)("div",{className:pe,children:[(0,e.jsx)(ae,{labelText:d("pool.minPrice"),price:s,tokenASymbol:a,tokenBSymbol:t,setPriceInverted:l}),(0,e.jsx)(ae,{labelText:d("pool.maxPrice"),price:r,tokenASymbol:a,tokenBSymbol:t,setPriceInverted:l}),(0,e.jsx)(ae,{labelText:d("common.marketPrice"),price:w,tokenASymbol:a,tokenBSymbol:t,setPriceInverted:l})]})]})};export{Hs as default};
