import{__esm as ae,__export as me}from"./chunk-DgAfPHQg.js";import{CurrencyAmount as A,Fraction as G,Percent as R,Price as E,Token as pe,TradeType as w,V2_FACTORY_ADDRESSES as ye,computePriceImpact as Te,init_jsbi as Ae,init_sdk_core_esm as qe,jsbi_default as u,sortedInsert as J,sqrt as U,validateAndParseAddress as ke}from"./utils-BX1Fu73x.js";import{BigNumber as K,getCreate2Address as ge,init_lib$2 as we,init_lib$5 as _e}from"./lib-DPFIyRke.js";import{init_lib as Ee,keccak256 as Ie,pack as Oe}from"./lib-CWHZrl0T.js";function l(r,n){if(!r){if(ce)throw new Error(F);var t=typeof n=="function"?n():n,e=t?"".concat(F,": ").concat(t):F;throw new Error(e)}}var ce,F,Pe=ae({"../../node_modules/@uniswap/v2-sdk/node_modules/tiny-invariant/dist/esm/tiny-invariant.js"(){ce=!0,F="Invariant failed"}}),be={};me(be,{FACTORY_ADDRESS_MAP:()=>Z,INIT_CODE_HASH:()=>Q,InsufficientInputAmountError:()=>b,InsufficientReservesError:()=>B,MINIMUM_LIQUIDITY:()=>W,Pair:()=>ve,Route:()=>C,Router:()=>he,Trade:()=>de,computePairAddress:()=>z,inputOutputComparator:()=>le,tradeComparator:()=>$});function ee(r,n){(n==null||n>r.length)&&(n=r.length);for(var t=0,e=Array(n);t<n;t++)e[t]=r[t];return e}function xe(r,n,t){if(fe())return Reflect.construct.apply(null,arguments);var e=[null];e.push.apply(e,n);var i=new(r.bind.apply(r,e));return t&&x(i,t.prototype),i}function te(r,n){for(var t=0;t<n.length;t++){var e=n[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,Be(e.key),e)}}function re(r,n,t){return n&&te(r.prototype,n),t&&te(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function ne(r,n){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=Ce(r))||n&&r&&typeof r.length=="number"){t&&(r=t);var e=0;return function(){return e>=r.length?{done:!0}:{done:!1,value:r[e++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L(r){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},L(r)}function ie(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,x(r,n)}function Re(r){try{return Function.toString.call(r).indexOf("[native code]")!==-1}catch{return typeof r=="function"}}function fe(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fe=function(){return!!r})()}function x(r,n){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(r,n)}function Fe(r,n){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var e=t.call(r,n||"default");if(typeof e!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function Be(r){var n=Fe(r,"string");return typeof n=="symbol"?n:n+""}function Ce(r,n){if(r){if(typeof r=="string")return ee(r,n);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ee(r,n):void 0}}function S(r){var n=typeof Map=="function"?new Map:void 0;return S=function(t){if(t===null||!Re(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(n!==void 0){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return xe(t,arguments,L(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),x(e,t)},S(r)}function le(r,n){return!r.inputAmount.currency.equals(n.inputAmount.currency)&&l(!1),!r.outputAmount.currency.equals(n.outputAmount.currency)&&l(!1),r.outputAmount.equalTo(n.outputAmount)?r.inputAmount.equalTo(n.inputAmount)?0:r.inputAmount.lessThan(n.inputAmount)?-1:1:r.outputAmount.lessThan(n.outputAmount)?1:-1}function $(r,n){var t=le(r,n);return t!==0?t:r.priceImpact.lessThan(n.priceImpact)?-1:r.priceImpact.greaterThan(n.priceImpact)?1:r.route.path.length-n.route.path.length}function oe(r){return"0x"+r.quotient.toString(16)}var ue,Z,Q,W,y,I,se,D,M,X,k,Y,V,B,b,z,ve,C,de,P,he,Ue=ae({"../../node_modules/@uniswap/v2-sdk/dist/v2-sdk.esm.js"(){qe(),Ae(),we(),_e(),Ee(),Pe(),ue="0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",Z=ye,Q="0x96e8ac4277198ff8b6f785478aa9a39f403cb768dd02cbee326c3e7da348845f",W=u.BigInt(1e3),y=u.BigInt(0),I=u.BigInt(1),se=u.BigInt(5),D=u.BigInt(997),M=u.BigInt(1e3),X=u.BigInt(1e4),k=new R(y),Y=new R(I),V="setPrototypeOf"in Object,B=(function(r){function n(){var t;return t=r.call(this)||this,t.isInsufficientReservesError=!0,t.name=t.constructor.name,V&&Object.setPrototypeOf(t,(this instanceof n?this.constructor:void 0).prototype),t}return ie(n,r),n})(S(Error)),b=(function(r){function n(){var t;return t=r.call(this)||this,t.isInsufficientInputAmountError=!0,t.name=t.constructor.name,V&&Object.setPrototypeOf(t,(this instanceof n?this.constructor:void 0).prototype),t}return ie(n,r),n})(S(Error)),z=function(n){var t=n.factoryAddress,e=n.tokenA,i=n.tokenB,o=e.sortsBefore(i)?[e,i]:[i,e],a=o[0],s=o[1];return ge(t,Ie(["bytes"],[Oe(["address","address"],[a.address,s.address])]),Q)},ve=(function(){function r(t,e){var i=t.currency.sortsBefore(e.currency)?[t,e]:[e,t];this.liquidityToken=new pe(i[0].currency.chainId,r.getAddress(i[0].currency,i[1].currency),18,"UNI-V2","Uniswap V2"),this.tokenAmounts=i}r.getAddress=function(e,i){var o,a=(o=Z[e.chainId])!=null?o:ue;return z({factoryAddress:a,tokenA:e,tokenB:i})};var n=r.prototype;return n.involvesToken=function(e){return e.equals(this.token0)||e.equals(this.token1)},n.priceOf=function(e){return!this.involvesToken(e)&&l(!1),e.equals(this.token0)?this.token0Price:this.token1Price},n.reserveOf=function(e){return!this.involvesToken(e)&&l(!1),e.equals(this.token0)?this.reserve0:this.reserve1},n.getOutputAmount=function(e,i){if(i===void 0&&(i=!0),!this.involvesToken(e.currency)&&l(!1),u.equal(this.reserve0.quotient,y)||u.equal(this.reserve1.quotient,y))throw new B;var o=this.reserveOf(e.currency),a=this.reserveOf(e.currency.equals(this.token0)?this.token1:this.token0),s=i?this.derivePercentAfterSellFees(e):k,c=s.greaterThan(k)?A.fromRawAmount(e.currency,s.multiply(e).quotient):e,f=u.multiply(c.quotient,D),v=u.multiply(f,a.quotient),d=u.add(u.multiply(o.quotient,M),f),h=A.fromRawAmount(e.currency.equals(this.token0)?this.token1:this.token0,u.divide(v,d));if(u.equal(h.quotient,y))throw new b;var m=i?this.derivePercentAfterBuyFees(h):k,p=m.greaterThan(k)?A.fromRawAmount(h.currency,h.multiply(m).quotient):h;if(u.equal(p.quotient,y))throw new b;return[p,new r(o.add(c),a.subtract(p))]},n.getInputAmount=function(e,i){i===void 0&&(i=!0),!this.involvesToken(e.currency)&&l(!1);var o=i?this.derivePercentAfterBuyFees(e):k,a=o.greaterThan(k)?A.fromRawAmount(e.currency,u.add(e.divide(o).quotient,I)):e;if(u.equal(this.reserve0.quotient,y)||u.equal(this.reserve1.quotient,y)||u.greaterThanOrEqual(e.quotient,this.reserveOf(e.currency).quotient)||u.greaterThanOrEqual(a.quotient,this.reserveOf(e.currency).quotient))throw new B;var s=this.reserveOf(e.currency),c=this.reserveOf(e.currency.equals(this.token0)?this.token1:this.token0),f=u.multiply(u.multiply(c.quotient,a.quotient),M),v=u.multiply(u.subtract(s.quotient,a.quotient),D),d=A.fromRawAmount(e.currency.equals(this.token0)?this.token1:this.token0,u.add(u.divide(f,v),I)),h=i?this.derivePercentAfterSellFees(d):k,m=h.greaterThan(k)?A.fromRawAmount(d.currency,u.add(d.divide(h).quotient,I)):d;return[m,new r(c.add(d),s.subtract(e))]},n.getLiquidityMinted=function(e,i,o){!e.currency.equals(this.liquidityToken)&&l(!1);var a=i.currency.sortsBefore(o.currency)?[i,o]:[o,i];!(a[0].currency.equals(this.token0)&&a[1].currency.equals(this.token1))&&l(!1);var s;if(u.equal(e.quotient,y))s=u.subtract(U(u.multiply(a[0].quotient,a[1].quotient)),W);else{var c=u.divide(u.multiply(a[0].quotient,e.quotient),this.reserve0.quotient),f=u.divide(u.multiply(a[1].quotient,e.quotient),this.reserve1.quotient);s=u.lessThanOrEqual(c,f)?c:f}if(!u.greaterThan(s,y))throw new b;return A.fromRawAmount(this.liquidityToken,s)},n.getLiquidityValue=function(e,i,o,a,s){a===void 0&&(a=!1),!this.involvesToken(e)&&l(!1),!i.currency.equals(this.liquidityToken)&&l(!1),!o.currency.equals(this.liquidityToken)&&l(!1),!u.lessThanOrEqual(o.quotient,i.quotient)&&l(!1);var c;if(!a)c=i;else{!s&&l(!1);var f=u.BigInt(s);if(u.equal(f,y))c=i;else{var v=U(u.multiply(this.reserve0.quotient,this.reserve1.quotient)),d=U(f);if(u.greaterThan(v,d)){var h=u.multiply(i.quotient,u.subtract(v,d)),m=u.add(u.multiply(v,se),d),p=u.divide(h,m);c=i.add(A.fromRawAmount(this.liquidityToken,p))}else c=i}}return A.fromRawAmount(e,u.divide(u.multiply(o.quotient,this.reserveOf(e).quotient),c.quotient))},n.derivePercentAfterSellFees=function(e){var i=this.token0.wrapped.equals(e.wrapped.currency)?this.token0.wrapped.sellFeeBps:this.token1.wrapped.sellFeeBps;return i!=null&&i.gt(K.from(0))?Y.subtract(new R(u.BigInt(i)).divide(X)):k},n.derivePercentAfterBuyFees=function(e){var i=this.token0.wrapped.equals(e.wrapped.currency)?this.token0.wrapped.buyFeeBps:this.token1.wrapped.buyFeeBps;return i!=null&&i.gt(K.from(0))?Y.subtract(new R(u.BigInt(i)).divide(X)):k},re(r,[{key:"token0Price",get:function(){var e=this.tokenAmounts[1].divide(this.tokenAmounts[0]);return new E(this.token0,this.token1,e.denominator,e.numerator)}},{key:"token1Price",get:function(){var e=this.tokenAmounts[0].divide(this.tokenAmounts[1]);return new E(this.token1,this.token0,e.denominator,e.numerator)}},{key:"chainId",get:function(){return this.token0.chainId}},{key:"token0",get:function(){return this.tokenAmounts[0].currency}},{key:"token1",get:function(){return this.tokenAmounts[1].currency}},{key:"reserve0",get:function(){return this.tokenAmounts[0]}},{key:"reserve1",get:function(){return this.tokenAmounts[1]}}])})(),C=(function(){function r(n,t,e){this._midPrice=null,!(n.length>0)&&l(!1);var i=n[0].chainId;!n.every(function(p){return p.chainId===i})&&l(!1);var o=t.wrapped;!n[0].involvesToken(o)&&l(!1),!(typeof e>"u"||n[n.length-1].involvesToken(e.wrapped))&&l(!1);for(var a=[o],s=ne(n.entries()),c;!(c=s()).done;){var f=c.value,v=f[0],d=f[1],h=a[v];!(h.equals(d.token0)||h.equals(d.token1))&&l(!1);var m=h.equals(d.token0)?d.token1:d.token0;a.push(m)}this.pairs=n,this.path=a,this.input=t,this.output=e}return re(r,[{key:"midPrice",get:function(){if(this._midPrice!==null)return this._midPrice;for(var t=[],e=ne(this.pairs.entries()),i;!(i=e()).done;){var o=i.value,a=o[0],s=o[1];t.push(this.path[a].equals(s.token0)?new E(s.reserve0.currency,s.reserve1.currency,s.reserve0.quotient,s.reserve1.quotient):new E(s.reserve1.currency,s.reserve0.currency,s.reserve1.quotient,s.reserve0.quotient))}var c=t.slice(1).reduce(function(f,v){return f.multiply(v)},t[0]);return this._midPrice=new E(this.input,this.output,c.denominator,c.numerator)}},{key:"chainId",get:function(){return this.pairs[0].chainId}}])})(),de=(function(){function r(t,e,i){this.route=t,this.tradeType=i;var o=new Array(t.path.length);if(i===w.EXACT_INPUT){!e.currency.equals(t.input)&&l(!1),o[0]=e.wrapped;for(var a=0;a<t.path.length-1;a++){var s=t.pairs[a],c=s.getOutputAmount(o[a]),f=c[0];o[a+1]=f}this.inputAmount=A.fromFractionalAmount(t.input,e.numerator,e.denominator),this.outputAmount=A.fromFractionalAmount(t.output,o[o.length-1].numerator,o[o.length-1].denominator)}else{!e.currency.equals(t.output)&&l(!1),o[o.length-1]=e.wrapped;for(var v=t.path.length-1;v>0;v--){var d=t.pairs[v-1],h=d.getInputAmount(o[v]),m=h[0];o[v-1]=m}this.inputAmount=A.fromFractionalAmount(t.input,o[0].numerator,o[0].denominator),this.outputAmount=A.fromFractionalAmount(t.output,e.numerator,e.denominator)}this.executionPrice=new E(this.inputAmount.currency,this.outputAmount.currency,this.inputAmount.quotient,this.outputAmount.quotient),this.priceImpact=Te(t.midPrice,this.inputAmount,this.outputAmount)}r.exactIn=function(e,i){return new r(e,i,w.EXACT_INPUT)},r.exactOut=function(e,i){return new r(e,i,w.EXACT_OUTPUT)};var n=r.prototype;return n.minimumAmountOut=function(e){if(e.lessThan(y)&&l(!1),this.tradeType===w.EXACT_OUTPUT)return this.outputAmount;var i=new G(I).add(e).invert().multiply(this.outputAmount.quotient).quotient;return A.fromRawAmount(this.outputAmount.currency,i)},n.maximumAmountIn=function(e){if(e.lessThan(y)&&l(!1),this.tradeType===w.EXACT_INPUT)return this.inputAmount;var i=new G(I).add(e).multiply(this.inputAmount.quotient).quotient;return A.fromRawAmount(this.inputAmount.currency,i)},r.bestTradeExactIn=function(e,i,o,a,s,c,f){var v=a===void 0?{}:a,d=v.maxNumResults,h=d===void 0?3:d,m=v.maxHops,p=m===void 0?3:m;s===void 0&&(s=[]),c===void 0&&(c=i),f===void 0&&(f=[]),!(e.length>0)&&l(!1),!(p>0)&&l(!1),!(i===c||s.length>0)&&l(!1);for(var g=c.wrapped,N=o.wrapped,q=0;q<e.length;q++){var T=e[q];if(!(!T.token0.equals(g.currency)&&!T.token1.equals(g.currency))&&!(T.reserve0.equalTo(y)||T.reserve1.equalTo(y))){var _=void 0;try{var H=T.getOutputAmount(g);_=H[0]}catch(O){if(O.isInsufficientInputAmountError)continue;throw O}if(_.currency.equals(N))J(f,new r(new C([].concat(s,[T]),i.currency,o),i,w.EXACT_INPUT),h,$);else if(p>1&&e.length>1){var j=e.slice(0,q).concat(e.slice(q+1,e.length));r.bestTradeExactIn(j,i,o,{maxNumResults:h,maxHops:p-1},[].concat(s,[T]),_,f)}}}return f},n.worstExecutionPrice=function(e){return new E(this.inputAmount.currency,this.outputAmount.currency,this.maximumAmountIn(e).quotient,this.minimumAmountOut(e).quotient)},r.bestTradeExactOut=function(e,i,o,a,s,c,f){var v=a===void 0?{}:a,d=v.maxNumResults,h=d===void 0?3:d,m=v.maxHops,p=m===void 0?3:m;s===void 0&&(s=[]),c===void 0&&(c=o),f===void 0&&(f=[]),!(e.length>0)&&l(!1),!(p>0)&&l(!1),!(o===c||s.length>0)&&l(!1);for(var g=c.wrapped,N=i.wrapped,q=0;q<e.length;q++){var T=e[q];if(!(!T.token0.equals(g.currency)&&!T.token1.equals(g.currency))&&!(T.reserve0.equalTo(y)||T.reserve1.equalTo(y))){var _=void 0;try{var H=T.getInputAmount(g);_=H[0]}catch(O){if(O.isInsufficientReservesError)continue;throw O}if(_.currency.equals(N))J(f,new r(new C([T].concat(s),i,o.currency),o,w.EXACT_OUTPUT),h,$);else if(p>1&&e.length>1){var j=e.slice(0,q).concat(e.slice(q+1,e.length));r.bestTradeExactOut(j,i,o,{maxNumResults:h,maxHops:p-1},[T].concat(s),_,f)}}}return f},r})(),P="0x0",he=(function(){function r(){}return r.swapCallParameters=function(t,e){var i=t.inputAmount.currency.isNative,o=t.outputAmount.currency.isNative;i&&o&&l(!1),!(!("ttl"in e)||e.ttl>0)&&l(!1);var a=ke(e.recipient),s=oe(t.maximumAmountIn(e.allowedSlippage)),c=oe(t.minimumAmountOut(e.allowedSlippage)),f=t.route.path.map(function(g){return g.address}),v="ttl"in e?"0x"+(Math.floor(new Date().getTime()/1e3)+e.ttl).toString(16):"0x"+e.deadline.toString(16),d=!!e.feeOnTransfer,h,m,p;switch(t.tradeType){case w.EXACT_INPUT:i?(h=d?"swapExactETHForTokensSupportingFeeOnTransferTokens":"swapExactETHForTokens",m=[c,f,a,v],p=s):o?(h=d?"swapExactTokensForETHSupportingFeeOnTransferTokens":"swapExactTokensForETH",m=[s,c,f,a,v],p=P):(h=d?"swapExactTokensForTokensSupportingFeeOnTransferTokens":"swapExactTokensForTokens",m=[s,c,f,a,v],p=P);break;case w.EXACT_OUTPUT:d&&l(!1),i?(h="swapETHForExactTokens",m=[c,f,a,v],p=s):o?(h="swapTokensForExactETH",m=[c,s,f,a,v],p=P):(h="swapTokensForExactTokens",m=[c,s,f,a,v],p=P);break}return{methodName:h,args:m,value:p}},r})()}});export{ve as Pair,C as Route,z as computePairAddress,Ue as init_v2_sdk_esm,be as v2_sdk_esm_exports};
