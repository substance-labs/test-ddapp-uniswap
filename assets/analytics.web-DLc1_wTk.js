import{__commonJS as Ni,__toESM as Et}from"./chunk-DgAfPHQg.js";import{require_react as Di}from"./react-CNoFhWkx.js";import{isInterface as xi}from"./index.web-BqgtOHN3.js";import{global as He,init_dist as vi}from"./dist-Q7olfaoJ.js";import{__assign as w,__awaiter as E,__extends as Ne,__generator as _,__read as B,__rest as dt,__spreadArray as oe,__values as ve,init_tslib_es6 as N}from"./tslib.es6-Dbpxy1u8.js";import{require_jsx_runtime as Li}from"./jsx-runtime-D7bMTQeG.js";import{getChromeWithThrow as _t,isNonTestDev as qe,logger as Ae}from"./hooks-BXO4d1DJ.js";var z;(function(e){e.SET="$set",e.SET_ONCE="$setOnce",e.ADD="$add",e.APPEND="$append",e.PREPEND="$prepend",e.REMOVE="$remove",e.PREINSERT="$preInsert",e.POSTINSERT="$postInsert",e.UNSET="$unset",e.CLEAR_ALL="$clearAll"})(z||(z={}));var ge;(function(e){e.REVENUE_PRODUCT_ID="$productId",e.REVENUE_QUANTITY="$quantity",e.REVENUE_PRICE="$price",e.REVENUE_TYPE="$revenueType",e.REVENUE="$revenue"})(ge||(ge={}));var _e;(function(e){e.IDENTIFY="$identify",e.GROUP_IDENTIFY="$groupidentify",e.REVENUE="revenue_amount"})(_e||(_e={}));var ee;(function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Warn=2]="Warn",e[e.Verbose=3]="Verbose",e[e.Debug=4]="Debug"})(ee||(ee={}));var ie;(function(e){e.BEFORE="before",e.ENRICHMENT="enrichment",e.DESTINATION="destination"})(ie||(ie={}));var Xe;(function(e){e.US="US",e.EU="EU",e.STAGING="STAGING"})(Xe||(Xe={}));var W;(function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.PayloadTooLarge="payload_too_large",e.Invalid="invalid",e.Failed="failed",e.Timeout="Timeout",e.SystemError="SystemError"})(W||(W={}));var Ze;(function(e){e.XHR="xhr",e.SendBeacon="beacon",e.Fetch="fetch"})(Ze||(Ze={}));var Ot="-",Mi="AMP",Vi="".concat(Mi,"_unsent"),fi="https://api2.amplitude.com/2/httpapi",Fi="https://api.eu.amplitude.com/2/httpapi",qi="https://api2.amplitude.com/batch",Bi="https://api.eu.amplitude.com/batch";N();var Gi=1e3,vt=function(e){if(Object.keys(e).length>Gi)return!1;for(var t in e){var i=e[t];if(!hi(t,i))return!1}return!0},hi=function(e,t){var i,r;if(typeof e!="string")return!1;if(Array.isArray(t)){var n=!0;try{for(var o=ve(t),a=o.next();!a.done;a=o.next()){var c=a.value;if(Array.isArray(c))return!1;if(typeof c=="object")n=n&&vt(c);else if(!["number","string"].includes(typeof c))return!1;if(!n)return!1}}catch(l){i={error:l}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}}else{if(t==null)return!1;if(typeof t=="object")return vt(t);if(!["number","string","boolean"].includes(typeof t))return!1}return!0};N();var de=(function(){function e(){this._propertySet=new Set,this._properties={}}return e.prototype.getUserProperties=function(){return w({},this._properties)},e.prototype.set=function(t,i){return this._safeSet(z.SET,t,i),this},e.prototype.setOnce=function(t,i){return this._safeSet(z.SET_ONCE,t,i),this},e.prototype.append=function(t,i){return this._safeSet(z.APPEND,t,i),this},e.prototype.prepend=function(t,i){return this._safeSet(z.PREPEND,t,i),this},e.prototype.postInsert=function(t,i){return this._safeSet(z.POSTINSERT,t,i),this},e.prototype.preInsert=function(t,i){return this._safeSet(z.PREINSERT,t,i),this},e.prototype.remove=function(t,i){return this._safeSet(z.REMOVE,t,i),this},e.prototype.add=function(t,i){return this._safeSet(z.ADD,t,i),this},e.prototype.unset=function(t){return this._safeSet(z.UNSET,t,Ot),this},e.prototype.clearAll=function(){return this._properties={},this._properties[z.CLEAR_ALL]=Ot,this},e.prototype._safeSet=function(t,i,r){if(this._validate(t,i,r)){var n=this._properties[t];return n===void 0&&(n={},this._properties[t]=n),n[i]=r,this._propertySet.add(i),!0}return!1},e.prototype._validate=function(t,i,r){return this._properties[z.CLEAR_ALL]!==void 0||this._propertySet.has(i)?!1:t===z.ADD?typeof r=="number":t!==z.UNSET&&t!==z.REMOVE?hi(i,r):!0},e})();N();var Wi=function(e,t,i){var r=typeof e=="string"?{event_type:e}:e;return w(w(w({},r),i),t&&{event_properties:t})},Ki=function(e,t){var i=w(w({},t),{event_type:_e.IDENTIFY,user_properties:e.getUserProperties()});return i},ji=function(e,t,i,r){var n,o=w(w({},r),{event_type:_e.GROUP_IDENTIFY,group_properties:i.getUserProperties(),groups:(n={},n[e]=t,n)});return o},zi=function(e,t,i){var r,n=new de;n.set(e,t);var o=w(w({},i),{event_type:_e.IDENTIFY,user_properties:n.getUserProperties(),groups:(r={},r[e]=t,r)});return o},Yi=function(e,t){return w(w({},t),{event_type:_e.REVENUE,event_properties:e.getEventProperties()})},Ce=function(e,t,i){return t===void 0&&(t=0),i===void 0&&(i=W.Unknown),{event:e,code:t,message:i}};N();var Qi=(function(){function e(t){this.client=t,this.queue=[],this.applying=!1,this.plugins=[]}return e.prototype.register=function(t,i){return E(this,void 0,void 0,function(){return _(this,function(r){switch(r.label){case 0:return[4,t.setup(i,this.client)];case 1:return r.sent(),this.plugins.push(t),[2]}})})},e.prototype.deregister=function(t){var i;return E(this,void 0,void 0,function(){var r,n;return _(this,function(o){switch(o.label){case 0:return r=this.plugins.findIndex(function(a){return a.name===t}),n=this.plugins[r],this.plugins.splice(r,1),[4,(i=n.teardown)===null||i===void 0?void 0:i.call(n)];case 1:return o.sent(),[2]}})})},e.prototype.reset=function(t){this.applying=!1;var i=this.plugins;i.map(function(r){var n;return(n=r.teardown)===null||n===void 0?void 0:n.call(r)}),this.plugins=[],this.client=t},e.prototype.push=function(t){var i=this;return new Promise(function(r){i.queue.push([t,r]),i.scheduleApply(0)})},e.prototype.scheduleApply=function(t){var i=this;this.applying||(this.applying=!0,setTimeout(function(){i.apply(i.queue.shift()).then(function(){i.applying=!1,i.queue.length>0&&i.scheduleApply(0)})},t))},e.prototype.apply=function(t){return E(this,void 0,void 0,function(){var i,r,n,o,a,c,l,h,s,f,p,g,u,h,s,v,d,m,I,y,b,S;return _(this,function(T){switch(T.label){case 0:if(!t)return[2];i=B(t,1),r=i[0],n=B(t,2),o=n[1],a=this.plugins.filter(function(O){return O.type===ie.BEFORE}),T.label=1;case 1:T.trys.push([1,6,7,8]),c=ve(a),l=c.next(),T.label=2;case 2:return l.done?[3,5]:(h=l.value,[4,h.execute(w({},r))]);case 3:if(s=T.sent(),s===null)return o({event:r,code:0,message:""}),[2];r=s,T.label=4;case 4:return l=c.next(),[3,2];case 5:return[3,8];case 6:return f=T.sent(),I={error:f},[3,8];case 7:try{l&&!l.done&&(y=c.return)&&y.call(c)}finally{if(I)throw I.error}return[7];case 8:p=this.plugins.filter(function(O){return O.type===ie.ENRICHMENT}),T.label=9;case 9:T.trys.push([9,14,15,16]),g=ve(p),u=g.next(),T.label=10;case 10:return u.done?[3,13]:(h=u.value,[4,h.execute(w({},r))]);case 11:if(s=T.sent(),s===null)return o({event:r,code:0,message:""}),[2];r=s,T.label=12;case 12:return u=g.next(),[3,10];case 13:return[3,16];case 14:return v=T.sent(),b={error:v},[3,16];case 15:try{u&&!u.done&&(S=g.return)&&S.call(g)}finally{if(b)throw b.error}return[7];case 16:return d=this.plugins.filter(function(O){return O.type===ie.DESTINATION}),m=d.map(function(O){var k=w({},r);return O.execute(k).catch(function(D){return Ce(k,0,String(D))})}),Promise.all(m).then(function(O){var k=B(O,1),D=k[0];o(D)}),[2]}})})},e.prototype.flush=function(){return E(this,void 0,void 0,function(){var t,i,r,n=this;return _(this,function(o){switch(o.label){case 0:return t=this.queue,this.queue=[],[4,Promise.all(t.map(function(a){return n.apply(a)}))];case 1:return o.sent(),i=this.plugins.filter(function(a){return a.type===ie.DESTINATION}),r=i.map(function(a){return a.flush&&a.flush()}),[4,Promise.all(r)];case 2:return o.sent(),[2]}})})},e})(),Hi="Event tracked successfully",Xi="Unexpected error occurred",Zi="Event rejected due to exceeded retry count",Ji="Event skipped due to optOut config",$i="Event rejected due to missing API key",er="Invalid API key",tr="Client not initialized",$=function(e){return{promise:e||Promise.resolve()}};N();var ir=(function(){function e(t){t===void 0&&(t="$default"),this.initializing=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new Qi(this),this.name=t}return e.prototype._init=function(t){return E(this,void 0,void 0,function(){return _(this,function(i){switch(i.label){case 0:return this.config=t,this.timeline.reset(this),[4,this.runQueuedFunctions("q")];case 1:return i.sent(),[2]}})})},e.prototype.runQueuedFunctions=function(t){return E(this,void 0,void 0,function(){var i,r,n,o,a,c,l;return _(this,function(f){switch(f.label){case 0:i=this[t],this[t]=[],f.label=1;case 1:f.trys.push([1,6,7,8]),r=ve(i),n=r.next(),f.label=2;case 2:return n.done?[3,5]:(o=n.value,[4,o()]);case 3:f.sent(),f.label=4;case 4:return n=r.next(),[3,2];case 5:return[3,8];case 6:return a=f.sent(),c={error:a},[3,8];case 7:try{n&&!n.done&&(l=r.return)&&l.call(r)}finally{if(c)throw c.error}return[7];case 8:return[2]}})})},e.prototype.track=function(t,i,r){var n=Wi(t,i,r);return $(this.dispatch(n))},e.prototype.identify=function(t,i){var r=Ki(t,i);return $(this.dispatch(r))},e.prototype.groupIdentify=function(t,i,r,n){var o=ji(t,i,r,n);return $(this.dispatch(o))},e.prototype.setGroup=function(t,i,r){var n=zi(t,i,r);return $(this.dispatch(n))},e.prototype.revenue=function(t,i){var r=Yi(t,i);return $(this.dispatch(r))},e.prototype.add=function(t){return this.config?$(this.timeline.register(t,this.config)):(this.q.push(this.add.bind(this,t)),$())},e.prototype.remove=function(t){return this.config?$(this.timeline.deregister(t)):(this.q.push(this.remove.bind(this,t)),$())},e.prototype.dispatchWithCallback=function(t,i){if(!this.config)return i(Ce(t,0,tr));this.process(t).then(i)},e.prototype.dispatch=function(t){return E(this,void 0,void 0,function(){var i=this;return _(this,function(r){return this.config?[2,this.process(t)]:[2,new Promise(function(n){i.dispatchQ.push(i.dispatchWithCallback.bind(i,t,n))})]})})},e.prototype.process=function(t){return E(this,void 0,void 0,function(){var n,i,r,n;return _(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.config.optOut?[2,Ce(t,0,Ji)]:[4,this.timeline.push(t)];case 1:return n=o.sent(),n.code===200?this.config.loggerProvider.log(n.message):this.config.loggerProvider.error(n.message),[2,n];case 2:return i=o.sent(),this.config.loggerProvider.error(i),r=String(i),n=Ce(t,0,r),[2,n];case 3:return[2]}})})},e.prototype.setOptOut=function(t){if(!this.config){this.q.push(this.setOptOut.bind(this,!!t));return}this.config.optOut=!!t},e.prototype.flush=function(){return $(this.timeline.flush())},e})();N();var rr=(function(){function e(){this.productId="",this.quantity=1,this.price=0}return e.prototype.setProductId=function(t){return this.productId=t,this},e.prototype.setQuantity=function(t){return t>0&&(this.quantity=t),this},e.prototype.setPrice=function(t){return this.price=t,this},e.prototype.setRevenueType=function(t){return this.revenueType=t,this},e.prototype.setRevenue=function(t){return this.revenue=t,this},e.prototype.setEventProperties=function(t){return vt(t)&&(this.properties=t),this},e.prototype.getEventProperties=function(){var t=this.properties?w({},this.properties):{};return t[ge.REVENUE_PRODUCT_ID]=this.productId,t[ge.REVENUE_QUANTITY]=this.quantity,t[ge.REVENUE_PRICE]=this.price,t[ge.REVENUE_TYPE]=this.revenueType,t[ge.REVENUE]=this.revenue,t},e})(),nr=function(e,t){var i=Math.max(t,1);return e.reduce(function(r,n,o){var a=Math.floor(o/i);return r[a]||(r[a]=[]),r[a].push(n),r},[])},Be="Amplitude Logger ",or=(function(){function e(){this.logLevel=ee.None}return e.prototype.disable=function(){this.logLevel=ee.None},e.prototype.enable=function(t){t===void 0&&(t=ee.Warn),this.logLevel=t},e.prototype.log=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.logLevel<ee.Verbose||console.log("".concat(Be,"[Log]: ").concat(t.join(" ")))},e.prototype.warn=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.logLevel<ee.Warn||console.warn("".concat(Be,"[Warn]: ").concat(t.join(" ")))},e.prototype.error=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.logLevel<ee.Error||console.error("".concat(Be,"[Error]: ").concat(t.join(" ")))},e.prototype.debug=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.logLevel<ee.Debug||console.log("".concat(Be,"[Debug]: ").concat(t.join(" ")))},e})(),Ke=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:ee.Warn,loggerProvider:new or,optOut:!1,serverUrl:fi,serverZone:Xe.US,useBatch:!1}},ar=(function(){function e(t){var i,r,n,o;this._optOut=!1;var a=Ke();this.apiKey=t.apiKey,this.flushIntervalMillis=(i=t.flushIntervalMillis)!==null&&i!==void 0?i:a.flushIntervalMillis,this.flushMaxRetries=t.flushMaxRetries||a.flushMaxRetries,this.flushQueueSize=t.flushQueueSize||a.flushQueueSize,this.instanceName=t.instanceName||a.instanceName,this.loggerProvider=t.loggerProvider||a.loggerProvider,this.logLevel=(r=t.logLevel)!==null&&r!==void 0?r:a.logLevel,this.minIdLength=t.minIdLength,this.plan=t.plan,this.ingestionMetadata=t.ingestionMetadata,this.optOut=(n=t.optOut)!==null&&n!==void 0?n:a.optOut,this.serverUrl=t.serverUrl,this.serverZone=t.serverZone||a.serverZone,this.storageProvider=t.storageProvider,this.transportProvider=t.transportProvider,this.useBatch=(o=t.useBatch)!==null&&o!==void 0?o:a.useBatch,this.loggerProvider.enable(this.logLevel);var c=pi(t.serverUrl,t.serverZone,t.useBatch);this.serverZone=c.serverZone,this.serverUrl=c.serverUrl}return Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(t){this._optOut=t},enumerable:!1,configurable:!0}),e})(),sr=function(e,t){return e===Xe.EU?t?Bi:Fi:t?qi:fi},pi=function(e,t,i){if(e===void 0&&(e=""),t===void 0&&(t=Ke().serverZone),i===void 0&&(i=Ke().useBatch),e)return{serverUrl:e,serverZone:void 0};var r=["US","EU"].includes(t)?t:Ke().serverZone;return{serverZone:r,serverUrl:sr(r,i)}};N();function ur(e){return e instanceof Error?e.message:String(e)}function Ge(e){var t="";try{"body"in e&&(t=JSON.stringify(e.body))}catch{}return t}var cr=(function(){function e(){this.name="amplitude",this.type=ie.DESTINATION,this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduled=null,this.queue=[]}return e.prototype.setup=function(t){var i;return E(this,void 0,void 0,function(){var r,n=this;return _(this,function(o){switch(o.label){case 0:return this.config=t,this.storageKey="".concat(Vi,"_").concat(this.config.apiKey.substring(0,10)),[4,(i=this.config.storageProvider)===null||i===void 0?void 0:i.get(this.storageKey)];case 1:return r=o.sent(),this.saveEvents(),r&&r.length>0&&Promise.all(r.map(function(a){return n.execute(a)})).catch(),[2,Promise.resolve(void 0)]}})})},e.prototype.execute=function(t){var i=this;return new Promise(function(r){var n={event:t,attempts:0,callback:function(o){return r(o)},timeout:0};i.addToQueue(n)})},e.prototype.addToQueue=function(){for(var t=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var n=i.filter(function(o){return o.attempts<t.config.flushMaxRetries?(o.attempts+=1,!0):(t.fulfillRequest([o],500,Zi),!1)});n.forEach(function(o){if(t.queue=t.queue.concat(o),o.timeout===0){t.schedule(t.config.flushIntervalMillis);return}setTimeout(function(){o.timeout=0,t.schedule(0)},o.timeout)}),this.saveEvents()},e.prototype.schedule=function(t){var i=this;this.scheduled||(this.scheduled=setTimeout(function(){i.flush(!0).then(function(){i.queue.length>0&&i.schedule(t)})},t))},e.prototype.flush=function(t){return t===void 0&&(t=!1),E(this,void 0,void 0,function(){var i,r,n,o=this;return _(this,function(a){switch(a.label){case 0:return i=[],r=[],this.queue.forEach(function(c){return c.timeout===0?i.push(c):r.push(c)}),this.queue=r,this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),n=nr(i,this.config.flushQueueSize),[4,Promise.all(n.map(function(c){return o.send(c,t)}))];case 1:return a.sent(),[2]}})})},e.prototype.send=function(t,i){return i===void 0&&(i=!0),E(this,void 0,void 0,function(){var r,n,o,a,c;return _(this,function(l){switch(l.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(t,400,$i)];r={api_key:this.config.apiKey,events:t.map(function(f){var p=f.event,g=p.extra,u=dt(p,["extra"]);return u}),options:{min_id_length:this.config.minIdLength}},l.label=1;case 1:return l.trys.push([1,3,,4]),n=pi(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(n,r)];case 2:return o=l.sent(),o===null?(this.fulfillRequest(t,0,Xi),[2]):i?(this.handleResponse(o,t),[3,4]):("body"in o?this.fulfillRequest(t,o.statusCode,"".concat(o.status,": ").concat(Ge(o))):this.fulfillRequest(t,o.statusCode,o.status),[2]);case 3:return a=l.sent(),this.config.loggerProvider.error(a),c=ur(a),this.fulfillRequest(t,0,c),[3,4];case 4:return[2]}})})},e.prototype.handleResponse=function(t,i){var r=t.status;switch(r){case W.Success:{this.handleSuccessResponse(t,i);break}case W.Invalid:{this.handleInvalidResponse(t,i);break}case W.PayloadTooLarge:{this.handlePayloadTooLargeResponse(t,i);break}case W.RateLimit:{this.handleRateLimitResponse(t,i);break}default:{this.config.loggerProvider.warn(`{code: 0, error: "Status '`.concat(r,"' provided for ").concat(i.length,' events"}')),this.handleOtherResponse(i);break}}},e.prototype.handleSuccessResponse=function(t,i){this.fulfillRequest(i,t.statusCode,Hi)},e.prototype.handleInvalidResponse=function(t,i){var r=this;if(t.body.missingField||t.body.error.startsWith(er)){this.fulfillRequest(i,t.statusCode,t.body.error);return}var n=oe(oe(oe(oe([],B(Object.values(t.body.eventsWithInvalidFields)),!1),B(Object.values(t.body.eventsWithMissingFields)),!1),B(Object.values(t.body.eventsWithInvalidIdLengths)),!1),B(t.body.silencedEvents),!1).flat(),o=new Set(n),a=i.filter(function(c,l){if(o.has(l)){r.fulfillRequest([c],t.statusCode,t.body.error);return}return!0});a.length>0&&this.config.loggerProvider.warn(Ge(t)),this.addToQueue.apply(this,oe([],B(a),!1))},e.prototype.handlePayloadTooLargeResponse=function(t,i){if(i.length===1){this.fulfillRequest(i,t.statusCode,t.body.error);return}this.config.loggerProvider.warn(Ge(t)),this.config.flushQueueSize/=2,this.addToQueue.apply(this,oe([],B(i),!1))},e.prototype.handleRateLimitResponse=function(t,i){var r=this,n=Object.keys(t.body.exceededDailyQuotaUsers),o=Object.keys(t.body.exceededDailyQuotaDevices),a=t.body.throttledEvents,c=new Set(n),l=new Set(o),f=new Set(a),p=i.filter(function(g,u){if(g.event.user_id&&c.has(g.event.user_id)||g.event.device_id&&l.has(g.event.device_id)){r.fulfillRequest([g],t.statusCode,t.body.error);return}return f.has(u)&&(g.timeout=r.throttleTimeout),!0});p.length>0&&this.config.loggerProvider.warn(Ge(t)),this.addToQueue.apply(this,oe([],B(p),!1))},e.prototype.handleOtherResponse=function(t){var i=this;this.addToQueue.apply(this,oe([],B(t.map(function(r){return r.timeout=r.attempts*i.retryTimeout,r})),!1))},e.prototype.fulfillRequest=function(t,i,r){this.saveEvents(),t.forEach(function(n){return n.callback(Ce(n.event,i,r))})},e.prototype.saveEvents=function(){if(this.config.storageProvider){var t=Array.from(this.queue.map(function(i){return i.event}));this.config.storageProvider.set(this.storageKey,t)}},e})();N();var lr=function(e){e===void 0&&(e=0);var t=new Error().stack||"";return t.split(`
`).slice(2+e).map(function(i){return i.trim()})},V=function(e){return function(){var t=w({},e.config),i=t.loggerProvider,r=t.logLevel;return{logger:i,logLevel:r}}},dr=function(e,t){var i,r;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");try{for(var n=ve(t.split(".")),o=n.next();!o.done;o=n.next()){var a=o.value;if(a in e)e=e[a];else return}}catch(c){i={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return e},F=function(e,t){return function(){var i,r,n={};try{for(var o=ve(t),a=o.next();!a.done;a=o.next()){var c=a.value;n[c]=dr(e,c)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return n}},q=function(e,t,i,r,n){return n===void 0&&(n=null),function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var c=i(),l=c.logger,f=c.logLevel;if(f&&f<ee.Debug||!f||!l)return e.apply(n,o);var p={type:"invoke public method",name:t,args:o,stacktrace:lr(1),time:{start:new Date().toISOString()},states:{}};r&&p.states&&(p.states.before=r());var g=e.apply(n,o);return g&&g.promise?g.promise.then(function(){r&&p.states&&(p.states.after=r()),p.time&&(p.time.end=new Date().toISOString()),l.debug(JSON.stringify(p,null,2))}):(r&&p.states&&(p.states.after=r()),p.time&&(p.time.end=new Date().toISOString()),l.debug(JSON.stringify(p,null,2))),g}},tt=function(e){return e?(e^Math.random()*16>>e/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,tt)};N();var gi=(function(){function e(){this.memoryStorage=new Map}return e.prototype.isEnabled=function(){return E(this,void 0,void 0,function(){return _(this,function(t){return[2,!0]})})},e.prototype.get=function(t){return E(this,void 0,void 0,function(){return _(this,function(i){return[2,this.memoryStorage.get(t)]})})},e.prototype.getRaw=function(t){return E(this,void 0,void 0,function(){var i;return _(this,function(r){switch(r.label){case 0:return[4,this.get(t)];case 1:return i=r.sent(),[2,i?JSON.stringify(i):void 0]}})})},e.prototype.set=function(t,i){return E(this,void 0,void 0,function(){return _(this,function(r){return this.memoryStorage.set(t,i),[2]})})},e.prototype.remove=function(t){return E(this,void 0,void 0,function(){return _(this,function(i){return this.memoryStorage.delete(t),[2]})})},e.prototype.reset=function(){return E(this,void 0,void 0,function(){return _(this,function(t){return this.memoryStorage.clear(),[2]})})},e})(),yi=(function(){function e(){}return e.prototype.send=function(t,i){return Promise.resolve(null)},e.prototype.buildResponse=function(t){var i,r,n,o,a,c,l,f,p,g,u,h,s,v,d,m,I,y,b,S,T,O;if(typeof t!="object")return null;var k=t.code||0,D=this.buildStatus(k);switch(D){case W.Success:return{status:D,statusCode:k,body:{eventsIngested:(i=t.events_ingested)!==null&&i!==void 0?i:0,payloadSizeBytes:(r=t.payload_size_bytes)!==null&&r!==void 0?r:0,serverUploadTime:(n=t.server_upload_time)!==null&&n!==void 0?n:0}};case W.Invalid:return{status:D,statusCode:k,body:{error:(o=t.error)!==null&&o!==void 0?o:"",missingField:(a=t.missing_field)!==null&&a!==void 0?a:"",eventsWithInvalidFields:(c=t.events_with_invalid_fields)!==null&&c!==void 0?c:{},eventsWithMissingFields:(l=t.events_with_missing_fields)!==null&&l!==void 0?l:{},eventsWithInvalidIdLengths:(f=t.events_with_invalid_id_lengths)!==null&&f!==void 0?f:{},epsThreshold:(p=t.eps_threshold)!==null&&p!==void 0?p:0,exceededDailyQuotaDevices:(g=t.exceeded_daily_quota_devices)!==null&&g!==void 0?g:{},silencedDevices:(u=t.silenced_devices)!==null&&u!==void 0?u:[],silencedEvents:(h=t.silenced_events)!==null&&h!==void 0?h:[],throttledDevices:(s=t.throttled_devices)!==null&&s!==void 0?s:{},throttledEvents:(v=t.throttled_events)!==null&&v!==void 0?v:[]}};case W.PayloadTooLarge:return{status:D,statusCode:k,body:{error:(d=t.error)!==null&&d!==void 0?d:""}};case W.RateLimit:return{status:D,statusCode:k,body:{error:(m=t.error)!==null&&m!==void 0?m:"",epsThreshold:(I=t.eps_threshold)!==null&&I!==void 0?I:0,throttledDevices:(y=t.throttled_devices)!==null&&y!==void 0?y:{},throttledUsers:(b=t.throttled_users)!==null&&b!==void 0?b:{},exceededDailyQuotaDevices:(S=t.exceeded_daily_quota_devices)!==null&&S!==void 0?S:{},exceededDailyQuotaUsers:(T=t.exceeded_daily_quota_users)!==null&&T!==void 0?T:{},throttledEvents:(O=t.throttled_events)!==null&&O!==void 0?O:[]}};case W.Timeout:default:return{status:D,statusCode:k}}},e.prototype.buildStatus=function(t){return t>=200&&t<300?W.Success:t===429?W.RateLimit:t===413?W.PayloadTooLarge:t===408?W.Timeout:t>=400&&t<500?W.Invalid:t>=500?W.Failed:W.Unknown},e})();vi();var vr=(function(){function e(){}return e.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:fr(),platform:"Web",os:void 0,deviceModel:void 0}},e})(),fr=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},hr=(function(){function e(){this.queue=[]}return e.prototype.logEvent=function(t){this.receiver?this.receiver(t):this.queue.length<512&&this.queue.push(t)},e.prototype.setEventReceiver=function(t){this.receiver=t,this.queue.length>0&&(this.queue.forEach(function(i){t(i)}),this.queue=[])},e})(),le=function(){return le=Object.assign||function(t){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},le.apply(this,arguments)};function je(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ct(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(c){a={error:c}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return o}var ze=function(e,t){var i,r,n=["string","number","boolean","undefined"],o=typeof e,a=typeof t;if(o!==a)return!1;try{for(var c=je(n),l=c.next();!l.done;l=c.next()){var f=l.value;if(f===o)return e===t}}catch(d){i={error:d}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(i)throw i.error}}if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;var p=Array.isArray(e),g=Array.isArray(t);if(p!==g)return!1;if(p&&g){for(var u=0;u<e.length;u++)if(!ze(e[u],t[u]))return!1}else{var h=Object.keys(e).sort(),s=Object.keys(t).sort();if(!ze(h,s))return!1;var v=!0;return Object.keys(e).forEach(function(d){ze(e[d],t[d])||(v=!1)}),v}return!0},pr="$set",gr="$unset",yr="$clearAll";Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),i=t.length,r=new Array(i);i--;)r[i]=[t[i],e[t[i]]];return r});var mr=(function(){function e(){this.identity={userProperties:{}},this.listeners=new Set}return e.prototype.editIdentity=function(){var t=this,i=le({},this.identity.userProperties),r=le(le({},this.identity),{userProperties:i});return{setUserId:function(n){return r.userId=n,this},setDeviceId:function(n){return r.deviceId=n,this},setUserProperties:function(n){return r.userProperties=n,this},setOptOut:function(n){return r.optOut=n,this},updateUserProperties:function(n){var o,a,c,l,f,p,g=r.userProperties||{};try{for(var u=je(Object.entries(n)),h=u.next();!h.done;h=u.next()){var s=Ct(h.value,2),v=s[0],d=s[1];switch(v){case pr:try{for(var m=(c=void 0,je(Object.entries(d))),I=m.next();!I.done;I=m.next()){var y=Ct(I.value,2),b=y[0],S=y[1];g[b]=S}}catch(k){c={error:k}}finally{try{I&&!I.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}break;case gr:try{for(var T=(f=void 0,je(Object.keys(d))),O=T.next();!O.done;O=T.next()){var b=O.value;delete g[b]}}catch(k){f={error:k}}finally{try{O&&!O.done&&(p=T.return)&&p.call(T)}finally{if(f)throw f.error}}break;case yr:g={};break}}}catch(k){o={error:k}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return r.userProperties=g,this},commit:function(){return t.setIdentity(r),this}}},e.prototype.getIdentity=function(){return le({},this.identity)},e.prototype.setIdentity=function(t){var i=le({},this.identity);this.identity=le({},t),ze(i,this.identity)||this.listeners.forEach(function(r){r(t)})},e.prototype.addIdentityListener=function(t){this.listeners.add(t)},e.prototype.removeIdentityListener=function(t){this.listeners.delete(t)},e})(),ke=typeof globalThis<"u"?globalThis:typeof He<"u"?He:self,br=(function(){function e(){this.identityStore=new mr,this.eventBridge=new hr,this.applicationContextProvider=new vr}return e.getInstance=function(t){return ke.analyticsConnectorInstances||(ke.analyticsConnectorInstances={}),ke.analyticsConnectorInstances[t]||(ke.analyticsConnectorInstances[t]=new e),ke.analyticsConnectorInstances[t]},e})(),Ue=function(e){return e===void 0&&(e="$default_instance"),br.getInstance(e)},Er=function(e,t){Ue(t).identityStore.editIdentity().setUserId(e).commit()},_r=function(e,t){Ue(t).identityStore.editIdentity().setDeviceId(e).commit()};vi();var te=function(){if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof He<"u")return He},ft=function(){var e,t=te();if(!(!((e=t==null?void 0:t.location)===null||e===void 0)&&e.search))return{};var i=t.location.search.substring(1).split("&").filter(Boolean),r=i.reduce(function(n,o){var a=o.split("=",2),c=Ut(a[0]),l=Ut(a[1]);return l&&(n[c]=l),n},{});return r},Ut=function(e){e===void 0&&(e="");try{return decodeURIComponent(e)}catch{return""}},wr="utm_campaign",Ir="utm_content",Tr="utm_id",Sr="utm_medium",Rr="utm_source",Ar="utm_term",Nt="dclid",Dt="fbclid",xt="gbraid",Lt="gclid",Mt="ko_click_id",Vt="li_fat_id",Ft="msclkid",qt="rtd_cid",Bt="ttclid",Gt="twclid",Wt="wbraid",wt={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0};N();var mi=(function(){function e(){}return e.prototype.parse=function(){return E(this,void 0,void 0,function(){return _(this,function(t){return[2,w(w(w(w({},wt),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},e.prototype.getUtmParam=function(){var t=ft(),i=t[wr],r=t[Ir],n=t[Tr],o=t[Sr],a=t[Rr],c=t[Ar];return{utm_campaign:i,utm_content:r,utm_id:n,utm_medium:o,utm_source:a,utm_term:c}},e.prototype.getReferrer=function(){var t,i,r={referrer:void 0,referring_domain:void 0};try{r.referrer=document.referrer||void 0,r.referring_domain=(i=(t=r.referrer)===null||t===void 0?void 0:t.split("/")[2])!==null&&i!==void 0?i:void 0}catch{}return r},e.prototype.getClickIds=function(){var t,i=ft();return t={},t[Nt]=i[Nt],t[Dt]=i[Dt],t[xt]=i[xt],t[Lt]=i[Lt],t[Mt]=i[Mt],t[Vt]=i[Vt],t[Ft]=i[Ft],t[qt]=i[qt],t[Bt]=i[Bt],t[Gt]=i[Gt],t[Wt]=i[Wt],t},e})(),ht;(function(e){e.BEFORE="before",e.ENRICHMENT="enrichment",e.DESTINATION="destination"})(ht||(ht={}));var Q;(function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.PayloadTooLarge="payload_too_large",e.Invalid="invalid",e.Failed="failed",e.Timeout="Timeout",e.SystemError="SystemError"})(Q||(Q={}));var It="AMP",jn="".concat(It,"_unsent"),kr=(function(){function e(){}return e.prototype.send=function(t,i){return Promise.resolve(null)},e.prototype.buildResponse=function(t){var i,r,n,o,a,c,l,f,p,g,u,h,s,v,d,m,I,y,b,S,T,O;if(typeof t!="object")return null;var k=t.code||0,D=this.buildStatus(k);switch(D){case Q.Success:return{status:D,statusCode:k,body:{eventsIngested:(i=t.events_ingested)!==null&&i!==void 0?i:0,payloadSizeBytes:(r=t.payload_size_bytes)!==null&&r!==void 0?r:0,serverUploadTime:(n=t.server_upload_time)!==null&&n!==void 0?n:0}};case Q.Invalid:return{status:D,statusCode:k,body:{error:(o=t.error)!==null&&o!==void 0?o:"",missingField:(a=t.missing_field)!==null&&a!==void 0?a:"",eventsWithInvalidFields:(c=t.events_with_invalid_fields)!==null&&c!==void 0?c:{},eventsWithMissingFields:(l=t.events_with_missing_fields)!==null&&l!==void 0?l:{},eventsWithInvalidIdLengths:(f=t.events_with_invalid_id_lengths)!==null&&f!==void 0?f:{},epsThreshold:(p=t.eps_threshold)!==null&&p!==void 0?p:0,exceededDailyQuotaDevices:(g=t.exceeded_daily_quota_devices)!==null&&g!==void 0?g:{},silencedDevices:(u=t.silenced_devices)!==null&&u!==void 0?u:[],silencedEvents:(h=t.silenced_events)!==null&&h!==void 0?h:[],throttledDevices:(s=t.throttled_devices)!==null&&s!==void 0?s:{},throttledEvents:(v=t.throttled_events)!==null&&v!==void 0?v:[]}};case Q.PayloadTooLarge:return{status:D,statusCode:k,body:{error:(d=t.error)!==null&&d!==void 0?d:""}};case Q.RateLimit:return{status:D,statusCode:k,body:{error:(m=t.error)!==null&&m!==void 0?m:"",epsThreshold:(I=t.eps_threshold)!==null&&I!==void 0?I:0,throttledDevices:(y=t.throttled_devices)!==null&&y!==void 0?y:{},throttledUsers:(b=t.throttled_users)!==null&&b!==void 0?b:{},exceededDailyQuotaDevices:(S=t.exceeded_daily_quota_devices)!==null&&S!==void 0?S:{},exceededDailyQuotaUsers:(T=t.exceeded_daily_quota_users)!==null&&T!==void 0?T:{},throttledEvents:(O=t.throttled_events)!==null&&O!==void 0?O:[]}};case Q.Timeout:default:return{status:D,statusCode:k}}},e.prototype.buildStatus=function(t){return t>=200&&t<300?Q.Success:t===429?Q.RateLimit:t===413?Q.PayloadTooLarge:t===408?Q.Timeout:t>=400&&t<500?Q.Invalid:t>=500?Q.Failed:Q.Unknown},e})(),bi=function(e,t,i){return t===void 0&&(t=""),i===void 0&&(i=10),[It,t,e.substring(0,i)].filter(Boolean).join("_")},Pr=function(e){return"".concat(It.toLowerCase(),"_").concat(e.substring(0,6))},Or=function(e){return typeof e=="boolean"?e:!!(e!=null&&e.fileDownloads)},Cr=function(e){return typeof e=="boolean"?e:!!(e!=null&&e.formInteractions)},Ur=function(e){return typeof e=="boolean"?e:!!((e==null?void 0:e.pageViews)===!0||e!=null&&e.pageViews&&typeof e.pageViews=="object")},Nr=function(e){return typeof e=="boolean"?e:!!(e!=null&&e.sessions)},Dr=function(e){var t,i=!((t=e.attribution)===null||t===void 0)&&t.trackPageViews?"attribution":function(){return!1},r=void 0,n="Page View",o=Ur(e.defaultTracking);return o&&(i=void 0,n=void 0,e.defaultTracking&&typeof e.defaultTracking=="object"&&e.defaultTracking.pageViews&&typeof e.defaultTracking.pageViews=="object"&&("trackOn"in e.defaultTracking.pageViews&&(i=e.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in e.defaultTracking.pageViews&&(r=e.defaultTracking.pageViews.trackHistoryChanges),"eventType"in e.defaultTracking.pageViews&&e.defaultTracking.pageViews.eventType&&(n=e.defaultTracking.pageViews.eventType))),{trackOn:i,trackHistoryChanges:r,eventType:n}},xr=function(){var e,t,i,r;if(typeof navigator>"u")return"";var n=navigator.userLanguage;return(r=(i=(t=(e=navigator.languages)===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:navigator.language)!==null&&i!==void 0?i:n)!==null&&r!==void 0?r:""};N();var Lr=(function(){function e(){this.name="identity",this.type=ht.BEFORE,this.identityStore=Ue().identityStore}return e.prototype.execute=function(t){return E(this,void 0,void 0,function(){var i;return _(this,function(r){return i=t.user_properties,i&&this.identityStore.editIdentity().updateUserProperties(i).commit(),[2,t]})})},e.prototype.setup=function(t){return E(this,void 0,void 0,function(){return _(this,function(i){return t.instanceName&&(this.identityStore=Ue(t.instanceName).identityStore),[2]})})},e})();N();var pt=(function(){function e(t){this.options=w({},t)}return e.prototype.isEnabled=function(){return E(this,void 0,void 0,function(){var t,i,r,n;return _(this,function(o){switch(o.label){case 0:if(!te())return[2,!1];e.testValue=String(Date.now()),t=new e(this.options),i="AMP_TEST",o.label=1;case 1:return o.trys.push([1,4,5,7]),[4,t.set(i,e.testValue)];case 2:return o.sent(),[4,t.get(i)];case 3:return r=o.sent(),[2,r===e.testValue];case 4:return n=o.sent(),[2,!1];case 5:return[4,t.remove(i)];case 6:return o.sent(),[7];case 7:return[2]}})})},e.prototype.get=function(t){return E(this,void 0,void 0,function(){var i;return _(this,function(r){switch(r.label){case 0:return[4,this.getRaw(t)];case 1:if(i=r.sent(),!i)return[2,void 0];try{try{i=decodeURIComponent(atob(i))}catch{}return[2,JSON.parse(i)]}catch{return[2,void 0]}return[2]}})})},e.prototype.getRaw=function(t){var i;return E(this,void 0,void 0,function(){var r,n,o;return _(this,function(a){return r=te(),n=(i=r==null?void 0:r.document.cookie.split("; "))!==null&&i!==void 0?i:[],o=n.find(function(c){return c.indexOf(t+"=")===0}),o?[2,o.substring(t.length+1)]:[2,void 0]})})},e.prototype.set=function(t,i){var r;return E(this,void 0,void 0,function(){var n,o,a,c,l,f;return _(this,function(p){try{n=(r=this.options.expirationDays)!==null&&r!==void 0?r:0,o=i!==null?n:-1,a=void 0,o&&(c=new Date,c.setTime(c.getTime()+o*24*60*60*1e3),a=c),l="".concat(t,"=").concat(btoa(encodeURIComponent(JSON.stringify(i)))),a&&(l+="; expires=".concat(a.toUTCString())),l+="; path=/",this.options.domain&&(l+="; domain=".concat(this.options.domain)),this.options.secure&&(l+="; Secure"),this.options.sameSite&&(l+="; SameSite=".concat(this.options.sameSite)),f=te(),f&&(f.document.cookie=l)}catch{}return[2]})})},e.prototype.remove=function(t){return E(this,void 0,void 0,function(){return _(this,function(i){switch(i.label){case 0:return[4,this.set(t,null)];case 1:return i.sent(),[2]}})})},e.prototype.reset=function(){return E(this,void 0,void 0,function(){return _(this,function(t){return[2]})})},e})();N();var Mr=(function(e){Ne(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.send=function(i,r){return E(this,void 0,void 0,function(){var n,o,a;return _(this,function(c){switch(c.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return n={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(r),method:"POST"},[4,fetch(i,n)];case 1:return o=c.sent(),[4,o.text()];case 2:a=c.sent();try{return[2,this.buildResponse(JSON.parse(a))]}catch{return[2,this.buildResponse({code:o.status})]}return[2]}})})},t})(kr),nt=function(e,t){for(var i=0;i<t.length;i++){var r=t[i],n=r.name,o=r.args,a=r.resolve,c=e&&e[n];if(typeof c=="function"){var l=c.apply(e,o);typeof a=="function"&&a(l==null?void 0:l.promise)}}return e},ot=function(e){var t=e;return t&&t._q!==void 0},Vr=Ni({"../../node_modules/@amplitude/ua-parser-js/src/ua-parser.js"(e,t){(function(i,r){"use strict";var n="0.7.31",o="",a="?",c="function",l="undefined",f="object",p="string",g="major",u="model",h="name",s="type",v="vendor",d="version",m="architecture",I="console",y="mobile",b="tablet",S="smarttv",T="wearable",O="embedded",k=275,D="Amazon",K="Apple",re="ASUS",C="BlackBerry",J="Browser",se="Chrome",xe="Edge",fe="Firefox",he="Google",we="Huawei",ye="LG",me="Microsoft",be="Motorola",ce="Opera",pe="Samsung",ue="Sony",Le="Xiaomi",x="Zebra",Ie="Facebook",Oi=function(R,U){var A={};for(var M in R)U[M]&&U[M].length%2===0?A[M]=U[M].concat(R[M]):A[M]=R[M];return A},Me=function(R){for(var U={},A=0;A<R.length;A++)U[R[A].toUpperCase()]=R[A];return U},St=function(R,U){return typeof R===p?Te(U).indexOf(Te(R))!==-1:!1},Te=function(R){return R.toLowerCase()},Ci=function(R){return typeof R===p?R.replace(/[^\d\.]/g,o).split(".")[0]:r},it=function(R,U){if(typeof R===p)return R=R.replace(/^\s\s*/,o).replace(/\s\s*$/,o),typeof U===l?R:R.substring(0,k)},Se=function(R,U){for(var A=0,M,P,Fe,L,Re,ne;A<U.length&&!Re;){var kt=U[A],Pt=U[A+1];for(M=P=0;M<kt.length&&!Re;)if(Re=kt[M++].exec(R),Re)for(Fe=0;Fe<Pt.length;Fe++)ne=Re[++P],L=Pt[Fe],typeof L===f&&L.length>0?L.length===2?typeof L[1]==c?this[L[0]]=L[1].call(this,ne):this[L[0]]=L[1]:L.length===3?typeof L[1]===c&&!(L[1].exec&&L[1].test)?this[L[0]]=ne?L[1].call(this,ne,L[2]):r:this[L[0]]=ne?ne.replace(L[1],L[2]):r:L.length===4&&(this[L[0]]=ne?L[3].call(this,ne.replace(L[1],L[2])):r):this[L]=ne||r;A+=2}},rt=function(R,U){for(var A in U)if(typeof U[A]===f&&U[A].length>0){for(var M=0;M<U[A].length;M++)if(St(U[A][M],R))return A===a?r:A}else if(St(U[A],R))return A===a?r:A;return R},Ui={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Rt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},At={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[d,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[d,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,d],[/opios[\/ ]+([\w\.]+)/i],[d,[h,ce+" Mini"]],[/\bopr\/([\w\.]+)/i],[d,[h,ce]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[h,d],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[d,[h,"UC"+J]],[/\bqbcore\/([\w\.]+)/i],[d,[h,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[d,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[d,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[d,[h,"IE"]],[/yabrowser\/([\w\.]+)/i],[d,[h,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+J],d],[/\bfocus\/([\w\.]+)/i],[d,[h,fe+" Focus"]],[/\bopt\/([\w\.]+)/i],[d,[h,ce+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[d,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[d,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[d,[h,ce+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[d,[h,"MIUI "+J]],[/fxios\/([-\w\.]+)/i],[d,[h,fe]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+J]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+J],d],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],d],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[h,d],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,Ie],d],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[h,d],[/\bgsa\/([\w\.]+) .*safari\//i],[d,[h,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[d,[h,se+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,se+" WebView"],d],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[d,[h,"Android "+J]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,d],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[d,[h,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[d,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[d,rt,Ui]],[/(webkit|khtml)\/([\w\.]+)/i],[h,d],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],d],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[d,[h,fe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,d]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,Te]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,o,Te]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,Te]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[v,pe],[s,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[v,pe],[s,y]],[/((ipod|iphone)\d+,\d+)/i],[u,[v,K],[s,y]],[/(ipad\d+,\d+)/i],[u,[v,K],[s,b]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[v,K],[s,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[v,K],[s,b]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[v,we],[s,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[v,we],[s,y]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[v,Le],[s,y]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[v,Le],[s,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[v,"OPPO"],[s,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[v,"Vivo"],[s,y]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[v,"Realme"],[s,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[v,be],[s,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[v,be],[s,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[v,ye],[s,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[v,ye],[s,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[v,"Lenovo"],[s,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[v,"Nokia"],[s,y]],[/(pixel c)\b/i],[u,[v,he],[s,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[v,he],[s,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[v,ue],[s,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[v,ue],[s,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[v,"OnePlus"],[s,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[v,D],[s,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[v,D],[s,y]],[/(playbook);[-\w\),; ]+(rim)/i],[u,v,[s,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[v,C],[s,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[v,re],[s,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[v,re],[s,y]],[/(nexus 9)/i],[u,[v,"HTC"],[s,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[v,[u,/_/g," "],[s,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[v,"Acer"],[s,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[v,"Meizu"],[s,y]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[v,"Sharp"],[s,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[v,u,[s,y]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[v,u,[s,b]],[/(surface duo)/i],[u,[v,me],[s,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[v,"Fairphone"],[s,y]],[/(u304aa)/i],[u,[v,"AT&T"],[s,y]],[/\bsie-(\w*)/i],[u,[v,"Siemens"],[s,y]],[/\b(rct\w+) b/i],[u,[v,"RCA"],[s,b]],[/\b(venue[\d ]{2,7}) b/i],[u,[v,"Dell"],[s,b]],[/\b(q(?:mv|ta)\w+) b/i],[u,[v,"Verizon"],[s,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[v,"Barnes & Noble"],[s,b]],[/\b(tm\d{3}\w+) b/i],[u,[v,"NuVision"],[s,b]],[/\b(k88) b/i],[u,[v,"ZTE"],[s,b]],[/\b(nx\d{3}j) b/i],[u,[v,"ZTE"],[s,y]],[/\b(gen\d{3}) b.+49h/i],[u,[v,"Swiss"],[s,y]],[/\b(zur\d{3}) b/i],[u,[v,"Swiss"],[s,b]],[/\b((zeki)?tb.*\b) b/i],[u,[v,"Zeki"],[s,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[v,"Dragon Touch"],u,[s,b]],[/\b(ns-?\w{0,9}) b/i],[u,[v,"Insignia"],[s,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[v,"NextBook"],[s,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[v,"Voice"],u,[s,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[v,"LvTel"],u,[s,y]],[/\b(ph-1) /i],[u,[v,"Essential"],[s,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[v,"Envizen"],[s,b]],[/\b(trio[-\w\. ]+) b/i],[u,[v,"MachSpeed"],[s,b]],[/\btu_(1491) b/i],[u,[v,"Rotor"],[s,b]],[/(shield[\w ]+) b/i],[u,[v,"Nvidia"],[s,b]],[/(sprint) (\w+)/i],[v,u,[s,y]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[v,me],[s,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[v,x],[s,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[v,x],[s,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[v,u,[s,I]],[/droid.+; (shield) bui/i],[u,[v,"Nvidia"],[s,I]],[/(playstation [345portablevi]+)/i],[u,[v,ue],[s,I]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[v,me],[s,I]],[/smart-tv.+(samsung)/i],[v,[s,S]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[v,pe],[s,S]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[v,ye],[s,S]],[/(apple) ?tv/i],[v,[u,K+" TV"],[s,S]],[/crkey/i],[[u,se+"cast"],[v,he],[s,S]],[/droid.+aft(\w)( bui|\))/i],[u,[v,D],[s,S]],[/\(dtv[\);].+(aquos)/i],[u,[v,"Sharp"],[s,S]],[/(bravia[\w- ]+) bui/i],[u,[v,ue],[s,S]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[v,it],[u,it],[s,S]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[s,S]],[/((pebble))app/i],[v,u,[s,T]],[/droid.+; (glass) \d/i],[u,[v,he],[s,T]],[/droid.+; (wt63?0{2,3})\)/i],[u,[v,x],[s,T]],[/(quest( 2)?)/i],[u,[v,Ie],[s,T]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[v,[s,O]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[s,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[s,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[s,b]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[s,y]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[v,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[d,[h,xe+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[d,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[h,d],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[d,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,d],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[h,[d,rt,Rt]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[h,"Windows"],[d,rt,Rt]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[d,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,"Mac OS"],[d,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[d,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,d],[/\(bb(10);/i],[d,[h,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[d,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[d,[h,fe+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[d,[h,"webOS"]],[/crkey\/([\d\.]+)/i],[d,[h,se+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[h,"Chromium OS"],d],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,d],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],d],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[h,d]]},H=function(R,U){if(typeof R===f&&(U=R,R=r),!(this instanceof H))return new H(R,U).getResult();var A=R||(typeof i!==l&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:o),M=U?Oi(At,U):At;return this.getBrowser=function(){var P={};return P[h]=r,P[d]=r,Se.call(P,A,M.browser),P.major=Ci(P.version),P},this.getCPU=function(){var P={};return P[m]=r,Se.call(P,A,M.cpu),P},this.getDevice=function(){var P={};return P[v]=r,P[u]=r,P[s]=r,Se.call(P,A,M.device),P},this.getEngine=function(){var P={};return P[h]=r,P[d]=r,Se.call(P,A,M.engine),P},this.getOS=function(){var P={};return P[h]=r,P[d]=r,Se.call(P,A,M.os),P},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return A},this.setUA=function(P){return A=typeof P===p&&P.length>k?it(P,k):P,this},this.setUA(A),this};H.VERSION=n,H.BROWSER=Me([h,d,g]),H.CPU=Me([m]),H.DEVICE=Me([u,v,s,I,y,S,b,T,O]),H.ENGINE=H.OS=Me([h,d]),typeof e!==l?(typeof t!==l&&t.exports&&(e=t.exports=H),e.UAParser=H):typeof define===c&&define.amd?define(function(){return H}):typeof i!==l&&(i.UAParser=H);var Ee=typeof i!==l&&(i.jQuery||i.Zepto);if(Ee&&!Ee.ua){var Ve=new H;Ee.ua=Ve.getResult(),Ee.ua.get=function(){return Ve.getUA()},Ee.ua.set=function(R){Ve.setUA(R);var U=Ve.getResult();for(var A in U)Ee.ua[A]=U[A]}}})(typeof window=="object"?window:void 0)}}),Fr="1.12.1";N();var qr=Et(Vr()),Br="Web",Gr="$remote",Wr=(function(){function e(){this.name="context",this.type=ie.BEFORE,this.library="amplitude-ts/".concat(Fr),typeof navigator<"u"&&(this.userAgent=navigator.userAgent),this.uaResult=new qr.default(this.userAgent).getResult()}return e.prototype.setup=function(t){return this.config=t,Promise.resolve(void 0)},e.prototype.execute=function(t){var i,r;return E(this,void 0,void 0,function(){var n,o,a,c,l,f,p,g;return _(this,function(u){return n=new Date().getTime(),o=this.uaResult.browser.name,a=this.uaResult.browser.version,c=this.uaResult.device.model||this.uaResult.os.name,l=this.uaResult.device.vendor,f=(i=this.config.lastEventId)!==null&&i!==void 0?i:-1,p=(r=t.event_id)!==null&&r!==void 0?r:f+1,this.config.lastEventId=p,t.time||(this.config.lastEventTime=n),g=w(w(w(w(w(w(w(w(w(w(w(w({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:n},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:Br}),this.config.trackingOptions.osName&&{os_name:o}),this.config.trackingOptions.osVersion&&{os_version:a}),this.config.trackingOptions.deviceManufacturer&&{device_manufacturer:l}),this.config.trackingOptions.deviceModel&&{device_model:c}),this.config.trackingOptions.language&&{language:xr()}),this.config.trackingOptions.ipAddress&&{ip:Gr}),{insert_id:tt(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),t),{event_id:p,library:this.library,user_agent:this.userAgent}),[2,g]})})},e})();N();var Ei=(function(){function e(){}return e.prototype.isEnabled=function(){return E(this,void 0,void 0,function(){var t,i,r,n,o;return _(this,function(a){switch(a.label){case 0:if(!te())return[2,!1];t=String(Date.now()),i=new e,r="AMP_TEST",a.label=1;case 1:return a.trys.push([1,4,5,7]),[4,i.set(r,t)];case 2:return a.sent(),[4,i.get(r)];case 3:return n=a.sent(),[2,n===t];case 4:return o=a.sent(),[2,!1];case 5:return[4,i.remove(r)];case 6:return a.sent(),[7];case 7:return[2]}})})},e.prototype.get=function(t){return E(this,void 0,void 0,function(){var i,r;return _(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.getRaw(t)];case 1:return i=n.sent(),i?[2,JSON.parse(i)]:[2,void 0];case 2:return r=n.sent(),[2,void 0];case 3:return[2]}})})},e.prototype.getRaw=function(t){var i;return E(this,void 0,void 0,function(){return _(this,function(r){return[2,((i=te())===null||i===void 0?void 0:i.localStorage.getItem(t))||void 0]})})},e.prototype.set=function(t,i){var r;return E(this,void 0,void 0,function(){return _(this,function(n){try{(r=te())===null||r===void 0||r.localStorage.setItem(t,JSON.stringify(i))}catch{}return[2]})})},e.prototype.remove=function(t){var i;return E(this,void 0,void 0,function(){return _(this,function(r){try{(i=te())===null||i===void 0||i.localStorage.removeItem(t)}catch{}return[2]})})},e.prototype.reset=function(){var t;return E(this,void 0,void 0,function(){return _(this,function(i){try{(t=te())===null||t===void 0||t.localStorage.clear()}catch{}return[2]})})},e})();N();var Kr=(function(e){Ne(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.state={done:4},i}return t.prototype.send=function(i,r){return E(this,void 0,void 0,function(){var n=this;return _(this,function(o){return[2,new Promise(function(a,c){typeof XMLHttpRequest>"u"&&c(new Error("XHRTransport is not supported."));var l=new XMLHttpRequest;l.open("POST",i,!0),l.onreadystatechange=function(){if(l.readyState===n.state.done)try{var f=l.responseText,p=JSON.parse(f),g=n.buildResponse(p);a(g)}catch(u){c(u)}},l.setRequestHeader("Content-Type","application/json"),l.setRequestHeader("Accept","*/*"),l.send(JSON.stringify(r))})]})})},t})(yi);N();var jr=(function(e){Ne(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.send=function(i,r){return E(this,void 0,void 0,function(){var n=this;return _(this,function(o){return[2,new Promise(function(a,c){var l=te();if(!(l!=null&&l.navigator.sendBeacon))throw new Error("SendBeaconTransport is not supported");try{var f=JSON.stringify(r),p=l.navigator.sendBeacon(i,JSON.stringify(r));return a(p?n.buildResponse({code:200,events_ingested:r.events.length,payload_size_bytes:f.length,server_upload_time:Date.now()}):n.buildResponse({code:500}))}catch(g){c(g)}})]})})},t})(yi);N();var De=function(){var e=new gi,t={deviceManufacturer:!0,deviceModel:!0,ipAddress:!0,language:!0,osName:!0,osVersion:!0,platform:!0};return{cookieExpiration:365,cookieSameSite:"Lax",cookieSecure:!1,cookieStorage:e,cookieUpgrade:!0,disableCookies:!1,domain:"",sessionTimeout:1800*1e3,trackingOptions:t,transportProvider:new Mr}},Kt=(function(e){Ne(t,e);function t(i,r){var n=this,o,a,c,l,f,p,g,u,h,s=De();return n=e.call(this,w(w({flushIntervalMillis:1e3,flushMaxRetries:5,flushQueueSize:30,transportProvider:s.transportProvider},r),{apiKey:i}))||this,n._optOut=!1,n.cookieStorage=(o=r==null?void 0:r.cookieStorage)!==null&&o!==void 0?o:s.cookieStorage,n.deviceId=r==null?void 0:r.deviceId,n.lastEventId=r==null?void 0:r.lastEventId,n.lastEventTime=r==null?void 0:r.lastEventTime,n.optOut=!!(r!=null&&r.optOut),n.sessionId=r==null?void 0:r.sessionId,n.userId=r==null?void 0:r.userId,n.appVersion=r==null?void 0:r.appVersion,n.attribution=r==null?void 0:r.attribution,n.cookieExpiration=(a=r==null?void 0:r.cookieExpiration)!==null&&a!==void 0?a:s.cookieExpiration,n.cookieSameSite=(c=r==null?void 0:r.cookieSameSite)!==null&&c!==void 0?c:s.cookieSameSite,n.cookieSecure=(l=r==null?void 0:r.cookieSecure)!==null&&l!==void 0?l:s.cookieSecure,n.cookieUpgrade=(f=r==null?void 0:r.cookieUpgrade)!==null&&f!==void 0?f:s.cookieUpgrade,n.defaultTracking=r==null?void 0:r.defaultTracking,n.disableCookies=(p=r==null?void 0:r.disableCookies)!==null&&p!==void 0?p:s.disableCookies,n.defaultTracking=r==null?void 0:r.defaultTracking,n.domain=(g=r==null?void 0:r.domain)!==null&&g!==void 0?g:s.domain,n.partnerId=r==null?void 0:r.partnerId,n.sessionTimeout=(u=r==null?void 0:r.sessionTimeout)!==null&&u!==void 0?u:s.sessionTimeout,n.trackingOptions=(h=r==null?void 0:r.trackingOptions)!==null&&h!==void 0?h:s.trackingOptions,n}return Object.defineProperty(t.prototype,"deviceId",{get:function(){return this._deviceId},set:function(i){this._deviceId!==i&&(this._deviceId=i,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userId",{get:function(){return this._userId},set:function(i){this._userId!==i&&(this._userId=i,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sessionId",{get:function(){return this._sessionId},set:function(i){this._sessionId!==i&&(this._sessionId=i,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(i){this._optOut!==i&&(this._optOut=i,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(i){this._lastEventTime!==i&&(this._lastEventTime=i,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(i){this._lastEventId!==i&&(this._lastEventId=i,this.updateStorage())},enumerable:!1,configurable:!0}),t.prototype.updateStorage=function(){var i,r={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId};(i=this.cookieStorage)===null||i===void 0||i.set(bi(this.apiKey),r)},t})(ar),zr=function(e,t){return E(void 0,void 0,void 0,function(){var i,r,n,o,a,c,l,f,p,g,u,h,s,v,d;return _(this,function(m){switch(m.label){case 0:return i=De(),r=(v=t==null?void 0:t.deviceId)!==null&&v!==void 0?v:tt(),n=t==null?void 0:t.lastEventId,o=t==null?void 0:t.lastEventTime,a=t==null?void 0:t.optOut,c=t==null?void 0:t.sessionId,l=t==null?void 0:t.userId,f=t==null?void 0:t.cookieStorage,p=t==null?void 0:t.domain,g=Kt.bind,u=[void 0,e],h=[w({},t)],s={cookieStorage:f,deviceId:r,domain:p,lastEventId:n,lastEventTime:o,optOut:a,sessionId:c},[4,Qr(t)];case 1:return[2,new(g.apply(Kt,u.concat([w.apply(void 0,h.concat([(s.storageProvider=m.sent(),s.trackingOptions=w(w({},i.trackingOptions),t==null?void 0:t.trackingOptions),s.transportProvider=(d=t==null?void 0:t.transportProvider)!==null&&d!==void 0?d:wi(t==null?void 0:t.transport),s.userId=l,s)]))])))]}})})},_i=function(e,t){return t===void 0&&(t=De()),E(void 0,void 0,void 0,function(){var i,r,n;return _(this,function(o){switch(o.label){case 0:return i=w(w({},t),e),r=e==null?void 0:e.cookieStorage,n=!r,n?[3,2]:[4,r.isEnabled()];case 1:n=!o.sent(),o.label=2;case 2:return n?[2,Yr(i)]:[2,r]}})})},Yr=function(e){return E(void 0,void 0,void 0,function(){var t,i;return _(this,function(r){switch(r.label){case 0:return t=new pt({domain:e.domain,expirationDays:e.cookieExpiration,sameSite:e.cookieSameSite,secure:e.cookieSecure}),i=e.disableCookies,i?[3,2]:[4,t.isEnabled()];case 1:i=!r.sent(),r.label=2;case 2:return i?(t=new Ei,[4,t.isEnabled()]):[3,4];case 3:r.sent()||(t=new gi),r.label=4;case 4:return[2,t]}})})},Qr=function(e){return E(void 0,void 0,void 0,function(){var t,i,r,n,o,a,c,l;return _(this,function(f){switch(f.label){case 0:if(t=e&&Object.prototype.hasOwnProperty.call(e,"storageProvider"),!(!t||e.storageProvider))return[3,9];f.label=1;case 1:f.trys.push([1,7,8,9]),i=ve([e==null?void 0:e.storageProvider,new Ei]),r=i.next(),f.label=2;case 2:return r.done?[3,6]:(n=r.value,o=n,o?[4,n.isEnabled()]:[3,4]);case 3:o=f.sent(),f.label=4;case 4:if(o)return[2,n];f.label=5;case 5:return r=i.next(),[3,2];case 6:return[3,9];case 7:return a=f.sent(),c={error:a},[3,9];case 8:try{r&&!r.done&&(l=i.return)&&l.call(i)}finally{if(c)throw c.error}return[7];case 9:return[2,void 0]}})})},wi=function(e){return e===Ze.XHR?new Kr:e===Ze.SendBeacon?new jr:De().transportProvider},Hr=function(e){return E(void 0,void 0,void 0,function(){var t,i,r,n,o,o,a,c,l,f;return _(this,function(p){switch(p.label){case 0:return[4,new pt().isEnabled()];case 1:if(!p.sent()||!e&&typeof location>"u")return[2,""];for(t=e??location.hostname,i=t.split("."),r=[],n="AMP_TLDTEST",o=i.length-2;o>=0;--o)r.push(i.slice(o).join("."));o=0,p.label=2;case 2:return o<r.length?(a=r[o],c={domain:"."+a},l=new pt(c),[4,l.set(n,1)]):[3,7];case 3:return p.sent(),[4,l.get(n)];case 4:return f=p.sent(),f?[4,l.remove(n)]:[3,6];case 5:return p.sent(),[2,"."+a];case 6:return o++,[3,2];case 7:return[2,""]}})})};N();var Xr=function(e,t){return E(void 0,void 0,void 0,function(){var i,r,n,o,a,c,l,f,p,g,u;return _(this,function(h){switch(h.label){case 0:return[4,_i(t)];case 1:return i=h.sent(),r=Pr(e),[4,i.getRaw(r)];case 2:return n=h.sent(),n?((u=t.cookieUpgrade)!==null&&u!==void 0?u:De().cookieUpgrade)?[4,i.remove(r)]:[3,4]:[2,{optOut:!1}];case 3:h.sent(),h.label=4;case 4:return o=B(n.split("."),6),a=o[0],c=o[1],l=o[2],f=o[3],p=o[4],g=o[5],[2,{deviceId:a,userId:Zr(c),sessionId:at(f),lastEventId:at(g),lastEventTime:at(p),optOut:!!l}]}})})},at=function(e){var t=parseInt(e,32);if(!isNaN(t))return t},Zr=function(e){if(!(!atob||!escape||!e))try{return decodeURIComponent(escape(atob(e)))}catch{return}},Y;(function(e){e.SET="$set",e.SET_ONCE="$setOnce",e.ADD="$add",e.APPEND="$append",e.PREPEND="$prepend",e.REMOVE="$remove",e.PREINSERT="$preInsert",e.POSTINSERT="$postInsert",e.UNSET="$unset",e.CLEAR_ALL="$clearAll"})(Y||(Y={}));var jt;(function(e){e.REVENUE_PRODUCT_ID="$productId",e.REVENUE_QUANTITY="$quantity",e.REVENUE_PRICE="$price",e.REVENUE_TYPE="$revenueType",e.REVENUE="$revenue"})(jt||(jt={}));var gt;(function(e){e.IDENTIFY="$identify",e.GROUP_IDENTIFY="$groupidentify",e.REVENUE="revenue_amount"})(gt||(gt={}));var yt;(function(e){e.BEFORE="before",e.ENRICHMENT="enrichment",e.DESTINATION="destination"})(yt||(yt={}));var zt="-",Ii="AMP",zn="".concat(Ii,"_unsent");N();var Jr=1e3,Yt=function(e){if(Object.keys(e).length>Jr)return!1;for(var t in e){var i=e[t];if(!Ti(t,i))return!1}return!0},Ti=function(e,t){var i,r;if(typeof e!="string")return!1;if(Array.isArray(t)){var n=!0;try{for(var o=ve(t),a=o.next();!a.done;a=o.next()){var c=a.value;if(Array.isArray(c))return!1;if(typeof c=="object")n=n&&Yt(c);else if(!["number","string"].includes(typeof c))return!1;if(!n)return!1}}catch(l){i={error:l}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}}else{if(t==null)return!1;if(typeof t=="object")return Yt(t);if(!["number","string","boolean"].includes(typeof t))return!1}return!0};N();var $r=(function(){function e(){this._propertySet=new Set,this._properties={}}return e.prototype.getUserProperties=function(){return w({},this._properties)},e.prototype.set=function(t,i){return this._safeSet(Y.SET,t,i),this},e.prototype.setOnce=function(t,i){return this._safeSet(Y.SET_ONCE,t,i),this},e.prototype.append=function(t,i){return this._safeSet(Y.APPEND,t,i),this},e.prototype.prepend=function(t,i){return this._safeSet(Y.PREPEND,t,i),this},e.prototype.postInsert=function(t,i){return this._safeSet(Y.POSTINSERT,t,i),this},e.prototype.preInsert=function(t,i){return this._safeSet(Y.PREINSERT,t,i),this},e.prototype.remove=function(t,i){return this._safeSet(Y.REMOVE,t,i),this},e.prototype.add=function(t,i){return this._safeSet(Y.ADD,t,i),this},e.prototype.unset=function(t){return this._safeSet(Y.UNSET,t,zt),this},e.prototype.clearAll=function(){return this._properties={},this._properties[Y.CLEAR_ALL]=zt,this},e.prototype._safeSet=function(t,i,r){if(this._validate(t,i,r)){var n=this._properties[t];return n===void 0&&(n={},this._properties[t]=n),n[i]=r,this._propertySet.add(i),!0}return!1},e.prototype._validate=function(t,i,r){return this._properties[Y.CLEAR_ALL]!==void 0||this._propertySet.has(i)?!1:t===Y.ADD?typeof r=="number":t!==Y.UNSET&&t!==Y.REMOVE?Ti(i,r):!0},e})();N();var en=function(e,t){var i=w(w({},t),{event_type:gt.IDENTIFY,user_properties:e.getUserProperties()});return i};N();var tn=function(e,t,i){return t===void 0&&(t=""),i===void 0&&(i=10),[Ii,t,e.substring(0,i)].filter(Boolean).join("_")},Qt=function(e){var t=e.split(".");return t.length<=2?e:t.slice(t.length-2,t.length).join(".")},rn=function(e,t,i){var r,n=e.referrer,o=e.referring_domain,a=dt(e,["referrer","referring_domain"]),c=t||{},l=c.referrer,f=c.referring_domain,p=dt(c,["referrer","referring_domain"]);if(e.referring_domain&&(!((r=i.excludeReferrers)===null||r===void 0)&&r.includes(e.referring_domain)))return!1;var g=JSON.stringify(a)!==JSON.stringify(p),u=Qt(o||"")!==Qt(f||"");return!t||g||u},nn=function(e,t){var i=w(w({},wt),e),r=Object.entries(i).reduce(function(n,o){var a,c=B(o,2),l=c[0],f=c[1];return n.setOnce("initial_".concat(l),(a=f??t.initialEmptyValue)!==null&&a!==void 0?a:"EMPTY"),f?n.set(l,f):n.unset(l)},new $r);return en(r)};N();var on=function(){for(var e=this,t,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var n,o={},a=B(i,2),c=a[0],l=a[1];c&&"init"in c?(n=c,l&&(o=l)):c&&(o=c);var f=(t=o.excludeReferrers)!==null&&t!==void 0?t:[];typeof location<"u"&&f.unshift(location.hostname),o=w(w({disabled:!1,initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1},o),{excludeReferrers:f});var p={name:"web-attribution",type:yt.BEFORE,setup:function(g,u){var h;return E(this,void 0,void 0,function(){var s,v,d,m,I,y,b,S;return _(this,function(T){switch(T.label){case 0:return n=n??u,n?o.disabled?(g.loggerProvider.log("@amplitude/plugin-web-attribution-browser is disabled. Attribution is not tracked."),[2]):(g.loggerProvider.log("Installing @amplitude/plugin-web-attribution-browser."),!u&&!(!((h=g.attribution)===null||h===void 0)&&h.disabled)&&(g.loggerProvider.warn("@amplitude/plugin-web-attribution-browser overrides web attribution behavior defined in @amplitude/analytics-browser. Resolve by disabling web attribution tracking in @amplitude/analytics-browser."),g.attribution={disabled:!0}),v=g.cookieStorage,d=tn(g.apiKey,"MKTG"),[4,Promise.all([new mi().parse(),v.get(d)])]):(s=c?"Options":"undefined",g.loggerProvider.error("Argument of type '".concat(s,"' is not assignable to parameter of type 'BrowserClient'.")),[2]);case 1:return m=B.apply(void 0,[T.sent(),2]),I=m[0],y=m[1],b=this.__pluginEnabledOverride,(b??rn(I,y,o))&&(o.resetSessionOnNewCampaign&&(n.setSessionId(Date.now()),g.loggerProvider.log("Created a new session for new campaign.")),g.loggerProvider.log("Tracking attribution."),S=nn(I,o),n.track(S),v.set(d,I)),[2]}})})},execute:function(g){return E(e,void 0,void 0,function(){return _(this,function(u){return[2,g]})})}};return p.__pluginEnabledOverride=void 0,p},Je;(function(e){e.SET="$set",e.SET_ONCE="$setOnce",e.ADD="$add",e.APPEND="$append",e.PREPEND="$prepend",e.REMOVE="$remove",e.PREINSERT="$preInsert",e.POSTINSERT="$postInsert",e.UNSET="$unset",e.CLEAR_ALL="$clearAll"})(Je||(Je={}));var Ht;(function(e){e.REVENUE_PRODUCT_ID="$productId",e.REVENUE_QUANTITY="$quantity",e.REVENUE_PRICE="$price",e.REVENUE_TYPE="$revenueType",e.REVENUE="$revenue"})(Ht||(Ht={}));var Xt;(function(e){e.IDENTIFY="$identify",e.GROUP_IDENTIFY="$groupidentify",e.REVENUE="revenue_amount"})(Xt||(Xt={}));var mt;(function(e){e.BEFORE="before",e.ENRICHMENT="enrichment",e.DESTINATION="destination"})(mt||(mt={}));var an=function(e){var t={};for(var i in e){var r=e[i];r&&(t[i]=r)}return t};N();var sn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i,r={},n=te(),o=void 0,a,c=B(e,2),l=c[0],f=c[1];l&&"init"in l?(i=l,f&&(r=f)):l&&(r=l);var p=function(){return E(void 0,void 0,void 0,function(){var d,m,I;return _(this,function(y){switch(y.label){case 0:return m={event_type:(I=r.eventType)!==null&&I!==void 0?I:"Page View"},d=[{}],[4,un()];case 1:return[2,(m.event_properties=w.apply(void 0,[w.apply(void 0,d.concat([y.sent()])),{page_domain:typeof location<"u"&&location.hostname||"",page_location:typeof location<"u"&&location.href||"",page_path:typeof location<"u"&&location.pathname||"",page_title:typeof document<"u"&&document.title||"",page_url:typeof location<"u"&&location.href.split("?")[0]||""}]),m)]}})})},g=function(){return typeof r.trackOn>"u"||typeof r.trackOn=="function"&&r.trackOn()},u=typeof location<"u"?location.href:null,h=function(){return E(void 0,void 0,void 0,function(){var d,m,I,y,b;return _(this,function(S){switch(S.label){case 0:return d=location.href,m=ln(r.trackHistoryChanges,d,u||"")&&g(),u=d,m?(o==null||o.log("Tracking page view event"),i!=null?[3,1]:(I=void 0,[3,3])):[3,4];case 1:return b=(y=i).track,[4,p()];case 2:I=b.apply(y,[S.sent()]),S.label=3;case 3:S.label=4;case 4:return[2]}})})},s=function(){h()},v={name:"page-view-tracking",type:mt.ENRICHMENT,setup:function(d,m){return E(void 0,void 0,void 0,function(){var I,y,b,S,T;return _(this,function(O){switch(O.label){case 0:return i=i??m,i?(o=d.loggerProvider,o.log("Installing @amplitude/plugin-page-view-tracking-browser"),r.trackOn=!((S=d.attribution)===null||S===void 0)&&S.trackPageViews?"attribution":r.trackOn,!m&&(!((T=d.attribution)===null||T===void 0)&&T.trackPageViews)&&(o.warn("@amplitude/plugin-page-view-tracking-browser overrides page view tracking behavior defined in @amplitude/analytics-browser. Resolve by disabling page view tracking in @amplitude/analytics-browser."),d.attribution.trackPageViews=!1),r.trackHistoryChanges&&n&&(n.addEventListener("popstate",s),a=n.history.pushState,n.history.pushState=new Proxy(n.history.pushState,{apply:function(k,D,K){var re=B(K,3),C=re[0],J=re[1],se=re[2];k.apply(D,[C,J,se]),h()}})),g()?(o.log("Tracking page view event"),b=(y=i).track,[4,p()]):[3,2]):(I=l?"Options":"undefined",d.loggerProvider.error("Argument of type '".concat(I,"' is not assignable to parameter of type 'BrowserClient'.")),[2]);case 1:b.apply(y,[O.sent()]),O.label=2;case 2:return[2]}})})},execute:function(d){return E(void 0,void 0,void 0,function(){var m;return _(this,function(I){switch(I.label){case 0:return r.trackOn==="attribution"&&cn(d)?(o==null||o.log("Enriching campaign event to page view event with campaign parameters"),[4,p()]):[3,2];case 1:m=I.sent(),d.event_type=m.event_type,d.event_properties=w(w({},d.event_properties),m.event_properties),I.label=2;case 2:return[2,d]}})})},teardown:function(){return E(void 0,void 0,void 0,function(){return _(this,function(d){return n&&(n.removeEventListener("popstate",s),a&&(n.history.pushState=a)),[2]})})}};return v.__trackHistoryPageView=h,v},un=function(){return E(void 0,void 0,void 0,function(){var e;return _(this,function(t){switch(t.label){case 0:return e=an,[4,new mi().parse()];case 1:return[2,e.apply(void 0,[t.sent()])]}})})},cn=function(e){if(e.event_type==="$identify"&&e.user_properties){var t=e.user_properties,i=t[Je.SET]||{},r=t[Je.UNSET]||{},n=oe(oe([],B(Object.keys(i)),!1),B(Object.keys(r)),!1);return Object.keys(wt).every(function(o){return n.includes(o)})}return!1},ln=function(e,t,i){switch(e){case"pathOnly":return t.split("?")[0]!==i.split("?")[0];default:return t!==i}},j="[Amplitude]",Si="".concat(j," Page Viewed"),Zt="".concat(j," Form Started"),dn="".concat(j," Form Submitted"),vn="".concat(j," File Downloaded"),Jt="session_start",$t="session_end",fn="".concat(j," File Extension"),hn="".concat(j," File Name"),pn="".concat(j," Link ID"),gn="".concat(j," Link Text"),yn="".concat(j," Link URL"),st="".concat(j," Form ID"),ut="".concat(j," Form Name"),ct="".concat(j," Form Destination");N();var mn=function(){var e,t=[],i=function(f,p,g){f.addEventListener(p,g),t.push({element:f,type:p,handler:g})},r=function(){t.forEach(function(f){var p=f.element,g=f.type,u=f.handler;p==null||p.removeEventListener(g,u)}),t=[]},n="@amplitude/plugin-form-interaction-tracking-browser",o=ie.ENRICHMENT,a=function(f,p){return E(void 0,void 0,void 0,function(){var g,u;return _(this,function(h){return p?typeof document>"u"?[2]:(g=function(s){var v=!1;i(s,"change",function(){var d;v||p.track(Zt,(d={},d[st]=s.id,d[ut]=s.name,d[ct]=s.action,d)),v=!0}),i(s,"submit",function(){var d,m;v||p.track(Zt,(d={},d[st]=s.id,d[ut]=s.name,d[ct]=s.action,d)),p.track(dn,(m={},m[st]=s.id,m[ut]=s.name,m[ct]=s.action,m)),v=!1})},u=Array.from(document.getElementsByTagName("form")),u.forEach(g),typeof MutationObserver<"u"&&(e=new MutationObserver(function(s){s.forEach(function(v){v.addedNodes.forEach(function(d){d.nodeName==="FORM"&&g(d),"querySelectorAll"in d&&typeof d.querySelectorAll=="function"&&Array.from(d.querySelectorAll("form")).map(g)})})}),e.observe(document.body,{subtree:!0,childList:!0})),[2]):(f.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked."),[2])})})},c=function(f){return E(void 0,void 0,void 0,function(){return _(this,function(p){return[2,f]})})},l=function(){return E(void 0,void 0,void 0,function(){return _(this,function(f){return e==null||e.disconnect(),r(),[2]})})};return{name:n,type:o,setup:a,execute:c,teardown:l}};N();var bn=function(){var e,t=[],i=function(f,p,g){f.addEventListener(p,g),t.push({element:f,type:p,handler:g})},r=function(){t.forEach(function(f){var p=f.element,g=f.type,u=f.handler;p==null||p.removeEventListener(g,u)}),t=[]},n="@amplitude/plugin-file-download-tracking-browser",o=ie.ENRICHMENT,a=function(f,p){return E(void 0,void 0,void 0,function(){var g,u,h;return _(this,function(s){return p?typeof document>"u"?[2]:(g=function(v){var d;try{d=new URL(v.href,window.location.href)}catch{return}var m=u.exec(d.href),I=m==null?void 0:m[1];I&&i(v,"click",function(){var y;I&&p.track(vn,(y={},y[fn]=I,y[hn]=d.pathname,y[pn]=v.id,y[gn]=v.text,y[yn]=v.href,y))})},u=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)$/,h=Array.from(document.getElementsByTagName("a")),h.forEach(g),typeof MutationObserver<"u"&&(e=new MutationObserver(function(v){v.forEach(function(d){d.addedNodes.forEach(function(m){m.nodeName==="A"&&g(m),"querySelectorAll"in m&&typeof m.querySelectorAll=="function"&&Array.from(m.querySelectorAll("a")).map(g)})})}),e.observe(document.body,{subtree:!0,childList:!0})),[2]):(f.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked."),[2])})})},c=function(f){return E(void 0,void 0,void 0,function(){return _(this,function(p){return[2,f]})})},l=function(){return E(void 0,void 0,void 0,function(){return _(this,function(f){return e==null||e.disconnect(),r(),[2]})})};return{name:n,type:o,setup:a,execute:c,teardown:l}};N();var En={page_domain:"".concat(j," Page Domain"),page_location:"".concat(j," Page Location"),page_path:"".concat(j," Page Path"),page_title:"".concat(j," Page Title"),page_url:"".concat(j," Page URL")},_n=function(){var e="@amplitude/plugin-default-page-view-event-enrichment-browser",t=ie.ENRICHMENT,i=function(){return E(void 0,void 0,void 0,function(){return _(this,function(n){return[2,void 0]})})},r=function(n){return E(void 0,void 0,void 0,function(){return _(this,function(o){return n.event_type===Si&&n.event_properties&&(n.event_properties=Object.entries(n.event_properties).reduce(function(a,c){var l=B(c,2),f=l[0],p=l[1],g=En[f];return g?a[g]=p:a[f]=p,a},{})),[2,n]})})};return{name:e,type:t,setup:i,execute:r}};N();var wn=(function(e){Ne(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(i,r,n){return i===void 0&&(i=""),$(this._init(w(w({},n),{userId:r,apiKey:i})))},t.prototype._init=function(i){var r,n,o,a,c,l,f,p,g,u,h,s,v,d,m,I,y,b,S,T;return E(this,void 0,void 0,function(){var O,k,D,K,re,C,J,se,xe,fe,he,we,ye,me,be,ce,pe,ue,Le=this;return _(this,function(x){switch(x.label){case 0:return this.initializing?[2]:(this.initializing=!0,O=i,i.disableCookies?(k="",[3,5]):[3,1]);case 1:return(r=i.domain)!==null&&r!==void 0?(D=r,[3,4]):[3,2];case 2:return[4,Hr()];case 3:D=x.sent(),x.label=4;case 4:k=D,x.label=5;case 5:return O.domain=k,[4,Xr(i.apiKey,i)];case 6:return K=x.sent(),[4,_i(i)];case 7:return re=x.sent(),[4,re.get(bi(i.apiKey))];case 8:return C=x.sent(),J=ft(),se=(a=(o=(n=i.deviceId)!==null&&n!==void 0?n:J.deviceId)!==null&&o!==void 0?o:C==null?void 0:C.deviceId)!==null&&a!==void 0?a:K.deviceId,xe=(c=C==null?void 0:C.sessionId)!==null&&c!==void 0?c:K.sessionId,fe=(f=(l=i.optOut)!==null&&l!==void 0?l:C==null?void 0:C.optOut)!==null&&f!==void 0?f:K.optOut,he=(p=C==null?void 0:C.lastEventId)!==null&&p!==void 0?p:K.lastEventId,we=(g=C==null?void 0:C.lastEventTime)!==null&&g!==void 0?g:K.lastEventTime,ye=(h=(u=i.userId)!==null&&u!==void 0?u:C==null?void 0:C.userId)!==null&&h!==void 0?h:K.userId,this.previousSessionDeviceId=(s=C==null?void 0:C.deviceId)!==null&&s!==void 0?s:K.deviceId,this.previousSessionUserId=(v=C==null?void 0:C.userId)!==null&&v!==void 0?v:K.userId,[4,zr(i.apiKey,w(w({},i),{deviceId:se,sessionId:xe,optOut:fe,lastEventId:he,lastEventTime:we,userId:ye,cookieStorage:re}))];case 9:return me=x.sent(),[4,e.prototype._init.call(this,me)];case 10:return x.sent(),be=!1,(!this.config.lastEventTime||!this.config.sessionId||this.config.lastEventTime&&Date.now()-this.config.lastEventTime>this.config.sessionTimeout)&&(this.setSessionId((m=(d=i.sessionId)!==null&&d!==void 0?d:this.config.sessionId)!==null&&m!==void 0?m:Date.now()),be=!0),ce=Ue(i.instanceName),ce.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),[4,this.add(new cr).promise];case 11:return x.sent(),[4,this.add(new Wr).promise];case 12:return x.sent(),[4,this.add(new Lr).promise];case 13:return x.sent(),Or(this.config.defaultTracking)?[4,this.add(bn()).promise]:[3,15];case 14:x.sent(),x.label=15;case 15:return Cr(this.config.defaultTracking)?[4,this.add(mn()).promise]:[3,17];case 16:x.sent(),x.label=17;case 17:return!((I=this.config.attribution)===null||I===void 0)&&I.disabled?[3,19]:(pe=on({excludeReferrers:(y=this.config.attribution)===null||y===void 0?void 0:y.excludeReferrers,initialEmptyValue:(b=this.config.attribution)===null||b===void 0?void 0:b.initialEmptyValue,resetSessionOnNewCampaign:(S=this.config.attribution)===null||S===void 0?void 0:S.resetSessionOnNewCampaign}),pe.__pluginEnabledOverride=be||!((T=this.config.attribution)===null||T===void 0)&&T.trackNewCampaigns?void 0:!1,[4,this.add(pe).promise]);case 18:x.sent(),x.label=19;case 19:return ue=Dr(this.config),ue.eventType=ue.eventType||Si,[4,this.add(sn(ue)).promise];case 20:return x.sent(),[4,this.add(_n()).promise];case 21:return x.sent(),this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 22:return x.sent(),ce.eventBridge.setEventReceiver(function(Ie){Le.track(Ie.eventType,Ie.eventProperties)}),[2]}})})},t.prototype.getUserId=function(){var i;return(i=this.config)===null||i===void 0?void 0:i.userId},t.prototype.setUserId=function(i){if(!this.config){this.q.push(this.setUserId.bind(this,i));return}(i!==this.config.userId||i===void 0)&&(this.config.userId=i,Er(i,this.config.instanceName))},t.prototype.getDeviceId=function(){var i;return(i=this.config)===null||i===void 0?void 0:i.deviceId},t.prototype.setDeviceId=function(i){if(!this.config){this.q.push(this.setDeviceId.bind(this,i));return}this.config.deviceId=i,_r(i,this.config.instanceName)},t.prototype.reset=function(){this.setDeviceId(tt()),this.setUserId(void 0)},t.prototype.getSessionId=function(){var i;return(i=this.config)===null||i===void 0?void 0:i.sessionId},t.prototype.setSessionId=function(i){var r;if(!this.config){this.q.push(this.setSessionId.bind(this,i));return}if(i!==this.config.sessionId){var n=this.getSessionId(),o=this.config.lastEventTime,a=(r=this.config.lastEventId)!==null&&r!==void 0?r:-1;this.config.sessionId=i,this.config.lastEventTime=void 0,Nr(this.config.defaultTracking)&&(n&&o&&this.track($t,void 0,{device_id:this.previousSessionDeviceId,event_id:++a,session_id:n,time:o+1,user_id:this.previousSessionUserId}),this.config.lastEventTime=this.config.sessionId,this.track(Jt,void 0,{event_id:++a,session_id:this.config.sessionId,time:this.config.lastEventTime})),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId}},t.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},t.prototype.setTransport=function(i){if(!this.config){this.q.push(this.setTransport.bind(this,i));return}this.config.transportProvider=wi(i)},t.prototype.identify=function(i,r){if(ot(i)){var n=i._q;i._q=[],i=nt(new de,n)}return r!=null&&r.user_id&&this.setUserId(r.user_id),r!=null&&r.device_id&&this.setDeviceId(r.device_id),e.prototype.identify.call(this,i,r)},t.prototype.groupIdentify=function(i,r,n,o){if(ot(n)){var a=n._q;n._q=[],n=nt(new de,a)}return e.prototype.groupIdentify.call(this,i,r,n,o)},t.prototype.revenue=function(i,r){if(ot(i)){var n=i._q;i._q=[],i=nt(new rr,n)}return e.prototype.revenue.call(this,i,r)},t.prototype.process=function(i){return E(this,void 0,void 0,function(){var r,n,o;return _(this,function(a){return r=Date.now(),n=this.config.lastEventTime||Date.now(),o=r-n,i.event_type!==Jt&&i.event_type!==$t&&(!i.session_id||i.session_id===this.getSessionId())&&o>this.config.sessionTimeout&&this.setSessionId(r),[2,e.prototype.process.call(this,i)]})})},t})(ir),In=function(){var e=new wn;return{init:q(e.init.bind(e),"init",V(e),F(e,["config"])),add:q(e.add.bind(e),"add",V(e),F(e,["config.apiKey","timeline.plugins"])),remove:q(e.remove.bind(e),"remove",V(e),F(e,["config.apiKey","timeline.plugins"])),track:q(e.track.bind(e),"track",V(e),F(e,["config.apiKey","timeline.queue.length"])),logEvent:q(e.logEvent.bind(e),"logEvent",V(e),F(e,["config.apiKey","timeline.queue.length"])),identify:q(e.identify.bind(e),"identify",V(e),F(e,["config.apiKey","timeline.queue.length"])),groupIdentify:q(e.groupIdentify.bind(e),"groupIdentify",V(e),F(e,["config.apiKey","timeline.queue.length"])),setGroup:q(e.setGroup.bind(e),"setGroup",V(e),F(e,["config.apiKey","timeline.queue.length"])),revenue:q(e.revenue.bind(e),"revenue",V(e),F(e,["config.apiKey","timeline.queue.length"])),flush:q(e.flush.bind(e),"flush",V(e),F(e,["config.apiKey","timeline.queue.length"])),getUserId:q(e.getUserId.bind(e),"getUserId",V(e),F(e,["config","config.userId"])),setUserId:q(e.setUserId.bind(e),"setUserId",V(e),F(e,["config","config.userId"])),getDeviceId:q(e.getDeviceId.bind(e),"getDeviceId",V(e),F(e,["config","config.deviceId"])),setDeviceId:q(e.setDeviceId.bind(e),"setDeviceId",V(e),F(e,["config","config.deviceId"])),reset:q(e.reset.bind(e),"reset",V(e),F(e,["config","config.userId","config.deviceId"])),getSessionId:q(e.getSessionId.bind(e),"getSessionId",V(e),F(e,["config"])),setSessionId:q(e.setSessionId.bind(e),"setSessionId",V(e),F(e,["config"])),extendSession:q(e.extendSession.bind(e),"extendSession",V(e),F(e,["config"])),setOptOut:q(e.setOptOut.bind(e),"setOptOut",V(e),F(e,["config"])),setTransport:q(e.setTransport.bind(e),"setTransport",V(e),F(e,["config"]))}},G=In(),Yn=G.add,Qn=G.extendSession,Tn=G.flush,Hn=G.getDeviceId,Xn=G.getSessionId,Sn=G.getUserId,Zn=G.groupIdentify,Ye=G.identify,Rn=G.init,Jn=G.logEvent,$n=G.remove,eo=G.reset,to=G.revenue,We=G.setDeviceId,io=G.setGroup,ro=G.setOptOut,no=G.setSessionId,oo=G.setTransport,ao=G.setUserId,Ri=G.track,ei;(function(e){e.DOCS="docs",e.INFO="info",e.INTERFACE="interface",e.MOBILE="mobile-analytics-uniswap",e.ORG="org"})(ei||(ei={}));let Z;function Ai(e,t){const i=window.location.origin;Z!=null&&Z.debug&&console.debug({eventName:e,eventProperties:{...t,origin:i}}),Ri(e,{...t,origin:i})}var An=class{log(e,...t){console.debug(`[amplitude(Identify)]: ${e}(${t})`)}call(e){if(!(Z!=null&&Z.isProductionEnv)){const t=(i,r)=>this.log.bind(this,r);e(new Proxy(new de,{get:t}));return}Ye(e(new de))}set(e,t){this.call(i=>i.set(e,t))}setOnce(e,t){this.call(i=>i.setOnce(e,t))}add(e,t){this.call(i=>i.add(e,t))}postInsert(e,t){this.call(i=>i.postInsert(e,t))}remove(e,t){this.call(i=>i.remove(e,t))}};const so=new An;var bt=Et(Li()),ae=Et(Di());const kn="Page Viewed",Tt=(0,ae.createContext)({});function Pn(e){const t=(0,ae.useContext)(Tt);return(0,ae.useMemo)(()=>({...t,...e}),[t,e])}const ki=(0,ae.memo)(({shouldLogImpression:e,name:t,children:i,page:r,section:n,modal:o,element:a,properties:c})=>{const l=Pn(),f=(0,ae.useMemo)(()=>({...l,...Object.fromEntries(Object.entries({page:r,section:n,modal:o,element:a}).filter(([p,g])=>g!==void 0))}),[a,l,r,o,n]);return(0,ae.useEffect)(()=>{e&&Ai(t??(Z==null?void 0:Z.defaultEventName)??kn,{...f,...c,git_commit_hash:Z==null?void 0:Z.commitHash})},[e]),(0,bt.jsx)(Tt.Provider,{value:f,children:i})});ki.displayName="Trace";const On=(0,ae.memo)(e=>{const{shouldLogImpression:t,name:i,properties:r,events:n,children:o,...a}=e;return(0,bt.jsx)(ki,{...a,children:(0,bt.jsx)(Tt.Consumer,{children:c=>ae.Children.map(o,l=>(0,ae.isValidElement)(l)?(0,ae.cloneElement)(l,Cn(l,c,n,i,r,t)):l)})})});On.displayName="TraceEvent";function Cn(e,t,i,r,n,o=!0){const a={};for(const c of i)a[c]=l=>{var f;const p=Array.isArray(l)?l:[l];(f=e.props[c])===null||f===void 0||f.apply(e,p),o&&Ai(r,{...t,...n,action:c})};return a}const ti="anonymous_uniswap_user";var $e;(function(e){e.ANALYTICS_SWITCH_TOGGLED="Analytics Switch Toggled",e.APP_LOADED="Application Loaded",e.ELEMENT_CLICKED="Element Clicked",e.FOOTER_CLICKED="Footer Clicked",e.HEARTBEAT="Heartbeat",e.MENU_CLICKED="Menu Clicked",e.NAVBAR_CLICKED="Navbar Clicked",e.PAGE_CLICKED="Page Clicked",e.PAGE_VIEWED="Page Viewed",e.SEARCH_BAR_CLICKED="Search Bar Clicked",e.SENTIMENT_SUBMITTED="Sentiment Submitted",e.TERMS_OF_SERVICE_ACCEPTED="Terms of Service Accepted",e.WEB_VITALS="Web Vitals"})($e||($e={}));var ii;(function(e){e.onClick="onClick",e.onFocus="onFocus",e.onKeyPress="onKeyPress",e.onSelect="onSelect"})(ii||(ii={}));var X;(function(e){e.BRAVE="Brave",e.CHROME="Google Chrome or Chromium",e.EDGE="Microsoft Edge (Legacy)",e.EDGE_CHROMIUM="Microsoft Edge (Chromium)",e.FIREFOX="Mozilla Firefox",e.INTERNET_EXPLORER="Microsoft Internet Explorer",e.OPERA="Opera",e.SAFARI="Apple Safari",e.SAMSUNG="Samsung Internet",e.UNKNOWN="unknown"})(X||(X={}));function uo(){const e=navigator.userAgent;return e.indexOf("Firefox")>-1?X.FIREFOX:e.indexOf("SamsungBrowser")>-1?X.SAMSUNG:e.indexOf("Opera")>-1||e.indexOf("OPR")>-1?X.OPERA:e.indexOf("Trident")>-1?X.INTERNET_EXPLORER:e.indexOf("Brave")>-1?X.BRAVE:e.indexOf("Edge")>-1?X.EDGE:e.indexOf("Edg")>-1?X.EDGE_CHROMIUM:e.indexOf("Chrome")>-1?X.CHROME:e.indexOf("Safari")>-1?X.SAFARI:X.UNKNOWN}var ri;(function(e){e.BOTTOM_MENU_LINKS="Bottom Menu Links",e.DAPP_LINKS="DApp Links",e.DEVELOPER_LINKS="Developer Links",e.GETTING_STARTED_LINKS="Getting Started Links",e.QUICK_LINKS="Quick Links",e.SENTIMENT="Sentiment",e.SMART_CONTRACT_LINKS="Smart Contract Links",e.WELCOME_LINKS="Welcome Links"})(ri||(ri={}));var ni;(function(e){e.V1="V1",e.V2="V2",e.V3="V3"})(ni||(ni={}));var oi;(function(e){e.BUILD_ORACLE="Build Oracle",e.DISCORD="Discord",e.EMBED_SWAP_WIDGET="Embed Swap Widget",e.FORUM="Forum",e.GITHUB="Github",e.GRANTS="Grants",e.IMPLEMENT_SWAP="Implement Swap",e.PROVIDE_LIQUIDITY="Provide Liquidity",e.SDK="SDK",e.SDK_QUICK_START="Sdk Quick Start",e.SMART_CONTRACTS="Smart Contracts",e.SMART_CONTRACT_OVERVIEW="Smart Contract Overview",e.V3_CONTRACT_ADDRESS="V3 Contract Address",e.V3_CORE="V3 Core",e.V3_PERIPHERY="V3 Periphery",e.V3_SDK="V3 SDK",e.V3_WIDGETS="V3 Widgets",e.WHAT_IS_UNISWAP="What is Uniswap",e.WHITEPAPER="Whitepaper",e.WIDGETS="Widgets"})(oi||(oi={}));var ai;(function(e){e.NEGATIVE_SENTIMENT="Negative Sentiment",e.NEUTRAL_SENTIMENT="Neutral Sentiment",e.POSITIVE_SENTIMENT="Positive Sentiment"})(ai||(ai={}));var si;(function(e){e.BOTTOM_SECTION="SENTIMENT_BOTTOM_SECTION",e.TOP_SECTION="SENTIMENT_TOP_SECTION"})(si||(si={}));const Un="00000000000000000000000000000000",Qe="allow_analytics",Nn={country:!1,city:!1,dma:!1,ipAddress:!1,region:!1},Dn=[$e.ANALYTICS_SWITCH_TOGGLED.valueOf(),$e.HEARTBEAT.valueOf(),"Swap Transaction Completed"];function xn(e){return{init(t){Ae.error(t,{tags:{file:e,function:"init"}})},sendEvent(t,i){qe&&Ae.info("analytics","sendEvent",`[Event: ${t}]`,i??{})},setAllowAnalytics(t){qe&&Ae.info("analytics","setAnonymous",`user allows analytics: ${t}`)},flushEvents(){qe&&Ae.info("analytics","flushEvents","flushing analytics events")},setUserProperty(t,i){qe&&Ae.info("analytics","setUserProperty",`[Property: ${t}]: ${i}`)}}}function Ln({eventName:e,eventProperties:t,testnetModeConfig:i,isTestnetMode:r}){if(!r)return{eventName:e,eventProperties:t};if(!xi){if(i!=null&&i.passthroughAllowlistEvents.includes(e))return{eventName:e,eventProperties:t};if(i!=null&&i.allowlistEvents.includes(e))return{eventName:i.aggregateEventName,eventProperties:{...t,eventName:e}}}}const Pe=xn("telemetry/analytics.web");let et=!0,ui=!1,ci,lt,Oe;async function li(e){try{window.localStorage.setItem(Qe,JSON.stringify(e)),document.dispatchEvent(new Event("analyticsToggled"))}catch{await _t().storage.local.set({ALLOW_ANALYTICS_ATOM_KEY:JSON.stringify(e)})}}async function Pi(){try{return window.localStorage.getItem(Qe)!=="false"}catch{return(await _t().storage.local.get(Qe))[Qe]!=="false"}}async function Mn(e){return e&&(et=await Pi()),et}const di=async()=>{et=await Pi()};try{window.document.addEventListener("analyticsToggled",di,!1)}catch{_t().storage.local.onChanged.addListener(di)}const co={async init({transportProvider:e,allowed:t,initHash:i,userIdGetter:r}){lt=i,await li(t);try{Rn(Un,void 0,{transportProvider:e,trackingOptions:Nn}),Oe=r?await r():Sn(),t&&Oe&&We(Oe),t||We(ti)}catch(n){Pe.init(n)}},async setAllowAnalytics(e){await li(e),e?Oe&&We(Oe):(Pe.setAllowAnalytics(e),Ye(new de().clearAll()),We(ti))},setTestnetMode(e,t){ui=e,ci=t},sendEvent(e,t){if(!et&&!Dn.includes(e))return;const i={...t,...lt?{git_commit_hash:lt}:{}},r=Ln({eventName:e,eventProperties:i,testnetModeConfig:ci,isTestnetMode:ui});if(r){const{eventName:n,eventProperties:o}=r;Pe.sendEvent(n,o),Ri(n,o)}},flushEvents(){Pe.flushEvents(),Tn()},async setUserProperty(e,t,i){await Mn()&&(i?Ye(new de().postInsert(e,t)):(Pe.setUserProperty(e,t),Ye(new de().set(e,t))))}};export{Qe as ALLOW_ANALYTICS_ATOM_KEY,ii as BrowserEvent,ei as OriginApplication,$e as SharedEventName,co as analytics,Mn as getAnalyticsAtomDirect,uo as getBrowser,Hn as getDeviceId};
